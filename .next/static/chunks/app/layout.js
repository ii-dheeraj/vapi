/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/layout"],{

/***/ "(app-pages-browser)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"96225adce62f\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9nbG9iYWxzLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLElBQVUsSUFBSSxpQkFBaUIiLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxhcHBcXGdsb2JhbHMuY3NzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiOTYyMjVhZGNlNjJmXCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ClientProvider.tsx":
/*!***************************************!*\
  !*** ./components/ClientProvider.tsx ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ClientProvider)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _daily_co_daily_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @daily-co/daily-react */ \"(app-pages-browser)/./node_modules/@daily-co/daily-react/dist/index.esm.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nfunction ClientProvider(param) {\n    let { children } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_daily_co_daily_react__WEBPACK_IMPORTED_MODULE_1__.DailyProvider, {\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\vapi\\\\components\\\\ClientProvider.tsx\",\n        lineNumber: 6,\n        columnNumber: 10\n    }, this);\n}\n_c = ClientProvider;\nvar _c;\n$RefreshReg$(_c, \"ClientProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvQ2xpZW50UHJvdmlkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDc0Q7QUFHdkMsU0FBU0MsZUFBZSxLQUFxQztRQUFyQyxFQUFFQyxRQUFRLEVBQTJCLEdBQXJDO0lBQ3JDLHFCQUFPLDhEQUFDRixnRUFBYUE7a0JBQUVFOzs7Ozs7QUFDekI7S0FGd0JEIiwic291cmNlcyI6WyJDOlxcdmFwaVxcY29tcG9uZW50c1xcQ2xpZW50UHJvdmlkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsgRGFpbHlQcm92aWRlciB9IGZyb20gJ0BkYWlseS1jby9kYWlseS1yZWFjdCc7XG5pbXBvcnQgeyBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENsaWVudFByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIDxEYWlseVByb3ZpZGVyPntjaGlsZHJlbn08L0RhaWx5UHJvdmlkZXI+O1xufVxuIl0sIm5hbWVzIjpbIkRhaWx5UHJvdmlkZXIiLCJDbGllbnRQcm92aWRlciIsImNoaWxkcmVuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ClientProvider.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@daily-co/daily-js/dist/daily-esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/@daily-co/daily-js/dist/daily-esm.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DAILY_ACCESS_LEVEL_FULL: () => (/* binding */ vi),\n/* harmony export */   DAILY_ACCESS_LEVEL_LOBBY: () => (/* binding */ gi),\n/* harmony export */   DAILY_ACCESS_LEVEL_NONE: () => (/* binding */ mi),\n/* harmony export */   DAILY_ACCESS_UNKNOWN: () => (/* binding */ fi),\n/* harmony export */   DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE: () => (/* binding */ Ii),\n/* harmony export */   DAILY_CAMERA_ERROR_CAM_IN_USE: () => (/* binding */ Ai),\n/* harmony export */   DAILY_CAMERA_ERROR_CONSTRAINTS: () => (/* binding */ Ni),\n/* harmony export */   DAILY_CAMERA_ERROR_MIC_IN_USE: () => (/* binding */ ji),\n/* harmony export */   DAILY_CAMERA_ERROR_NOT_FOUND: () => (/* binding */ Di),\n/* harmony export */   DAILY_CAMERA_ERROR_PERMISSIONS: () => (/* binding */ xi),\n/* harmony export */   DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES: () => (/* binding */ Li),\n/* harmony export */   DAILY_CAMERA_ERROR_UNKNOWN: () => (/* binding */ Ri),\n/* harmony export */   DAILY_EVENT_ACCESS_STATE_UPDATED: () => (/* binding */ Zi),\n/* harmony export */   DAILY_EVENT_ACTIVE_SPEAKER_CHANGE: () => (/* binding */ Eo),\n/* harmony export */   DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE: () => (/* binding */ To),\n/* harmony export */   DAILY_EVENT_APP_MSG: () => (/* binding */ yo),\n/* harmony export */   DAILY_EVENT_CAMERA_ERROR: () => (/* binding */ zi),\n/* harmony export */   DAILY_EVENT_CPU_LOAD_CHANGE: () => (/* binding */ Ao),\n/* harmony export */   DAILY_EVENT_ERROR: () => (/* binding */ Jo),\n/* harmony export */   DAILY_EVENT_EXIT_FULLSCREEN: () => (/* binding */ xo),\n/* harmony export */   DAILY_EVENT_FACE_COUNTS_UPDATED: () => (/* binding */ jo),\n/* harmony export */   DAILY_EVENT_FULLSCREEN: () => (/* binding */ Io),\n/* harmony export */   DAILY_EVENT_IFRAME_LAUNCH_CONFIG: () => (/* binding */ Bi),\n/* harmony export */   DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG: () => (/* binding */ Fi),\n/* harmony export */   DAILY_EVENT_INPUT_SETTINGS_UPDATED: () => (/* binding */ Uo),\n/* harmony export */   DAILY_EVENT_JOINED_MEETING: () => (/* binding */ Hi),\n/* harmony export */   DAILY_EVENT_JOINING_MEETING: () => (/* binding */ Wi),\n/* harmony export */   DAILY_EVENT_LANG_UPDATED: () => (/* binding */ Fo),\n/* harmony export */   DAILY_EVENT_LEFT_MEETING: () => (/* binding */ Gi),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_ERROR: () => (/* binding */ Ro),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_STARTED: () => (/* binding */ Lo),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_STOPPED: () => (/* binding */ No),\n/* harmony export */   DAILY_EVENT_LIVE_STREAMING_UPDATED: () => (/* binding */ Do),\n/* harmony export */   DAILY_EVENT_LOADED: () => (/* binding */ $i),\n/* harmony export */   DAILY_EVENT_LOADING: () => (/* binding */ Vi),\n/* harmony export */   DAILY_EVENT_LOAD_ATTEMPT_FAILED: () => (/* binding */ Ji),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED: () => (/* binding */ Co),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED: () => (/* binding */ ko),\n/* harmony export */   DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED: () => (/* binding */ Mo),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_DATA_ERROR: () => (/* binding */ no),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_STATE_UPDATED: () => (/* binding */ to),\n/* harmony export */   DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED: () => (/* binding */ eo),\n/* harmony export */   DAILY_EVENT_NETWORK_CONNECTION: () => (/* binding */ Po),\n/* harmony export */   DAILY_EVENT_NETWORK_QUALITY_CHANGE: () => (/* binding */ Oo),\n/* harmony export */   DAILY_EVENT_NONFATAL_ERROR: () => (/* binding */ Vo),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED: () => (/* binding */ Xi),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_JOINED: () => (/* binding */ Qi),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_LEFT: () => (/* binding */ Yi),\n/* harmony export */   DAILY_EVENT_PARTICIPANT_UPDATED: () => (/* binding */ Ki),\n/* harmony export */   DAILY_EVENT_RECEIVE_SETTINGS_UPDATED: () => (/* binding */ Bo),\n/* harmony export */   DAILY_EVENT_RECORDING_DATA: () => (/* binding */ mo),\n/* harmony export */   DAILY_EVENT_RECORDING_ERROR: () => (/* binding */ vo),\n/* harmony export */   DAILY_EVENT_RECORDING_STARTED: () => (/* binding */ po),\n/* harmony export */   DAILY_EVENT_RECORDING_STATS: () => (/* binding */ fo),\n/* harmony export */   DAILY_EVENT_RECORDING_STOPPED: () => (/* binding */ ho),\n/* harmony export */   DAILY_EVENT_RECORDING_UPLOAD_COMPLETED: () => (/* binding */ go),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED: () => (/* binding */ _o),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED: () => (/* binding */ So),\n/* harmony export */   DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED: () => (/* binding */ wo),\n/* harmony export */   DAILY_EVENT_STARTED_CAMERA: () => (/* binding */ qi),\n/* harmony export */   DAILY_EVENT_THEME_UPDATED: () => (/* binding */ Ui),\n/* harmony export */   DAILY_EVENT_TRACK_STARTED: () => (/* binding */ so),\n/* harmony export */   DAILY_EVENT_TRACK_STOPPED: () => (/* binding */ ao),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_ERROR: () => (/* binding */ uo),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_MSG: () => (/* binding */ bo),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_STARTED: () => (/* binding */ co),\n/* harmony export */   DAILY_EVENT_TRANSCRIPTION_STOPPED: () => (/* binding */ lo),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_ADDED: () => (/* binding */ ro),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_REMOVED: () => (/* binding */ oo),\n/* harmony export */   DAILY_EVENT_WAITING_PARTICIPANT_UPDATED: () => (/* binding */ io),\n/* harmony export */   DAILY_FATAL_ERROR_CONNECTION: () => (/* binding */ Pi),\n/* harmony export */   DAILY_FATAL_ERROR_EJECTED: () => (/* binding */ _i),\n/* harmony export */   DAILY_FATAL_ERROR_EOL: () => (/* binding */ Ti),\n/* harmony export */   DAILY_FATAL_ERROR_EXP_ROOM: () => (/* binding */ ki),\n/* harmony export */   DAILY_FATAL_ERROR_EXP_TOKEN: () => (/* binding */ Mi),\n/* harmony export */   DAILY_FATAL_ERROR_MEETING_FULL: () => (/* binding */ Ei),\n/* harmony export */   DAILY_FATAL_ERROR_NBF_ROOM: () => (/* binding */ wi),\n/* harmony export */   DAILY_FATAL_ERROR_NBF_TOKEN: () => (/* binding */ Si),\n/* harmony export */   DAILY_FATAL_ERROR_NOT_ALLOWED: () => (/* binding */ Oi),\n/* harmony export */   DAILY_FATAL_ERROR_NO_ROOM: () => (/* binding */ Ci),\n/* harmony export */   DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY: () => (/* binding */ bi),\n/* harmony export */   DAILY_RECEIVE_SETTINGS_BASE_KEY: () => (/* binding */ yi),\n/* harmony export */   DAILY_STATE_ERROR: () => (/* binding */ ai),\n/* harmony export */   DAILY_STATE_JOINED: () => (/* binding */ oi),\n/* harmony export */   DAILY_STATE_JOINING: () => (/* binding */ ii),\n/* harmony export */   DAILY_STATE_LEFT: () => (/* binding */ si),\n/* harmony export */   DAILY_STATE_NEW: () => (/* binding */ ti),\n/* harmony export */   DAILY_TRACK_STATE_BLOCKED: () => (/* binding */ ci),\n/* harmony export */   DAILY_TRACK_STATE_INTERRUPTED: () => (/* binding */ pi),\n/* harmony export */   DAILY_TRACK_STATE_LOADING: () => (/* binding */ di),\n/* harmony export */   DAILY_TRACK_STATE_OFF: () => (/* binding */ li),\n/* harmony export */   DAILY_TRACK_STATE_PLAYABLE: () => (/* binding */ hi),\n/* harmony export */   DAILY_TRACK_STATE_SENDABLE: () => (/* binding */ ui),\n/* harmony export */   \"default\": () => (/* binding */ Ha)\n/* harmony export */ });\nfunction e(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e){return n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n(e)}function r(e){var t=function(e,t){if(\"object\"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||\"default\");if(\"object\"!=n(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==n(t)?t:t+\"\"}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function s(e,t){if(t&&(\"object\"==n(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&c(e,t)}function u(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){d(o,r,i,s,a,\"next\",e)}function a(e){d(o,r,i,s,a,\"throw\",e)}s(void 0)}))}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var g,m={exports:{}};var y=function(){if(g)return m.exports;g=1;var e,t=\"object\"==typeof Reflect?Reflect:null,n=t&&\"function\"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&\"function\"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}m.exports=i,m.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){\"function\"==typeof e.removeListener&&e.removeListener(\"error\",i),n([].slice.call(arguments))}f(e,t,o,{once:!0}),\"error\"!==t&&function(e,t,n){\"function\"==typeof e.on&&f(e,\"error\",t,n)}(e,i,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if(\"function\"!=typeof e)throw new TypeError('The \"listener\" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,c,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit(\"newListener\",t,n.listener?n.listener:n),o=e._events),c=o[t]),void 0===c)c=o[t]=n,++e._eventsCount;else if(\"function\"==typeof c?c=o[t]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),(i=a(e))>0&&c.length>i&&!c.warned){c.warned=!0;var u=new Error(\"Possible EventEmitter memory leak detected. \"+c.length+\" \"+String(t)+\" listeners added. Use emitter.setMaxListeners() to increase limit\");u.name=\"MaxListenersExceededWarning\",u.emitter=e,u.type=t,u.count=c.length,l=u,console&&console.warn&&console.warn(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:\"function\"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if(\"function\"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t,n,r){if(\"function\"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if(\"function\"!=typeof e.addEventListener)throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}return Object.defineProperty(i,\"defaultMaxListeners\",{enumerable:!0,get:function(){return o},set:function(e){if(\"number\"!=typeof e||e<0||r(e))throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received '+e+\".\");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if(\"number\"!=typeof e||e<0||r(e))throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received '+e+\".\");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=\"error\"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error(\"Unhandled error.\"+(s?\" (\"+s.message+\")\":\"\"));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if(\"function\"==typeof c)n(c,this,t);else{var l=c.length,u=h(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit(\"removeListener\",e,n.listener||t));else if(\"function\"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit(\"removeListener\",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)\"removeListener\"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners(\"removeListener\"),this._events=Object.create(null),this._eventsCount=0,this}if(\"function\"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return\"function\"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},m.exports}(),b=v(y),_=Object.prototype.hasOwnProperty;function w(e,t,n){for(n of e.keys())if(S(n,t))return n}function S(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&S(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&\"object\"==typeof i&&!(i=w(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&\"object\"==typeof i&&!(i=w(t,i)))return!1;if(!S(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||\"object\"==typeof e){for(n in r=0,e){if(_.call(e,n)&&++r&&!_.call(t,n))return!1;if(!(n in t)||!S(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}const k={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Electron:\"electron\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"},M={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",electron:\"Electron\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"},C={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"},E={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"},T={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"};class O{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||\"\"}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||\"\"}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case\"NT\":return\"NT\";case\"XP\":case\"NT 5.1\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}}static getMacOSVersionName(e){const t=e.split(\".\").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}}static getAndroidVersionName(e){const t=e.split(\".\").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0}static getVersionPrecision(e){return e.split(\".\").length}static compareVersions(e,t,n=!1){const r=O.getVersionPrecision(e),i=O.getVersionPrecision(t);let o=Math.max(r,i),s=0;const a=O.map([e,t],(e=>{const t=o-O.getVersionPrecision(e),n=e+new Array(t+1).join(\".0\");return O.map(n.split(\".\"),(e=>new Array(20-e.length).join(\"0\")+e)).reverse()}));for(n&&(s=o-Math.min(r,i)),o-=1;o>=s;){if(a[0][o]>a[1][o])return 1;if(a[0][o]===a[1][o]){if(o===s)return 0;o-=1}else if(a[0][o]<a[1][o])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,i;if(Object.assign)return Object.assign(e,...t);for(r=0,i=t.length;r<i;r+=1){const e=t[r];if(\"object\"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return k[e]}static getBrowserTypeByAlias(e){return M[e]||\"\"}}const P=/version\\/(\\d+(\\.?_?\\d+)+)/i,A=[{test:[/googlebot/i],describe(e){const t={name:\"Googlebot\"},n=O.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:\"Opera\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\\/|opios/i],describe(e){const t={name:\"Opera\"},n=O.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:\"Samsung Internet for Android\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:\"NAVER Whale Browser\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:\"MZ Browser\"},n=O.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:\"Focus\"},n=O.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:\"Swing\"},n=O.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:\"Opera Coast\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\\/\\d+(?:.?_?\\d+)+/i],describe(e){const t={name:\"Opera Touch\"},n=O.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:\"Yandex Browser\"},n=O.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:\"UC Browser\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:\"Maxthon\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:\"Epiphany\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:\"Puffin\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:\"Sleipnir\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:\"K-Meleon\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:\"WeChat\"},n=O.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},n=O.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:\"Internet Explorer\"},n=O.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\\sedg\\//i],describe(e){const t={name:\"Microsoft Edge\"},n=O.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:\"Microsoft Edge\"},n=O.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:\"Vivaldi\"},n=O.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:\"SeaMonkey\"},n=O.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:\"Sailfish\"},n=O.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:\"Amazon Silk\"},n=O.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:\"PhantomJS\"},n=O.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:\"SlimerJS\"},n=O.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe(e){const t={name:\"BlackBerry\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:\"WebOS Browser\"},n=O.getFirstMatch(P,e)||O.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:\"Bada\"},n=O.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:\"Tizen\"},n=O.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:\"QupZilla\"},n=O.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:\"Firefox\"},n=O.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:\"Electron\"},n=O.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:\"Miui\"},n=O.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:\"Chromium\"},n=O.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:\"Chrome\"},n=O.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:\"Google Search\"},n=O.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:\"Android Browser\"},n=O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:\"PlayStation 4\"},n=O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:\"Safari\"},n=O.getFirstMatch(P,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:O.getFirstMatch(t,e),version:O.getSecondMatch(t,e)}}}];var j=[{test:[/Roku\\/DVP/],describe(e){const t=O.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:E.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=O.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:E.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=O.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),n=O.getWindowsVersionName(t);return{name:E.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe(e){const t={name:E.iOS},n=O.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=O.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),n=O.getMacOSVersionName(t),r={name:E.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=O.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:E.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=O.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),n=O.getAndroidVersionName(t),r={name:E.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=O.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),n={name:E.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe(e){const t=O.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||O.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||O.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:E.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=O.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:E.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=O.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:E.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:E.Linux})},{test:[/CrOS/],describe:()=>({name:E.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=O.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:E.PlayStation4,version:t}}}],I=[{test:[/googlebot/i],describe:()=>({type:\"bot\",vendor:\"Google\"})},{test:[/huawei/i],describe(e){const t=O.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",n={type:C.mobile,vendor:\"Huawei\"};return t&&(n.model=t),n}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:()=>({type:C.tablet,vendor:\"Nexus\"})},{test:[/ipad/i],describe:()=>({type:C.tablet,vendor:\"Apple\",model:\"iPad\"})},{test:[/Macintosh(.*?) FxiOS(.*?)\\//],describe:()=>({type:C.tablet,vendor:\"Apple\",model:\"iPad\"})},{test:[/kftt build/i],describe:()=>({type:C.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"})},{test:[/silk/i],describe:()=>({type:C.tablet,vendor:\"Amazon\"})},{test:[/tablet(?! pc)/i],describe:()=>({type:C.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=O.getFirstMatch(/(ipod|iphone)/i,e);return{type:C.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:C.mobile,vendor:\"Nexus\"})},{test:[/[^-]mobi/i],describe:()=>({type:C.mobile})},{test:e=>\"blackberry\"===e.getBrowserName(!0),describe:()=>({type:C.mobile,vendor:\"BlackBerry\"})},{test:e=>\"bada\"===e.getBrowserName(!0),describe:()=>({type:C.mobile})},{test:e=>\"windows phone\"===e.getBrowserName(),describe:()=>({type:C.mobile,vendor:\"Microsoft\"})},{test(e){const t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:()=>({type:C.tablet})},{test:e=>\"android\"===e.getOSName(!0),describe:()=>({type:C.mobile})},{test:e=>\"macos\"===e.getOSName(!0),describe:()=>({type:C.desktop,vendor:\"Apple\"})},{test:e=>\"windows\"===e.getOSName(!0),describe:()=>({type:C.desktop})},{test:e=>\"linux\"===e.getOSName(!0),describe:()=>({type:C.desktop})},{test:e=>\"playstation 4\"===e.getOSName(!0),describe:()=>({type:C.tv})},{test:e=>\"roku\"===e.getOSName(!0),describe:()=>({type:C.tv})}],x=[{test:e=>\"microsoft edge\"===e.getBrowserName(!0),describe(e){if(/\\sedg\\//i.test(e))return{name:T.Blink};const t=O.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:T.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:T.Trident},n=O.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:T.Presto},n=O.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:T.Gecko},n=O.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:()=>({name:T.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:T.WebKit},n=O.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}}];class L{constructor(e,t=!1){if(null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=O.find(A,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=O.find(j,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||\"\":t||\"\"}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||\"\":t||\"\"}parsePlatform(){this.parsedResult.platform={};const e=O.find(I,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"}parseEngine(){this.parsedResult.engine={};const e=O.find(x,(e=>{if(\"function\"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error(\"Browser's test function is not valid\")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return O.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let i=0;if(Object.keys(e).forEach((o=>{const s=e[o];\"string\"==typeof s?(r[o]=s,i+=1):\"object\"==typeof s&&(t[o]=s,n+=1)})),n>0){const e=Object.keys(t),n=O.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=O.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(i>0){const e=Object.keys(r),t=O.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const i=O.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const i=this.getBrowserVersion();if(\"string\"==typeof i)return\">\"===e[0]||\"<\"===e[0]?(n=e.substr(1),\"=\"===e[1]?(r=!0,n=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?n=e.substr(1):\"~\"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(O.compareVersions(i,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}\n/*!\n * Bowser - a browser detector\n * https://github.com/lancedikson/bowser\n * MIT License | (c) Dustin Diaz 2012-2015\n * MIT License | (c) Denis Demchenko 2015-2019\n */class D{static getParser(e,t=!1){if(\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new L(e,t)}static parse(e){return new L(e).getResult()}static get BROWSER_MAP(){return M}static get ENGINE_MAP(){return T}static get OS_MAP(){return E}static get PLATFORMS_MAP(){return C}}function N(){return Date.now()+Math.random().toString()}function R(){throw new Error(\"Method must be implemented in subclass\")}function F(e,t){return null!=t&&t.proxyUrl?t.proxyUrl+(\"/\"===t.proxyUrl.slice(-1)?\"\":\"/\")+e.substring(8):e}function B(e){return null!=e&&e.callObjectBundleUrlOverride?e.callObjectBundleUrlOverride:F(\"https://c.daily.co/call-machine/versioned/\".concat(\"0.83.1\",\"/static/call-machine-object-bundle.js\"),e)}function U(e){try{new URL(e)}catch(e){return!1}return!0}const V=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,J=\"8.55.0\",$=globalThis;function q(e,t,n){const r=n||$,i=r.__SENTRY__=r.__SENTRY__||{},o=i[J]=i[J]||{};return o[e]||(o[e]=t())}const z=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,W=[\"debug\",\"info\",\"warn\",\"error\",\"log\",\"assert\",\"trace\"],H={};function G(e){if(!(\"console\"in $))return e();const t=$.console,n={},r=Object.keys(H);r.forEach((e=>{const r=H[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Q=q(\"logger\",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return z?W.forEach((n=>{t[n]=(...t)=>{e&&G((()=>{$.console[n](`Sentry Logger [${n}]:`,...t)}))}})):W.forEach((e=>{t[e]=()=>{}})),t})),K=\"?\",Y=/\\(error: (.*)\\)/,X=/captureMessage|captureException/;function Z(e){return e[e.length-1]||{}}const ee=\"<anonymous>\";function te(e){try{return e&&\"function\"==typeof e&&e.name||ee}catch(e){return ee}}function ne(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const re={},ie={};function oe(e,t){re[e]=re[e]||[],re[e].push(t)}function se(e,t){if(!ie[e]){ie[e]=!0;try{t()}catch(t){z&&Q.error(`Error while instrumenting ${e}`,t)}}}function ae(e,t){const n=e&&re[e];if(n)for(const r of n)try{r(t)}catch(t){z&&Q.error(`Error while triggering instrumentation handler.\\nType: ${e}\\nName: ${te(r)}\\nError:`,t)}}let ce=null;function le(){ce=$.onerror,$.onerror=function(e,t,n,r,i){return ae(\"error\",{column:r,error:i,line:n,msg:e,url:t}),!!ce&&ce.apply(this,arguments)},$.onerror.__SENTRY_INSTRUMENTED__=!0}let ue=null;function de(){ue=$.onunhandledrejection,$.onunhandledrejection=function(e){return ae(\"unhandledrejection\",e),!ue||ue.apply(this,arguments)},$.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function pe(){return he($),$}function he(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||J,t[J]=t[J]||{}}const fe=Object.prototype.toString;function ve(e){switch(fe.call(e)){case\"[object Error]\":case\"[object Exception]\":case\"[object DOMException]\":case\"[object WebAssembly.Exception]\":return!0;default:return Ce(e,Error)}}function ge(e,t){return fe.call(e)===`[object ${t}]`}function me(e){return ge(e,\"ErrorEvent\")}function ye(e){return ge(e,\"DOMError\")}function be(e){return ge(e,\"String\")}function _e(e){return\"object\"==typeof e&&null!==e&&\"__sentry_template_string__\"in e&&\"__sentry_template_values__\"in e}function we(e){return null===e||_e(e)||\"object\"!=typeof e&&\"function\"!=typeof e}function Se(e){return ge(e,\"Object\")}function ke(e){return\"undefined\"!=typeof Event&&Ce(e,Event)}function Me(e){return Boolean(e&&e.then&&\"function\"==typeof e.then)}function Ce(e,t){try{return e instanceof t}catch(e){return!1}}function Ee(e){return!(\"object\"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const Te=$;function Oe(e,t={}){if(!e)return\"<unknown>\";try{let n=e;const r=5,i=[];let o=0,s=0;const a=\" > \",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&o++<r&&(l=Pe(n,u),!(\"html\"===l||o>1&&s+i.length*c+l.length>=d));)i.push(l),s+=l.length,n=n.parentNode;return i.reverse().join(a)}catch(e){return\"<unknown>\"}}function Pe(e,t){const n=e,r=[];if(!n||!n.tagName)return\"\";if(Te.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(i&&i.length)i.forEach((e=>{r.push(`[${e[0]}=\"${e[1]}\"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&be(e)){const t=e.split(/\\s+/);for(const e of t)r.push(`.${e}`)}}const o=[\"aria-label\",\"type\",\"name\",\"title\",\"alt\"];for(const e of o){const t=n.getAttribute(e);t&&r.push(`[${e}=\"${t}\"]`)}return r.join(\"\")}function Ae(e,t=0){return\"string\"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function je(e,t){if(!Array.isArray(e))return\"\";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{Ee(r)?n.push(\"[VueViewModel]\"):n.push(String(r))}catch(e){n.push(\"[value cannot be serialized]\")}}return n.join(t)}function Ie(e,t,n=!1){return!!be(e)&&(ge(t,\"RegExp\")?t.test(e):!!be(t)&&(n?e===t:e.includes(t)))}function xe(e,t=[],n=!1){return t.some((t=>Ie(e,t,n)))}function Le(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);\"function\"==typeof i&&Ne(i,r);try{e[t]=i}catch(n){z&&Q.log(`Failed to replace method \"${t}\" in object`,e)}}function De(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){z&&Q.log(`Failed to add non-enumerable property \"${t}\" to object`,e)}}function Ne(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,De(e,\"__sentry_original__\",t)}catch(e){}}function Re(e){return e.__sentry_original__}function Fe(e){if(ve(e))return{message:e.message,name:e.name,stack:e.stack,...Ue(e)};if(ke(e)){const t={type:e.type,target:Be(e.target),currentTarget:Be(e.currentTarget),...Ue(e)};return\"undefined\"!=typeof CustomEvent&&Ce(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Be(e){try{return t=e,\"undefined\"!=typeof Element&&Ce(t,Element)?Oe(e):Object.prototype.toString.call(e)}catch(e){return\"<unknown>\"}var t}function Ue(e){if(\"object\"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Ve(e){return Je(e,new Map)}function Je(e,t){if(function(e){if(!Se(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||\"Object\"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=Je(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Je(e,t))})),r}return e}function $e(){return Date.now()/1e3}const qe=function(){const{performance:e}=$;if(!e||!e.now)return $e;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}();function ze(){const e=$,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,\"\");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function We(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function He(e){const{message:t,event_id:n}=e;if(t)return t;const r=We(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||\"<unknown>\":n||\"<unknown>\"}function Ge(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||\"\"),o.type||(o.type=n||\"Error\")}function Qe(e,t){const n=We(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:\"generic\",handled:!0,...r,...t},t&&\"data\"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function Ke(e){if(function(e){try{return e.__sentry_captured__}catch(e){}}(e))return!0;try{De(e,\"__sentry_captured__\",!0)}catch(e){}return!1}var Ye;function Xe(e){return new et((t=>{t(e)}))}function Ze(e){return new et(((t,n)=>{n(e)}))}(()=>{const{performance:e}=$;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,s=e.timing&&e.timing.navigationStart,a=\"number\"==typeof s?Math.abs(s+n-r):t;(o||a<t)&&(i<=a&&e.timeOrigin)})(),function(e){e[e.PENDING=0]=\"PENDING\";e[e.RESOLVED=1]=\"RESOLVED\";e[e.REJECTED=2]=\"REJECTED\"}(Ye||(Ye={}));class et{constructor(e){et.prototype.__init.call(this),et.prototype.__init2.call(this),et.prototype.__init3.call(this),et.prototype.__init4.call(this),this._state=Ye.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new et(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new et(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Ye.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ye.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ye.PENDING&&(Me(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ye.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ye.RESOLVED&&e[1](this._value),this._state===Ye.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function tt(e){const t=qe(),n={sid:ze(),init:!0,timestamp:t,started:t,duration:0,status:\"ok\",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Ve({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:\"number\"==typeof e.did||\"string\"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&nt(n,e),n}function nt(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||qe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ze()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),\"number\"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(\"number\"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),\"number\"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function rt(){return ze()}function it(){return ze().substring(16)}function ot(e,t,n=2){if(!t||\"object\"!=typeof t||n<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=ot(r[e],t[e],n-1));return r}const st=\"_sentrySpan\";function at(e,t){t?De(e,st,t):delete e[st]}function ct(e){return e[st]}class lt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:rt(),spanId:it()}}clone(){const e=new lt;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,at(e,ct(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&nt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=\"function\"==typeof e?e(this):e,[n,r]=t instanceof ut?[t.getScopeData(),t.getRequestSession()]:Se(t)?[e,e.requestSession]:[],{tags:i,extra:o,user:s,contexts:a,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,at(this,void 0),this._attachments=[],this.setPropagationContext({traceId:rt()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n=\"number\"==typeof t?t:100;if(n<=0)return this;const r={timestamp:$e(),...e};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client&&this._client.recordDroppedEvent(\"buffer_overflow\",\"log_item\")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ct(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ot(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:it(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:ze();if(!this._client)return Q.warn(\"No client configured on scope - will not capture exception!\"),n;const r=new Error(\"Sentry syntheticException\");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:ze();if(!this._client)return Q.warn(\"No client configured on scope - will not capture message!\"),r;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ze();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Q.warn(\"No client configured on scope - will not capture event!\"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const ut=lt;class dt{constructor(e,t){let n,r;n=e||new ut,r=t||new ut,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return Me(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function pt(){const e=he(pe());return e.stack=e.stack||new dt(q(\"defaultCurrentScope\",(()=>new ut)),q(\"defaultIsolationScope\",(()=>new ut)))}function ht(e){return pt().withScope(e)}function ft(e,t){const n=pt();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function vt(e){return pt().withScope((()=>e(pt().getIsolationScope())))}function gt(e){const t=he(e);return t.acs?t.acs:{withIsolationScope:vt,withScope:ht,withSetScope:ft,withSetIsolationScope:(e,t)=>vt(t),getCurrentScope:()=>pt().getScope(),getIsolationScope:()=>pt().getIsolationScope()}}function mt(){return gt(pe()).getCurrentScope()}function yt(){return gt(pe()).getIsolationScope()}function bt(){return mt().getClient()}function _t(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=t;return Ve({trace_id:n,span_id:r,parent_span_id:i})}function wt(e){const t=e._sentryMetrics;if(!t)return;const n={};for(const[,[e,r]]of t){(n[e]||(n[e]=[])).push(Ve(r))}return n}const St=/^sentry-/;function kt(e){const t=function(e){if(!e||!be(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=Mt(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return Mt(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(St)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Mt(e){return e.split(\",\").map((e=>e.split(\"=\").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}let Ct=!1;function Et(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext();return Ve({parent_span_id:r?t:Pt(e).parent_span_id,span_id:r?it():t,trace_id:n})}function Tt(e){return\"number\"==typeof e?Ot(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ot(e.getTime()):qe()}function Ot(e){return e>9999999999?e/1e3:e}function Pt(e){if(function(e){return\"function\"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:i,name:o,endTime:s,parentSpanId:a,status:c}=e;return Ve({span_id:t,trace_id:n,data:r,description:o,parent_span_id:a,start_timestamp:Tt(i),timestamp:Tt(s)||void 0,status:At(c),op:r[\"sentry.op\"],origin:r[\"sentry.origin\"],_metrics_summary:wt(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function At(e){if(e&&0!==e.code)return 1===e.code?\"ok\":e.message||\"unknown_error\"}function jt(e){return e._sentryRootSpan||e}function It(){Ct||(G((()=>{console.warn(\"[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.\")})),Ct=!0)}const xt=\"production\";function Lt(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i=Ve({environment:n.environment||xt,release:n.release,public_key:r,trace_id:e});return t.emit(\"createDsc\",i),i}function Dt(e){const t=bt();if(!t)return{};const n=jt(e),r=n._frozenDsc;if(r)return r;const i=n.spanContext().traceState,o=i&&i.get(\"sentry.dsc\"),s=o&&kt(o);if(s)return s;const a=Lt(e.spanContext().traceId,t),c=Pt(n),l=c.data||{},u=l[\"sentry.sample_rate\"];null!=u&&(a.sample_rate=`${u}`);const d=l[\"sentry.source\"],p=c.description;return\"url\"!==d&&p&&(a.transaction=p),function(e){if(\"boolean\"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=bt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||\"tracesSampleRate\"in n||\"tracesSampler\"in n)}()&&(a.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(n))),t.emit(\"createDsc\",a,n),a}const Nt=/^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;function Rt(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:\"\"}@${n}${o?`:${o}`:\"\"}/${r?`${r}/`:r}${s}`}function Ft(e){return{protocol:e.protocol,publicKey:e.publicKey||\"\",pass:e.pass||\"\",host:e.host,port:e.port||\"\",path:e.path||\"\",projectId:e.projectId}}function Bt(e){const t=\"string\"==typeof e?function(e){const t=Nt.exec(e);if(!t)return void G((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,i=\"\",o=\"\",s=\"\",a=\"\"]=t.slice(1);let c=\"\",l=a;const u=l.split(\"/\");if(u.length>1&&(c=u.slice(0,-1).join(\"/\"),l=u.pop()),l){const e=l.match(/^\\d+/);e&&(l=e[0])}return Ft({host:o,pass:i,path:c,projectId:l,port:s,protocol:n,publicKey:r})}(e):Ft(e);if(t&&function(e){if(!z)return!0;const{port:t,projectId:n,protocol:r}=e;return!([\"protocol\",\"publicKey\",\"host\",\"projectId\"].find((t=>!e[t]&&(Q.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\\d+$/)?function(e){return\"http\"===e||\"https\"===e}(r)?t&&isNaN(parseInt(t,10))&&(Q.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Q.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Q.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Ut(e,t=100,n=1/0){try{return Jt(\"\",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Vt(e,t=3,n=102400){const r=Ut(e,t);return i=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?Vt(e,t-1,n):r;var i}function Jt(e,t,n=1/0,r=1/0,i=function(){const e=\"function\"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[o,s]=i;if(null==t||[\"boolean\",\"string\"].includes(typeof t)||\"number\"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if(\"domain\"===e&&t&&\"object\"==typeof t&&t._events)return\"[Domain]\";if(\"domainEmitter\"===e)return\"[DomainEmitter]\";if(\"undefined\"!=typeof __webpack_require__.g&&t===__webpack_require__.g)return\"[Global]\";if(\"undefined\"!=typeof window&&t===window)return\"[Window]\";if(\"undefined\"!=typeof document&&t===document)return\"[Document]\";if(Ee(t))return\"[VueViewModel]\";if(Se(n=t)&&\"nativeEvent\"in n&&\"preventDefault\"in n&&\"stopPropagation\"in n)return\"[SyntheticEvent]\";if(\"number\"==typeof t&&!Number.isFinite(t))return`[${t}]`;if(\"function\"==typeof t)return`[Function: ${te(t)}]`;if(\"symbol\"==typeof t)return`[${String(t)}]`;if(\"bigint\"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:\"null prototype\"}(t);return/^HTML(\\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith(\"[object \"))return a;if(t.__sentry_skip_normalization__)return t;const c=\"number\"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace(\"object \",\"\");if(o(t))return\"[Circular ~]\";const l=t;if(l&&\"function\"==typeof l.toJSON)try{return Jt(\"\",l.toJSON(),c-1,r,i)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Fe(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]=\"[MaxProperties ~]\";break}const t=p[e];u[e]=Jt(e,t,c-1,r,i),d++}return s(t),u}function $t(e,t=[]){return[e,t]}function qt(e,t){const[n,r]=e;return[n,[...r,t]]}function zt(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Wt(e){return $.__SENTRY__&&$.__SENTRY__.encodePolyfill?$.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function Ht(e){const[t,n]=e;let r=JSON.stringify(t);function i(e){\"string\"==typeof r?r=\"string\"==typeof e?r+e:[Wt(r),e]:r.push(\"string\"==typeof e?Wt(e):e)}for(const e of n){const[t,n]=e;if(i(`\\n${JSON.stringify(t)}\\n`),\"string\"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Ut(n))}i(e)}}return\"string\"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function Gt(e){const t=\"string\"==typeof e.data?Wt(e.data):e.data;return[Ve({type:\"attachment\",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const Qt={session:\"session\",sessions:\"session\",attachment:\"attachment\",transaction:\"transaction\",event:\"error\",client_report:\"internal\",user_report:\"default\",profile:\"profile\",profile_chunk:\"profile\",replay_event:\"replay\",replay_recording:\"replay\",check_in:\"monitor\",feedback:\"feedback\",span:\"span\",statsd:\"metric_bucket\",raw_security:\"security\"};function Kt(e){return Qt[e]}function Yt(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Xt(e,t,n,r){const i=Yt(n),o=e.type&&\"replay_event\"!==e.type?e.type:\"event\";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const s=function(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Rt(r)},...i&&{trace:Ve({...i})}}}(e,i,r,t);delete e.sdkProcessingMetadata;return $t(s,[[{type:o},e]])}function Zt(e,t,n,r=0){return new et(((i,o)=>{const s=e[r];if(null===t||\"function\"!=typeof s)i(t);else{const a=s({...t},n);V&&s.id&&null===a&&Q.log(`Event processor \"${s.id}\" dropped event`),Me(a)?a.then((t=>Zt(e,t,n,r+1).then(i))).then(null,o):Zt(e,a,n,r+1).then(i).then(null,o)}}))}let en,tn,nn;function rn(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,transactionName:a}=t,c=Ve(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Ve(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=Ve(i);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Ve(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});s&&(e.level=s);a&&\"transaction\"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Et(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Dt(t),...e.sdkProcessingMetadata};const n=jt(t),r=Pt(n).description;r&&!e.transaction&&\"transaction\"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function on(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;sn(e,\"extra\",n),sn(e,\"tags\",r),sn(e,\"user\",i),sn(e,\"contexts\",o),e.sdkProcessingMetadata=ot(e.sdkProcessingMetadata,a,2),s&&(e.level=s),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function sn(e,t,n){e[t]=ot(e[t],n,1)}function an(e,t,n,r,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ze(),timestamp:t.timestamp||$e()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;e.environment=e.environment||n||xt,!e.release&&r&&(e.release=r);!e.dist&&i&&(e.dist=i);e.message&&(e.message=Ae(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=Ae(s.value,o));const a=e.request;a&&a.url&&(a.url=Ae(a.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),i&&i.emit(\"applyFrameMetadata\",t),void 0===t.type&&function(e,t){const n=function(e){const t=$._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return nn&&n.length===tn||(tn=n.length,nn=n.reduce(((n,r)=>{en||(en={});const i=en[r];if(i)n[i[0]]=i[1];else{const i=e(r);for(let e=i.length-1;e>=0;e--){const o=i[e],s=o&&o.filename,a=t[r];if(s&&a){n[s]=a,en[r]=[s,a];break}}}return n}),{})),nn}(t);try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{n&&e.filename&&(e.debug_id=n[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new ut;return n.update(t),n}(r,n.captureContext);n.mechanism&&Qe(c,n.mechanism);const d=i?i.getEventProcessors():[],p=q(\"globalScope\",(()=>new ut)).getScopeData();if(o){on(p,o.getScopeData())}if(u){on(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),rn(c,p);return Zt([...d,...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:\"sourcemap\",code_file:e,debug_id:t})}))}(e),\"number\"==typeof s&&s>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Ut(e.data,t,n)}})))},...e.user&&{user:Ut(e.user,t,n)},...e.contexts&&{contexts:Ut(e.contexts,t,n)},...e.extra&&{extra:Ut(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ut(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:Ut(e.data,t,n)}}))));e.contexts&&e.contexts.flags&&r.contexts&&(r.contexts.flags=Ut(e.contexts.flags,3,n));return r}(e,s,a):e)))}function cn(e){if(e)return function(e){return e instanceof ut||\"function\"==typeof e}(e)||function(e){return Object.keys(e).some((e=>ln.includes(e)))}(e)?{captureContext:e}:e}const ln=[\"user\",\"level\",\"extra\",\"contexts\",\"tags\",\"fingerprint\",\"requestSession\",\"propagationContext\"];function un(e,t){return mt().captureEvent(e,t)}function dn(e){const t=bt(),n=yt(),r=mt(),{release:i,environment:o=xt}=t&&t.getOptions()||{},{userAgent:s}=$.navigator||{},a=tt({release:i,environment:o,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&\"ok\"===c.status&&nt(c,{status:\"exited\"}),pn(),n.setSession(a),r.setSession(a),a}function pn(){const e=yt(),t=mt(),n=t.getSession()||e.getSession();n&&function(e,t){let n={};t?n={status:t}:\"ok\"===e.status&&(n={status:\"exited\"}),nt(e,n)}(n),hn(),e.setSession(),t.setSession()}function hn(){const e=yt(),t=mt(),n=bt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function fn(e=!1){e?pn():hn()}function vn(e,t,n){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:\"\",n=e.port?`:${e.port}`:\"\";return`${t}//${e.host}${n}${e.path?`/${e.path}`:\"\"}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:\"7\"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}const gn=[];function mn(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function yn(e,t,n){if(n[t.name])V&&Q.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===gn.indexOf(t.name)&&\"function\"==typeof t.setupOnce&&(t.setupOnce(),gn.push(t.name)),t.setup&&\"function\"==typeof t.setup&&t.setup(e),\"function\"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on(\"preprocessEvent\",((t,r)=>n(t,r,e)))}if(\"function\"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}V&&Q.log(`Integration installed: ${t.name}`)}}class bn extends Error{constructor(e,t=\"warn\"){super(e),this.message=e,this.logLevel=t}}const _n=\"Not capturing exception because it's already been captured.\";class wn{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Bt(e.dsn):V&&Q.warn(\"No DSN provided, client will not send events.\"),this._dsn){const t=vn(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}const t=[\"enableTracing\",\"tracesSampleRate\",\"tracesSampler\"].find((t=>t in e&&null==e[t]));t&&G((()=>{console.warn(`[Sentry] Deprecation warning: \\`${t}\\` is set to undefined, which leads to tracing being enabled. In v9, a value of \\`undefined\\` will result in tracing being disabled.`)}))}captureException(e,t,n){const r=ze();if(Ke(e))return V&&Q.log(_n),r;const i={event_id:r,...t};return this._process(this.eventFromException(e,i).then((e=>this._captureEvent(e,i,n)))),i.event_id}captureMessage(e,t,n,r){const i={event_id:ze(),...n},o=_e(e)?e:String(e),s=we(e)?this.eventFromMessage(o,t,i):this.eventFromException(e,i);return this._process(s.then((e=>this._captureEvent(e,i,r)))),i.event_id}captureEvent(e,t,n){const r=ze();if(t&&t.originalException&&Ke(t.originalException))return V&&Q.log(_n),r;const i={event_id:r,...t},o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,i,o||n)),i.event_id}captureSession(e){\"string\"!=typeof e.release?V&&Q.warn(\"Discarded session because of missing or non-string release\"):(this.sendSession(e),nt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit(\"flush\"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Xe(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit(\"close\"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith(\"Spotlight\"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];yn(this,e,this._integrations),t||mn(this,[e])}sendEvent(e,t={}){this.emit(\"beforeSendEvent\",e,t);let n=Xt(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=qt(n,Gt(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit(\"afterSendEvent\",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const i=Yt(n);return $t({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:Rt(t)}},[\"aggregates\"in e?[{type:\"sessions\"},e]:[{type:\"session\"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r=\"number\"==typeof n?n:1,i=`${e}:${t}`;V&&Q.log(`Recording outcome: \"${i}\"${r>1?` (${r} times)`:\"\"}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit(\"beforeEnvelope\",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(V&&Q.error(\"Error while sending envelope:\",e),e))):(V&&Q.error(\"Transport disabled\"),Xe({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&yn(e,t,n)})),n}(this,e),mn(this,e)}_updateSessionFromEvent(e,t){let n=\"fatal\"===t.level,r=!1;const i=t.exception&&t.exception.values;if(i){r=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const o=\"ok\"===e.status;(o&&0===e.errors||o&&n)&&(nt(e,{...n&&{status:\"crashed\"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new et((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n=mt(),r=yt()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit(\"preprocessEvent\",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),an(i,e,t,n,this,r).then((e=>{if(null===e)return e;e.contexts={trace:_t(n),...e.contexts};const t=function(e,t){const n=t.getPropagationContext();return n.dsc||Lt(n.traceId,e)}(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:t,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{V&&(e instanceof bn&&\"log\"===e.logLevel?Q.log(e.message):Q.warn(e))}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:i}=r,o=kn(e),s=Sn(e),a=e.type||\"error\",c=`before send for type \\`${a}\\``,l=void 0===i?void 0:function(e){if(\"boolean\"==typeof e)return Number(e);const t=\"string\"==typeof e?parseFloat(e):e;if(!(\"number\"!=typeof t||isNaN(t)||t<0||t>1))return t;V&&Q.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}(i);if(s&&\"number\"==typeof l&&Math.random()>l)return this.recordDroppedEvent(\"sample_rate\",\"error\",e),Ze(new bn(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,\"log\"));const u=\"replay_event\"===a?\"replay\":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent(\"event_processor\",u,e),new bn(\"An event processor returned `null`, will not send event.\",\"log\");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=t;if(Sn(n)&&i)return i(n,r);if(kn(n)){if(n.spans&&s){const t=[];for(const r of n.spans){const n=s(r);n?t.push(n):(It(),e.recordDroppedEvent(\"before_send\",\"span\"))}n.spans=t}if(o){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(n,r)}}return n}(this,r,n,t);return function(e,t){const n=`${t} must return \\`null\\` or a valid event.`;if(Me(e))return e.then((e=>{if(!Se(e)&&null!==e)throw new bn(n);return e}),(e=>{throw new bn(`${t} rejected with ${e}`)}));if(!Se(e)&&null!==e)throw new bn(n);return e}(i,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent(\"before_send\",u,e),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent(\"before_send\",\"span\",t)}throw new bn(`${c} returned \\`null\\`, will not send event.`,\"log\")}const i=n&&n.getSession();if(!o&&i&&this._updateSessionFromEvent(i,r),o){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent(\"before_send\",\"span\",e)}const s=r.transaction_info;if(o&&s&&r.transaction!==e.transaction){const e=\"custom\";r.transaction_info={...s,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof bn)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new bn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(\":\");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){V&&Q.log(\"Flushing outcomes...\");const e=this._clearOutcomes();if(0===e.length)return void(V&&Q.log(\"No outcomes to send\"));if(!this._dsn)return void(V&&Q.log(\"No dsn provided, will not send outcomes\"));V&&Q.log(\"Sending outcomes:\",e);const t=(n=e,$t((r=this._options.tunnel&&Rt(this._dsn))?{dsn:r}:{},[[{type:\"client_report\"},{timestamp:i||$e(),discarded_events:n}]]));var n,r,i;this.sendEnvelope(t)}}function Sn(e){return void 0===e.type}function kn(e){return\"transaction\"===e.type}function Mn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Ze(new bn(\"Not adding Promise because buffer limit was reached.\"));const i=r();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new et(((n,r)=>{let i=t.length;if(!i)return n(!0);const o=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Xe(e).then((()=>{--i||(clearTimeout(o),n(!0))}),r)}))}))}}}function Cn(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n&&n[\"x-sentry-rate-limits\"],s=n&&n[\"retry-after\"];if(o)for(const e of o.trim().split(\",\")){const[t,n,,,o]=e.split(\":\",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(\";\"))\"metric_bucket\"===e&&o&&!o.split(\";\").includes(\"custom\")||(i[e]=r+a);else i.all=r+a}else s?i.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(s,r):429===t&&(i.all=r+6e4);return i}function En(e,t,n=Mn(e.bufferSize||64)){let r={};return{send:function(i){const o=[];if(zt(i,((t,n)=>{const i=Kt(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,i)){const r=Tn(t,n);e.recordDroppedEvent(\"ratelimit_backoff\",i,r)}else o.push(t)})),0===o.length)return Xe({});const s=$t(i[0],o),a=t=>{zt(s,((n,r)=>{const i=Tn(n,r);e.recordDroppedEvent(t,Kt(r),i)}))};return n.add((()=>t({body:Ht(s)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&V&&Q.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Cn(r,e),e)),(e=>{throw a(\"network_error\"),e})))).then((e=>e),(e=>{if(e instanceof bn)return V&&Q.error(\"Skipped sending event because buffer is full.\"),a(\"queue_overflow\"),Xe({});throw e}))},flush:e=>n.drain(e)}}function Tn(e,t){if(\"event\"===t||\"transaction\"===t)return Array.isArray(e)?e[1]:void 0}const On=100;function Pn(e,t){const n=bt(),r=yt();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=On}=n.getOptions();if(o<=0)return;const s={timestamp:$e(),...e},a=i?G((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit(\"beforeAddBreadcrumb\",a,t),r.addBreadcrumb(a,o))}let An;const jn=new WeakMap,In=()=>({name:\"FunctionToString\",setupOnce(){An=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Re(this),n=jn.has(bt())&&void 0!==t?t:this;return An.apply(n,e)}}catch(e){}},setup(e){jn.set(e,!0)}}),xn=[/^Script error\\.?$/,/^Javascript error: Script error\\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,\"undefined is not an object (evaluating 'a.L')\",'can\\'t redefine non-configurable property \"solana\"',\"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)\",\"Can't find variable: _AutofillCallbackHandler\",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\\d+, MethodName:simulateEvent, ParamCount:\\d+$/],Ln=(e={})=>({name:\"InboundFilters\",processEvent(t,n,r){const i=r.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:xn],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){if(t.ignoreInternal&&function(e){try{return\"SentryError\"===e.exception.values[0].type}catch(e){}return!1}(e))return V&&Q.warn(`Event dropped due to being internal Sentry Error.\\nEvent: ${He(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));return t}(e).some((e=>xe(e,t)))}(e,t.ignoreErrors))return V&&Q.warn(`Event dropped due to being matched by \\`ignoreErrors\\` option.\\nEvent: ${He(e)}`),!0;if(function(e){if(e.type)return!1;if(!e.exception||!e.exception.values||0===e.exception.values.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&\"Error\"!==e.type||e.value))}(e))return V&&Q.warn(`Event dropped due to not having an error message, error type or stacktrace.\\nEvent: ${He(e)}`),!0;if(function(e,t){if(\"transaction\"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&xe(n,t)}(e,t.ignoreTransactions))return V&&Q.warn(`Event dropped due to being matched by \\`ignoreTransactions\\` option.\\nEvent: ${He(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Dn(e);return!!n&&xe(n,t)}(e,t.denyUrls))return V&&Q.warn(`Event dropped due to being matched by \\`denyUrls\\` option.\\nEvent: ${He(e)}.\\nUrl: ${Dn(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Dn(e);return!n||xe(n,t)}(e,t.allowUrls))return V&&Q.warn(`Event dropped due to not being matched by \\`allowUrls\\` option.\\nEvent: ${He(e)}.\\nUrl: ${Dn(e)}`),!0;return!1}(t,o)?null:t}});function Dn(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&\"<anonymous>\"!==n.filename&&\"[native code]\"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return V&&Q.error(`Cannot extract url for event ${He(e)}`),null}}function Nn(e,t,n=250,r,i,o,s){if(!(o.exception&&o.exception.values&&s&&Ce(s.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,l;a&&(o.exception.values=(c=Rn(e,t,i,s.originalException,r,o.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=Ae(e.value,l)),e)))))}function Rn(e,t,n,r,i,o,s,a){if(o.length>=n+1)return o;let c=[...o];if(Ce(r[i],Error)){Fn(s,a);const o=e(t,r[i]),l=c.length;Bn(o,i,l,a),c=Rn(e,t,n,r[i],i,[o,...c],o,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,o)=>{if(Ce(r,Error)){Fn(s,a);const l=e(t,r),u=c.length;Bn(l,`errors[${o}]`,u,a),c=Rn(e,t,n,r,i,[l,...c],l,u)}})),c}function Fn(e,t){e.mechanism=e.mechanism||{type:\"generic\",handled:!0},e.mechanism={...e.mechanism,...\"AggregateError\"===e.type&&{is_exception_group:!0},exception_id:t}}function Bn(e,t,n,r){e.mechanism=e.mechanism||{type:\"generic\",handled:!0},e.mechanism={...e.mechanism,type:\"chained\",source:t,exception_id:n,parent_id:r}}function Un(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||\"\",r=t[8]||\"\";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Vn(){\"console\"in $&&W.forEach((function(e){e in $.console&&Le($.console,e,(function(t){return H[e]=t,function(...t){ae(\"console\",{args:t,level:e});const n=H[e];n&&n.apply($.console,t)}}))}))}function Jn(e){return\"warn\"===e?\"warning\":[\"fatal\",\"error\",\"warning\",\"log\",\"info\",\"debug\"].includes(e)?e:\"log\"}const $n=()=>{let e;return{name:\"Dedupe\",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!zn(e,t))return!1;if(!qn(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Wn(t),r=Wn(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!zn(e,t))return!1;if(!qn(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return V&&Q.warn(\"Event dropped due to being a duplicate of previously captured event.\"),null}catch(e){}return e=t}}};function qn(e,t){let n=ne(e),r=ne(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function zn(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join(\"\")!==r.join(\"\"))}catch(e){return!1}}function Wn(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Hn(e){return void 0===e?void 0:e>=400&&e<500?\"warning\":e>=500?\"error\":void 0}const Gn=$;function Qn(e){return e&&/^function\\s+\\w+\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(e.toString())}function Kn(){if(\"string\"==typeof EdgeRuntime)return!0;if(!function(){if(!(\"fetch\"in Gn))return!1;try{return new Headers,new Request(\"http://www.example.com\"),new Response,!0}catch(e){return!1}}())return!1;if(Qn(Gn.fetch))return!0;let e=!1;const t=Gn.document;if(t&&\"function\"==typeof t.createElement)try{const n=t.createElement(\"iframe\");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Qn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){z&&Q.warn(\"Could not create sandbox iframe for pure fetch check, bailing to window.fetch: \",e)}return e}function Yn(e,t){const n=\"fetch\";oe(n,e),se(n,(()=>function(e,t=!1){if(t&&!Kn())return;Le($,\"fetch\",(function(t){return function(...n){const r=new Error,{method:i,url:o}=function(e){if(0===e.length)return{method:\"GET\",url:\"\"};if(2===e.length){const[t,n]=e;return{url:Zn(t),method:Xn(n,\"method\")?String(n.method).toUpperCase():\"GET\"}}const t=e[0];return{url:Zn(t),method:Xn(t,\"method\")?String(t.method).toUpperCase():\"GET\"}}(n),s={args:n,fetchData:{method:i,url:o},startTimestamp:1e3*qe(),virtualError:r};return e||ae(\"fetch\",{...s}),t.apply($,n).then((async t=>(e?e(t):ae(\"fetch\",{...s,endTimestamp:1e3*qe(),response:t}),t)),(e=>{throw ae(\"fetch\",{...s,endTimestamp:1e3*qe(),error:e}),ve(e)&&void 0===e.stack&&(e.stack=r.stack,De(e,\"framesToPop\",1)),e}))}}))}(void 0,t)))}function Xn(e,t){return!!e&&\"object\"==typeof e&&!!e[t]}function Zn(e){return\"string\"==typeof e?e:e?Xn(e,\"url\")?e.url:e.toString?e.toString():\"\":\"\"}const er=$;const tr=$;let nr=0;function rr(){return nr>0}function ir(e,t={}){if(!function(e){return\"function\"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return\"function\"==typeof t?t:e;if(Re(e))return e}catch(t){return e}const n=function(...n){try{const r=n.map((e=>ir(e,t)));return e.apply(this,r)}catch(e){throw nr++,setTimeout((()=>{nr--})),function(...e){const t=gt(pe());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}t.withScope(e[0])}((r=>{var i,o;r.addEventProcessor((e=>(t.mechanism&&(Ge(e,void 0,void 0),Qe(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,mt().captureException(i,cn(o))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}Ne(n,e),De(e,\"__sentry_wrapped__\",n);try{Object.getOwnPropertyDescriptor(n,\"name\").configurable&&Object.defineProperty(n,\"name\",{get:()=>e.name})}catch(e){}return n}const or=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function sr(e,t){const n=lr(e,t),r={type:pr(t),value:hr(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&\"\"===r.value&&(r.value=\"Unrecoverable error caught\"),r}function ar(e,t,n,r){const i=bt(),o=i&&i.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:Vt(t,o)};if(s)return{exception:{values:[sr(e,s)]},extra:a};const c={exception:{values:[{type:ke(t)?t.constructor.name:r?\"UnhandledRejection\":\"Error\",value:gr(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=lr(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function cr(e,t){return{exception:{values:[sr(e,t)]}}}function lr(e,t){const n=t.stacktrace||t.stack||\"\",r=function(e){if(e&&ur.test(e.message))return 1;return 0}(t),i=function(e){if(\"number\"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,i)}catch(e){}return[]}const ur=/Minified React error #\\d+;/i;function dr(e){return\"undefined\"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function pr(e){const t=e&&e.name;if(!t&&dr(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:\"WebAssembly.Exception\"}return t}function hr(e){const t=e&&e.message;return t?t.error&&\"string\"==typeof t.error.message?t.error.message:dr(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:\"No error message\"}function fr(e,t,n,r,i){let o;if(me(t)&&t.error){return cr(e,t.error)}if(ye(t)||ge(t,\"DOMException\")){const i=t;if(\"stack\"in t)o=cr(e,t);else{const t=i.name||(ye(i)?\"DOMError\":\"DOMException\"),s=i.message?`${t}: ${i.message}`:t;o=vr(e,s,n,r),Ge(o,s)}return\"code\"in i&&(o.tags={...o.tags,\"DOMException.code\":`${i.code}`}),o}if(ve(t))return cr(e,t);if(Se(t)||ke(t)){return o=ar(e,t,n,i),Qe(o,{synthetic:!0}),o}return o=vr(e,t,n,r),Ge(o,`${t}`,void 0),Qe(o,{synthetic:!0}),o}function vr(e,t,n,r){const i={};if(r&&n){const r=lr(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]}),Qe(i,{synthetic:!0})}if(_e(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}function gr(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Fe(e));n.sort();const r=n[0];if(!r)return\"[object has no keys]\";if(r.length>=t)return Ae(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(\", \");if(!(r.length>t))return e===n.length?r:Ae(r,t)}return\"\"}(e),r=t?\"promise rejection\":\"exception\";if(me(e))return`Event \\`ErrorEvent\\` captured as ${r} with message \\`${e.message}\\``;if(ke(e)){return`Event \\`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class mr extends wn{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],r=\"npm\"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:J}))),version:J}),e._metadata=i}(t,\"browser\",[\"browser\"],tr.SENTRY_SDK_SOURCE||\"npm\"),super(t),t.sendClientReports&&tr.document&&tr.document.addEventListener(\"visibilitychange\",(()=>{\"hidden\"===tr.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){const i=fr(e,t,n&&n.syntheticException||void 0,r);return Qe(i),i.level=\"error\",n&&n.event_id&&(i.event_id=n.event_id),Xe(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t=\"info\",n){return function(e,t,n=\"info\",r,i){const o=vr(e,t,r&&r.syntheticException||void 0,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Xe(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(or&&Q.warn(\"SDK not enabled, will not capture user feedback.\"));const t=function(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Rt(r)}},o=function(e){return[{type:\"user_report\"},e]}(e);return $t(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||\"javascript\",super._prepareEvent(e,t,n)}}const yr=\"undefined\"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,br=$;let _r,wr,Sr,kr;function Mr(){if(!br.document)return;const e=ae.bind(null,\"dom\"),t=Cr(e,!0);br.document.addEventListener(\"click\",t,!1),br.document.addEventListener(\"keypress\",t,!1),[\"EventTarget\",\"Node\"].forEach((t=>{const n=br[t],r=n&&n.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty(\"addEventListener\")&&(Le(r,\"addEventListener\",(function(t){return function(n,r,i){if(\"click\"===n||\"keypress\"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=r[n]=r[n]||{refCount:0};if(!o.handler){const r=Cr(e);o.handler=r,t.call(this,n,r,i)}o.refCount++}catch(e){}return t.call(this,n,r,i)}})),Le(r,\"removeEventListener\",(function(e){return function(t,n,r){if(\"click\"===t||\"keypress\"==t)try{const n=this.__sentry_instrumentation_handlers__||{},i=n[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Cr(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return\"keypress\"===e&&(!t||!t.tagName||\"INPUT\"!==t.tagName&&\"TEXTAREA\"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;De(n,\"_sentryCaptured\",!0),r&&!r._sentryId&&De(r,\"_sentryId\",ze());const i=\"keypress\"===n.type?\"input\":n.type;if(!function(e){if(e.type!==wr)return!1;try{if(!e.target||e.target._sentryId!==Sr)return!1}catch(e){}return!0}(n)){e({event:n,name:i,global:t}),wr=n.type,Sr=r?r._sentryId:void 0}clearTimeout(_r),_r=br.setTimeout((()=>{Sr=void 0,wr=void 0}),1e3)}}function Er(e){const t=\"history\";oe(t,e),se(t,Tr)}function Tr(){if(!function(){const e=er.chrome,t=e&&e.app&&e.app.runtime,n=\"history\"in er&&!!er.history.pushState&&!!er.history.replaceState;return!t&&n}())return;const e=br.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=kr,t=String(n);kr=t;ae(\"history\",{from:e,to:t})}return e.apply(this,t)}}br.onpopstate=function(...t){const n=br.location.href,r=kr;kr=n;if(ae(\"history\",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},Le(br.history,\"pushState\",t),Le(br.history,\"replaceState\",t)}const Or={};function Pr(e){Or[e]=void 0}const Ar=\"__sentry_xhr_v3__\";function jr(){if(!br.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,i=1e3*qe(),o=be(n[0])?n[0].toUpperCase():void 0,s=function(e){if(be(e))return e;try{return e.toString()}catch(e){}return}(n[1]);if(!o||!s)return e.apply(t,n);t[Ar]={method:o,url:s,request_headers:{}},\"POST\"===o&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Ar];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}ae(\"xhr\",{endTimestamp:1e3*qe(),startTimestamp:i,xhr:t,virtualError:r})}};return\"onreadystatechange\"in t&&\"function\"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener(\"readystatechange\",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,i]=n,o=t[Ar];return o&&be(r)&&be(i)&&(o.request_headers[r.toLowerCase()]=i),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Ar];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return ae(\"xhr\",{startTimestamp:1e3*qe(),xhr:t}),e.apply(t,n)}})}function Ir(e,t=function(e){const t=Or[e];if(t)return t;let n=br[e];if(Qn(n))return Or[e]=n.bind(br);const r=br.document;if(r&&\"function\"==typeof r.createElement)try{const t=r.createElement(\"iframe\");t.hidden=!0,r.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(n=i[e]),r.head.removeChild(t)}catch(t){yr&&Q.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Or[e]=n.bind(br):n}(\"fetch\")){let n=0,r=0;return En(e,(function(i){const o=i.body.length;n+=o,r++;const s={body:i.body,method:\"POST\",referrerPolicy:\"origin\",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Pr(\"fetch\"),Ze(\"No fetch implementation available\");try{return t(e.url,s).then((e=>(n-=o,r--,{statusCode:e.status,headers:{\"x-sentry-rate-limits\":e.headers.get(\"X-Sentry-Rate-Limits\"),\"retry-after\":e.headers.get(\"Retry-After\")}})))}catch(e){return Pr(\"fetch\"),n-=o,r--,Ze(e)}}))}function xr(e,t,n,r){const i={filename:e,function:\"<anonymous>\"===t?K:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}const Lr=/^\\s*at (\\S+?)(?::(\\d+))(?::(\\d+))\\s*$/i,Dr=/^\\s*at (?:(.+?\\)(?: \\[.+\\])?|.*?) ?\\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,Nr=/\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,Rr=/^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:[-a-z]+)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i,Fr=/(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,Br=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const i=[],o=e.split(\"\\n\");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=Y.test(n)?n.replace(Y,\"$1\"):n;if(!s.match(/\\S*Error: /)){for(const e of t){const t=e(s);if(t){i.push(t);break}}if(i.length>=50+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Z(t).function||\"\")&&t.pop();t.reverse(),X.test(Z(t).function||\"\")&&(t.pop(),X.test(Z(t).function||\"\")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||Z(t).filename,function:e.function||K})))}(i.slice(r))}}(...[[30,e=>{const t=Lr.exec(e);if(t){const[,e,n,r]=t;return xr(e,K,+n,+r)}const n=Dr.exec(e);if(n){if(n[2]&&0===n[2].indexOf(\"eval\")){const e=Nr.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Ur(n[1]||K,n[2]);return xr(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{const t=Rr.exec(e);if(t){if(t[3]&&t[3].indexOf(\" > eval\")>-1){const e=Fr.exec(t[3]);e&&(t[1]=t[1]||\"eval\",t[3]=e[1],t[4]=e[2],t[5]=\"\")}let e=t[3],n=t[1]||K;return[n,e]=Ur(n,e),xr(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Ur=(e,t)=>{const n=-1!==e.indexOf(\"safari-extension\"),r=-1!==e.indexOf(\"safari-web-extension\");return n||r?[-1!==e.indexOf(\"@\")?e.split(\"@\")[0]:K,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Vr=1024,Jr=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:\"Breadcrumbs\",setup(e){var n;t.console&&function(e){const t=\"console\";oe(t,e),se(t,Vn)}(function(e){return function(t){if(bt()!==e)return;const n={category:\"console\",data:{arguments:t.args,logger:\"console\"},level:Jn(t.level),message:je(t.args,\" \")};if(\"assert\"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${je(t.args.slice(1),\" \")||\"console.assert\"}`,n.data.arguments=t.args.slice(1)}Pn(n,{input:t.args,level:t.level})}}(e)),t.dom&&(n=function(e,t){return function(n){if(bt()!==e)return;let r,i,o=\"object\"==typeof t?t.serializeAttribute:void 0,s=\"object\"==typeof t&&\"number\"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Vr&&(or&&Q.warn(`\\`dom.maxStringLength\\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Vr),\"string\"==typeof o&&(o=[o]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Oe(t,{keyAttrs:o,maxStringLength:s}),i=function(e){if(!Te.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(e){r=\"<unknown>\"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};i&&(a.data={\"ui.component_name\":i}),Pn(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom),oe(\"dom\",n),se(\"dom\",Mr)),t.xhr&&function(e){oe(\"xhr\",e),se(\"xhr\",jr)}(function(e){return function(t){if(bt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,i=t.xhr[Ar];if(!n||!r||!i)return;const{method:o,url:s,status_code:a,body:c}=i,l={method:o,url:s,status_code:a},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};Pn({category:\"xhr\",data:l,type:\"http\",level:Hn(a)},u)}}(e)),t.fetch&&Yn(function(e){return function(t){if(bt()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||\"POST\"!==t.fetchData.method))if(t.error){Pn({category:\"fetch\",data:t.fetchData,level:\"error\",type:\"http\"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response,i={...t.fetchData,status_code:e&&e.status},o={input:t.args,response:e,startTimestamp:n,endTimestamp:r};Pn({category:\"fetch\",data:i,type:\"http\",level:Hn(i.status_code)},o)}}}(e)),t.history&&Er(function(e){return function(t){if(bt()!==e)return;let n=t.from,r=t.to;const i=Un(tr.location.href);let o=n?Un(n):void 0;const s=Un(r);o&&o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),Pn({category:\"navigation\",data:{from:n,to:r}})}}(e)),t.sentry&&e.on(\"beforeSendEvent\",function(e){return function(t){bt()===e&&Pn({category:\"sentry.\"+(\"transaction\"===t.type?\"transaction\":\"event\"),event_id:t.event_id,level:t.level,message:He(t)},{event:t})}}(e))}}};const $r=[\"EventTarget\",\"Window\",\"Node\",\"ApplicationCache\",\"AudioTrackList\",\"BroadcastChannel\",\"ChannelMergerNode\",\"CryptoOperation\",\"EventSource\",\"FileReader\",\"HTMLUnknownElement\",\"IDBDatabase\",\"IDBRequest\",\"IDBTransaction\",\"KeyOperation\",\"MediaController\",\"MessagePort\",\"ModalWindow\",\"Notification\",\"SVGElementInstance\",\"Screen\",\"SharedWorker\",\"TextTrack\",\"TextTrackCue\",\"TextTrackList\",\"WebSocket\",\"WebSocketWorker\",\"Worker\",\"XMLHttpRequest\",\"XMLHttpRequestEventTarget\",\"XMLHttpRequestUpload\"],qr=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:\"BrowserApiErrors\",setupOnce(){t.setTimeout&&Le(tr,\"setTimeout\",zr),t.setInterval&&Le(tr,\"setInterval\",zr),t.requestAnimationFrame&&Le(tr,\"requestAnimationFrame\",Wr),t.XMLHttpRequest&&\"XMLHttpRequest\"in tr&&Le(XMLHttpRequest.prototype,\"send\",Hr);const e=t.eventTarget;if(e){(Array.isArray(e)?e:$r).forEach(Gr)}}}};function zr(e){return function(...t){const n=t[0];return t[0]=ir(n,{mechanism:{data:{function:te(e)},handled:!1,type:\"instrument\"}}),e.apply(this,t)}}function Wr(e){return function(t){return e.apply(this,[ir(t,{mechanism:{data:{function:\"requestAnimationFrame\",handler:te(e)},handled:!1,type:\"instrument\"}})])}}function Hr(e){return function(...t){const n=this;return[\"onload\",\"onerror\",\"onprogress\",\"onreadystatechange\"].forEach((e=>{e in n&&\"function\"==typeof n[e]&&Le(n,e,(function(t){const n={mechanism:{data:{function:e,handler:te(t)},handled:!1,type:\"instrument\"}},r=Re(t);return r&&(n.mechanism.data.handler=te(r)),ir(t,n)}))})),e.apply(this,t)}}function Gr(e){const t=tr[e],n=t&&t.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty(\"addEventListener\")&&(Le(n,\"addEventListener\",(function(t){return function(n,r,i){try{\"function\"==typeof r.handleEvent&&(r.handleEvent=ir(r.handleEvent,{mechanism:{data:{function:\"handleEvent\",handler:te(r),target:e},handled:!1,type:\"instrument\"}}))}catch(e){}return t.apply(this,[n,ir(r,{mechanism:{data:{function:\"addEventListener\",handler:te(r),target:e},handled:!1,type:\"instrument\"}}),i])}})),Le(n,\"removeEventListener\",(function(e){return function(t,n,r){try{const i=n.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch(e){}return e.call(this,t,n,r)}})))}const Qr=()=>({name:\"BrowserSession\",setupOnce(){void 0!==tr.document?(dn({ignoreDuration:!0}),fn(),Er((({from:e,to:t})=>{void 0!==e&&e!==t&&(dn({ignoreDuration:!0}),fn())}))):or&&Q.warn(\"Using the `browserSessionIntegration` in non-browser environments is not supported.\")}}),Kr=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:\"GlobalHandlers\",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t=\"error\";oe(t,e),se(t,le)}((t=>{const{stackParser:n,attachStacktrace:r}=Xr();if(bt()!==e||rr())return;const{msg:i,url:o,line:s,column:a,error:c}=t,l=function(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],l=r,u=n,d=be(t)&&t.length>0?t:function(){try{return Te.document.location.href}catch(e){return\"\"}}();0===c.length&&c.push({colno:l,filename:d,function:K,in_app:!0,lineno:u});return e}(fr(n,c||i,void 0,r,!1),o,s,a);l.level=\"error\",un(l,{originalException:c,mechanism:{handled:!1,type:\"onerror\"}})}))}(e),Yr(\"onerror\")),t.onunhandledrejection&&(!function(e){!function(e){const t=\"unhandledrejection\";oe(t,e),se(t,de)}((t=>{const{stackParser:n,attachStacktrace:r}=Xr();if(bt()!==e||rr())return;const i=function(e){if(we(e))return e;try{if(\"reason\"in e)return e.reason;if(\"detail\"in e&&\"reason\"in e.detail)return e.detail.reason}catch(e){}return e}(t),o=we(i)?{exception:{values:[{type:\"UnhandledRejection\",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:fr(n,i,void 0,r,!0);o.level=\"error\",un(o,{originalException:i,mechanism:{handled:!1,type:\"onunhandledrejection\"}})}))}(e),Yr(\"onunhandledrejection\"))}}};function Yr(e){or&&Q.log(`Global Handler attached: ${e}`)}function Xr(){const e=bt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Zr=()=>({name:\"HttpContext\",preprocessEvent(e){if(!tr.navigator&&!tr.location&&!tr.document)return;const t=e.request&&e.request.url||tr.location&&tr.location.href,{referrer:n}=tr.document||{},{userAgent:r}=tr.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{\"User-Agent\":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),ei=(e={})=>{const t=e.limit||5,n=e.key||\"cause\";return{name:\"LinkedErrors\",preprocessEvent(e,r,i){const o=i.getOptions();Nn(sr,o.stackParser,o.maxValueLength,n,t,e,r)}}};var ti=\"new\",ni=\"loading\",ri=\"loaded\",ii=\"joining-meeting\",oi=\"joined-meeting\",si=\"left-meeting\",ai=\"error\",ci=\"blocked\",li=\"off\",ui=\"sendable\",di=\"loading\",pi=\"interrupted\",hi=\"playable\",fi=\"unknown\",vi=\"full\",gi=\"lobby\",mi=\"none\",yi=\"base\",bi=\"*\",_i=\"ejected\",wi=\"nbf-room\",Si=\"nbf-token\",ki=\"exp-room\",Mi=\"exp-token\",Ci=\"no-room\",Ei=\"meeting-full\",Ti=\"end-of-life\",Oi=\"not-allowed\",Pi=\"connection-error\",Ai=\"cam-in-use\",ji=\"mic-in-use\",Ii=\"cam-mic-in-use\",xi=\"permissions\",Li=\"undefined-mediadevices\",Di=\"not-found\",Ni=\"constraints\",Ri=\"unknown\",Fi=\"iframe-ready-for-launch-config\",Bi=\"iframe-launch-config\",Ui=\"theme-updated\",Vi=\"loading\",Ji=\"load-attempt-failed\",$i=\"loaded\",qi=\"started-camera\",zi=\"camera-error\",Wi=\"joining-meeting\",Hi=\"joined-meeting\",Gi=\"left-meeting\",Qi=\"participant-joined\",Ki=\"participant-updated\",Yi=\"participant-left\",Xi=\"participant-counts-updated\",Zi=\"access-state-updated\",eo=\"meeting-session-summary-updated\",to=\"meeting-session-state-updated\",no=\"meeting-session-data-error\",ro=\"waiting-participant-added\",io=\"waiting-participant-updated\",oo=\"waiting-participant-removed\",so=\"track-started\",ao=\"track-stopped\",co=\"transcription-started\",lo=\"transcription-stopped\",uo=\"transcription-error\",po=\"recording-started\",ho=\"recording-stopped\",fo=\"recording-stats\",vo=\"recording-error\",go=\"recording-upload-completed\",mo=\"recording-data\",yo=\"app-message\",bo=\"transcription-message\",_o=\"remote-media-player-started\",wo=\"remote-media-player-updated\",So=\"remote-media-player-stopped\",ko=\"local-screen-share-started\",Mo=\"local-screen-share-stopped\",Co=\"local-screen-share-canceled\",Eo=\"active-speaker-change\",To=\"active-speaker-mode-change\",Oo=\"network-quality-change\",Po=\"network-connection\",Ao=\"cpu-load-change\",jo=\"face-counts-updated\",Io=\"fullscreen\",xo=\"exited-fullscreen\",Lo=\"live-streaming-started\",Do=\"live-streaming-updated\",No=\"live-streaming-stopped\",Ro=\"live-streaming-error\",Fo=\"lang-updated\",Bo=\"receive-settings-updated\",Uo=\"input-settings-updated\",Vo=\"nonfatal-error\",Jo=\"error\",$o=4096,qo=102400,zo=\"iframe-call-message\",Wo=\"local-screen-start\",Ho=\"daily-method-update-live-streaming-endpoints\",Go=\"transmit-log\",Qo=\"daily-custom-track\",Ko={NONE:\"none\",BGBLUR:\"background-blur\",BGIMAGE:\"background-image\",FACE_DETECTION:\"face-detection\"},Yo={NONE:\"none\",NOISE_CANCELLATION:\"noise-cancellation\"},Xo={PLAY:\"play\",PAUSE:\"pause\"},Zo=[\"jpg\",\"png\",\"jpeg\"],es=\"add-endpoints\",ts=\"remove-endpoints\",ns=\"sip-call-transfer\";function rs(){return!is()&&\"undefined\"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:\"\"}function is(){return\"undefined\"!=typeof navigator&&navigator.product&&\"ReactNative\"===navigator.product}function os(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function ss(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(e,t){if(!e||!t)return!0;switch(e){case\"Chrome\":return t.major>=75;case\"Safari\":return RTCRtpTransceiver.prototype.hasOwnProperty(\"currentDirection\")&&!(13===t.major&&0===t.minor&&0===t.point);case\"Firefox\":return t.major>=67}return!0}(ms(),ys())||is())}function as(){if(is())return!1;if(!document)return!1;var e=document.createElement(\"iframe\");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var cs=\"none\",ls=\"software\",us=\"hardware\";var ds=function(){try{var e,t=document.createElement(\"canvas\"),n=!1;(e=t.getContext(\"webgl2\",{failIfMajorPerformanceCaveat:!0}))||(n=!0,e=t.getContext(\"webgl2\"));var r=null!=e;return t.remove(),r?n?ls:us:cs}catch(e){return cs}}();function ps(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!is()&&(ds!==cs&&(e?function(){if(gs())return!1;return[\"Chrome\",\"Firefox\"].includes(ms())}():function(){if(gs())return!1;var e=ms();if(\"Safari\"===e){var t=Ss();if(t.major<15||15===t.major&&t.minor<4)return!1}if(\"Chrome\"===e){return bs().major>=77}if(\"Firefox\"===e){return ks().major>=97}return[\"Chrome\",\"Firefox\",\"Safari\"].includes(e)}()))}function hs(){if(is())return!1;if(vs())return!1;if(\"undefined\"==typeof AudioWorkletNode)return!1;switch(ms()){case\"Chrome\":case\"Firefox\":return!0;case\"Safari\":var e=ys();return e.major>17||17===e.major&&e.minor>=4}return!1}function fs(){return os()&&!function(){var e,t=ms();if(!rs())return!0;switch(t){case\"Chrome\":return(e=bs()).major&&e.major>0&&e.major<75;case\"Firefox\":return(e=ks()).major<91;case\"Safari\":return(e=Ss()).major<13||13===e.major&&e.minor<1;default:return!0}}()}function vs(){return rs().match(/Linux; Android/)}function gs(){var e,t=rs(),n=t.match(/Mac/)&&(!is()&&\"undefined\"!=typeof window&&null!==(e=window)&&void 0!==e&&null!==(e=e.navigator)&&void 0!==e&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(t.match(/Mobi/)||t.match(/Android/)||n)||(!!rs().match(/DailyAnd\\//)||void 0)}function ms(){if(\"undefined\"!=typeof window){var e=rs();return _s()?\"Safari\":e.indexOf(\"Edge\")>-1?\"Edge\":e.match(/Chrome\\//)?\"Chrome\":e.indexOf(\"Safari\")>-1||ws()?\"Safari\":e.indexOf(\"Firefox\")>-1?\"Firefox\":e.indexOf(\"MSIE\")>-1||e.indexOf(\".NET\")>-1?\"IE\":\"Unknown Browser\"}}function ys(){switch(ms()){case\"Chrome\":return bs();case\"Safari\":return Ss();case\"Firefox\":return ks();case\"Edge\":return function(){var e=0,t=0;if(\"undefined\"!=typeof window){var n=rs().match(/Edge\\/(\\d+).(\\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(e){}}return{major:e,minor:t}}()}}function bs(){var e=0,t=0,n=0,r=0,i=!1;if(\"undefined\"!=typeof window){var o=rs(),s=o.match(/Chrome\\/(\\d+).(\\d+).(\\d+).(\\d+)/);if(s)try{e=parseInt(s[1]),t=parseInt(s[2]),n=parseInt(s[3]),r=parseInt(s[4]),i=o.indexOf(\"OPR/\")>-1}catch(e){}}return{major:e,minor:t,build:n,patch:r,opera:i}}function _s(){return!!rs().match(/iPad|iPhone|iPod/i)&&os()}function ws(){return rs().indexOf(\"AppleWebKit/605.1.15\")>-1}function Ss(){var e=0,t=0,n=0;if(\"undefined\"!=typeof window){var r=rs().match(/Version\\/(\\d+).(\\d+)(.(\\d+))?/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2]),n=parseInt(r[4])}catch(e){}else(_s()||ws())&&(e=14,t=0,n=3)}return{major:e,minor:t,point:n}}function ks(){var e=0,t=0;if(\"undefined\"!=typeof window){var n=rs().match(/Firefox\\/(\\d+).(\\d+)/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2])}catch(e){}}return{major:e,minor:t}}var Ms=function(){return o((function e(){t(this,e)}),[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){R()}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){R()}},{key:\"sendMessageToCallMachine\",value:function(e,t,n,r){R()}},{key:\"sendMessageToDailyJs\",value:function(e,t){R()}},{key:\"removeListener\",value:function(e){R()}}])}();function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ts(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ts=function(){return!!e})()}var Os=function(){function e(){var n,r,i,o;return t(this,e),r=this,i=a(i=e),(n=s(r,Ts()?Reflect.construct(i,o||[],a(r).constructor):i.apply(r,o)))._wrappedListeners={},n._messageCallbacks={},n}return l(e,Ms),o(e,[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){var r=this,i=function(i){if(i.data&&\"iframe-call-message\"===i.data.what&&(!i.data.callClientId||i.data.callClientId===t)&&(!i.data.from||\"module\"!==i.data.from)){var o=Es({},i.data);if(delete o.from,o.callbackStamp&&r._messageCallbacks[o.callbackStamp]){var s=o.callbackStamp;r._messageCallbacks[s].call(n,o),delete r._messageCallbacks[s]}delete o.what,delete o.callbackStamp,e.call(n,o)}};this._wrappedListeners[e]=i,window.addEventListener(\"message\",i)}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){var r=function(r){var i;if(!(!r.data||r.data.what!==zo||!r.data.action||r.data.from&&\"module\"!==r.data.from||r.data.callClientId&&t&&r.data.callClientId!==t||null!=r&&null!==(i=r.data)&&void 0!==i&&i.callFrameId)){var o=r.data;e.call(n,o)}};this._wrappedListeners[e]=r,window.addEventListener(\"message\",r)}},{key:\"sendMessageToCallMachine\",value:function(e,t,n,r){if(!n)throw new Error(\"undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?\");var i=Es({},e);if(i.what=zo,i.from=\"module\",i.callClientId=n,t){var o=N();this._messageCallbacks[o]=t,i.callbackStamp=o}var s=r?r.contentWindow:window,a=this._callMachineTargetOrigin(r);a&&s.postMessage(i,a)}},{key:\"sendMessageToDailyJs\",value:function(e,t){e.what=zo,e.callClientId=t,e.from=\"embedded\",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:\"removeListener\",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"forwardPackagedMessageToCallMachine\",value:function(e,t,n){var r=Es({},e);r.callClientId=n;var i=t?t.contentWindow:window,o=this._callMachineTargetOrigin(t);o&&i.postMessage(r,o)}},{key:\"addListenerForPackagedMessagesFromCallMachine\",value:function(e,t){var n=function(n){if(n.data&&\"iframe-call-message\"===n.data.what&&(!n.data.callClientId||n.data.callClientId===t)&&(!n.data.from||\"module\"!==n.data.from)){var r=n.data;e(r)}};return this._wrappedListeners[e]=n,window.addEventListener(\"message\",n),e}},{key:\"removeListenerForPackagedMessagesFromCallMachine\",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"_callMachineTargetOrigin\",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:\"_targetOriginFromWindowLocation\",value:function(){return\"file:\"===window.location.protocol?\"*\":window.location.origin}}])}();function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(As=function(){return!!e})()}var js=function(){function e(){var n,r,i,o;return t(this,e),r=this,i=a(i=e),n=s(r,As()?Reflect.construct(i,o||[],a(r).constructor):i.apply(r,o)),__webpack_require__.g.callMachineToDailyJsEmitter=__webpack_require__.g.callMachineToDailyJsEmitter||new y.EventEmitter,__webpack_require__.g.dailyJsToCallMachineEmitter=__webpack_require__.g.dailyJsToCallMachineEmitter||new y.EventEmitter,n._wrappedListeners={},n._messageCallbacks={},n}return l(e,Ms),o(e,[{key:\"addListenerForMessagesFromCallMachine\",value:function(e,t,n){this._addListener(e,__webpack_require__.g.callMachineToDailyJsEmitter,t,n,\"received call machine message\")}},{key:\"addListenerForMessagesFromDailyJs\",value:function(e,t,n){this._addListener(e,__webpack_require__.g.dailyJsToCallMachineEmitter,t,n,\"received daily-js message\")}},{key:\"sendMessageToCallMachine\",value:function(e,t,n){this._sendMessage(e,__webpack_require__.g.dailyJsToCallMachineEmitter,n,t,\"sending message to call machine\")}},{key:\"sendMessageToDailyJs\",value:function(e,t){this._sendMessage(e,__webpack_require__.g.callMachineToDailyJsEmitter,t,null,\"sending message to daily-js\")}},{key:\"removeListener\",value:function(e){var t=this._wrappedListeners[e];t&&(__webpack_require__.g.callMachineToDailyJsEmitter.removeListener(\"message\",t),__webpack_require__.g.dailyJsToCallMachineEmitter.removeListener(\"message\",t),delete this._wrappedListeners[e])}},{key:\"_addListener\",value:function(e,t,n,r,i){var o=this,s=function(t){if(t.callClientId===n){if(t.callbackStamp&&o._messageCallbacks[t.callbackStamp]){var i=t.callbackStamp;o._messageCallbacks[i].call(r,t),delete o._messageCallbacks[i]}e.call(r,t)}};this._wrappedListeners[e]=s,t.addListener(\"message\",s)}},{key:\"_sendMessage\",value:function(e,t,n,r,i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(o.callClientId=n,r){var s=N();this._messageCallbacks[s]=r,o.callbackStamp=s}t.emit(\"message\",o)}}])}(),Is=\"replace\",xs=\"shallow-merge\",Ls=[Is,xs];var Ds=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.data,i=n.mergeStrategy,o=void 0===i?Is:i;t(this,e),e._validateMergeStrategy(o),e._validateData(r,o),this.mergeStrategy=o,this.data=r}return o(e,[{key:\"isNoOp\",value:function(){return e.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:\"isNoOpUpdate\",value:function(e,t){return 0===Object.keys(e).length&&t===xs}},{key:\"_validateMergeStrategy\",value:function(e){if(!Ls.includes(e))throw Error(\"Unrecognized mergeStrategy provided. Options are: [\".concat(Ls,\"]\"))}},{key:\"_validateData\",value:function(e,t){if(!function(e){if(null==e||\"object\"!==n(e))return!1;var t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}(e))throw Error(\"Meeting session data must be a plain (map-like) object\");var r;try{if(r=JSON.stringify(e),t===Is){var i=JSON.parse(r);S(i,e)||console.warn(\"The meeting session data provided will be modified when serialized.\",i,e)}else if(t===xs)for(var o in e)if(Object.hasOwnProperty.call(e,o)&&void 0!==e[o]){var s=JSON.parse(JSON.stringify(e[o]));S(e[o],s)||console.warn(\"At least one key in the meeting session data provided will be modified when serialized.\",s,e[o])}}catch(e){throw Error(\"Meeting session data must be serializable to JSON: \".concat(e))}if(r.length>qo)throw Error(\"Meeting session data is too large (\".concat(r.length,\" characters). Maximum size suppported is \").concat(qo,\".\"))}}])}();function Ns(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ns=function(){return!!e})()}function Rs(e){var t=\"function\"==typeof Map?new Map:void 0;return Rs=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf(\"[native code]\")}catch(t){return\"function\"==typeof e}}(e))return e;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Ns())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&c(i,n.prototype),i}(e,arguments,a(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},Rs(e)}function Fs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fs=function(){return!!e})()}function Bs(e){var t,n=null===(t=window._daily)||void 0===t?void 0:t.pendings;if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}var Us=function(){return o((function e(n){t(this,e),this._currentLoad=null,this._callClientId=n}),[{key:\"load\",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void r(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Vs(n,(function(){r(!1)}),(function(e,n){n||Bs(t._callClientId),i(e,n)})),this._currentLoad.start()}},{key:\"cancel\",value:function(){this._currentLoad&&this._currentLoad.cancel(),Bs(this._callClientId)}},{key:\"loaded\",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])}(),Vs=function(){return o((function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;t(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i}),[{key:\"start\",value:function(){var e=this;if(!this._currentAttempt){var t=function(n){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(n,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout((function(){e._currentAttempt.cancelled||(e._currentAttempt=new qs(e._dailyConfig,e._successCallback,t),e._currentAttempt.start())}),3e3))};this._currentAttempt=new qs(this._dailyConfig,this._successCallback,t),this._currentAttempt.start()}}},{key:\"cancel\",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:\"cancelled\",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:\"succeeded\",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])}(),Js=function(){function e(){return t(this,e),n=this,i=arguments,r=a(r=e),s(n,Fs()?Reflect.construct(r,i||[],a(n).constructor):r.apply(n,i));var n,r,i}return l(e,Rs(Error)),o(e)}(),$s=2e4,qs=function(){return o((function e(n,r,i){t(this,e),this._loadAttemptImpl=is()||!n.avoidEval?new zs(n,r,i):new Ws(n,r,i)}),[{key:\"start\",value:(e=p((function*(){return this._loadAttemptImpl.start()})),function(){return e.apply(this,arguments)})},{key:\"cancel\",value:function(){this._loadAttemptImpl.cancel()}},{key:\"cancelled\",get:function(){return this._loadAttemptImpl.cancelled}},{key:\"succeeded\",get:function(){return this._loadAttemptImpl.succeeded}}]);var e}(),zs=function(){return o((function e(n,r,i){t(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=\"undefined\"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i}),[{key:\"start\",value:(i=p((function*(){var e=B(this._dailyConfig);!(yield this._tryLoadFromIOSCache(e))&&this._loadFromNetwork(e)})),function(){return i.apply(this,arguments)})},{key:\"cancel\",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:\"_tryLoadFromIOSCache\",value:(r=p((function*(e){if(!this._iosCache)return!1;try{var t=yield this._iosCache.get(e);return!!this.cancelled||!!t&&(t.code?(Function('\"use strict\";'+t.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=t.refetchHeaders,!1))}catch(e){return!1}})),function(e){return r.apply(this,arguments)})},{key:\"_loadFromNetwork\",value:(n=p((function*(e){var t=this;this._networkTimeout=setTimeout((function(){t._networkTimedOut=!0,t._failureCallback({msg:\"Timed out (>\".concat($s,\" ms) when loading call object bundle \").concat(e),type:\"timeout\"})}),$s);try{var n=this._refetchHeaders?{headers:this._refetchHeaders}:{},r=yield fetch(e,n);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Js;var i=yield this._getBundleCodeFromResponse(e,r);if(this.cancelled)throw new Js;Function('\"use strict\";'+i)(),this._iosCache&&this._iosCache.set(e,i,r.headers),this.succeeded=!0,this._successCallback()}catch(t){if(clearTimeout(this._networkTimeout),t instanceof Js||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:\"Failed to load call object bundle \".concat(e,\": \").concat(t),type:t.message})}})),function(e){return n.apply(this,arguments)})},{key:\"_getBundleCodeFromResponse\",value:(e=p((function*(e,t){if(t.ok)return yield t.text();if(this._iosCache&&304===t.status)return(yield this._iosCache.renew(e,t.headers)).code;throw new Error(\"Received \".concat(t.status,\" response\"))})),function(t,n){return e.apply(this,arguments)})}]);var e,n,r,i}(),Ws=function(){return o((function e(n,r,i){t(this,e),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=n,this._successCallback=r,this._failureCallback=i,this._attemptId=N(),this._networkTimeout=null,this._scriptElement=null}),[{key:\"start\",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=B(this._dailyConfig);\"object\"===(\"undefined\"==typeof document?\"undefined\":n(document))?this._startLoading(e):this._failureCallback({msg:\"Call object bundle must be loaded in a DOM/web context\",type:\"missing context\"})}},{key:\"cancel\",value:function(){this._stopLoading(),this.cancelled=!0}},{key:\"_startLoading\",value:function(e){var t=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout((function(){t._stopLoading(),t._failureCallback({msg:\"Timed out (>\".concat($s,\" ms) when loading call object bundle \").concat(e),type:\"timeout\"})}),$s);var n=document.getElementsByTagName(\"head\")[0],r=document.createElement(\"script\");this._scriptElement=r,r.onload=function(){t._stopLoading(),t.succeeded=!0,t._successCallback()},r.onerror=function(e){t._stopLoading(),t._failureCallback({msg:\"Failed to load call object bundle \".concat(e.target.src),type:e.message})},r.src=e,n.appendChild(r)}},{key:\"_stopLoading\",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:\"_signUpForCallMachineLoadWaitlist\",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:\"_withdrawFromCallMachineLoadWaitlist\",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])}(),Hs=function(e,t,n){return!0===Ks(e.local,t,n)},Gs=function(e,t,n){return e.local.streams&&e.local.streams[t]&&e.local.streams[t].stream&&e.local.streams[t].stream[\"get\".concat(\"video\"===n?\"Video\":\"Audio\",\"Tracks\")]()[0]},Qs=function(e,t,n,r){var i=Ys(e,t,n,r);return i&&i.pendingTrack},Ks=function(e,t,n){if(!e)return!1;var r=function(e){switch(e){case\"avatar\":return!0;case\"staged\":return e;default:return!!e}},i=e.public.subscribedTracks;return i&&i[t]?-1===[\"cam-audio\",\"cam-video\",\"screen-video\",\"screen-audio\",\"rmpAudio\",\"rmpVideo\"].indexOf(n)&&i[t].custom?[!0,\"staged\"].includes(i[t].custom)?r(i[t].custom):r(i[t].custom[n]):r(i[t][n]):!i||r(i.ALL)},Ys=function(e,t,n,r){var i=Object.values(e.streams||{}).filter((function(e){return e.participantId===t&&e.type===n&&e.pendingTrack&&e.pendingTrack.kind===r})).sort((function(e,t){return new Date(t.starttime)-new Date(e.starttime)}));return i&&i[0]},Xs=function(e,t){var n=e.local.public.customTracks;if(n&&n[t])return n[t].track};function Zs(e,t){for(var n=t.getState(),r=0,i=[\"cam\",\"screen\"];r<i.length;r++)for(var o=i[r],s=0,a=[\"video\",\"audio\"];s<a.length;s++){var c=a[s],l=\"cam\"===o?c:\"screen\".concat(c.charAt(0).toUpperCase()+c.slice(1)),u=e.tracks[l];if(u){var d=e.local?Gs(n,o,c):Qs(n,e.session_id,o,c);\"playable\"===u.state&&(u.track=d),u.persistentTrack=d}}}function ea(e,t){try{var n=t.getState();for(var r in e.tracks)if(!ta(r)){var i=e.tracks[r].kind;if(i){var o=e.tracks[r];if(o){var s=e.local?Xs(n,r):Qs(n,e.session_id,r,i);\"playable\"===o.state&&(e.tracks[r].track=s),o.persistentTrack=s}}else console.error(\"unknown type for custom track\")}}catch(e){console.error(e)}}function ta(e){return[\"video\",\"audio\",\"screenVideo\",\"screenAudio\"].includes(e)}function na(e,t,n){var r=n.getState();if(e.local){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(e){}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(e){}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){}}else{var i=!0;try{var o=r.participants[e.session_id];o&&o.public&&o.public.rtcType&&\"peer-to-peer\"===o.public.rtcType.impl&&o.private&&![\"connected\",\"completed\"].includes(o.private.peeringState)&&(i=!1)}catch(e){console.error(e)}if(!i)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{r.streams;if(e.audio&&Hs(r,e.session_id,\"cam-audio\")){var s=Qs(r,e.session_id,\"cam\",\"audio\");s&&(t&&t.audioTrack&&t.audioTrack.id===s.id?e.audioTrack=s:s.muted||(e.audioTrack=s)),e.audioTrack||(e.audio=!1)}if(e.video&&Hs(r,e.session_id,\"cam-video\")){var a=Qs(r,e.session_id,\"cam\",\"video\");a&&(t&&t.videoTrack&&t.videoTrack.id===a.id?e.videoTrack=a:a.muted||(e.videoTrack=a)),e.videoTrack||(e.video=!1)}if(e.screen&&Hs(r,e.session_id,\"screen-audio\")){var c=Qs(r,e.session_id,\"screen\",\"audio\");c&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===c.id?e.screenAudioTrack=c:c.muted||(e.screenAudioTrack=c))}if(e.screen&&Hs(r,e.session_id,\"screen-video\")){var l=Qs(r,e.session_id,\"screen\",\"video\");l&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===l.id?e.screenVideoTrack=l:l.muted||(e.screenVideoTrack=l))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){console.error(\"unexpected error matching up tracks\",e)}}}function ra(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if(\"string\"==typeof e)return ia(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ia(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oa=new Map,sa=null;function aa(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if(\"string\"==typeof e)return ca(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var la=new Map,ua=null;function da(e){ha()?function(e){oa.has(e)||(oa.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(t){oa.has(e)&&(oa.get(e).lastDevicesString=JSON.stringify(t),sa||(sa=function(){var e=p((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=ra(oa.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==oa.get(r).lastDevicesString&&(oa.get(r).lastDevicesString=i,r(t))}}catch(e){n.e(e)}finally{n.f()}}));return function(){return e.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener(\"devicechange\",sa)))})).catch((function(){})))}(e):function(e){la.has(e)||(la.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(t){la.has(e)&&(la.get(e).lastDevicesString=JSON.stringify(t),ua||(ua=setInterval(p((function*(){var e,t=yield navigator.mediaDevices.enumerateDevices(),n=aa(la.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=JSON.stringify(t);i!==la.get(r).lastDevicesString&&(la.get(r).lastDevicesString=i,r(t))}}catch(e){n.e(e)}finally{n.f()}})),3e3)))})))}(e)}function pa(e){ha()?function(e){oa.has(e)&&(oa.delete(e),0===oa.size&&sa&&(navigator.mediaDevices.removeEventListener(\"devicechange\",sa),sa=null))}(e):function(e){la.has(e)&&(la.delete(e),0===la.size&&ua&&(clearInterval(ua),ua=null))}(e)}function ha(){var e;return is()||void 0!==(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.ondevicechange)}var fa=new Set;function va(e,t){var n=t.isLocalScreenVideo;return e&&\"live\"===e.readyState&&!function(e,t){return(!t.isLocalScreenVideo||\"Chrome\"!==ms())&&e.muted&&!fa.has(e.id)}(e,{isLocalScreenVideo:n})}function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ya=Object.freeze({VIDEO:\"video\",AUDIO:\"audio\",SCREEN_VIDEO:\"screenVideo\",SCREEN_AUDIO:\"screenAudio\",CUSTOM_VIDEO:\"customVideo\",CUSTOM_AUDIO:\"customAudio\"}),ba=Object.freeze({PARTICIPANTS:\"participants\",STREAMING:\"streaming\",TRANSCRIPTION:\"transcription\"}),_a=Object.values(ya),wa=[\"v\",\"a\",\"sv\",\"sa\",\"cv\",\"ca\"];Object.freeze(_a.reduce((function(e,t,n){return e[t]=wa[n],e}),{})),Object.freeze(wa.reduce((function(e,t,n){return e[t]=_a[n],e}),{}));var Sa=[ya.VIDEO,ya.AUDIO,ya.SCREEN_VIDEO,ya.SCREEN_AUDIO],ka=Object.values(ba),Ma=[\"p\",\"s\",\"t\"];Object.freeze(ka.reduce((function(e,t,n){return e[t]=Ma[n],e}),{})),Object.freeze(Ma.reduce((function(e,t,n){return e[t]=ka[n],e}),{}));var Ca=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.base,i=n.byUserId,o=n.byParticipantId;t(this,e),this.base=r,this.byUserId=i,this.byParticipantId=o}return o(e,[{key:\"clone\",value:function(){var t=new e;if(this.base instanceof Ea?t.base=this.base.clone():t.base=this.base,void 0!==this.byUserId)for(var n in t.byUserId={},this.byUserId){var r=this.byUserId[n];t.byUserId[n]=r instanceof Ea?r.clone():r}if(void 0!==this.byParticipantId)for(var i in t.byParticipantId={},this.byParticipantId){var o=this.byParticipantId[i];t.byParticipantId[i]=o instanceof Ea?o.clone():o}return t}},{key:\"toJSONObject\",value:function(){var e={};if(\"boolean\"==typeof this.base?e.base=this.base:this.base instanceof Ea&&(e.base=this.base.toJSONObject()),void 0!==this.byUserId)for(var t in e.byUserId={},this.byUserId){var n=this.byUserId[t];e.byUserId[t]=n instanceof Ea?n.toJSONObject():n}if(void 0!==this.byParticipantId)for(var r in e.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[r];e.byParticipantId[r]=i instanceof Ea?i.toJSONObject():i}return e}},{key:\"toMinifiedJSONObject\",value:function(){var e={};if(void 0!==this.base&&(\"boolean\"==typeof this.base?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),void 0!==this.byUserId)for(var t in e.u={},this.byUserId){var n=this.byUserId[t];e.u[t]=\"boolean\"==typeof n?n:n.toMinifiedJSONObject()}if(void 0!==this.byParticipantId)for(var r in e.p={},this.byParticipantId){var i=this.byParticipantId[r];e.p[r]=\"boolean\"==typeof i?i:i.toMinifiedJSONObject()}return e}},{key:\"normalize\",value:function(){return this.base instanceof Ea&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map((function(e){var t=f(e,2),n=t[0],r=t[1];return[n,r instanceof Ea?r.normalize():r]})))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map((function(e){var t=f(e,2),n=t[0],r=t[1];return[n,r instanceof Ea?r.normalize():r]})))),this}}],[{key:\"fromJSONObject\",value:function(t){var n,r,i;if(void 0!==t.base&&(n=\"boolean\"==typeof t.base?t.base:Ea.fromJSONObject(t.base)),void 0!==t.byUserId)for(var o in r={},t.byUserId){var s=t.byUserId[o];r[o]=\"boolean\"==typeof s?s:Ea.fromJSONObject(s)}if(void 0!==t.byParticipantId)for(var a in i={},t.byParticipantId){var c=t.byParticipantId[a];i[a]=\"boolean\"==typeof c?c:Ea.fromJSONObject(c)}return new e({base:n,byUserId:r,byParticipantId:i})}},{key:\"fromMinifiedJSONObject\",value:function(t){var n,r,i;if(void 0!==t.b&&(n=\"boolean\"==typeof t.b?t.b:Ea.fromMinifiedJSONObject(t.b)),void 0!==t.u)for(var o in r={},t.u){var s=t.u[o];r[o]=\"boolean\"==typeof s?s:Ea.fromMinifiedJSONObject(s)}if(void 0!==t.p)for(var a in i={},t.p){var c=t.p[a];i[a]=\"boolean\"==typeof c?c:Ea.fromMinifiedJSONObject(c)}return new e({base:n,byUserId:r,byParticipantId:i})}},{key:\"validateJSONObject\",value:function(e){if(\"object\"!==n(e))return[!1,\"canReceive must be an object\"];for(var t=[\"base\",\"byUserId\",\"byParticipantId\"],r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(!t.includes(o))return[!1,\"canReceive can only contain keys (\".concat(t.join(\", \"),\")\")];if(\"base\"===o){var s=f(Ea.validateJSONObject(e.base,!0),2),a=s[0],c=s[1];if(!a)return[!1,c]}else{if(\"object\"!==n(e[o]))return[!1,\"invalid (non-object) value for field '\".concat(o,\"' in canReceive\")];for(var l=0,u=Object.values(e[o]);l<u.length;l++){var d=u[l],p=f(Ea.validateJSONObject(d),2),h=p[0],v=p[1];if(!h)return[!1,v]}}}return[!0]}}])}(),Ea=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.video,i=n.audio,o=n.screenVideo,s=n.screenAudio,a=n.customVideo,c=n.customAudio;t(this,e),this.video=r,this.audio=i,this.screenVideo=o,this.screenAudio=s,this.customVideo=a,this.customAudio=c}return o(e,[{key:\"clone\",value:function(){var t=new e;return void 0!==this.video&&(t.video=this.video),void 0!==this.audio&&(t.audio=this.audio),void 0!==this.screenVideo&&(t.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(t.screenAudio=this.screenAudio),void 0!==this.customVideo&&(t.customVideo=ma({},this.customVideo)),void 0!==this.customAudio&&(t.customAudio=ma({},this.customAudio)),t}},{key:\"toJSONObject\",value:function(){var e={};return void 0!==this.video&&(e.video=this.video),void 0!==this.audio&&(e.audio=this.audio),void 0!==this.screenVideo&&(e.screenVideo=this.screenVideo),void 0!==this.screenAudio&&(e.screenAudio=this.screenAudio),void 0!==this.customVideo&&(e.customVideo=ma({},this.customVideo)),void 0!==this.customAudio&&(e.customAudio=ma({},this.customAudio)),e}},{key:\"toMinifiedJSONObject\",value:function(){var e={};return void 0!==this.video&&(e.v=this.video),void 0!==this.audio&&(e.a=this.audio),void 0!==this.screenVideo&&(e.sv=this.screenVideo),void 0!==this.screenAudio&&(e.sa=this.screenAudio),void 0!==this.customVideo&&(e.cv=ma({},this.customVideo)),void 0!==this.customAudio&&(e.ca=ma({},this.customAudio)),e}},{key:\"normalize\",value:function(){function e(e,t){return e&&1===Object.keys(e).length&&e[\"*\"]===t}return!(!0!==this.video||!0!==this.audio||!0!==this.screenVideo||!0!==this.screenAudio||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(!1!==this.video||!1!==this.audio||!1!==this.screenVideo||!1!==this.screenAudio||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:\"fromBoolean\",value:function(t){return new e({video:t,audio:t,screenVideo:t,screenAudio:t,customVideo:{\"*\":t},customAudio:{\"*\":t}})}},{key:\"fromJSONObject\",value:function(t){return new e({video:t.video,audio:t.audio,screenVideo:t.screenVideo,screenAudio:t.screenAudio,customVideo:void 0!==t.customVideo?ma({},t.customVideo):void 0,customAudio:void 0!==t.customAudio?ma({},t.customAudio):void 0})}},{key:\"fromMinifiedJSONObject\",value:function(t){return new e({video:t.v,audio:t.a,screenVideo:t.sv,screenAudio:t.sa,customVideo:t.cv,customAudio:t.ca})}},{key:\"validateJSONObject\",value:function(e,t){if(\"boolean\"==typeof e)return[!0];if(\"object\"!==n(e))return[!1,\"invalid (non-object, non-boolean) value in canReceive\"];for(var r=Object.keys(e),i=0,o=r;i<o.length;i++){var s=o[i];if(!_a.includes(s))return[!1,\"invalid media type '\".concat(s,\"' in canReceive\")];if(Sa.includes(s)){if(\"boolean\"!=typeof e[s])return[!1,\"invalid (non-boolean) value for media type '\".concat(s,\"' in canReceive\")]}else{if(\"object\"!==n(e[s]))return[!1,\"invalid (non-object) value for media type '\".concat(s,\"' in canReceive\")];for(var a=0,c=Object.values(e[s]);a<c.length;a++){if(\"boolean\"!=typeof c[a])return[!1,\"invalid (non-boolean) value for entry within '\".concat(s,\"' in canReceive\")]}if(t&&void 0===e[s][\"*\"])return[!1,'canReceive \"base\" permission must specify \"*\" as an entry within \\''.concat(s,\"'\")]}}return t&&r.length!==_a.length?[!1,'canReceive \"base\" permission must specify all media types: '.concat(_a.join(\", \"),\" (or be set to a boolean shorthand)\")]:[!0]}}])}(),Ta=[\"result\"],Oa=[\"preserveIframe\"];function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ja(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ja=function(){return!!e})()}function Ia(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if(\"string\"==typeof e)return xa(e,t);var n={}.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xa(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var La={};var Da=\"video\",Na=\"voice\",Ra=is()?{data:{}}:{data:{},topology:\"none\"},Fa={present:0,hidden:0},Ba={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Ua=Object.keys(Ba),Va=[\"state\",\"volume\",\"simulcastEncodings\"],Ja={androidInCallNotification:{title:\"string\",subtitle:\"string\",iconName:\"string\",disableForCustomOverride:\"boolean\"},disableAutoDeviceManagement:{audio:\"boolean\",video:\"boolean\"}},$a={id:{iconPath:\"string\",iconPathDarkMode:\"string\",label:\"string\",tooltip:\"string\",visualState:\"'default' | 'sidebar-open' | 'active'\"}},qa={id:{allow:\"string\",controlledBy:\"'*' | 'owners' | string[]\",csp:\"string\",iconURL:\"string\",label:\"string\",loading:\"'eager' | 'lazy'\",location:\"'main' | 'sidebar'\",name:\"string\",referrerPolicy:\"string\",sandbox:\"string\",src:\"string\",srcdoc:\"string\",shared:\"string[] | 'owners' | boolean\"}},za={customIntegrations:{validate:vc,help:hc()},customTrayButtons:{validate:fc,help:\"customTrayButtons should be a dictionary of the type \".concat(JSON.stringify($a))},url:{validate:function(e){return\"string\"==typeof e},help:\"url should be a string\"},baseUrl:{validate:function(e){return\"string\"==typeof e},help:\"baseUrl should be a string\"},token:{validate:function(e){return\"string\"==typeof e},help:\"token should be a string\",queryString:\"t\"},dailyConfig:{validate:function(e,t){try{return t.validateDailyConfig(e),!0}catch(e){console.error(\"Failed to validate dailyConfig\",e)}return!1},help:\"Unsupported dailyConfig. Check error logs for detailed info.\"},reactNativeConfig:{validate:function(e){return gc(e,Ja)},help:\"reactNativeConfig should look like \".concat(JSON.stringify(Ja),\", all fields optional\")},lang:{validate:function(e){return[\"da\",\"de\",\"en-us\",\"en\",\"es\",\"fi\",\"fr\",\"it\",\"jp\",\"ka\",\"nl\",\"no\",\"pl\",\"pt\",\"pt-BR\",\"ru\",\"sv\",\"tr\",\"user\"].includes(e)},help:\"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user\"},userName:!0,userData:{validate:function(e){try{return ic(e),!0}catch(e){return console.error(e),!1}},help:\"invalid userData type provided\"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){if(\"boolean\"==typeof e)return t._preloadCache.allowLocalVideo=e,!0;var n;if(e instanceof MediaStreamTrack)t._sharedTracks.videoTrack=e,n={customTrack:Qo};else{if(delete t._sharedTracks.videoTrack,\"string\"!=typeof e)return console.error(\"videoSource must be a MediaStreamTrack, boolean, or a string\"),!1;n={deviceId:e}}return t._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(e,t){if(\"boolean\"==typeof e)return t._preloadCache.allowLocalAudio=e,!0;var n;if(e instanceof MediaStreamTrack)t._sharedTracks.audioTrack=e,n={customTrack:Qo};else{if(delete t._sharedTracks.audioTrack,\"string\"!=typeof e)return console.error(\"audioSource must be a MediaStreamTrack, boolean, or a string\"),!1;n={deviceId:e}}return t._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=[\"accent\",\"accentText\",\"background\",\"backgroundAccent\",\"baseText\",\"border\",\"mainAreaBg\",\"mainAreaBgAccent\",\"mainAreaText\",\"supportiveText\"],r=function(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!t.includes(i))return console.error('unsupported color \"'.concat(i,'\". Valid colors: ').concat(t.join(\", \"))),!1;if(!e[i].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error(\"\".concat(i,' theme color should be provided in valid hex color format. Received: \"').concat(e[i],'\"')),!1}return!0};return\"object\"===n(e)&&(\"light\"in e&&\"dark\"in e||\"colors\"in e)?\"light\"in e&&\"dark\"in e?\"colors\"in e.light?\"colors\"in e.dark?r(e.light.colors)&&r(e.dark.colors):(console.error('Dark theme is missing \"colors\" property.',e),!1):(console.error('Light theme is missing \"colors\" property.',e),!1):r(e.colors):(console.error('Theme must contain either both \"light\" and \"dark\" properties, or \"colors\".',e),!1)},help:\"unsupported theme configuration. Check error logs for detailed info.\"},layoutConfig:{validate:function(e){if(\"grid\"in e){var t=e.grid;if(\"maxTilesPerPage\"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error(\"grid.maxTilesPerPage should be an integer. You passed \".concat(t.maxTilesPerPage,\".\")),!1;if(t.maxTilesPerPage>49)return console.error(\"grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case.\"),!1}if(\"minTilesPerPage\"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error(\"grid.minTilesPerPage should be an integer. You passed \".concat(t.minTilesPerPage,\".\")),!1;if(t.minTilesPerPage<1)return console.error(\"grid.minTilesPerPage can't be lower than 1.\"),!1;if(\"maxTilesPerPage\"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error(\"grid.minTilesPerPage can't be higher than grid.maxTilesPerPage.\"),!1}}return!0},help:\"unsupported layoutConfig. Check error logs for detailed info.\"},receiveSettings:{validate:function(e){return oc(e,{allowAllParticipantsKey:!1})},help:pc({allowAllParticipantsKey:!1})},sendSettings:{validate:function(e,t){return!!function(e,t){try{return t.validateUpdateSendSettings(e),!0}catch(e){return console.error(\"Failed to validate send settings\",e),!1}}(e,t)&&(t._preloadCache.sendSettings=e,!0)},help:\"Invalid sendSettings provided. Check error logs for detailed info.\"},inputSettings:{validate:function(e,t){var n;return!!sc(e)&&(t._inputSettings||(t._inputSettings={}),ac(e,null===(n=t.properties)||void 0===n?void 0:n.dailyConfig,t._sharedTracks),t._updatePreloadCacheInputSettings(e,!0),!0)},help:dc()},layout:{validate:function(e){return\"custom-v1\"===e||\"browser\"===e||\"none\"===e},help:'layout may only be set to \"custom-v1\"',queryString:\"layout\"},emb:{queryString:\"emb\"},embHref:{queryString:\"embHref\"},dailyJsVersion:{queryString:\"dailyJsVersion\"},proxy:{queryString:\"proxy\"},strictMode:!0,allowMultipleCallInstances:!0},Wa={styles:{validate:function(e){for(var t in e)if(\"cam\"!==t&&\"screen\"!==t)return!1;if(e.cam)for(var n in e.cam)if(\"div\"!==n&&\"video\"!==n)return!1;if(e.screen)for(var r in e.screen)if(\"div\"!==r&&\"video\"!==r)return!1;return!0},help:\"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }\"},setSubscribedTracks:{validate:function(e,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,\"staged\"];if(n.includes(e)||!is()&&\"avatar\"===e)return!0;var r=[\"audio\",\"video\",\"screenAudio\",\"screenVideo\",\"rmpAudio\",\"rmpVideo\"],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var o in e)if(\"custom\"===o){if(!n.includes(e[o])&&!i(e[o],!0))return!1}else{var s=!t&&!r.includes(o),a=!n.includes(e[o]);if(s||a)return!1}return!0};return i(e)},help:\"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: \"+\"true\".concat(is()?\"\":\" | 'avatar'\",\" | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }\")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(e){return!1===e},help:\"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares\"},eject:!0,updatePermissions:{validate:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=f(n[t],2),i=r[0],o=r[1];switch(i){case\"hasPresence\":if(\"boolean\"!=typeof o)return!1;break;case\"canSend\":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var s,a=[\"video\",\"audio\",\"screenVideo\",\"screenAudio\",\"customVideo\",\"customAudio\"],c=Ia(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(!a.includes(l))return!1}}catch(e){c.e(e)}finally{c.f()}}else if(\"boolean\"!=typeof o)return!1;(o instanceof Array||Array.isArray(o))&&(e.canSend=new Set(o));break;case\"canReceive\":var u=f(Ca.validateJSONObject(o),2),d=u[0],p=u[1];if(!d)return console.error(p),!1;break;case\"canAdmin\":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var h,v=[\"participants\",\"streaming\",\"transcription\"],g=Ia(o);try{for(g.s();!(h=g.n()).done;){var m=h.value;if(!v.includes(m))return!1}}catch(e){g.e(e)}finally{g.f()}}else if(\"boolean\"!=typeof o)return!1;(o instanceof Array||Array.isArray(o))&&(e.canAdmin=new Set(o));break;default:return!1}}return!0},help:\"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription).\"}};Promise.any||(Promise.any=function(){var e=p((function*(e){return new Promise((function(t,n){var r=[];e.forEach((function(i){return Promise.resolve(i).then((function(e){t(e)})).catch((function(t){r.push(t),r.length===e.length&&n(r)}))}))}))}));return function(t){return e.apply(this,arguments)}}());var Ha=function(){function r(e){var n,i,o,c,l,d,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,r),o=this,c=a(c=r),u(i=s(o,ja()?Reflect.construct(c,l||[],a(o).constructor):c.apply(o,l)),\"startListeningForDeviceChanges\",(function(){da(i.handleDeviceChange)})),u(i,\"stopListeningForDeviceChanges\",(function(){pa(i.handleDeviceChange)})),u(i,\"handleDeviceChange\",(function(e){e=e.map((function(e){return JSON.parse(JSON.stringify(e))})),i.emitDailyJSEvent({action:\"available-devices-updated\",availableDevices:e})})),u(i,\"handleNativeAppStateChange\",function(){var e=p((function*(e){if(\"destroyed\"===e)return console.warn(\"App has been destroyed before leaving the meeting. Cleaning up all the resources!\"),void(yield i.destroy());var t=\"active\"===e;i.disableReactNativeAutoDeviceManagement(\"video\")||(t?i.camUnmutedBeforeLosingNativeActiveState&&i.setLocalVideo(!0):(i.camUnmutedBeforeLosingNativeActiveState=i.localVideo(),i.camUnmutedBeforeLosingNativeActiveState&&i.setLocalVideo(!1)))}));return function(t){return e.apply(this,arguments)}}()),u(i,\"handleNativeAudioFocusChange\",(function(e){i.disableReactNativeAutoDeviceManagement(\"audio\")||(i._hasNativeAudioFocus=e,i.toggleParticipantAudioBasedOnNativeAudioFocus(),i._hasNativeAudioFocus?i.micUnmutedBeforeLosingNativeAudioFocus&&i.setLocalAudio(!0):(i.micUnmutedBeforeLosingNativeAudioFocus=i.localAudio(),i.setLocalAudio(!1)))})),u(i,\"handleNativeSystemScreenCaptureStop\",(function(){i.stopScreenShare()})),i.strictMode=void 0===h.strictMode||h.strictMode,i.allowMultipleCallInstances=null!==(n=h.allowMultipleCallInstances)&&void 0!==n&&n,Object.keys(La).length&&(i._logDuplicateInstanceAttempt(),!i.allowMultipleCallInstances)){if(i.strictMode)throw new Error(\"Duplicate DailyIframe instances are not allowed\");console.warn(\"Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`\")}if(window._daily||(window._daily={pendings:[],instances:{}}),i.callClientId=N(),La[(d=i).callClientId]=d,window._daily.instances[i.callClientId]={},i._sharedTracks={},window._daily.instances[i.callClientId].tracks=i._sharedTracks,h.dailyJsVersion=r.version(),i._iframe=e,i._callObjectMode=\"none\"===h.layout&&!i._iframe,i._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},void 0!==h.showLocalVideo?i._callObjectMode?console.error(\"showLocalVideo is not available in call object mode\"):i._showLocalVideo=!!h.showLocalVideo:i._showLocalVideo=!0,void 0!==h.showParticipantsBar?i._callObjectMode?console.error(\"showParticipantsBar is not available in call object mode\"):i._showParticipantsBar=!!h.showParticipantsBar:i._showParticipantsBar=!0,void 0!==h.customIntegrations?i._callObjectMode?console.error(\"customIntegrations is not available in call object mode\"):i._customIntegrations=h.customIntegrations:i._customIntegrations={},void 0!==h.customTrayButtons?i._callObjectMode?console.error(\"customTrayButtons is not available in call object mode\"):i._customTrayButtons=h.customTrayButtons:i._customTrayButtons={},void 0!==h.activeSpeakerMode?i._callObjectMode?console.error(\"activeSpeakerMode is not available in call object mode\"):i._activeSpeakerMode=!!h.activeSpeakerMode:i._activeSpeakerMode=!1,h.receiveSettings?i._callObjectMode?i._receiveSettings=h.receiveSettings:console.error(\"receiveSettings is only available in call object mode\"):i._receiveSettings={},i.validateProperties(h),i.properties=Aa({},h),i._inputSettings||(i._inputSettings={}),i._callObjectLoader=i._callObjectMode?new Us(i.callClientId):null,i._callState=ti,i._isPreparingToJoin=!1,i._accessState={access:fi},i._meetingSessionSummary={},i._finalSummaryOfPrevSession={},i._meetingSessionState=_c(Ra,i._callObjectMode),i._nativeInCallAudioMode=Da,i._participants={},i._isScreenSharing=!1,i._participantCounts=Fa,i._rmpPlayerState={},i._waitingParticipants={},i._network={threshold:\"good\",quality:100,networkState:\"unknown\",stats:{}},i._activeSpeaker={},i._localAudioLevel=0,i._isLocalAudioLevelObserverRunning=!1,i._remoteParticipantsAudioLevel={},i._isRemoteParticipantsAudioLevelObserverRunning=!1,i._maxAppMessageSize=$o,i._messageChannel=is()?new js:new Os,i._iframe&&(i._iframe.requestFullscreen?i._iframe.addEventListener(\"fullscreenchange\",(function(){document.fullscreenElement===i._iframe?(i.emitDailyJSEvent({action:Io}),i.sendMessageToCallMachine({action:Io})):(i.emitDailyJSEvent({action:xo}),i.sendMessageToCallMachine({action:xo}))})):i._iframe.webkitRequestFullscreen&&i._iframe.addEventListener(\"webkitfullscreenchange\",(function(){document.webkitFullscreenElement===i._iframe?(i.emitDailyJSEvent({action:Io}),i.sendMessageToCallMachine({action:Io})):(i.emitDailyJSEvent({action:xo}),i.sendMessageToCallMachine({action:xo}))}))),is()){var f=i.nativeUtils();f.addAudioFocusChangeListener&&f.removeAudioFocusChangeListener&&f.addAppStateChangeListener&&f.removeAppStateChangeListener&&f.addSystemScreenCaptureStopListener&&f.removeSystemScreenCaptureStopListener||console.warn(\"expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native\"),i._hasNativeAudioFocus=!0,f.addAudioFocusChangeListener(i.handleNativeAudioFocusChange),f.addAppStateChangeListener(i.handleNativeAppStateChange),f.addSystemScreenCaptureStopListener(i.handleNativeSystemScreenCaptureStop)}return i._callObjectMode&&i.startListeningForDeviceChanges(),i._messageChannel.addListenerForMessagesFromCallMachine(i.handleMessageFromCallMachine,i.callClientId,i),i}return l(r,b),o(r,[{key:\"destroy\",value:(ee=p((function*(){var e;try{yield this.leave()}catch(e){}var t=this._iframe;if(t){var n=t.parentElement;n&&n.removeChild(t)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),is()){var r=this.nativeUtils();r.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),r.removeAppStateChangeListener(this.handleNativeAppStateChange),r.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:\"call-instance-destroyed\"}),delete La[this.callClientId],(null===(e=window)||void 0===e||null===(e=e._daily)||void 0===e?void 0:e.instances)&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)})),function(){return ee.apply(this,arguments)})},{key:\"isDestroyed\",value:function(){return!!this._destroyed}},{key:\"loadCss\",value:function(e){var t=e.bodyClass,n=e.cssFile,r=e.cssText;return nc(),this.sendMessageToCallMachine({action:\"load-css\",cssFile:this.absoluteUrl(n),bodyClass:t,cssText:r}),this}},{key:\"iframe\",value:function(){return nc(),this._iframe}},{key:\"meetingState\",value:function(){return this._callState}},{key:\"accessState\",value:function(){return ec(this._callObjectMode,\"accessState()\"),this._accessState}},{key:\"participants\",value:function(){return this._participants}},{key:\"participantCounts\",value:function(){return this._participantCounts}},{key:\"waitingParticipants\",value:function(){return ec(this._callObjectMode,\"waitingParticipants()\"),this._waitingParticipants}},{key:\"validateParticipantProperties\",value:function(e,t){for(var n in t){if(!Wa[n])throw new Error(\"unrecognized updateParticipant property \".concat(n));if(Wa[n].validate&&!Wa[n].validate(t[n],this,this._participants[e]))throw new Error(Wa[n].help)}}},{key:\"updateParticipant\",value:function(e,t){return this._participants.local&&this._participants.local.session_id===e&&(e=\"local\"),e&&t&&(this.validateParticipantProperties(e,t),this.sendMessageToCallMachine({action:\"update-participant\",id:e,properties:t})),this}},{key:\"updateParticipants\",value:function(e){var t=this._participants.local&&this._participants.local.session_id;for(var n in e)n===t&&(n=\"local\"),n&&e[n]&&this.validateParticipantProperties(n,e[n]);return this.sendMessageToCallMachine({action:\"update-participants\",participants:e}),this}},{key:\"updateWaitingParticipant\",value:(Z=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ec(this._callObjectMode,\"updateWaitingParticipant()\"),Qa(this._callState,\"updateWaitingParticipant()\"),\"string\"!=typeof t||\"object\"!==n(r))throw new Error(\"updateWaitingParticipant() must take an id string and a updates object\");return new Promise((function(n,i){e.sendMessageToCallMachine({action:\"daily-method-update-waiting-participant\",id:t,updates:r},(function(e){e.error&&i(e.error),e.id||i(new Error(\"unknown error in updateWaitingParticipant()\")),n({id:e.id})}))}))})),function(){return Z.apply(this,arguments)})},{key:\"updateWaitingParticipants\",value:(X=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ec(this._callObjectMode,\"updateWaitingParticipants()\"),Qa(this._callState,\"updateWaitingParticipants()\"),\"object\"!==n(t))throw new Error(\"updateWaitingParticipants() must take a mapping between ids and update objects\");return new Promise((function(n,r){e.sendMessageToCallMachine({action:\"daily-method-update-waiting-participants\",updatesById:t},(function(e){e.error&&r(e.error),e.ids||r(new Error(\"unknown error in updateWaitingParticipants()\")),n({ids:e.ids})}))}))})),function(){return X.apply(this,arguments)})},{key:\"requestAccess\",value:(Y=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.access,r=void 0===n?{level:vi}:n,i=t.name,o=void 0===i?\"\":i;return ec(this._callObjectMode,\"requestAccess()\"),Qa(this._callState,\"requestAccess()\"),new Promise((function(t,n){e.sendMessageToCallMachine({action:\"daily-method-request-access\",access:r,name:o},(function(e){e.error&&n(e.error),e.access||n(new Error(\"unknown error in requestAccess()\")),t({access:e.access,granted:e.granted})}))}))})),function(){return Y.apply(this,arguments)})},{key:\"localAudio\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.audio.state):null}},{key:\"localVideo\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.video.state):null}},{key:\"setLocalAudio\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return\"forceDiscardTrack\"in t&&(is()?(console.warn(\"forceDiscardTrack option not supported in React Native; ignoring\"),t={}):e&&(console.warn(\"forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring\"),t={})),this.sendMessageToCallMachine({action:\"local-audio\",state:e,options:t}),this}},{key:\"localScreenAudio\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:\"localScreenVideo\",value:function(){return this._participants.local?![\"blocked\",\"off\"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:\"updateScreenShare\",value:function(e){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:\"local-screen-update\",options:e}),this;console.warn(\"There is no screen share in progress. Try calling startScreenShare first.\")}},{key:\"setLocalVideo\",value:function(e){return this.sendMessageToCallMachine({action:\"local-video\",state:e}),this}},{key:\"_setAllowLocalAudio\",value:function(e){if(this._preloadCache.allowLocalAudio=e,this._callMachineInitialized)return this.sendMessageToCallMachine({action:\"set-allow-local-audio\",state:e}),this}},{key:\"_setAllowLocalVideo\",value:function(e){if(this._preloadCache.allowLocalVideo=e,this._callMachineInitialized)return this.sendMessageToCallMachine({action:\"set-allow-local-video\",state:e}),this}},{key:\"getReceiveSettings\",value:(K=p((function*(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).showInheritedValues,i=void 0!==r&&r;if(ec(this._callObjectMode,\"getReceiveSettings()\"),!this._callMachineInitialized)return this._receiveSettings;switch(n(e)){case\"string\":return new Promise((function(n){t.sendMessageToCallMachine({action:\"get-single-participant-receive-settings\",id:e,showInheritedValues:i},(function(e){n(e.receiveSettings)}))}));case\"undefined\":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or \"base\"), or there should be no arguments')}})),function(e){return K.apply(this,arguments)})},{key:\"updateReceiveSettings\",value:(Q=p((function*(e){var t=this;if(ec(this._callObjectMode,\"updateReceiveSettings()\"),!oc(e,{allowAllParticipantsKey:!0}))throw new Error(pc({allowAllParticipantsKey:!0}));return Qa(this._callState,\"updateReceiveSettings()\",\"To specify receive settings earlier, use the receiveSettings config property.\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"update-receive-settings\",receiveSettings:e},(function(e){n({receiveSettings:e.receiveSettings})}))}))})),function(e){return Q.apply(this,arguments)})},{key:\"_prepInputSettingsForSharing\",value:function(e,t){if(e){var n={};if(e.audio){var r,i,o;e.audio.settings&&(!Object.keys(e.audio.settings).length&&t||(n.audio={settings:Aa({},e.audio.settings)})),t&&null!==(r=n.audio)&&void 0!==r&&null!==(r=r.settings)&&void 0!==r&&r.customTrack&&(n.audio.settings={customTrack:this._sharedTracks.audioTrack});var s=\"none\"===(null===(i=e.audio.processor)||void 0===i?void 0:i.type)&&(null===(o=e.audio.processor)||void 0===o?void 0:o._isDefaultWhenNone);if(e.audio.processor&&!s){var a=Aa({},e.audio.processor);delete a._isDefaultWhenNone,n.audio=Aa(Aa({},n.audio),{},{processor:a})}}if(e.video){var c,l,u;e.video.settings&&(!Object.keys(e.video.settings).length&&t||(n.video={settings:Aa({},e.video.settings)})),t&&null!==(c=n.video)&&void 0!==c&&null!==(c=c.settings)&&void 0!==c&&c.customTrack&&(n.video.settings={customTrack:this._sharedTracks.videoTrack});var d=\"none\"===(null===(l=e.video.processor)||void 0===l?void 0:l.type)&&(null===(u=e.video.processor)||void 0===u?void 0:u._isDefaultWhenNone);if(e.video.processor&&!d){var p=Aa({},e.video.processor);delete p._isDefaultWhenNone,n.video=Aa(Aa({},n.video),{},{processor:p})}}return n}}},{key:\"getInputSettings\",value:function(){var e=this;return nc(),new Promise((function(t){t(e._getInputSettings())}))}},{key:\"_getInputSettings\",value:function(){var e,t,n,r,i,o,s={processor:{type:\"none\",_isDefaultWhenNone:!0}};this._inputSettings?(e=(null===(n=this._inputSettings)||void 0===n?void 0:n.video)||s,t=(null===(r=this._inputSettings)||void 0===r?void 0:r.audio)||s):(e=(null===(i=this._preloadCache)||void 0===i||null===(i=i.inputSettings)||void 0===i?void 0:i.video)||s,t=(null===(o=this._preloadCache)||void 0===o||null===(o=o.inputSettings)||void 0===o?void 0:o.audio)||s);var a={audio:t,video:e};return this._prepInputSettingsForSharing(a,!0)}},{key:\"_updatePreloadCacheInputSettings\",value:function(e,t){var n=this._inputSettings||{},r={};if(e.video){var i,o,s;if(r.video={},e.video.settings)r.video.settings={},t||e.video.settings.customTrack||null===(s=n.video)||void 0===s||!s.settings?r.video.settings=e.video.settings:r.video.settings=Aa(Aa({},n.video.settings),e.video.settings),Object.keys(r.video.settings).length||delete r.video.settings;else null!==(i=n.video)&&void 0!==i&&i.settings&&(r.video.settings=n.video.settings);e.video.processor?r.video.processor=e.video.processor:null!==(o=n.video)&&void 0!==o&&o.processor&&(r.video.processor=n.video.processor)}else n.video&&(r.video=n.video);if(e.audio){var a,c,l;if(r.audio={},e.audio.settings)r.audio.settings={},t||e.audio.settings.customTrack||null===(l=n.audio)||void 0===l||!l.settings?r.audio.settings=e.audio.settings:r.audio.settings=Aa(Aa({},n.audio.settings),e.audio.settings),Object.keys(r.audio.settings).length||delete r.audio.settings;else null!==(a=n.audio)&&void 0!==a&&a.settings&&(r.audio.settings=n.audio.settings);e.audio.processor?r.audio.processor=e.audio.processor:null!==(c=n.audio)&&void 0!==c&&c.processor&&(r.audio.processor=n.audio.processor)}else n.audio&&(r.audio=n.audio);this._maybeUpdateInputSettings(r)}},{key:\"_devicesFromInputSettings\",value:function(e){var t,n,r=(null==e||null===(t=e.video)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.deviceId)||null,i=(null==e||null===(n=e.audio)||void 0===n||null===(n=n.settings)||void 0===n?void 0:n.deviceId)||null,o=this._preloadCache.outputDeviceId||null;return{camera:r?{deviceId:r}:{},mic:i?{deviceId:i}:{},speaker:o?{deviceId:o}:{}}}},{key:\"updateInputSettings\",value:(G=p((function*(e){var t=this;return nc(),sc(e)?e.video||e.audio?(ac(e,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(e,!0),this._getInputSettings()):new Promise((function(n,r){t.sendMessageToCallMachine({action:\"update-input-settings\",inputSettings:e},(function(i){if(i.error)r(i.error);else{if(i.returnPreloadCache)return t._updatePreloadCacheInputSettings(e,!0),void n(t._getInputSettings());t._maybeUpdateInputSettings(i.inputSettings),n(t._prepInputSettingsForSharing(i.inputSettings,!0))}}))}))):this._getInputSettings():(console.error(dc()),Promise.reject(dc()))})),function(e){return G.apply(this,arguments)})},{key:\"setBandwidth\",value:function(e){var t=e.kbs,n=e.trackConstraints;if(nc(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:\"set-bandwidth\",kbs:t,trackConstraints:n}),this}},{key:\"getDailyLang\",value:function(){var e=this;if(nc(),this._callMachineInitialized)return new Promise((function(t){e.sendMessageToCallMachine({action:\"get-daily-lang\"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))}},{key:\"setDailyLang\",value:function(e){return nc(),this.sendMessageToCallMachine({action:\"set-daily-lang\",lang:e}),this}},{key:\"setProxyUrl\",value:function(e){return this.sendMessageToCallMachine({action:\"set-proxy-url\",proxyUrl:e}),this}},{key:\"setIceConfig\",value:function(e){return this.sendMessageToCallMachine({action:\"set-ice-config\",iceConfig:e}),this}},{key:\"meetingSessionSummary\",value:function(){return[si,ai].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:\"getMeetingSession\",value:(H=p((function*(){var e=this;return console.warn(\"getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately\"),Qa(this._callState,\"getMeetingSession()\"),new Promise((function(t){e.sendMessageToCallMachine({action:\"get-meeting-session\"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return H.apply(this,arguments)})},{key:\"meetingSessionState\",value:function(){return Qa(this._callState,\"meetingSessionState\"),this._meetingSessionState}},{key:\"setMeetingSessionData\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"replace\";ec(this._callObjectMode,\"setMeetingSessionData()\"),Qa(this._callState,\"setMeetingSessionData\");try{!function(e,t){new Ds({data:e,mergeStrategy:t})}(e,t)}catch(e){throw console.error(e),e}try{this.sendMessageToCallMachine({action:\"set-session-data\",data:e,mergeStrategy:t})}catch(e){throw new Error(\"Error setting meeting session data: \".concat(e))}}},{key:\"setUserName\",value:function(e,t){var n=this;return this.properties.userName=e,new Promise((function(r){n.sendMessageToCallMachine({action:\"set-user-name\",name:null!=e?e:\"\",thisMeetingOnly:is()||!!t&&!!t.thisMeetingOnly},(function(e){delete e.action,delete e.callbackStamp,r(e)}))}))}},{key:\"setUserData\",value:(W=p((function*(e){var t=this;try{ic(e)}catch(e){throw console.error(e),e}if(this.properties.userData=e,this._callMachineInitialized)return new Promise((function(n){try{t.sendMessageToCallMachine({action:\"set-user-data\",userData:e},(function(e){delete e.action,delete e.callbackStamp,n(e)}))}catch(e){throw new Error(\"Error setting user data: \".concat(e))}}))})),function(e){return W.apply(this,arguments)})},{key:\"validateAudioLevelInterval\",value:function(e){if(e&&(e<100||\"number\"!=typeof e))throw new Error(\"The interval must be a number greater than or equal to 100 milliseconds.\")}},{key:\"startLocalAudioLevelObserver\",value:function(e){var t=this;if(\"undefined\"==typeof AudioWorkletNode&&!is())throw new Error(\"startLocalAudioLevelObserver() is not supported on this browser\");if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:\"start-local-audio-level-observer\",interval:e},(function(e){t._isLocalAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.localAudioLevelObserver={enabled:!0,interval:e}}},{key:\"isLocalAudioLevelObserverRunning\",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:\"stopLocalAudioLevelObserver\",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:\"stop-local-audio-level-observer\"})}},{key:\"startRemoteParticipantsAudioLevelObserver\",value:function(e){var t=this;if(this.validateAudioLevelInterval(e),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise((function(n,r){t.sendMessageToCallMachine({action:\"start-remote-participants-audio-level-observer\",interval:e},(function(e){t._isRemoteParticipantsAudioLevelObserverRunning=!e.error,e.error?r({error:e.error}):n()}))}));this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:e}}},{key:\"isRemoteParticipantsAudioLevelObserverRunning\",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:\"stopRemoteParticipantsAudioLevelObserver\",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:\"stop-remote-participants-audio-level-observer\"})}},{key:\"startCamera\",value:(z=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ec(this._callObjectMode,\"startCamera()\"),Ya(this._callState,this._isPreparingToJoin,\"startCamera()\",\"Did you mean to use setLocalAudio() and/or setLocalVideo() instead?\"),this.needsLoad())try{yield this.load(t)}catch(e){return Promise.reject(e)}else{if(this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error(\"url in startCamera() is different than the one used in preAuth()\"),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error(\"token in startCamera() is different than the one used in preAuth()\"),Promise.reject()}this.validateProperties(t),this.properties=Aa(Aa({},this.properties),t)}return new Promise((function(t){e._preloadCache.inputSettings=e._prepInputSettingsForSharing(e._inputSettings,!1),e.sendMessageToCallMachine({action:\"start-camera\",properties:Ga(e.properties,e.callClientId),preloadCache:Ga(e._preloadCache,e.callClientId)},(function(e){t({camera:e.camera,mic:e.mic,speaker:e.speaker})}))}))})),function(){return z.apply(this,arguments)})},{key:\"validateCustomTrack\",value:function(e,t,n){if(n&&n.length>50)throw new Error(\"Custom track `trackName` must not be more than 50 characters\");if(t&&\"music\"!==t&&\"speech\"!==t&&!(t instanceof Object))throw new Error(\"Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`\");if(!!n&&[\"cam-audio\",\"cam-video\",\"screen-video\",\"screen-audio\",\"rmpAudio\",\"rmpVideo\",\"customVideoDefaults\"].includes(n))throw new Error(\"Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo\");if(!(e instanceof MediaStreamTrack))throw new Error(\"Custom tracks provided must be instances of MediaStreamTrack\")}},{key:\"startCustomTrack\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{track:track,mode:mode,trackName:trackName,ignoreAudioLevel:ignoreAudioLevel};return nc(),Qa(this._callState,\"startCustomTrack()\"),this.validateCustomTrack(t.track,t.mode,t.trackName),new Promise((function(n,r){e._sharedTracks.customTrack=t.track,t.track=Qo,e.sendMessageToCallMachine({action:\"start-custom-track\",properties:t},(function(e){e.error?r({error:e.error}):n(e.mediaTag)}))}))}},{key:\"stopCustomTrack\",value:function(e){var t=this;return nc(),Qa(this._callState,\"stopCustomTrack()\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"stop-custom-track\",mediaTag:e},(function(e){n(e.mediaTag)}))}))}},{key:\"setCamera\",value:function(e){var t=this;return rc(),Xa(this._callMachineInitialized,\"setCamera()\"),new Promise((function(n){t.sendMessageToCallMachine({action:\"set-camera\",cameraDeviceId:e},(function(e){n({device:e.device})}))}))}},{key:\"setAudioDevice\",value:(q=p((function*(e){return rc(),this.nativeUtils().setAudioDevice(e),{deviceId:yield this.nativeUtils().getAudioDevice()}})),function(e){return q.apply(this,arguments)})},{key:\"cycleCamera\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){e.sendMessageToCallMachine({action:\"cycle-camera\",properties:t},(function(e){n({device:e.device})}))}))}},{key:\"cycleMic\",value:function(){var e=this;return nc(),new Promise((function(t){e.sendMessageToCallMachine({action:\"cycle-mic\"},(function(e){t({device:e.device})}))}))}},{key:\"getCameraFacingMode\",value:function(){var e=this;return rc(),new Promise((function(t){e.sendMessageToCallMachine({action:\"get-camera-facing-mode\"},(function(e){t(e.facingMode)}))}))}},{key:\"setInputDevicesAsync\",value:($=p((function*(e){var t=this,n=e.audioDeviceId,r=e.videoDeviceId,i=e.audioSource,o=e.videoSource;if(nc(),void 0!==i&&(n=i),void 0!==o&&(r=o),\"boolean\"==typeof n&&(this._setAllowLocalAudio(n),n=void 0),\"boolean\"==typeof r&&(this._setAllowLocalVideo(r),r=void 0),!n&&!r)return yield this.getInputDevices();var s={};return n&&(n instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=n,n=Qo,s.audio={settings:{customTrack:n}}):(delete this._sharedTracks.audioTrack,s.audio={settings:{deviceId:n}})),r&&(r instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=r,r=Qo,s.video={settings:{customTrack:r}}):(delete this._sharedTracks.videoTrack,s.video={settings:{deviceId:r}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(s,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise((function(e){t.sendMessageToCallMachine({action:\"set-input-devices\",audioDeviceId:n,videoDeviceId:r},(function(n){if(delete n.action,delete n.callbackStamp,n.returnPreloadCache)return t._updatePreloadCacheInputSettings(s,!1),void e(t._devicesFromInputSettings(t._inputSettings));e(n)}))}))})),function(e){return $.apply(this,arguments)})},{key:\"setOutputDeviceAsync\",value:(J=p((function*(e){var t=this,n=e.outputDeviceId;if(nc(),!n||\"string\"!=typeof n)throw new Error(\"outputDeviceId must be provided and must be a valid device id\");return this._preloadCache.outputDeviceId=n,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(e,r){t.sendMessageToCallMachine({action:\"set-output-device\",outputDeviceId:n},(function(n){if(delete n.action,delete n.callbackStamp,n.error){var i=new Error(n.error.message);return i.type=n.error.type,void r(i)}n.returnPreloadCache?e(t._devicesFromInputSettings(t._inputSettings)):e(n)}))}))})),function(e){return J.apply(this,arguments)})},{key:\"getInputDevices\",value:(V=p((function*(){var e=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(t){e.sendMessageToCallMachine({action:\"get-input-devices\"},(function(n){n.returnPreloadCache?t(e._devicesFromInputSettings(e._inputSettings)):t({camera:n.camera,mic:n.mic,speaker:n.speaker})}))}))})),function(){return V.apply(this,arguments)})},{key:\"nativeInCallAudioMode\",value:function(){return rc(),this._nativeInCallAudioMode}},{key:\"setNativeInCallAudioMode\",value:function(e){if(rc(),[Da,Na].includes(e)){if(e!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=e,!this.disableReactNativeAutoDeviceManagement(\"audio\")&&Ka(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error(\"invalid in-call audio mode specified: \",e)}},{key:\"preAuth\",value:(U=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ec(this._callObjectMode,\"preAuth()\"),Ya(this._callState,this._isPreparingToJoin,\"preAuth()\"),this.needsLoad()&&(yield this.load(t)),!t.url)throw new Error(\"preAuth() requires at least a url to be provided\");return this.validateProperties(t),this.properties=Aa(Aa({},this.properties),t),new Promise((function(t,n){e._preloadCache.inputSettings=e._prepInputSettingsForSharing(e._inputSettings,!1),e.sendMessageToCallMachine({action:\"daily-method-preauth\",properties:Ga(e.properties,e.callClientId),preloadCache:Ga(e._preloadCache,e.callClientId)},(function(r){return r.error?n(r.error):r.access?(e._didPreAuth=!0,void t({access:r.access})):n(new Error(\"unknown error in preAuth()\"))}))}))})),function(){return U.apply(this,arguments)})},{key:\"load\",value:(R=p((function*(e){var t=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error(\"Use after destroy\");if(e&&(this.validateProperties(e),this.properties=Aa(Aa({},this.properties),e)),!this._callObjectMode&&!this.properties.url)throw new Error(\"can't load iframe meeting because url property isn't set\");return this._updateCallState(ni),this.emitDailyJSEvent({action:Vi}),this._callObjectMode?new Promise((function(e,n){t._callObjectLoader.cancel();var r=Date.now();t._callObjectLoader.load(t.properties.dailyConfig,(function(n){t._bundleLoadTime=n?\"no-op\":Date.now()-r,t._updateCallState(ri),n&&t.emitDailyJSEvent({action:$i}),e()}),(function(e,r){if(t.emitDailyJSEvent({action:Ji}),!r){t._updateCallState(ai),t.resetMeetingDependentVars();var i={action:Jo,errorMsg:e.msg,error:{type:\"connection-error\",msg:\"Failed to load call object bundle.\",details:{on:\"load\",sourceError:e,bundleUrl:B(t.properties.dailyConfig)}}};t._maybeSendToSentry(i),t.emitDailyJSEvent(i),n(e.msg)}}))})):(this._iframe.src=F(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise((function(e,n){t._loadedCallback=function(r){t._callState!==ai?(t._updateCallState(ri),(t.properties.cssFile||t.properties.cssText)&&t.loadCss(t.properties),e()):n(r)}})))}})),function(e){return R.apply(this,arguments)})},{key:\"join\",value:(L=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var n=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(t)}catch(e){return this.updateIsPreparingToJoin(!1),Promise.reject(e)}}else{if(n=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(t.url&&t.url!==this.properties.url)return console.error(\"url in join() is different than the one used in preAuth()\"),this.updateIsPreparingToJoin(!1),Promise.reject();if(t.token&&t.token!==this.properties.token)return console.error(\"token in join() is different than the one used in preAuth()\"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(t.url&&!this._callObjectMode&&t.url&&t.url!==this.properties.url)return console.error(\"url in join() is different than the one used in load() (\".concat(this.properties.url,\" -> \").concat(t.url,\")\")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(t),this.properties=Aa(Aa({},this.properties),t)}return void 0!==t.showLocalVideo&&(this._callObjectMode?console.error(\"showLocalVideo is not available in callObject mode\"):this._showLocalVideo=!!t.showLocalVideo),void 0!==t.showParticipantsBar&&(this._callObjectMode?console.error(\"showParticipantsBar is not available in callObject mode\"):this._showParticipantsBar=!!t.showParticipantsBar),this._callState===oi||this._callState===ii?(console.warn(\"already joined meeting, call leave() before joining again\"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(ii,!1),this.emitDailyJSEvent({action:Wi}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:\"join-meeting\",properties:Ga(this.properties,this.callClientId),preloadCache:Ga(this._preloadCache,this.callClientId)}),new Promise((function(t,r){e._joinedCallback=function(i,o){if(e._callState!==ai){if(e._updateCallState(oi),i)for(var s in i){if(e._callObjectMode){var a=e._callMachine().store;Zs(i[s],a),ea(i[s],a),na(i[s],e._participants[s],a)}e._participants[s]=Aa({},i[s]),e.toggleParticipantAudioBasedOnNativeAudioFocus()}n&&e.loadCss(e.properties),t(i)}else r(o)}})))})),function(){return L.apply(this,arguments)})},{key:\"leave\",value:(x=p((function*(){var e=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise((function(t){e._callState===si||e._callState===ai?t():e._callObjectLoader&&!e._callObjectLoader.loaded?(e._callObjectLoader.cancel(),e._updateCallState(si),e.resetMeetingDependentVars(),e.emitDailyJSEvent({action:si}),t()):(e._resolveLeave=t,e.sendMessageToCallMachine({action:\"leave-meeting\"}))}))})),function(){return x.apply(this,arguments)})},{key:\"startScreenShare\",value:(I=p((function*(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Xa(this._callMachineInitialized,\"startScreenShare()\"),t.screenVideoSendSettings&&this._validateVideoSendSettings(\"screenVideo\",t.screenVideoSendSettings),t.mediaStream&&(this._sharedTracks.screenMediaStream=t.mediaStream,t.mediaStream=Qo),\"undefined\"!=typeof DailyNativeUtils&&void 0!==DailyNativeUtils.isIOS&&DailyNativeUtils.isIOS){var n=this.nativeUtils();if(yield n.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Vo,type:\"screen-share-error\",errorMsg:\"Could not start the screen sharing. The screen is already been captured!\"});n.setSystemScreenCaptureStartCallback((function(){n.setSystemScreenCaptureStartCallback(null),e.sendMessageToCallMachine({action:Wo,captureOptions:t})})),n.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Wo,captureOptions:t})})),function(){return I.apply(this,arguments)})},{key:\"stopScreenShare\",value:function(){Xa(this._callMachineInitialized,\"stopScreenShare()\"),this.sendMessageToCallMachine({action:\"local-screen-stop\"})}},{key:\"startRecording\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;if(t&&\"cloud\"!==t&&\"raw-tracks\"!==t&&\"local\"!==t)throw new Error(\"invalid type: \".concat(t,\", allowed values 'cloud', 'raw-tracks', or 'local'\"));this.sendMessageToCallMachine(Aa({action:\"local-recording-start\"},e))}},{key:\"updateRecording\",value:function(e){var t=e.layout,n=void 0===t?{preset:\"default\"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:\"daily-method-update-recording\",layout:n,instanceId:r})}},{key:\"stopRecording\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Aa({action:\"local-recording-stop\"},e))}},{key:\"startLiveStreaming\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Aa({action:\"daily-method-start-live-streaming\"},e))}},{key:\"updateLiveStreaming\",value:function(e){var t=e.layout,n=void 0===t?{preset:\"default\"}:t,r=e.instanceId;this.sendMessageToCallMachine({action:\"daily-method-update-live-streaming\",layout:n,instanceId:r})}},{key:\"addLiveStreamingEndpoints\",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:Ho,endpointsOp:es,endpoints:t,instanceId:n})}},{key:\"removeLiveStreamingEndpoints\",value:function(e){var t=e.endpoints,n=e.instanceId;this.sendMessageToCallMachine({action:Ho,endpointsOp:ts,endpoints:t,instanceId:n})}},{key:\"stopLiveStreaming\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(Aa({action:\"daily-method-stop-live-streaming\"},e))}},{key:\"validateDailyConfig\",value:function(e){e.camSimulcastEncodings&&(console.warn(\"camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings.\"),this.validateSimulcastEncodings(e.camSimulcastEncodings)),e.screenSimulcastEncodings&&console.warn(\"screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings.\"),vs()&&e.noAutoDefaultDeviceChange&&console.warn(\"noAutoDefaultDeviceChange is not supported on Android, and will be ignored.\")}},{key:\"validateSimulcastEncodings\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(!(e instanceof Array||Array.isArray(e)))throw new Error(\"encodings must be an Array\");if(!bc(e.length,1,3))throw new Error(\"encodings must be an Array with between 1 to \".concat(3,\" layers\"));for(var r=0;r<e.length;r++){var i=e[r];for(var o in this._validateEncodingLayerHasValidProperties(i),i)if(Ua.includes(o)){if(\"number\"!=typeof i[o])throw new Error(\"\".concat(o,\" must be a number\"));if(t){var s=t[o],a=s.min,c=s.max;if(!bc(i[o],a,c))throw new Error(\"\".concat(o,\" value not in range. valid range: \").concat(a,\" to \").concat(c))}}else if(![\"active\",\"scalabilityMode\"].includes(o))throw new Error(\"Invalid key \".concat(o,\", valid keys are:\")+Object.values(Ua));if(n&&!i.hasOwnProperty(\"maxBitrate\"))throw new Error(\"maxBitrate is not specified\")}}}},{key:\"startRemoteMediaPlayer\",value:(j=p((function*(e){var t=this,n=e.url,r=e.settings,i=void 0===r?{state:Xo.PLAY}:r;try{!function(e){if(\"string\"!=typeof e)throw new Error('url parameter must be \"string\" type')}(n),yc(i),function(e){for(var t in e)if(!Va.includes(t))throw new Error(\"Invalid key \".concat(t,\", valid keys are: \").concat(Va));e.simulcastEncodings&&this.validateSimulcastEncodings(e.simulcastEncodings,Ba,!0)}(i)}catch(e){throw console.error(\"invalid argument Error: \".concat(e)),console.error('startRemoteMediaPlayer arguments must be of the form:\\n  { url: \"playback url\",\\n  settings?:\\n  {state: \"play\"|\"pause\", simulcastEncodings?: [{}] } }'),e}return new Promise((function(e,r){t.sendMessageToCallMachine({action:\"daily-method-start-remote-media-player\",url:n,settings:i},(function(t){t.error?r({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return j.apply(this,arguments)})},{key:\"stopRemoteMediaPlayer\",value:(A=p((function*(e){var t=this;if(\"string\"!=typeof e)throw new Error(\" remotePlayerID must be of type string\");return new Promise((function(n,r){t.sendMessageToCallMachine({action:\"daily-method-stop-remote-media-player\",session_id:e},(function(e){e.error?r({error:e.error,errorMsg:e.errorMsg}):n()}))}))})),function(e){return A.apply(this,arguments)})},{key:\"updateRemoteMediaPlayer\",value:(P=p((function*(e){var t=this,n=e.session_id,r=e.settings;try{yc(r)}catch(e){throw console.error(\"invalid argument Error: \".concat(e)),console.error('updateRemoteMediaPlayer arguments must be of the form:\\n  session_id: \"participant session\",\\n  { settings?: {state: \"play\"|\"pause\"} }'),e}return new Promise((function(e,i){t.sendMessageToCallMachine({action:\"daily-method-update-remote-media-player\",session_id:n,settings:r},(function(t){t.error?i({error:t.error,errorMsg:t.errorMsg}):e({session_id:t.session_id,remoteMediaPlayerState:{state:t.state,settings:t.settings}})}))}))})),function(e){return P.apply(this,arguments)})},{key:\"startTranscription\",value:function(e){Qa(this._callState,\"startTranscription()\"),this.sendMessageToCallMachine(Aa({action:\"daily-method-start-transcription\"},e))}},{key:\"updateTranscription\",value:function(e){if(Qa(this._callState,\"updateTranscription()\"),!e)throw new Error(\"updateTranscription Error: options is mandatory\");if(\"object\"!==n(e))throw new Error(\"updateTranscription Error: options must be object type\");if(e.participants&&!Array.isArray(e.participants))throw new Error(\"updateTranscription Error: participants must be an array\");this.sendMessageToCallMachine(Aa({action:\"daily-method-update-transcription\"},e))}},{key:\"stopTranscription\",value:function(e){if(Qa(this._callState,\"stopTranscription()\"),e&&\"object\"!==n(e))throw new Error(\"stopTranscription Error: options must be object type\");if(e&&!e.instanceId)throw new Error('\"instanceId\" not provided');this.sendMessageToCallMachine(Aa({action:\"daily-method-stop-transcription\"},e))}},{key:\"startDialOut\",value:(O=p((function*(e){var t=this;Qa(this._callState,\"startDialOut()\");var n=function(e){if(e){if(!Array.isArray(e))throw new Error(\"Error starting dial out: audio codec must be an array\");if(e.length<=0)throw new Error(\"Error starting dial out: audio codec array specified but empty\");e.forEach((function(e){if(\"string\"!=typeof e)throw new Error(\"Error starting dial out: audio codec must be a string\");if(\"OPUS\"!==e&&\"PCMU\"!==e&&\"PCMA\"!==e&&\"G722\"!==e)throw new Error(\"Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722\")}))}};if(!e.sipUri&&!e.phoneNumber)throw new Error(\"Error starting dial out: either a sip uri or phone number must be provided\");if(e.sipUri&&e.phoneNumber)throw new Error(\"Error starting dial out: only one of sip uri or phone number must be provided\");if(e.sipUri){if(\"string\"!=typeof e.sipUri)throw new Error(\"Error starting dial out: sipUri must be a string\");if(!e.sipUri.startsWith(\"sip:\"))throw new Error(\"Error starting dial out: Invalid SIP URI, must start with 'sip:'\");if(e.video&&\"boolean\"!=typeof e.video)throw new Error(\"Error starting dial out: video must be a boolean value\");!function(e){if(e&&(n(e.audio),e.video)){if(!Array.isArray(e.video))throw new Error(\"Error starting dial out: video codec must be an array\");if(e.video.length<=0)throw new Error(\"Error starting dial out: video codec array specified but empty\");e.video.forEach((function(e){if(\"string\"!=typeof e)throw new Error(\"Error starting dial out: video codec must be a string\");if(\"H264\"!==e&&\"VP8\"!==e)throw new Error(\"Error starting dial out: video codec must be H264 or VP8\")}))}}(e.codecs)}if(e.phoneNumber){if(\"string\"!=typeof e.phoneNumber)throw new Error(\"Error starting dial out: phoneNumber must be a string\");if(!/^\\+\\d{1,}$/.test(e.phoneNumber))throw new Error(\"Error starting dial out: Invalid phone number, must be valid phone number as per E.164\");e.codecs&&n(e.codecs.audio)}if(e.callerId){if(\"string\"!=typeof e.callerId)throw new Error(\"Error starting dial out: callerId must be a string\");if(e.sipUri)throw new Error(\"Error starting dial out: callerId not allowed with sipUri\")}if(e.displayName){if(\"string\"!=typeof e.displayName)throw new Error(\"Error starting dial out: displayName must be a string\");if(e.displayName.length>=200)throw new Error(\"Error starting dial out: displayName length must be less than 200\")}if(e.userId){if(\"string\"!=typeof e.userId)throw new Error(\"Error starting dial out: userId must be a string\");if(e.userId.length>36)throw new Error(\"Error starting dial out: userId length must be less than or equal to 36\")}if(e.permissions&&e.permissions.canReceive){var r=f(Ca.validateJSONObject(e.permissions.canReceive),2),i=r[0],o=r[1];if(!i)throw new Error(o)}return new Promise((function(n,r){t.sendMessageToCallMachine(Aa({action:\"dialout-start\"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return O.apply(this,arguments)})},{key:\"stopDialOut\",value:function(e){var t=this;return Qa(this._callState,\"stopDialOut()\"),new Promise((function(n,r){t.sendMessageToCallMachine(Aa({action:\"dialout-stop\"},e),(function(e){e.error?r(e.error):n(e)}))}))}},{key:\"sipCallTransfer\",value:(T=p((function*(e){var t=this;if(Qa(this._callState,\"sipCallTransfer()\"),!e)throw new Error(\"sipCallTransfer() requires a sessionId and toEndPoint\");return e.useSipRefer=!1,mc(e,\"sipCallTransfer\"),new Promise((function(n,r){t.sendMessageToCallMachine(Aa({action:ns},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return T.apply(this,arguments)})},{key:\"sipRefer\",value:(E=p((function*(e){var t=this;if(Qa(this._callState,\"sipRefer()\"),!e)throw new Error(\"sessionId and toEndPoint are mandatory parameter\");return e.useSipRefer=!0,mc(e,\"sipRefer\"),new Promise((function(n,r){t.sendMessageToCallMachine(Aa({action:ns},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return E.apply(this,arguments)})},{key:\"sendDTMF\",value:(C=p((function*(e){var t=this;return Qa(this._callState,\"sendDTMF()\"),function(e){var t=e.sessionId,n=e.tones;if(!t||!n)throw new Error(\"sessionId and tones are mandatory parameter\");if(\"string\"!=typeof t||\"string\"!=typeof n)throw new Error(\"sessionId and tones should be of string type\");if(n.length>20)throw new Error(\"tones string must be upto 20 characters\");var r=/[^0-9A-D*#]/g,i=n.match(r);if(i&&i[0])throw new Error(\"\".concat(i[0],\" is not valid DTMF tone\"))}(e),new Promise((function(n,r){t.sendMessageToCallMachine(Aa({action:\"send-dtmf\"},e),(function(e){e.error?r(e.error):n(e)}))}))})),function(e){return C.apply(this,arguments)})},{key:\"getNetworkStats\",value:function(){var e=this;if(this._callState!==oi){return Promise.resolve(Aa({stats:{latest:{}}},this._network))}return new Promise((function(t){e.sendMessageToCallMachine({action:\"get-calc-stats\"},(function(n){t(Aa(Aa({},e._network),{},{stats:n.stats}))}))}))}},{key:\"testWebsocketConnectivity\",value:(M=p((function*(){var e=this;if(Za(this._testCallInProgress,\"testWebsocketConnectivity()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}return new Promise((function(t,n){e.sendMessageToCallMachine({action:\"test-websocket-connectivity\"},(function(e){e.error?n(e.error):t(e.results)}))}))})),function(){return M.apply(this,arguments)})},{key:\"abortTestWebsocketConnectivity\",value:function(){this.sendMessageToCallMachine({action:\"abort-test-websocket-connectivity\"})}},{key:\"_validateVideoTrackForNetworkTests\",value:function(e){return e?e instanceof MediaStreamTrack?!!va(e,{isLocalScreenVideo:!1})||(console.error(\"Video track is not playable. This test needs a live video track.\"),!1):(console.error(\"Video track needs to be of type `MediaStreamTrack`.\"),!1):(console.error(\"Missing video track. You must provide a video track in order to run this test.\"),!1)}},{key:\"testCallQuality\",value:(k=p((function*(){var t=this;nc(),ec(this._callObjectMode,\"testCallQuality()\"),Xa(this._callMachineInitialized,\"testCallQuality()\",null,!0),Ya(this._callState,this._isPreparingToJoin,\"testCallQuality()\");var n=this._testCallAlreadyInProgress,r=function(e){n||(t._testCallInProgress=e)};if(r(!0),this.needsLoad())try{var i=this._callState;yield this.load(),this._callState=i}catch(e){return r(!1),Promise.reject(e)}return new Promise((function(n){t.sendMessageToCallMachine({action:\"test-call-quality\",dailyJsVersion:t.properties.dailyJsVersion},(function(i){var o=i.results,s=o.result,a=e(o,Ta);if(\"failed\"===s){var c,l=Aa({},a);null!==(c=a.error)&&void 0!==c&&c.details?(a.error.details=JSON.parse(a.error.details),l.error=Aa(Aa({},l.error),{},{details:Aa({},l.error.details)}),l.error.details.duringTest=\"testCallQuality\"):(l.error=l.error?Aa({},l.error):{},l.error.details={duringTest:\"testCallQuality\"}),t._maybeSendToSentry(l)}r(!1),n(Aa({result:s},a))}))}))})),function(){return k.apply(this,arguments)})},{key:\"stopTestCallQuality\",value:function(){this.sendMessageToCallMachine({action:\"stop-test-call-quality\"})}},{key:\"testConnectionQuality\",value:(w=p((function*(e){var t;is()?(console.warn(\"testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead\"),t=yield this.testPeerToPeerCallQuality(e)):(console.warn(\"testConnectionQuality() is deprecated: use testCallQuality() instead\"),t=yield this.testCallQuality());var n={result:t.result,secondsElapsed:t.secondsElapsed};return t.data&&(n.data={maxRTT:t.data.maxRoundTripTime,packetLoss:t.data.avgRecvPacketLoss}),n})),function(e){return w.apply(this,arguments)})},{key:\"testPeerToPeerCallQuality\",value:(_=p((function*(e){var t=this;if(Za(this._testCallInProgress,\"testPeerToPeerCallQuality()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}var n=e.videoTrack,r=e.duration;if(!this._validateVideoTrackForNetworkTests(n))throw new Error(\"Video track error\");return this._sharedTracks.videoTrackForConnectionQualityTest=n,new Promise((function(e,n){t.sendMessageToCallMachine({action:\"test-p2p-call-quality\",duration:r},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return _.apply(this,arguments)})},{key:\"stopTestConnectionQuality\",value:function(){is()?(console.warn(\"stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead\"),this.stopTestPeerToPeerCallQuality()):(console.warn(\"stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead\"),this.stopTestCallQuality())}},{key:\"stopTestPeerToPeerCallQuality\",value:function(){this.sendMessageToCallMachine({action:\"stop-test-p2p-call-quality\"})}},{key:\"testNetworkConnectivity\",value:(y=p((function*(e){var t=this;if(Za(this._testCallInProgress,\"testNetworkConnectivity()\"),this.needsLoad())try{yield this.load()}catch(e){return Promise.reject(e)}if(!this._validateVideoTrackForNetworkTests(e))throw new Error(\"Video track error\");return this._sharedTracks.videoTrackForNetworkConnectivityTest=e,new Promise((function(e,n){t.sendMessageToCallMachine({action:\"test-network-connectivity\"},(function(t){t.error?n(t.error):e(t.results)}))}))})),function(e){return y.apply(this,arguments)})},{key:\"abortTestNetworkConnectivity\",value:function(){this.sendMessageToCallMachine({action:\"abort-test-network-connectivity\"})}},{key:\"getCpuLoadStats\",value:function(){var e=this;return new Promise((function(t){if(e._callState===oi){e.sendMessageToCallMachine({action:\"get-cpu-load-stats\"},(function(e){t(e.cpuStats)}))}else t({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})}))}},{key:\"_validateEncodingLayerHasValidProperties\",value:function(e){var t;if(!((null===(t=Object.keys(e))||void 0===t?void 0:t.length)>0))throw new Error(\"Empty encoding is not allowed. At least one of these valid keys should be specified:\"+Object.values(Ua))}},{key:\"_validateVideoSendSettings\",value:function(e,t){var r=\"screenVideo\"===e?[\"default-screen-video\",\"detail-optimized\",\"motion-optimized\",\"motion-and-detail-balanced\"]:[\"default-video\",\"bandwidth-optimized\",\"bandwidth-and-quality-balanced\",\"quality-optimized\",\"adaptive-2-layers\",\"adaptive-3-layers\"],i=\"Video send settings should be either an object or one of the supported presets: \".concat(r.join());if(\"string\"==typeof t){if(!r.includes(t))throw new Error(i)}else{if(\"object\"!==n(t))throw new Error(i);if(!t.maxQuality&&!t.encodings&&void 0===t.allowAdaptiveLayers)throw new Error(\"Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute\");if(t.maxQuality&&-1===[\"low\",\"medium\",\"high\"].indexOf(t.maxQuality))throw new Error(\"maxQuality must be either low, medium or high\");if(t.encodings){var o=!1;switch(Object.keys(t.encodings).length){case 1:o=!t.encodings.low;break;case 2:o=!t.encodings.low||!t.encodings.medium;break;case 3:o=!t.encodings.low||!t.encodings.medium||!t.encodings.high;break;default:o=!0}if(o)throw new Error(\"Encodings must be defined as: low, low and medium, or low, medium and high.\");t.encodings.low&&this._validateEncodingLayerHasValidProperties(t.encodings.low),t.encodings.medium&&this._validateEncodingLayerHasValidProperties(t.encodings.medium),t.encodings.high&&this._validateEncodingLayerHasValidProperties(t.encodings.high)}}}},{key:\"validateUpdateSendSettings\",value:function(e){var t=this;if(!e||0===Object.keys(e).length)throw new Error(\"Send settings must contain at least information for one track!\");Object.entries(e).forEach((function(e){var n=f(e,2),r=n[0],i=n[1];t._validateVideoSendSettings(r,i)}))}},{key:\"updateSendSettings\",value:function(e){var t=this;return this.validateUpdateSendSettings(e),this.needsLoad()?(this._preloadCache.sendSettings=e,{sendSettings:this._preloadCache.sendSettings}):new Promise((function(n,r){t.sendMessageToCallMachine({action:\"update-send-settings\",sendSettings:e},(function(e){e.error?r(e.error):n(e.sendSettings)}))}))}},{key:\"getSendSettings\",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:\"getLocalAudioLevel\",value:function(){return this._localAudioLevel}},{key:\"getRemoteParticipantsAudioLevel\",value:function(){return this._remoteParticipantsAudioLevel}},{key:\"getActiveSpeaker\",value:function(){return nc(),this._activeSpeaker}},{key:\"setActiveSpeakerMode\",value:function(e){return nc(),this.sendMessageToCallMachine({action:\"set-active-speaker-mode\",enabled:e}),this}},{key:\"activeSpeakerMode\",value:function(){return nc(),this._activeSpeakerMode}},{key:\"subscribeToTracksAutomatically\",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:\"setSubscribeToTracksAutomatically\",value:function(e){return Qa(this._callState,\"setSubscribeToTracksAutomatically()\",\"Use the subscribeToTracksAutomatically configuration property.\"),this._preloadCache.subscribeToTracksAutomatically=e,this.sendMessageToCallMachine({action:\"daily-method-subscribe-to-tracks-automatically\",enabled:e}),this}},{key:\"enumerateDevices\",value:(m=p((function*(){var e=this;if(this._callObjectMode){var t=yield navigator.mediaDevices.enumerateDevices();return\"Firefox\"===ms()&&ys().major>115&&ys().major<123&&(t=t.filter((function(e){return\"audiooutput\"!==e.kind}))),{devices:t.map((function(e){var t=JSON.parse(JSON.stringify(e));if(!is()&&\"videoinput\"===e.kind&&e.getCapabilities){var n,r=e.getCapabilities();t.facing=(null==r||null===(n=r.facingMode)||void 0===n?void 0:n.length)>=1?r.facingMode[0]:void 0}return t}))}}return new Promise((function(t){e.sendMessageToCallMachine({action:\"enumerate-devices\"},(function(e){t({devices:e.devices})}))}))})),function(){return m.apply(this,arguments)})},{key:\"sendAppMessage\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"*\";if(Qa(this._callState,\"sendAppMessage()\"),JSON.stringify(e).length>this._maxAppMessageSize)throw new Error(\"Message data too large. Max size is \"+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:\"app-msg\",data:e,to:t}),this}},{key:\"addFakeParticipant\",value:function(e){return nc(),Qa(this._callState,\"addFakeParticipant()\"),this.sendMessageToCallMachine(Aa({action:\"add-fake-participant\"},e)),this}},{key:\"setShowNamesMode\",value:function(e){return tc(this._callObjectMode,\"setShowNamesMode()\"),nc(),e&&\"always\"!==e&&\"never\"!==e?(console.error('setShowNamesMode argument should be \"always\", \"never\", or false'),this):(this.sendMessageToCallMachine({action:\"set-show-names\",mode:e}),this)}},{key:\"setShowLocalVideo\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return tc(this._callObjectMode,\"setShowLocalVideo()\"),nc(),Qa(this._callState,\"setShowLocalVideo()\"),\"boolean\"!=typeof e?(console.error(\"setShowLocalVideo only accepts a boolean value\"),this):(this.sendMessageToCallMachine({action:\"set-show-local-video\",show:e}),this._showLocalVideo=e,this)}},{key:\"showLocalVideo\",value:function(){return tc(this._callObjectMode,\"showLocalVideo()\"),nc(),this._showLocalVideo}},{key:\"setShowParticipantsBar\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return tc(this._callObjectMode,\"setShowParticipantsBar()\"),nc(),Qa(this._callState,\"setShowParticipantsBar()\"),\"boolean\"!=typeof e?(console.error(\"setShowParticipantsBar only accepts a boolean value\"),this):(this.sendMessageToCallMachine({action:\"set-show-participants-bar\",show:e}),this._showParticipantsBar=e,this)}},{key:\"showParticipantsBar\",value:function(){return tc(this._callObjectMode,\"showParticipantsBar()\"),nc(),this._showParticipantsBar}},{key:\"customIntegrations\",value:function(){return nc(),tc(this._callObjectMode,\"customIntegrations()\"),this._customIntegrations}},{key:\"setCustomIntegrations\",value:function(e){return nc(),tc(this._callObjectMode,\"setCustomIntegrations()\"),Qa(this._callState,\"setCustomIntegrations()\"),vc(e)?(this.sendMessageToCallMachine({action:\"set-custom-integrations\",integrations:e}),this._customIntegrations=e,this):this}},{key:\"startCustomIntegrations\",value:function(e){var t=this;if(nc(),tc(this._callObjectMode,\"startCustomIntegrations()\"),Qa(this._callState,\"startCustomIntegrations()\"),Array.isArray(e)&&e.some((function(e){return\"string\"!=typeof e}))||!Array.isArray(e)&&\"string\"!=typeof e)return console.error(\"startCustomIntegrations() only accepts string | string[]\"),this;var n=\"string\"==typeof e?[e]:e,r=n.filter((function(e){return!(e in t._customIntegrations)}));return r.length?(console.error(\"Can't find custom integration(s): \\\"\".concat(r.join(\", \"),'\"')),this):(this.sendMessageToCallMachine({action:\"start-custom-integrations\",ids:n}),this)}},{key:\"stopCustomIntegrations\",value:function(e){var t=this;if(nc(),tc(this._callObjectMode,\"stopCustomIntegrations()\"),Qa(this._callState,\"stopCustomIntegrations()\"),Array.isArray(e)&&e.some((function(e){return\"string\"!=typeof e}))||!Array.isArray(e)&&\"string\"!=typeof e)return console.error(\"stopCustomIntegrations() only accepts string | string[]\"),this;var n=\"string\"==typeof e?[e]:e,r=n.filter((function(e){return!(e in t._customIntegrations)}));return r.length?(console.error(\"Can't find custom integration(s): \\\"\".concat(r.join(\", \"),'\"')),this):(this.sendMessageToCallMachine({action:\"stop-custom-integrations\",ids:n}),this)}},{key:\"customTrayButtons\",value:function(){return tc(this._callObjectMode,\"customTrayButtons()\"),nc(),this._customTrayButtons}},{key:\"updateCustomTrayButtons\",value:function(e){return tc(this._callObjectMode,\"updateCustomTrayButtons()\"),nc(),Qa(this._callState,\"updateCustomTrayButtons()\"),fc(e)?(this.sendMessageToCallMachine({action:\"update-custom-tray-buttons\",btns:e}),this._customTrayButtons=e,this):(console.error(\"updateCustomTrayButtons only accepts a dictionary of the type \".concat(JSON.stringify($a))),this)}},{key:\"theme\",value:function(){return tc(this._callObjectMode,\"theme()\"),this.properties.theme}},{key:\"setTheme\",value:function(e){var t=this;return tc(this._callObjectMode,\"setTheme()\"),new Promise((function(n,r){try{t.validateProperties({theme:e}),t.properties.theme=Aa({},e),t.sendMessageToCallMachine({action:\"set-theme\",theme:t.properties.theme});try{t.emitDailyJSEvent({action:Ui,theme:t.properties.theme})}catch(e){console.log(\"could not emit 'theme-updated'\",e)}n(t.properties.theme)}catch(e){r(e)}}))}},{key:\"requestFullscreen\",value:(g=p((function*(){if(nc(),this._iframe&&!document.fullscreenElement&&as())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(e){console.log(\"could not make video call fullscreen\",e)}})),function(){return g.apply(this,arguments)})},{key:\"exitFullscreen\",value:function(){nc(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:\"getSidebarView\",value:(v=p((function*(){var e=this;return this._callObjectMode?(console.error(\"getSidebarView is not available in callObject mode\"),Promise.resolve(null)):new Promise((function(t){e.sendMessageToCallMachine({action:\"get-sidebar-view\"},(function(e){t(e.view)}))}))})),function(){return v.apply(this,arguments)})},{key:\"setSidebarView\",value:function(e){return this._callObjectMode?(console.error(\"setSidebarView is not available in callObject mode\"),this):(this.sendMessageToCallMachine({action:\"set-sidebar-view\",view:e}),this)}},{key:\"room\",value:(h=p((function*(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeRoomConfigDefaults,n=void 0===t||t;return this._accessState.access===fi||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise((function(t){e.sendMessageToCallMachine({action:\"lib-room-info\",includeRoomConfigDefaults:n},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))})),function(){return h.apply(this,arguments)})},{key:\"geo\",value:(d=p((function*(){try{var e=yield fetch(\"https://gs.daily.co/_ks_/x-swsl/:\");return{current:(yield e.json()).geo}}catch(e){return console.error(\"geo lookup failed\",e),{current:\"\"}}})),function(){return d.apply(this,arguments)})},{key:\"setNetworkTopology\",value:(c=p((function*(e){var t=this;return nc(),Qa(this._callState,\"setNetworkTopology()\"),new Promise((function(n,r){t.sendMessageToCallMachine({action:\"set-network-topology\",opts:e},(function(e){e.error?r({error:e.error}):n({workerId:e.workerId})}))}))})),function(e){return c.apply(this,arguments)})},{key:\"getNetworkTopology\",value:(i=p((function*(){var e=this;return new Promise((function(t,n){e.needsLoad()&&t({topology:\"none\"}),e.sendMessageToCallMachine({action:\"get-network-topology\"},(function(e){e.error?n({error:e.error}):t({topology:e.topology})}))}))})),function(){return i.apply(this,arguments)})},{key:\"setPlayNewParticipantSound\",value:function(e){if(nc(),\"number\"!=typeof e&&!0!==e&&!1!==e)throw new Error(\"argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is \".concat(e));this.sendMessageToCallMachine({action:\"daily-method-set-play-ding\",arg:e})}},{key:\"on\",value:function(e,t){return b.prototype.on.call(this,e,t)}},{key:\"once\",value:function(e,t){return b.prototype.once.call(this,e,t)}},{key:\"off\",value:function(e,t){return b.prototype.off.call(this,e,t)}},{key:\"validateProperties\",value:function(e){var t,n;if(null!=e&&null!==(t=e.dailyConfig)&&void 0!==t&&t.userMediaAudioConstraints){var r,i;is()||console.warn(\"userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.\");var o=e.inputSettings||{};o.audio=(null===(r=e.inputSettings)||void 0===r?void 0:r.audio)||{},o.audio.settings=(null===(i=e.inputSettings)||void 0===i||null===(i=i.audio)||void 0===i?void 0:i.settings)||{},o.audio.settings=Aa(Aa({},o.audio.settings),e.dailyConfig.userMediaAudioConstraints),e.inputSettings=o,delete e.dailyConfig.userMediaAudioConstraints}if(null!=e&&null!==(n=e.dailyConfig)&&void 0!==n&&n.userMediaVideoConstraints){var s,a;is()||console.warn(\"userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.\");var c=e.inputSettings||{};c.video=(null===(s=e.inputSettings)||void 0===s?void 0:s.video)||{},c.video.settings=(null===(a=e.inputSettings)||void 0===a||null===(a=a.video)||void 0===a?void 0:a.settings)||{},c.video.settings=Aa(Aa({},c.video.settings),e.dailyConfig.userMediaVideoConstraints),e.inputSettings=c,delete e.dailyConfig.userMediaVideoConstraints}for(var l in e){if(!za[l])throw new Error(\"unrecognized property '\".concat(l,\"'\"));if(za[l].validate&&!za[l].validate(e[l],this))throw new Error(\"property '\".concat(l,\"': \").concat(za[l].help))}}},{key:\"assembleMeetingUrl\",value:function(){var e,t,n=Aa(Aa({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:null!==(e=this.properties.dailyConfig)&&void 0!==e&&e.proxyUrl?encodeURIComponent(null===(t=this.properties.dailyConfig)||void 0===t?void 0:t.proxyUrl):void 0}),r=n.url.match(/\\?/)?\"&\":\"?\";return n.url+r+Object.keys(za).filter((function(e){return za[e].queryString&&void 0!==n[e]})).map((function(e){return\"\".concat(za[e].queryString,\"=\").concat(n[e])})).join(\"&\")}},{key:\"needsLoad\",value:function(){return[ti,ni,si,ai].includes(this._callState)}},{key:\"sendMessageToCallMachine\",value:function(e,t){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error(\"Use after destroy\");this._messageChannel.sendMessageToCallMachine(e,t,this.callClientId,this._iframe)}},{key:\"forwardPackagedMessageToCallMachine\",value:function(e){this._messageChannel.forwardPackagedMessageToCallMachine(e,this._iframe,this.callClientId)}},{key:\"addListenerForPackagedMessagesFromCallMachine\",value:function(e){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(e,this.callClientId)}},{key:\"removeListenerForPackagedMessagesFromCallMachine\",value:function(e){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(e)}},{key:\"handleMessageFromCallMachine\",value:function(t){switch(t.action){case Fi:this.sendMessageToCallMachine(Aa({action:Bi},this.properties));break;case\"call-machine-initialized\":this._callMachineInitialized=!0;var n={action:Go,level:\"log\",code:1011,stats:{event:\"bundle load\",time:\"no-op\"===this._bundleLoadTime?0:this._bundleLoadTime,preLoaded:\"no-op\"===this._bundleLoadTime,url:B(this.properties.dailyConfig)}};this.sendMessageToCallMachine(n),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case $i:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(t);break;case Hi:var r,i=Aa({},t);delete i.internal,this._maxAppMessageSize=(null===(r=t.internal)||void 0===r?void 0:r._maxAppMessageSize)||$o,this._joinedCallback&&(this._joinedCallback(t.participants),this._joinedCallback=null),this.emitDailyJSEvent(i);break;case Qi:case Ki:if(this._callState===si)return;if(t.participant&&t.participant.session_id){var o=t.participant.local?\"local\":t.participant.session_id;if(this._callObjectMode){var s=this._callMachine().store;Zs(t.participant,s),ea(t.participant,s),na(t.participant,this._participants[o],s)}try{this.maybeParticipantTracksStopped(this._participants[o],t.participant),this.maybeParticipantTracksStarted(this._participants[o],t.participant),this.maybeEventRecordingStopped(this._participants[o],t.participant),this.maybeEventRecordingStarted(this._participants[o],t.participant)}catch(e){console.error(\"track events error\",e)}this.compareEqualForParticipantUpdateEvent(t.participant,this._participants[o])||(this._participants[o]=Aa({},t.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(t))}break;case Yi:if(t.participant&&t.participant.session_id){var a=this._participants[t.participant.session_id];a&&this.maybeParticipantTracksStopped(a,null),delete this._participants[t.participant.session_id],this.emitDailyJSEvent(t)}break;case Xi:S(this._participantCounts,t.participantCounts)||(this._participantCounts=t.participantCounts,this.emitDailyJSEvent(t));break;case Zi:var c={access:t.access};t.awaitingAccess&&(c.awaitingAccess=t.awaitingAccess),S(this._accessState,c)||(this._accessState=c,this.emitDailyJSEvent(t));break;case eo:if(t.meetingSession){this._meetingSessionSummary=t.meetingSession,this.emitDailyJSEvent(t);var l=Aa(Aa({},t),{},{action:\"meeting-session-updated\"});this.emitDailyJSEvent(l)}break;case Jo:var u;this._iframe&&!t.preserveIframe&&(this._iframe.src=\"\"),this._updateCallState(ai),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(t.errorMsg),this._loadedCallback=null),t.preserveIframe;var d=e(t,Oa);null!=d&&null!==(u=d.error)&&void 0!==u&&u.details&&(d.error.details=JSON.parse(d.error.details)),this._maybeSendToSentry(t),this._joinedCallback&&(this._joinedCallback(null,d),this._joinedCallback=null),this.emitDailyJSEvent(d);break;case Gi:this._callState!==ai&&this._updateCallState(si),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(t);break;case\"selected-devices-updated\":t.devices&&this.emitDailyJSEvent(t);break;case Oo:var p=t.state,h=t.threshold,f=t.quality,v=p.state,g=p.reasons;v===this._network.networkState&&S(g,this._network.networkStateReasons)&&h===this._network.threshold&&f===this._network.quality||(this._network.networkState=v,this._network.networkStateReasons=g,this._network.quality=f,this._network.threshold=h,t.networkState=v,g.length&&(t.networkStateReasons=g),delete t.state,this.emitDailyJSEvent(t));break;case Ao:t&&t.cpuLoadState&&this.emitDailyJSEvent(t);break;case jo:t&&void 0!==t.faceCounts&&this.emitDailyJSEvent(t);break;case Eo:var m=t.activeSpeaker;this._activeSpeaker.peerId!==m.peerId&&(this._activeSpeaker.peerId=m.peerId,this.emitDailyJSEvent({action:t.action,activeSpeaker:this._activeSpeaker}));break;case\"show-local-video-changed\":if(this._callObjectMode)return;var y=t.show;this._showLocalVideo=y,this.emitDailyJSEvent({action:t.action,show:y});break;case To:var b=t.enabled;this._activeSpeakerMode!==b&&(this._activeSpeakerMode=b,this.emitDailyJSEvent({action:t.action,enabled:this._activeSpeakerMode}));break;case ro:case io:case oo:this._waitingParticipants=t.allWaitingParticipants,this.emitDailyJSEvent({action:t.action,participant:t.participant});break;case Bo:S(this._receiveSettings,t.receiveSettings)||(this._receiveSettings=t.receiveSettings,this.emitDailyJSEvent({action:t.action,receiveSettings:t.receiveSettings}));break;case Uo:this._maybeUpdateInputSettings(t.inputSettings);break;case\"send-settings-updated\":S(this._sendSettings,t.sendSettings)||(this._sendSettings=t.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:t.action,sendSettings:t.sendSettings}));break;case\"local-audio-level\":this._localAudioLevel=t.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(t);break;case\"remote-participants-audio-level\":this._remoteParticipantsAudioLevel=t.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(t);break;case _o:var _=t.session_id;this._rmpPlayerState[_]=t.playerState,this.emitDailyJSEvent(t);break;case So:delete this._rmpPlayerState[t.session_id],this.emitDailyJSEvent(t);break;case wo:var w=t.session_id,k=this._rmpPlayerState[w];k&&this.compareEqualForRMPUpdateEvent(k,t.remoteMediaPlayerState)||(this._rmpPlayerState[w]=t.remoteMediaPlayerState,this.emitDailyJSEvent(t));break;case\"custom-button-click\":case\"sidebar-view-changed\":this.emitDailyJSEvent(t);break;case to:var M=this._meetingSessionState.topology!==(t.meetingSessionState&&t.meetingSessionState.topology);this._meetingSessionState=_c(t.meetingSessionState,this._callObjectMode),(this._callObjectMode||M)&&this.emitDailyJSEvent(t);break;case ko:this._isScreenSharing=!0,this.emitDailyJSEvent(t);break;case Mo:case Co:this._isScreenSharing=!1,this.emitDailyJSEvent(t);break;case po:case ho:case fo:case vo:case go:case co:case lo:case uo:case qi:case zi:case yo:case bo:case\"test-completed\":case Po:case mo:case Lo:case Do:case No:case Ro:case Vo:case Fo:case\"dialin-ready\":case\"dialin-connected\":case\"dialin-error\":case\"dialin-stopped\":case\"dialin-warning\":case\"dialout-connected\":case\"dialout-answered\":case\"dialout-error\":case\"dialout-stopped\":case\"dialout-warning\":this.emitDailyJSEvent(t);break;case\"request-fullscreen\":this.requestFullscreen();break;case\"request-exit-fullscreen\":this.exitFullscreen()}}},{key:\"maybeEventRecordingStopped\",value:function(e,t){var n=\"record\";e&&(t.local||!1!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:ho}))}},{key:\"maybeEventRecordingStarted\",value:function(e,t){var n=\"record\";e&&(t.local||!0!==t[n]||e[n]===t[n]||this.emitDailyJSEvent({action:po}))}},{key:\"_trackStatePlayable\",value:function(e){return!(!e||e.state!==hi)}},{key:\"_trackChanged\",value:function(e,t){return!((null==e?void 0:e.id)===(null==t?void 0:t.id))}},{key:\"maybeEventTrackStopped\",value:function(e,t,n){var r,i,o=null!==(r=null==t?void 0:t.tracks[e])&&void 0!==r?r:null,s=null!==(i=null==n?void 0:n.tracks[e])&&void 0!==i?i:null,a=null==o?void 0:o.track;if(a){var c=this._trackStatePlayable(o),l=this._trackStatePlayable(s),u=this._trackChanged(a,null==s?void 0:s.track);c&&(l&&!u||this.emitDailyJSEvent({action:ao,track:a,participant:null!=n?n:t,type:e}))}}},{key:\"maybeEventTrackStarted\",value:function(e,t,n){var r,i,o=null!==(r=null==t?void 0:t.tracks[e])&&void 0!==r?r:null,s=null!==(i=null==n?void 0:n.tracks[e])&&void 0!==i?i:null,a=null==s?void 0:s.track;if(a){var c=this._trackStatePlayable(o),l=this._trackStatePlayable(s),u=this._trackChanged(null==o?void 0:o.track,a);l&&(c&&!u||this.emitDailyJSEvent({action:so,track:a,participant:n,type:e}))}}},{key:\"maybeParticipantTracksStopped\",value:function(e,t){if(e)for(var n in e.tracks)this.maybeEventTrackStopped(n,e,t)}},{key:\"maybeParticipantTracksStarted\",value:function(e,t){if(t)for(var n in t.tracks)this.maybeEventTrackStarted(n,e,t)}},{key:\"compareEqualForRMPUpdateEvent\",value:function(e,t){var n,r;return e.state===t.state&&(null===(n=e.settings)||void 0===n?void 0:n.volume)===(null===(r=t.settings)||void 0===r?void 0:r.volume)}},{key:\"emitDailyJSEvent\",value:function(e){try{e.callClientId=this.callClientId,this.emit(e.action,e)}catch(t){console.log(\"could not emit\",e,t)}}},{key:\"compareEqualForParticipantUpdateEvent\",value:function(e,t){return!!S(e,t)&&((!e.videoTrack||!t.videoTrack||e.videoTrack.id===t.videoTrack.id&&e.videoTrack.muted===t.videoTrack.muted&&e.videoTrack.enabled===t.videoTrack.enabled)&&(!e.audioTrack||!t.audioTrack||e.audioTrack.id===t.audioTrack.id&&e.audioTrack.muted===t.audioTrack.muted&&e.audioTrack.enabled===t.audioTrack.enabled))}},{key:\"nativeUtils\",value:function(){return is()?\"undefined\"==typeof DailyNativeUtils?(console.warn(\"in React Native, DailyNativeUtils is expected to be available\"),null):DailyNativeUtils:null}},{key:\"updateIsPreparingToJoin\",value:function(e){this._updateCallState(this._callState,e)}},{key:\"_updateCallState\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(e!==this._callState||t!==this._isPreparingToJoin){var n=this._callState,r=this._isPreparingToJoin;this._callState=e,this._isPreparingToJoin=t;var i=this._callState===oi;this.updateShowAndroidOngoingMeetingNotification(i);var o=Ka(n,r),s=Ka(this._callState,this._isPreparingToJoin);o!==s&&(this.updateKeepDeviceAwake(s),this.updateDeviceAudioMode(s),this.updateNoOpRecordingEnsuringBackgroundContinuity(s))}}},{key:\"resetMeetingDependentVars\",value:function(){this._participants={},this._participantCounts=Fa,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:fi},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=_c(Ra,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=$o,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:\"updateKeepDeviceAwake\",value:function(e){is()&&this.nativeUtils().setKeepDeviceAwake(e,this.callClientId)}},{key:\"updateDeviceAudioMode\",value:function(e){if(is()&&!this.disableReactNativeAutoDeviceManagement(\"audio\")){var t=e?this._nativeInCallAudioMode:\"idle\";this.nativeUtils().setAudioMode(t)}}},{key:\"updateShowAndroidOngoingMeetingNotification\",value:function(e){if(is()&&this.nativeUtils().setShowOngoingMeetingNotification){var t,n,r,i;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var o=this.properties.reactNativeConfig.androidInCallNotification;t=o.title,n=o.subtitle,r=o.iconName,i=o.disableForCustomOverride}i&&(e=!1),this.nativeUtils().setShowOngoingMeetingNotification(e,t,n,r,this.callClientId)}}},{key:\"updateNoOpRecordingEnsuringBackgroundContinuity\",value:function(e){is()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(e)}},{key:\"toggleParticipantAudioBasedOnNativeAudioFocus\",value:function(){var e;if(is()){var t=null===(e=this._callMachine())||void 0===e||null===(e=e.store)||void 0===e?void 0:e.getState();for(var n in null==t?void 0:t.streams){var r=t.streams[n];r&&r.pendingTrack&&\"audio\"===r.pendingTrack.kind&&(r.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:\"disableReactNativeAutoDeviceManagement\",value:function(e){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[e]}},{key:\"absoluteUrl\",value:function(e){if(void 0!==e){var t=document.createElement(\"a\");return t.href=e,t.href}}},{key:\"sayHello\",value:function(){var e=\"hello, world.\";return console.log(e),e}},{key:\"_logUseAfterDestroy\",value:function(){var e=Object.values(La)[0];if(this.needsLoad()){if(e&&!e.needsLoad()){var t={action:Go,level:\"error\",code:this.strictMode?9995:9997};e.sendMessageToCallMachine(t)}else if(!this.strictMode){console.error(\"You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.\")}}else{var n={action:Go,level:\"error\",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(n,null,this.callClientId,this._iframe)}}},{key:\"_logDuplicateInstanceAttempt\",value:function(){for(var e=0,t=Object.values(La);e<t.length;e++){var n=t[e];n._callMachineInitialized?(n.sendMessageToCallMachine({action:Go,level:\"warn\",code:this.allowMultipleCallInstances?9993:9992}),n._delayDuplicateInstanceLog=!1):n._delayDuplicateInstanceLog=!0}}},{key:\"_maybeSendToSentry\",value:function(e){var t,n,i,o;if(null!==(t=e.error)&&void 0!==t&&t.type){if(![Pi,Ti,Ci].includes(e.error.type))return;if(e.error.type===Ci&&e.error.msg.includes(\"deleted\"))return}var s=null!==(n=this.properties)&&void 0!==n&&n.url?new URL(this.properties.url):void 0,a=\"production\";s&&s.host.includes(\".staging.daily\")&&(a=\"staging\");var c,l,u,d,p,h=function(e){const t=[Ln(),In(),qr(),Jr(),Kr(),ei(),$n(),Zr()];return!1!==e.autoSessionTracking&&t.push(Qr()),t}({}).filter((function(e){return![\"BrowserApiErrors\",\"Breadcrumbs\",\"GlobalHandlers\"].includes(e.name)})),f=new mr({dsn:\"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844\",transport:Ir,stackParser:Br,integrations:h,environment:a}),v=new ut;if(v.setClient(f),f.init(),this.session_id&&v.setExtra(\"sessionId\",this.session_id),this.properties){var g=Aa({},this.properties);g.userName=g.userName?\"[Filtered]\":void 0,g.userData=g.userData?\"[Filtered]\":void 0,g.token=g.token?\"[Filtered]\":void 0,v.setExtra(\"properties\",g)}if(s){var m=s.searchParams.get(\"domain\");if(!m){var y=s.host.match(/(.*?)\\./);m=y&&y[1]||\"\"}m&&v.setTag(\"domain\",m)}e.error&&(v.setTag(\"fatalErrorType\",e.error.type),v.setExtra(\"errorDetails\",e.error.details),(null===(c=e.error.details)||void 0===c?void 0:c.uri)&&v.setTag(\"serverAddress\",e.error.details.uri),(null===(l=e.error.details)||void 0===l?void 0:l.workerGroup)&&v.setTag(\"workerGroup\",e.error.details.workerGroup),(null===(u=e.error.details)||void 0===u?void 0:u.geoGroup)&&v.setTag(\"geoGroup\",e.error.details.geoGroup),(null===(d=e.error.details)||void 0===d?void 0:d.on)&&v.setTag(\"connectionAttempt\",e.error.details.on),null!==(p=e.error.details)&&void 0!==p&&p.bundleUrl&&(v.setTag(\"bundleUrl\",e.error.details.bundleUrl),v.setTag(\"bundleError\",e.error.details.sourceError.type)));v.setTags({callMode:this._callObjectMode?is()?\"reactNative\":null!==(i=this.properties)&&void 0!==i&&null!==(i=i.dailyConfig)&&void 0!==i&&null!==(i=i.callMode)&&void 0!==i&&i.includes(\"prebuilt\")?this.properties.dailyConfig.callMode:\"custom\":\"prebuilt-frame\",version:r.version()});var b=(null===(o=e.error)||void 0===o?void 0:o.msg)||e.errorMsg;v.captureException(new Error(b))}},{key:\"_callMachine\",value:function(){var e;return null===(e=window._daily)||void 0===e||null===(e=e.instances)||void 0===e||null===(e=e[this.callClientId])||void 0===e?void 0:e.callMachine}},{key:\"_maybeUpdateInputSettings\",value:function(e){if(!S(this._inputSettings,e)){var t=this._getInputSettings();this._inputSettings=e;var n=this._getInputSettings();S(t,n)||this.emitDailyJSEvent({action:Uo,inputSettings:n})}}}],[{key:\"supportedBrowser\",value:function(){if(is())return{supported:!0,mobile:!0,name:\"React Native\",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var e=D.getParser(rs());return{supported:!!fs(),mobile:\"mobile\"===e.getPlatformType(),name:e.getBrowserName(),version:e.getBrowserVersion(),supportsFullscreen:!!as(),supportsScreenShare:!!ss(),supportsSfu:!!fs(),supportsVideoProcessing:ps(),supportsAudioProcessing:hs()}}},{key:\"version\",value:function(){return\"0.83.1\"}},{key:\"createCallObject\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.layout=\"none\",new r(null,e)}},{key:\"wrap\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(nc(),!e||!e.contentWindow||\"string\"!=typeof e.src)throw new Error(\"DailyIframe::Wrap needs an iframe-like first argument\");return t.layout||(t.customLayout?t.layout=\"custom-v1\":t.layout=\"browser\"),new r(e,t)}},{key:\"createFrame\",value:function(e,t){var n,i;nc(),e&&t?(n=e,i=t):e&&e.append?(n=e,i={}):(n=document.body,i=e||{});var o=i.iframeStyle;o||(o=n===document.body?{position:\"fixed\",border:\"1px solid black\",backgroundColor:\"white\",width:\"375px\",height:\"450px\",right:\"1em\",bottom:\"1em\"}:{border:0,width:\"100%\",height:\"100%\"});var s=document.createElement(\"iframe\");window.navigator&&window.navigator.userAgent.match(/Chrome\\/61\\./)?s.allow=\"microphone, camera\":s.allow=\"microphone; camera; autoplay; display-capture; screen-wake-lock\",s.style.visibility=\"hidden\",n.appendChild(s),s.style.visibility=null,Object.keys(o).forEach((function(e){return s.style[e]=o[e]})),i.layout||(i.customLayout?i.layout=\"custom-v1\":i.layout=\"browser\");try{return new r(s,i)}catch(e){throw n.removeChild(s),e}}},{key:\"createTransparentFrame\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nc();var t=document.createElement(\"iframe\");return t.allow=\"microphone; camera; autoplay\",t.style.cssText=\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      border: 0;\\n      pointer-events: none;\\n    \",document.body.appendChild(t),e.layout||(e.layout=\"custom-v1\"),r.wrap(t,e)}},{key:\"getCallInstance\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e?La[e]:Object.values(La)[0]}}]);var i,c,d,h,v,g,m,y,_,w,k,M,C,E,T,O,P,A,j,I,x,L,R,U,V,J,$,q,z,W,H,G,Q,K,Y,X,Z,ee}();function Ga(e,t){var n={};for(var r in e)if(e[r]instanceof MediaStreamTrack)console.warn(\"MediaStreamTrack found in props or cache.\",r),n[r]=Qo;else if(\"dailyConfig\"===r){if(e[r].modifyLocalSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyLocalSdpHook=e[r].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=i,delete e[r].modifyLocalSdpHook}if(e[r].modifyRemoteSdpHook){var o=window._daily.instances[t].customCallbacks||{};o.modifyRemoteSdpHook=e[r].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=o,delete e[r].modifyRemoteSdpHook}n[r]=e[r]}else n[r]=e[r];return n}function Qa(e){var t=arguments.length>2?arguments[2]:void 0;if(e!==oi){var n=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" only supported after join.\");throw t&&(n+=\" \".concat(t)),console.error(n),new Error(n)}}function Ka(e,t){return[ii,oi].includes(e)||t}function Ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"This daily-js method\",r=arguments.length>3?arguments[3]:void 0;if(Ka(e,t)){var i=\"\".concat(n,\" not supported after joining a meeting.\");throw r&&(i+=\" \".concat(r)),console.error(i),new Error(i)}}function Xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",n=arguments.length>2?arguments[2]:void 0;if(!e){var r=\"\".concat(t,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?\" requires preAuth() or startCamera() to initialize call state.\":\" requires preAuth(), startCamera(), or join() to initialize call state.\");throw n&&(r+=\" \".concat(n)),console.error(r),new Error(r)}}function Za(e){if(e){var t=\"A pre-call quality test is in progress. Please try \".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" again once testing has completed. Use stopTestCallQuality() to end it early.\");throw console.error(t),new Error(t)}}function ec(e){if(!e){var t=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" is only supported on custom callObject instances\");throw console.error(t),new Error(t)}}function tc(e){if(e){var t=\"\".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"This daily-js method\",\" is only supported as part of Daily's Prebuilt\");throw console.error(t),new Error(t)}}function nc(){if(is())throw new Error(\"This daily-js method is not currently supported in React Native\")}function rc(){if(!is())throw new Error(\"This daily-js method is only supported in React Native\")}function ic(e){if(void 0===e)return!0;var t;if(\"string\"==typeof e)t=e;else try{t=JSON.stringify(e),S(JSON.parse(t),e)||console.warn(\"The userData provided will be modified when serialized.\")}catch(e){throw Error(\"userData must be serializable to JSON: \".concat(e))}if(t.length>4096)throw Error(\"userData is too large (\".concat(t.length,\" characters). Maximum size suppported is \").concat(4096,\".\"));return!0}function oc(e,t){for(var n=t.allowAllParticipantsKey,r=function(e){var t=[\"local\"];return n||t.push(\"*\"),e&&!t.includes(e)},i=function(e){return!!(void 0===e.layer||Number.isInteger(e.layer)&&e.layer>=0||\"inherit\"===e.layer)},o=function(e){return!!e&&(!(e.video&&!i(e.video))&&!(e.screenVideo&&!i(e.screenVideo)))},s=0,a=Object.entries(e);s<a.length;s++){var c=f(a[s],2),l=c[0],u=c[1];if(!r(l)||!o(u))return!1}return!0}function sc(e){if(\"object\"!==n(e))return!1;for(var t=0,r=Object.entries(e);t<r.length;t++){var i=f(r[t],2),o=i[0],s=i[1];switch(o){case\"video\":if(\"object\"!==n(s))return!1;for(var a=0,c=Object.entries(s);a<c.length;a++){var l=f(c[a],2),u=l[0],d=l[1];switch(u){case\"processor\":if(!lc(d))return!1;break;case\"settings\":if(!uc(d))return!1;break;default:return!1}}break;case\"audio\":if(\"object\"!==n(s))return!1;for(var p=0,h=Object.entries(s);p<h.length;p++){var v=f(h[p],2),g=v[0],m=v[1];switch(g){case\"processor\":if(!cc(m))return!1;break;case\"settings\":if(!uc(m))return!1;break;default:return!1}}break;default:return!1}}return!0}function ac(e,t,n){var r,i=[];e.video&&e.video.processor&&(ps(null!==(r=null==t?void 0:t.useLegacyVideoProcessor)&&void 0!==r&&r)||(e.video.settings?delete e.video.processor:delete e.video,i.push(\"video\")));e.audio&&e.audio.processor&&(hs()||(e.audio.settings?delete e.audio.processor:delete e.audio,i.push(\"audio\"))),i.length>0&&console.error(\"Ignoring settings for browser- or platform-unsupported input processor(s): \".concat(i.join(\", \"))),e.audio&&e.audio.settings&&(e.audio.settings.customTrack?(n.audioTrack=e.audio.settings.customTrack,e.audio.settings={customTrack:Qo}):delete n.audioTrack),e.video&&e.video.settings&&(e.video.settings.customTrack?(n.videoTrack=e.video.settings.customTrack,e.video.settings={customTrack:Qo}):delete n.videoTrack)}function cc(e){if(is())return console.warn(\"Video processing is not yet supported in React Native\"),!1;var t=[\"type\"];return!!e&&(\"object\"===n(e)&&(Object.keys(e).filter((function(e){return!t.includes(e)})).forEach((function(t){console.warn(\"invalid key inputSettings -> audio -> processor : \".concat(t)),delete e[t]})),!!function(e){if(\"string\"!=typeof e)return!1;if(!Object.values(Yo).includes(e))return console.error(\"inputSettings audio processor type invalid\"),!1;return!0}(e.type)))}function lc(e){if(is())return console.warn(\"Video processing is not yet supported in React Native\"),!1;var t=[\"type\",\"config\"];if(!e)return!1;if(\"object\"!==n(e))return!1;if(!function(e){if(\"string\"!=typeof e)return!1;if(!Object.values(Ko).includes(e))return console.error(\"inputSettings video processor type invalid\"),!1;return!0}(e.type))return!1;if(e.config){if(\"object\"!==n(e.config))return!1;if(!function(e,t){var n=Object.keys(t);if(0===n.length)return!0;var r=\"invalid object in inputSettings -> video -> processor -> config\";switch(e){case Ko.BGBLUR:return n.length>1||\"strength\"!==n[0]?(console.error(r),!1):!(\"number\"!=typeof t.strength||t.strength<=0||t.strength>1||isNaN(t.strength))||(console.error(\"\".concat(r,\"; expected: {0 < strength <= 1}, got: \").concat(t.strength)),!1);case Ko.BGIMAGE:return!(void 0!==t.source&&!function(e){if(\"default\"===e.source)return e.type=\"default\",!0;if(e.source instanceof ArrayBuffer)return!0;if(U(e.source))return e.type=\"url\",!!function(e){var t=new URL(e),n=t.pathname;if(\"data:\"===t.protocol)try{var r=n.substring(n.indexOf(\":\")+1,n.indexOf(\";\")).split(\"/\")[1];return Zo.includes(r)}catch(e){return console.error(\"failed to deduce blob content type\",e),!1}var i=n.split(\".\").at(-1).toLowerCase().trim();return Zo.includes(i)}(e.source)||(console.error(\"invalid image type; supported types: [\".concat(Zo.join(\", \"),\"]\")),!1);return t=e.source,n=Number(t),isNaN(n)||!Number.isInteger(n)||n<=0||n>10?(console.error(\"invalid image selection; must be an int, > 0, <= \".concat(10)),!1):(e.type=\"daily-preselect\",!0);var t,n}(t));default:return!0}}(e.type,e.config))return!1}return Object.keys(e).filter((function(e){return!t.includes(e)})).forEach((function(t){console.warn(\"invalid key inputSettings -> video -> processor : \".concat(t)),delete e[t]})),!0}function uc(e){return\"object\"===n(e)&&(!e.customTrack||e.customTrack instanceof MediaStreamTrack)}function dc(){var e=Object.values(Ko).join(\" | \"),t=Object.values(Yo).join(\" | \");return\"inputSettings must be of the form: { video?: { processor?: { type: [ \".concat(e,\" ], config?: {} } }, audio?: { processor: {type: [ \").concat(t,\" ] } } }\")}function pc(e){var t=e.allowAllParticipantsKey;return\"receiveSettings must be of the form { [<remote participant id> | \".concat(yi).concat(t?' | \"'.concat(\"*\",'\"'):\"\",\"]: \")+'{ [video: [{ layer: [<non-negative integer> | \"inherit\"] } | \"inherit\"]], [screenVideo: [{ layer: [<non-negative integer> | \"inherit\"] } | \"inherit\"]] }}}'}function hc(){return\"customIntegrations should be an object of type \".concat(JSON.stringify(qa),\".\")}function fc(e){if(e&&\"object\"!==n(e)||Array.isArray(e))return console.error(\"customTrayButtons should be an Object of the type \".concat(JSON.stringify($a),\".\")),!1;if(e)for(var t=0,r=Object.entries(e);t<r.length;t++)for(var i=f(r[t],1)[0],o=0,s=Object.entries(e[i]);o<s.length;o++){var a=f(s[o],2),c=a[0],l=a[1],u=$a.id[c];if(!u)return console.error(\"customTrayButton does not support key \".concat(c)),!1;switch(c){case\"iconPath\":case\"iconPathDarkMode\":if(!U(l))return console.error(\"customTrayButton \".concat(c,\" should be a url.\")),!1;break;case\"visualState\":if(![\"default\",\"sidebar-open\",\"active\"].includes(l))return console.error(\"customTrayButton \".concat(c,\" should be \").concat(u,\". Got: \").concat(l)),!1;break;default:if(n(l)!==u)return console.error(\"customTrayButton \".concat(c,\" should be a \").concat(u,\".\")),!1}}return!0}function vc(e){if(!e||e&&\"object\"!==n(e)||Array.isArray(e))return console.error(hc()),!1;for(var t=function(e){return\"\".concat(e,\" should be \").concat(qa.id[e])},r=function(e,t){return console.error(\"customIntegration \".concat(e,\": \").concat(t))},i=0,o=Object.entries(e);i<o.length;i++){var s=f(o[i],1)[0];if(!(\"label\"in e[s]))return r(s,\"label is required\"),!1;if(!(\"location\"in e[s]))return r(s,\"location is required\"),!1;if(!(\"src\"in e[s])&&!(\"srcdoc\"in e[s]))return r(s,\"src or srcdoc is required\"),!1;for(var a=0,c=Object.entries(e[s]);a<c.length;a++){var l=f(c[a],2),u=l[0],d=l[1];switch(u){case\"allow\":case\"csp\":case\"name\":case\"referrerPolicy\":case\"sandbox\":if(\"string\"!=typeof d)return r(s,t(u)),!1;break;case\"iconURL\":if(!U(d))return r(s,\"\".concat(u,\" should be a url\")),!1;break;case\"src\":if(\"srcdoc\"in e[s])return r(s,\"cannot have both src and srcdoc\"),!1;if(!U(d))return r(s,'src \"'.concat(d,'\" is not a valid URL')),!1;break;case\"srcdoc\":if(\"src\"in e[s])return r(s,\"cannot have both src and srcdoc\"),!1;if(\"string\"!=typeof d)return r(s,t(u)),!1;break;case\"location\":if(![\"main\",\"sidebar\"].includes(d))return r(s,t(u)),!1;break;case\"controlledBy\":if(\"*\"!==d&&\"owners\"!==d&&(!Array.isArray(d)||d.some((function(e){return\"string\"!=typeof e}))))return r(s,t(u)),!1;break;case\"shared\":if((!Array.isArray(d)||d.some((function(e){return\"string\"!=typeof e})))&&\"owners\"!==d&&\"boolean\"!=typeof d)return r(s,t(u)),!1;break;default:if(!qa.id[u])return console.error(\"customIntegration does not support key \".concat(u)),!1}}}return!0}function gc(e,t){if(void 0===t)return!1;switch(n(t)){case\"string\":return n(e)===t;case\"object\":if(\"object\"!==n(e))return!1;for(var r in e)if(!gc(e[r],t[r]))return!1;return!0;default:return!1}}function mc(e,t){var n=e.sessionId,r=e.toEndPoint,i=e.callerId,o=e.useSipRefer;if(!n||!r)throw new Error(\"\".concat(t,\"() requires a sessionId and toEndPoint\"));if(\"string\"!=typeof n||\"string\"!=typeof r)throw new Error(\"Invalid paramater: sessionId and toEndPoint must be of type string\");if(o&&!r.startsWith(\"sip:\"))throw new Error('\"toEndPoint\" must be a \"sip\" address');if(!r.startsWith(\"sip:\")&&!r.startsWith(\"+\"))throw new Error(\"toEndPoint: \".concat(r,' must starts with either \"sip:\" or \"+\"'));if(i&&\"string\"!=typeof i)throw new Error(\"callerId must be of type string\");if(i&&!r.startsWith(\"+\"))throw new Error(\"callerId is only valid when transferring to a PSTN number\")}function yc(e){if(\"object\"!==n(e))throw new Error('RemoteMediaPlayerSettings: must be \"object\" type');if(e.state&&!Object.values(Xo).includes(e.state))throw new Error(\"Invalid value for RemoteMediaPlayerSettings.state, valid values are: \"+JSON.stringify(Xo));if(e.volume){if(\"number\"!=typeof e.volume)throw new Error('RemoteMediaPlayerSettings.volume: must be \"number\" type');if(e.volume<0||e.volume>2)throw new Error(\"RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0\")}}function bc(e,t,n){return!(\"number\"!=typeof e||e<t||e>n)}function _c(e,t){return e&&!t&&delete e.data,e}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZGFpbHktY28vZGFpbHktanMvZGlzdC9kYWlseS1lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGdCQUFnQixvQkFBb0Isd0JBQXdCLG9CQUFvQixTQUFTLG9CQUFvQiwyQkFBMkIsOEJBQThCLFVBQVUsU0FBUyxNQUFNLGlDQUFpQyxzQ0FBc0MsUUFBUSxXQUFXLGdDQUFnQyw2Q0FBNkMsU0FBUyxnQkFBZ0IsOEVBQThFLGNBQWMsaUZBQWlGLGdCQUFnQixhQUFhLG9HQUFvRyxNQUFNLGNBQWMsb0JBQW9CLCtCQUErQiw0QkFBNEIsZUFBZSw2QkFBNkIsMkJBQTJCLG9FQUFvRSxzQ0FBc0MsYUFBYSw0QkFBNEIsZ0JBQWdCLFlBQVksV0FBVyxLQUFLLFdBQVcsa0hBQWtILGtCQUFrQiwwRUFBMEUsWUFBWSxJQUFJLGdCQUFnQixzREFBc0QsOEZBQThGLG1CQUFtQixvR0FBb0csU0FBUyxJQUFJLGNBQWMsd0VBQXdFLDZDQUE2QyxNQUFNLGdCQUFnQiwwRUFBMEUsdUJBQXVCLFFBQVEsZ0JBQWdCLDRHQUE0RywwQ0FBMEMsYUFBYSxxQ0FBcUMsdUNBQXVDLFlBQVksWUFBWSxrQkFBa0IsOENBQThDLGtEQUFrRCxXQUFXLDBCQUEwQixJQUFJLHdCQUF3QixTQUFTLGlCQUFpQix5Q0FBeUMsY0FBYyxrQkFBa0IsdUJBQXVCLGtDQUFrQyxtQkFBbUIsY0FBYyxzQkFBc0IsY0FBYyx1QkFBdUIsVUFBVSxJQUFJLGdCQUFnQixvQ0FBb0MsdUJBQXVCLElBQUksY0FBYyxTQUFTLGdCQUFnQixtQkFBbUIsNkJBQTZCLG1CQUFtQixtRkFBbUYsWUFBWSwyQkFBMkIsSUFBSSwrQkFBK0Isd0JBQXdCLEtBQUssVUFBVSx3REFBd0QsT0FBTyxT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LE1BQU0sOEVBQThFLGlFQUFpRSxNQUFNLDhFQUE4RSwwQ0FBMEMsTUFBTSxzRUFBc0UsTUFBTSxxRkFBcUYseUJBQXlCLHdCQUF3QixNQUFNLHdEQUF3RCx5QkFBeUIsMkRBQTJELE1BQU0sb0dBQW9HLFNBQVMsaUJBQWlCLHVCQUF1QixhQUFhLDZCQUE2Qix5Q0FBeUMsMENBQTBDLFNBQVMsa0JBQWtCLGlCQUFpQiw4REFBOEQsaUZBQWlGLGdJQUFnSSxvRkFBb0YsZ0lBQWdJLDRFQUE0RSxzR0FBc0csZUFBZSx1RkFBdUYsNkpBQTZKLGFBQWEsd0dBQXdHLDBHQUEwRyxtQkFBbUIsc0NBQXNDLGlCQUFpQiw4QkFBNDFHIiwic291cmNlcyI6WyJDOlxcdmFwaVxcbm9kZV9tb2R1bGVzXFxAZGFpbHktY29cXGRhaWx5LWpzXFxkaXN0XFxkYWlseS1lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZShlLHQpe2lmKG51bGw9PWUpcmV0dXJue307dmFyIG4scixpPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09ZSlyZXR1cm57fTt2YXIgbj17fTtmb3IodmFyIHIgaW4gZSlpZih7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikpe2lmKC0xIT09dC5pbmRleE9mKHIpKWNvbnRpbnVlO25bcl09ZVtyXX1yZXR1cm4gbn0oZSx0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO2ZvcihyPTA7cjxvLmxlbmd0aDtyKyspbj1vW3JdLC0xPT09dC5pbmRleE9mKG4pJiZ7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsbikmJihpW25dPWVbbl0pfXJldHVybiBpfWZ1bmN0aW9uIHQoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0sbihlKX1mdW5jdGlvbiByKGUpe3ZhciB0PWZ1bmN0aW9uKGUsdCl7aWYoXCJvYmplY3RcIiE9bihlKXx8IWUpcmV0dXJuIGU7dmFyIHI9ZVtTeW1ib2wudG9QcmltaXRpdmVdO2lmKHZvaWQgMCE9PXIpe3ZhciBpPXIuY2FsbChlLHR8fFwiZGVmYXVsdFwiKTtpZihcIm9iamVjdFwiIT1uKGkpKXJldHVybiBpO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKX1yZXR1cm4oXCJzdHJpbmdcIj09PXQ/U3RyaW5nOk51bWJlcikoZSl9KGUsXCJzdHJpbmdcIik7cmV0dXJuXCJzeW1ib2xcIj09bih0KT90OnQrXCJcIn1mdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIoaS5rZXkpLGkpfX1mdW5jdGlvbiBvKGUsdCxuKXtyZXR1cm4gdCYmaShlLnByb3RvdHlwZSx0KSxuJiZpKGUsbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJwcm90b3R5cGVcIix7d3JpdGFibGU6ITF9KSxlfWZ1bmN0aW9uIHMoZSx0KXtpZih0JiYoXCJvYmplY3RcIj09bih0KXx8XCJmdW5jdGlvblwiPT10eXBlb2YgdCkpcmV0dXJuIHQ7aWYodm9pZCAwIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiBlfShlKX1mdW5jdGlvbiBhKGUpe3JldHVybiBhPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfSxhKGUpfWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4gYz1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKTpmdW5jdGlvbihlLHQpe3JldHVybiBlLl9fcHJvdG9fXz10LGV9LGMoZSx0KX1mdW5jdGlvbiBsKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInByb3RvdHlwZVwiLHt3cml0YWJsZTohMX0pLHQmJmMoZSx0KX1mdW5jdGlvbiB1KGUsdCxuKXtyZXR1cm4odD1yKHQpKWluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09bixlfWZ1bmN0aW9uIGQoZSx0LG4scixpLG8scyl7dHJ5e3ZhciBhPWVbb10ocyksYz1hLnZhbHVlfWNhdGNoKGUpe3JldHVybiB2b2lkIG4oZSl9YS5kb25lP3QoYyk6UHJvbWlzZS5yZXNvbHZlKGMpLnRoZW4ocixpKX1mdW5jdGlvbiBwKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLGkpe3ZhciBvPWUuYXBwbHkodCxuKTtmdW5jdGlvbiBzKGUpe2QobyxyLGkscyxhLFwibmV4dFwiLGUpfWZ1bmN0aW9uIGEoZSl7ZChvLHIsaSxzLGEsXCJ0aHJvd1wiLGUpfXModm9pZCAwKX0pKX19ZnVuY3Rpb24gaChlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9QXJyYXkodCk7bjx0O24rKylyW25dPWVbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfShlKXx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsPT1lP251bGw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlW1wiQEBpdGVyYXRvclwiXTtpZihudWxsIT1uKXt2YXIgcixpLG8scyxhPVtdLGM9ITAsbD0hMTt0cnl7aWYobz0obj1uLmNhbGwoZSkpLm5leHQsMD09PXQpe2lmKE9iamVjdChuKSE9PW4pcmV0dXJuO2M9ITF9ZWxzZSBmb3IoOyEoYz0ocj1vLmNhbGwobikpLmRvbmUpJiYoYS5wdXNoKHIudmFsdWUpLGEubGVuZ3RoIT09dCk7Yz0hMCk7fWNhdGNoKGUpe2w9ITAsaT1lfWZpbmFsbHl7dHJ5e2lmKCFjJiZudWxsIT1uLnJldHVybiYmKHM9bi5yZXR1cm4oKSxPYmplY3QocykhPT1zKSlyZXR1cm59ZmluYWxseXtpZihsKXRocm93IGl9fXJldHVybiBhfX0oZSx0KXx8ZnVuY3Rpb24oZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gaChlLHQpO3ZhciBuPXt9LnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PW4mJmUuY29uc3RydWN0b3ImJihuPWUuY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PW58fFwiU2V0XCI9PT1uP0FycmF5LmZyb20oZSk6XCJBcmd1bWVudHNcIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP2goZSx0KTp2b2lkIDB9fShlLHQpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9KCl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxcImRlZmF1bHRcIik/ZS5kZWZhdWx0OmV9dmFyIGcsbT17ZXhwb3J0czp7fX07dmFyIHk9ZnVuY3Rpb24oKXtpZihnKXJldHVybiBtLmV4cG9ydHM7Zz0xO3ZhciBlLHQ9XCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3Q/UmVmbGVjdDpudWxsLG49dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5hcHBseT90LmFwcGx5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoZSx0LG4pfTtlPXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQub3duS2V5cz90Lm93bktleXM6T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkpfTpmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSl9O3ZhciByPU51bWJlci5pc05hTnx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPWV9O2Z1bmN0aW9uIGkoKXtpLmluaXQuY2FsbCh0aGlzKX1tLmV4cG9ydHM9aSxtLmV4cG9ydHMub25jZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXtmdW5jdGlvbiBpKG4pe2UucmVtb3ZlTGlzdGVuZXIodCxvKSxyKG4pfWZ1bmN0aW9uIG8oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlbW92ZUxpc3RlbmVyJiZlLnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixpKSxuKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSl9ZihlLHQsbyx7b25jZTohMH0pLFwiZXJyb3JcIiE9PXQmJmZ1bmN0aW9uKGUsdCxuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uJiZmKGUsXCJlcnJvclwiLHQsbil9KGUsaSx7b25jZTohMH0pfSkpfSxpLkV2ZW50RW1pdHRlcj1pLGkucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLGkucHJvdG90eXBlLl9ldmVudHNDb3VudD0wLGkucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwO3ZhciBvPTEwO2Z1bmN0aW9uIHMoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnK3R5cGVvZiBlKX1mdW5jdGlvbiBhKGUpe3JldHVybiB2b2lkIDA9PT1lLl9tYXhMaXN0ZW5lcnM/aS5kZWZhdWx0TWF4TGlzdGVuZXJzOmUuX21heExpc3RlbmVyc31mdW5jdGlvbiBjKGUsdCxuLHIpe3ZhciBpLG8sYyxsO2lmKHMobiksdm9pZCAwPT09KG89ZS5fZXZlbnRzKT8obz1lLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSxlLl9ldmVudHNDb3VudD0wKToodm9pZCAwIT09by5uZXdMaXN0ZW5lciYmKGUuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxuLmxpc3RlbmVyP24ubGlzdGVuZXI6biksbz1lLl9ldmVudHMpLGM9b1t0XSksdm9pZCAwPT09YyljPW9bdF09biwrK2UuX2V2ZW50c0NvdW50O2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYz9jPW9bdF09cj9bbixjXTpbYyxuXTpyP2MudW5zaGlmdChuKTpjLnB1c2gobiksKGk9YShlKSk+MCYmYy5sZW5ndGg+aSYmIWMud2FybmVkKXtjLndhcm5lZD0hMDt2YXIgdT1uZXcgRXJyb3IoXCJQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuIFwiK2MubGVuZ3RoK1wiIFwiK1N0cmluZyh0KStcIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0XCIpO3UubmFtZT1cIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZ1wiLHUuZW1pdHRlcj1lLHUudHlwZT10LHUuY291bnQ9Yy5sZW5ndGgsbD11LGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKGwpfXJldHVybiBlfWZ1bmN0aW9uIGwoKXtpZighdGhpcy5maXJlZClyZXR1cm4gdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLHRoaXMud3JhcEZuKSx0aGlzLmZpcmVkPSEwLDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk6dGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCxhcmd1bWVudHMpfWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciByPXtmaXJlZDohMSx3cmFwRm46dm9pZCAwLHRhcmdldDplLHR5cGU6dCxsaXN0ZW5lcjpufSxpPWwuYmluZChyKTtyZXR1cm4gaS5saXN0ZW5lcj1uLHIud3JhcEZuPWksaX1mdW5jdGlvbiBkKGUsdCxuKXt2YXIgcj1lLl9ldmVudHM7aWYodm9pZCAwPT09cilyZXR1cm5bXTt2YXIgaT1yW3RdO3JldHVybiB2b2lkIDA9PT1pP1tdOlwiZnVuY3Rpb25cIj09dHlwZW9mIGk/bj9baS5saXN0ZW5lcnx8aV06W2ldOm4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7KytuKXRbbl09ZVtuXS5saXN0ZW5lcnx8ZVtuXTtyZXR1cm4gdH0oaSk6aChpLGkubGVuZ3RoKX1mdW5jdGlvbiBwKGUpe3ZhciB0PXRoaXMuX2V2ZW50cztpZih2b2lkIDAhPT10KXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIDE7aWYodm9pZCAwIT09bilyZXR1cm4gbi5sZW5ndGh9cmV0dXJuIDB9ZnVuY3Rpb24gaChlLHQpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCkscj0wO3I8dDsrK3IpbltyXT1lW3JdO3JldHVybiBufWZ1bmN0aW9uIGYoZSx0LG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vbilyLm9uY2U/ZS5vbmNlKHQsbik6ZS5vbih0LG4pO2Vsc2V7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcrdHlwZW9mIGUpO2UuYWRkRXZlbnRMaXN0ZW5lcih0LChmdW5jdGlvbiBpKG8pe3Iub25jZSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsaSksbihvKX0pKX19cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiZGVmYXVsdE1heExpc3RlbmVyc1wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBvfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGU8MHx8cihlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcrZStcIi5cIik7bz1lfX0pLGkuaW5pdD1mdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9ldmVudHNDb3VudD0wKSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9LGkucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbihlKXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZTwwfHxyKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJytlK1wiLlwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPWUsdGhpc30saS5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcyl9LGkucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXQucHVzaChhcmd1bWVudHNbcl0pO3ZhciBpPVwiZXJyb3JcIj09PWUsbz10aGlzLl9ldmVudHM7aWYodm9pZCAwIT09bylpPWkmJnZvaWQgMD09PW8uZXJyb3I7ZWxzZSBpZighaSlyZXR1cm4hMTtpZihpKXt2YXIgcztpZih0Lmxlbmd0aD4wJiYocz10WzBdKSxzIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgczt2YXIgYT1uZXcgRXJyb3IoXCJVbmhhbmRsZWQgZXJyb3IuXCIrKHM/XCIgKFwiK3MubWVzc2FnZStcIilcIjpcIlwiKSk7dGhyb3cgYS5jb250ZXh0PXMsYX12YXIgYz1vW2VdO2lmKHZvaWQgMD09PWMpcmV0dXJuITE7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYyluKGMsdGhpcyx0KTtlbHNle3ZhciBsPWMubGVuZ3RoLHU9aChjLGwpO2ZvcihyPTA7cjxsOysrciluKHVbcl0sdGhpcyx0KX1yZXR1cm4hMH0saS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyh0aGlzLGUsdCwhMSl9LGkucHJvdG90eXBlLm9uPWkucHJvdG90eXBlLmFkZExpc3RlbmVyLGkucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBjKHRoaXMsZSx0LCEwKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQpe3JldHVybiBzKHQpLHRoaXMub24oZSx1KHRoaXMsZSx0KSksdGhpc30saS5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiBzKHQpLHRoaXMucHJlcGVuZExpc3RlbmVyKGUsdSh0aGlzLGUsdCkpLHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYTtpZihzKHQpLHZvaWQgMD09PShyPXRoaXMuX2V2ZW50cykpcmV0dXJuIHRoaXM7aWYodm9pZCAwPT09KG49cltlXSkpcmV0dXJuIHRoaXM7aWYobj09PXR8fG4ubGlzdGVuZXI9PT10KTA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk6KGRlbGV0ZSByW2VdLHIucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSxuLmxpc3RlbmVyfHx0KSk7ZWxzZSBpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuKXtmb3IoaT0tMSxvPW4ubGVuZ3RoLTE7bz49MDtvLS0paWYobltvXT09PXR8fG5bb10ubGlzdGVuZXI9PT10KXthPW5bb10ubGlzdGVuZXIsaT1vO2JyZWFrfWlmKGk8MClyZXR1cm4gdGhpczswPT09aT9uLnNoaWZ0KCk6ZnVuY3Rpb24oZSx0KXtmb3IoO3QrMTxlLmxlbmd0aDt0KyspZVt0XT1lW3QrMV07ZS5wb3AoKX0obixpKSwxPT09bi5sZW5ndGgmJihyW2VdPW5bMF0pLHZvaWQgMCE9PXIucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSxhfHx0KX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuLHI7aWYodm9pZCAwPT09KG49dGhpcy5fZXZlbnRzKSlyZXR1cm4gdGhpcztpZih2b2lkIDA9PT1uLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCk6dm9pZCAwIT09bltlXSYmKDA9PS0tdGhpcy5fZXZlbnRzQ291bnQ/dGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCk6ZGVsZXRlIG5bZV0pLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpLG89T2JqZWN0LmtleXMobik7Zm9yKHI9MDtyPG8ubGVuZ3RoOysrcilcInJlbW92ZUxpc3RlbmVyXCIhPT0oaT1vW3JdKSYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoaSk7cmV0dXJuIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwicmVtb3ZlTGlzdGVuZXJcIiksdGhpcy5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXZlbnRzQ291bnQ9MCx0aGlzfWlmKFwiZnVuY3Rpb25cIj09dHlwZW9mKHQ9bltlXSkpdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHQpO2Vsc2UgaWYodm9pZCAwIT09dClmb3Iocj10Lmxlbmd0aC0xO3I+PTA7ci0tKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSx0W3JdKTtyZXR1cm4gdGhpc30saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3JldHVybiBkKHRoaXMsZSwhMCl9LGkucHJvdG90eXBlLnJhd0xpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gZCh0aGlzLGUsITEpfSxpLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmxpc3RlbmVyQ291bnQ/ZS5saXN0ZW5lckNvdW50KHQpOnAuY2FsbChlLHQpfSxpLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PXAsaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudHNDb3VudD4wP2UodGhpcy5fZXZlbnRzKTpbXX0sbS5leHBvcnRzfSgpLGI9dih5KSxfPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gdyhlLHQsbil7Zm9yKG4gb2YgZS5rZXlzKCkpaWYoUyhuLHQpKXJldHVybiBufWZ1bmN0aW9uIFMoZSx0KXt2YXIgbixyLGk7aWYoZT09PXQpcmV0dXJuITA7aWYoZSYmdCYmKG49ZS5jb25zdHJ1Y3Rvcik9PT10LmNvbnN0cnVjdG9yKXtpZihuPT09RGF0ZSlyZXR1cm4gZS5nZXRUaW1lKCk9PT10LmdldFRpbWUoKTtpZihuPT09UmVnRXhwKXJldHVybiBlLnRvU3RyaW5nKCk9PT10LnRvU3RyaW5nKCk7aWYobj09PUFycmF5KXtpZigocj1lLmxlbmd0aCk9PT10Lmxlbmd0aClmb3IoO3ItLSYmUyhlW3JdLHRbcl0pOyk7cmV0dXJuLTE9PT1yfWlmKG49PT1TZXQpe2lmKGUuc2l6ZSE9PXQuc2l6ZSlyZXR1cm4hMTtmb3IociBvZiBlKXtpZigoaT1yKSYmXCJvYmplY3RcIj09dHlwZW9mIGkmJiEoaT13KHQsaSkpKXJldHVybiExO2lmKCF0LmhhcyhpKSlyZXR1cm4hMX1yZXR1cm4hMH1pZihuPT09TWFwKXtpZihlLnNpemUhPT10LnNpemUpcmV0dXJuITE7Zm9yKHIgb2YgZSl7aWYoKGk9clswXSkmJlwib2JqZWN0XCI9PXR5cGVvZiBpJiYhKGk9dyh0LGkpKSlyZXR1cm4hMTtpZighUyhyWzFdLHQuZ2V0KGkpKSlyZXR1cm4hMX1yZXR1cm4hMH1pZihuPT09QXJyYXlCdWZmZXIpZT1uZXcgVWludDhBcnJheShlKSx0PW5ldyBVaW50OEFycmF5KHQpO2Vsc2UgaWYobj09PURhdGFWaWV3KXtpZigocj1lLmJ5dGVMZW5ndGgpPT09dC5ieXRlTGVuZ3RoKWZvcig7ci0tJiZlLmdldEludDgocik9PT10LmdldEludDgocik7KTtyZXR1cm4tMT09PXJ9aWYoQXJyYXlCdWZmZXIuaXNWaWV3KGUpKXtpZigocj1lLmJ5dGVMZW5ndGgpPT09dC5ieXRlTGVuZ3RoKWZvcig7ci0tJiZlW3JdPT09dFtyXTspO3JldHVybi0xPT09cn1pZighbnx8XCJvYmplY3RcIj09dHlwZW9mIGUpe2ZvcihuIGluIHI9MCxlKXtpZihfLmNhbGwoZSxuKSYmKytyJiYhXy5jYWxsKHQsbikpcmV0dXJuITE7aWYoIShuIGluIHQpfHwhUyhlW25dLHRbbl0pKXJldHVybiExfXJldHVybiBPYmplY3Qua2V5cyh0KS5sZW5ndGg9PT1yfX1yZXR1cm4gZSE9ZSYmdCE9dH1jb25zdCBrPXtcIkFtYXpvbiBTaWxrXCI6XCJhbWF6b25fc2lsa1wiLFwiQW5kcm9pZCBCcm93c2VyXCI6XCJhbmRyb2lkXCIsQmFkYTpcImJhZGFcIixCbGFja0JlcnJ5OlwiYmxhY2tiZXJyeVwiLENocm9tZTpcImNocm9tZVwiLENocm9taXVtOlwiY2hyb21pdW1cIixFbGVjdHJvbjpcImVsZWN0cm9uXCIsRXBpcGhhbnk6XCJlcGlwaGFueVwiLEZpcmVmb3g6XCJmaXJlZm94XCIsRm9jdXM6XCJmb2N1c1wiLEdlbmVyaWM6XCJnZW5lcmljXCIsXCJHb29nbGUgU2VhcmNoXCI6XCJnb29nbGVfc2VhcmNoXCIsR29vZ2xlYm90OlwiZ29vZ2xlYm90XCIsXCJJbnRlcm5ldCBFeHBsb3JlclwiOlwiaWVcIixcIkstTWVsZW9uXCI6XCJrX21lbGVvblwiLE1heHRob246XCJtYXh0aG9uXCIsXCJNaWNyb3NvZnQgRWRnZVwiOlwiZWRnZVwiLFwiTVogQnJvd3NlclwiOlwibXpcIixcIk5BVkVSIFdoYWxlIEJyb3dzZXJcIjpcIm5hdmVyXCIsT3BlcmE6XCJvcGVyYVwiLFwiT3BlcmEgQ29hc3RcIjpcIm9wZXJhX2NvYXN0XCIsUGhhbnRvbUpTOlwicGhhbnRvbWpzXCIsUHVmZmluOlwicHVmZmluXCIsUXVwWmlsbGE6XCJxdXB6aWxsYVwiLFFROlwicXFcIixRUUxpdGU6XCJxcWxpdGVcIixTYWZhcmk6XCJzYWZhcmlcIixTYWlsZmlzaDpcInNhaWxmaXNoXCIsXCJTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkXCI6XCJzYW1zdW5nX2ludGVybmV0XCIsU2VhTW9ua2V5Olwic2VhbW9ua2V5XCIsU2xlaXBuaXI6XCJzbGVpcG5pclwiLFN3aW5nOlwic3dpbmdcIixUaXplbjpcInRpemVuXCIsXCJVQyBCcm93c2VyXCI6XCJ1Y1wiLFZpdmFsZGk6XCJ2aXZhbGRpXCIsXCJXZWJPUyBCcm93c2VyXCI6XCJ3ZWJvc1wiLFdlQ2hhdDpcIndlY2hhdFwiLFwiWWFuZGV4IEJyb3dzZXJcIjpcInlhbmRleFwiLFJva3U6XCJyb2t1XCJ9LE09e2FtYXpvbl9zaWxrOlwiQW1hem9uIFNpbGtcIixhbmRyb2lkOlwiQW5kcm9pZCBCcm93c2VyXCIsYmFkYTpcIkJhZGFcIixibGFja2JlcnJ5OlwiQmxhY2tCZXJyeVwiLGNocm9tZTpcIkNocm9tZVwiLGNocm9taXVtOlwiQ2hyb21pdW1cIixlbGVjdHJvbjpcIkVsZWN0cm9uXCIsZXBpcGhhbnk6XCJFcGlwaGFueVwiLGZpcmVmb3g6XCJGaXJlZm94XCIsZm9jdXM6XCJGb2N1c1wiLGdlbmVyaWM6XCJHZW5lcmljXCIsZ29vZ2xlYm90OlwiR29vZ2xlYm90XCIsZ29vZ2xlX3NlYXJjaDpcIkdvb2dsZSBTZWFyY2hcIixpZTpcIkludGVybmV0IEV4cGxvcmVyXCIsa19tZWxlb246XCJLLU1lbGVvblwiLG1heHRob246XCJNYXh0aG9uXCIsZWRnZTpcIk1pY3Jvc29mdCBFZGdlXCIsbXo6XCJNWiBCcm93c2VyXCIsbmF2ZXI6XCJOQVZFUiBXaGFsZSBCcm93c2VyXCIsb3BlcmE6XCJPcGVyYVwiLG9wZXJhX2NvYXN0OlwiT3BlcmEgQ29hc3RcIixwaGFudG9tanM6XCJQaGFudG9tSlNcIixwdWZmaW46XCJQdWZmaW5cIixxdXB6aWxsYTpcIlF1cFppbGxhXCIscXE6XCJRUSBCcm93c2VyXCIscXFsaXRlOlwiUVEgQnJvd3NlciBMaXRlXCIsc2FmYXJpOlwiU2FmYXJpXCIsc2FpbGZpc2g6XCJTYWlsZmlzaFwiLHNhbXN1bmdfaW50ZXJuZXQ6XCJTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkXCIsc2VhbW9ua2V5OlwiU2VhTW9ua2V5XCIsc2xlaXBuaXI6XCJTbGVpcG5pclwiLHN3aW5nOlwiU3dpbmdcIix0aXplbjpcIlRpemVuXCIsdWM6XCJVQyBCcm93c2VyXCIsdml2YWxkaTpcIlZpdmFsZGlcIix3ZWJvczpcIldlYk9TIEJyb3dzZXJcIix3ZWNoYXQ6XCJXZUNoYXRcIix5YW5kZXg6XCJZYW5kZXggQnJvd3NlclwifSxDPXt0YWJsZXQ6XCJ0YWJsZXRcIixtb2JpbGU6XCJtb2JpbGVcIixkZXNrdG9wOlwiZGVza3RvcFwiLHR2OlwidHZcIn0sRT17V2luZG93c1Bob25lOlwiV2luZG93cyBQaG9uZVwiLFdpbmRvd3M6XCJXaW5kb3dzXCIsTWFjT1M6XCJtYWNPU1wiLGlPUzpcImlPU1wiLEFuZHJvaWQ6XCJBbmRyb2lkXCIsV2ViT1M6XCJXZWJPU1wiLEJsYWNrQmVycnk6XCJCbGFja0JlcnJ5XCIsQmFkYTpcIkJhZGFcIixUaXplbjpcIlRpemVuXCIsTGludXg6XCJMaW51eFwiLENocm9tZU9TOlwiQ2hyb21lIE9TXCIsUGxheVN0YXRpb240OlwiUGxheVN0YXRpb24gNFwiLFJva3U6XCJSb2t1XCJ9LFQ9e0VkZ2VIVE1MOlwiRWRnZUhUTUxcIixCbGluazpcIkJsaW5rXCIsVHJpZGVudDpcIlRyaWRlbnRcIixQcmVzdG86XCJQcmVzdG9cIixHZWNrbzpcIkdlY2tvXCIsV2ViS2l0OlwiV2ViS2l0XCJ9O2NsYXNzIE97c3RhdGljIGdldEZpcnN0TWF0Y2goZSx0KXtjb25zdCBuPXQubWF0Y2goZSk7cmV0dXJuIG4mJm4ubGVuZ3RoPjAmJm5bMV18fFwiXCJ9c3RhdGljIGdldFNlY29uZE1hdGNoKGUsdCl7Y29uc3Qgbj10Lm1hdGNoKGUpO3JldHVybiBuJiZuLmxlbmd0aD4xJiZuWzJdfHxcIlwifXN0YXRpYyBtYXRjaEFuZFJldHVybkNvbnN0KGUsdCxuKXtpZihlLnRlc3QodCkpcmV0dXJuIG59c3RhdGljIGdldFdpbmRvd3NWZXJzaW9uTmFtZShlKXtzd2l0Y2goZSl7Y2FzZVwiTlRcIjpyZXR1cm5cIk5UXCI7Y2FzZVwiWFBcIjpjYXNlXCJOVCA1LjFcIjpyZXR1cm5cIlhQXCI7Y2FzZVwiTlQgNS4wXCI6cmV0dXJuXCIyMDAwXCI7Y2FzZVwiTlQgNS4yXCI6cmV0dXJuXCIyMDAzXCI7Y2FzZVwiTlQgNi4wXCI6cmV0dXJuXCJWaXN0YVwiO2Nhc2VcIk5UIDYuMVwiOnJldHVyblwiN1wiO2Nhc2VcIk5UIDYuMlwiOnJldHVyblwiOFwiO2Nhc2VcIk5UIDYuM1wiOnJldHVyblwiOC4xXCI7Y2FzZVwiTlQgMTAuMFwiOnJldHVyblwiMTBcIjtkZWZhdWx0OnJldHVybn19c3RhdGljIGdldE1hY09TVmVyc2lvbk5hbWUoZSl7Y29uc3QgdD1lLnNwbGl0KFwiLlwiKS5zcGxpY2UoMCwyKS5tYXAoKGU9PnBhcnNlSW50KGUsMTApfHwwKSk7aWYodC5wdXNoKDApLDEwPT09dFswXSlzd2l0Y2godFsxXSl7Y2FzZSA1OnJldHVyblwiTGVvcGFyZFwiO2Nhc2UgNjpyZXR1cm5cIlNub3cgTGVvcGFyZFwiO2Nhc2UgNzpyZXR1cm5cIkxpb25cIjtjYXNlIDg6cmV0dXJuXCJNb3VudGFpbiBMaW9uXCI7Y2FzZSA5OnJldHVyblwiTWF2ZXJpY2tzXCI7Y2FzZSAxMDpyZXR1cm5cIllvc2VtaXRlXCI7Y2FzZSAxMTpyZXR1cm5cIkVsIENhcGl0YW5cIjtjYXNlIDEyOnJldHVyblwiU2llcnJhXCI7Y2FzZSAxMzpyZXR1cm5cIkhpZ2ggU2llcnJhXCI7Y2FzZSAxNDpyZXR1cm5cIk1vamF2ZVwiO2Nhc2UgMTU6cmV0dXJuXCJDYXRhbGluYVwiO2RlZmF1bHQ6cmV0dXJufX1zdGF0aWMgZ2V0QW5kcm9pZFZlcnNpb25OYW1lKGUpe2NvbnN0IHQ9ZS5zcGxpdChcIi5cIikuc3BsaWNlKDAsMikubWFwKChlPT5wYXJzZUludChlLDEwKXx8MCkpO2lmKHQucHVzaCgwKSwhKDE9PT10WzBdJiZ0WzFdPDUpKXJldHVybiAxPT09dFswXSYmdFsxXTw2P1wiQ3VwY2FrZVwiOjE9PT10WzBdJiZ0WzFdPj02P1wiRG9udXRcIjoyPT09dFswXSYmdFsxXTwyP1wiRWNsYWlyXCI6Mj09PXRbMF0mJjI9PT10WzFdP1wiRnJveW9cIjoyPT09dFswXSYmdFsxXT4yP1wiR2luZ2VyYnJlYWRcIjozPT09dFswXT9cIkhvbmV5Y29tYlwiOjQ9PT10WzBdJiZ0WzFdPDE/XCJJY2UgQ3JlYW0gU2FuZHdpY2hcIjo0PT09dFswXSYmdFsxXTw0P1wiSmVsbHkgQmVhblwiOjQ9PT10WzBdJiZ0WzFdPj00P1wiS2l0S2F0XCI6NT09PXRbMF0/XCJMb2xsaXBvcFwiOjY9PT10WzBdP1wiTWFyc2htYWxsb3dcIjo3PT09dFswXT9cIk5vdWdhdFwiOjg9PT10WzBdP1wiT3Jlb1wiOjk9PT10WzBdP1wiUGllXCI6dm9pZCAwfXN0YXRpYyBnZXRWZXJzaW9uUHJlY2lzaW9uKGUpe3JldHVybiBlLnNwbGl0KFwiLlwiKS5sZW5ndGh9c3RhdGljIGNvbXBhcmVWZXJzaW9ucyhlLHQsbj0hMSl7Y29uc3Qgcj1PLmdldFZlcnNpb25QcmVjaXNpb24oZSksaT1PLmdldFZlcnNpb25QcmVjaXNpb24odCk7bGV0IG89TWF0aC5tYXgocixpKSxzPTA7Y29uc3QgYT1PLm1hcChbZSx0XSwoZT0+e2NvbnN0IHQ9by1PLmdldFZlcnNpb25QcmVjaXNpb24oZSksbj1lK25ldyBBcnJheSh0KzEpLmpvaW4oXCIuMFwiKTtyZXR1cm4gTy5tYXAobi5zcGxpdChcIi5cIiksKGU9Pm5ldyBBcnJheSgyMC1lLmxlbmd0aCkuam9pbihcIjBcIikrZSkpLnJldmVyc2UoKX0pKTtmb3IobiYmKHM9by1NYXRoLm1pbihyLGkpKSxvLT0xO28+PXM7KXtpZihhWzBdW29dPmFbMV1bb10pcmV0dXJuIDE7aWYoYVswXVtvXT09PWFbMV1bb10pe2lmKG89PT1zKXJldHVybiAwO28tPTF9ZWxzZSBpZihhWzBdW29dPGFbMV1bb10pcmV0dXJuLTF9fXN0YXRpYyBtYXAoZSx0KXtjb25zdCBuPVtdO2xldCByO2lmKEFycmF5LnByb3RvdHlwZS5tYXApcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChlLHQpO2ZvcihyPTA7cjxlLmxlbmd0aDtyKz0xKW4ucHVzaCh0KGVbcl0pKTtyZXR1cm4gbn1zdGF0aWMgZmluZChlLHQpe2xldCBuLHI7aWYoQXJyYXkucHJvdG90eXBlLmZpbmQpcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwoZSx0KTtmb3Iobj0wLHI9ZS5sZW5ndGg7bjxyO24rPTEpe2NvbnN0IHI9ZVtuXTtpZih0KHIsbikpcmV0dXJuIHJ9fXN0YXRpYyBhc3NpZ24oZSwuLi50KXtjb25zdCBuPWU7bGV0IHIsaTtpZihPYmplY3QuYXNzaWduKXJldHVybiBPYmplY3QuYXNzaWduKGUsLi4udCk7Zm9yKHI9MCxpPXQubGVuZ3RoO3I8aTtyKz0xKXtjb25zdCBlPXRbcl07aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKCh0PT57blt0XT1lW3RdfSkpfX1yZXR1cm4gZX1zdGF0aWMgZ2V0QnJvd3NlckFsaWFzKGUpe3JldHVybiBrW2VdfXN0YXRpYyBnZXRCcm93c2VyVHlwZUJ5QWxpYXMoZSl7cmV0dXJuIE1bZV18fFwiXCJ9fWNvbnN0IFA9L3ZlcnNpb25cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksQT1be3Rlc3Q6Wy9nb29nbGVib3QvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkdvb2dsZWJvdFwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvZ29vZ2xlYm90XFwvKFxcZCsoXFwuXFxkKykpL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL29wZXJhL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJPcGVyYVwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/Om9wZXJhKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9vcHJcXC98b3Bpb3MvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIk9wZXJhXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzpvcHJ8b3Bpb3MpW1xccy9dKFxcUyspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL1NhbXN1bmdCcm93c2VyL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKFAsZSl8fE8uZ2V0Rmlyc3RNYXRjaCgvKD86U2Ftc3VuZ0Jyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL1doYWxlL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJOQVZFUiBXaGFsZSBCcm93c2VyXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKFAsZSl8fE8uZ2V0Rmlyc3RNYXRjaCgvKD86d2hhbGUpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvTVpCcm93c2VyL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJNWiBCcm93c2VyXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzpNWkJyb3dzZXIpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2ZvY3VzL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJGb2N1c1wifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86Zm9jdXMpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3N3aW5nL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJTd2luZ1wifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86c3dpbmcpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2NvYXN0L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJPcGVyYSBDb2FzdFwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/OmNvYXN0KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9vcHRcXC9cXGQrKD86Lj9fP1xcZCspKy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiT3BlcmEgVG91Y2hcIn0sbj1PLmdldEZpcnN0TWF0Y2goLyg/Om9wdClbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3lhYnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiWWFuZGV4IEJyb3dzZXJcIn0sbj1PLmdldEZpcnN0TWF0Y2goLyg/OnlhYnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3VjYnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiVUMgQnJvd3NlclwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/OnVjYnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvTWF4dGhvbnxteGlvcy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTWF4dGhvblwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/Ok1heHRob258bXhpb3MpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2VwaXBoYW55L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJFcGlwaGFueVwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/OmVwaXBoYW55KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9wdWZmaW4vaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlB1ZmZpblwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/OnB1ZmZpbilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvc2xlaXBuaXIvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlNsZWlwbmlyXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKFAsZSl8fE8uZ2V0Rmlyc3RNYXRjaCgvKD86c2xlaXBuaXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2stbWVsZW9uL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJLLU1lbGVvblwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goLyg/OmstbWVsZW9uKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9taWNyb21lc3Nlbmdlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiV2VDaGF0XCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzptaWNyb21lc3NlbmdlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3FxYnJvd3Nlci9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOi9xcWJyb3dzZXJsaXRlL2kudGVzdChlKT9cIlFRIEJyb3dzZXIgTGl0ZVwiOlwiUVEgQnJvd3NlclwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86cXFicm93c2VybGl0ZXxxcWJyb3dzZXIpWy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxPLmdldEZpcnN0TWF0Y2goUCxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9tc2llfHRyaWRlbnQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkludGVybmV0IEV4cGxvcmVyXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzptc2llIHxydjopKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL1xcc2VkZ1xcLy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiTWljcm9zb2Z0IEVkZ2VcIn0sbj1PLmdldEZpcnN0TWF0Y2goL1xcc2VkZ1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9lZGcoW2VhXXxpb3MpL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJNaWNyb3NvZnQgRWRnZVwifSxuPU8uZ2V0U2Vjb25kTWF0Y2goL2VkZyhbZWFdfGlvcylcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0Olsvdml2YWxkaS9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiVml2YWxkaVwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvdml2YWxkaVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zZWFtb25rZXkvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlNlYU1vbmtleVwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvc2VhbW9ua2V5XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3NhaWxmaXNoL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJTYWlsZmlzaFwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvc2FpbGZpc2hcXHM/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zaWxrL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJBbWF6b24gU2lsa1wifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvc2lsa1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9waGFudG9tL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJQaGFudG9tSlNcIn0sbj1PLmdldEZpcnN0TWF0Y2goL3BoYW50b21qc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9zbGltZXJqcy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiU2xpbWVySlNcIn0sbj1PLmdldEZpcnN0TWF0Y2goL3NsaW1lcmpzXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2JsYWNrYmVycnl8XFxiYmJcXGQrL2ksL3JpbVxcc3RhYmxldC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiQmxhY2tCZXJyeVwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpfHxPLmdldEZpcnN0TWF0Y2goL2JsYWNrYmVycnlbXFxkXStcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvKHdlYnxocHcpW28wXXMvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIldlYk9TIEJyb3dzZXJcIn0sbj1PLmdldEZpcnN0TWF0Y2goUCxlKXx8Ty5nZXRGaXJzdE1hdGNoKC93KD86ZWIpP1tvMF1zYnJvd3NlclxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9iYWRhL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJCYWRhXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC9kb2xmaW5cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvdGl6ZW4vaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIlRpemVuXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzp0aXplblxccz8pP2Jyb3dzZXJcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3F1cHppbGxhL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJRdXBaaWxsYVwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86cXVwemlsbGEpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpfHxPLmdldEZpcnN0TWF0Y2goUCxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiRmlyZWZveFwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2VsZWN0cm9uL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJFbGVjdHJvblwifSxuPU8uZ2V0Rmlyc3RNYXRjaCgvKD86ZWxlY3Ryb24pXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL01pdWlCcm93c2VyL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJNaXVpXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzpNaXVpQnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvY2hyb21pdW0vaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkNocm9taXVtXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWl1bSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL2Nocm9tZXxjcmlvc3xjcm1vL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6XCJDaHJvbWVcIn0sbj1PLmdldEZpcnN0TWF0Y2goLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy9HU0EvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpcIkdvb2dsZSBTZWFyY2hcIn0sbj1PLmdldEZpcnN0TWF0Y2goLyg/OkdTQSlcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0KGUpe2NvbnN0IHQ9IWUudGVzdCgvbGlrZSBhbmRyb2lkL2kpLG49ZS50ZXN0KC9hbmRyb2lkL2kpO3JldHVybiB0JiZufSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiQW5kcm9pZCBCcm93c2VyXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKFAsZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvcGxheXN0YXRpb24gNC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiUGxheVN0YXRpb24gNFwifSxuPU8uZ2V0Rmlyc3RNYXRjaChQLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDpbL3NhZmFyaXxhcHBsZXdlYmtpdC9pXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlwiU2FmYXJpXCJ9LG49Ty5nZXRGaXJzdE1hdGNoKFAsZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvLiovaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD0tMSE9PWUuc2VhcmNoKFwiXFxcXChcIik/L14oLiopXFwvKC4qKVsgXFx0XVxcKCguKikvOi9eKC4qKVxcLyguKikgLztyZXR1cm57bmFtZTpPLmdldEZpcnN0TWF0Y2godCxlKSx2ZXJzaW9uOk8uZ2V0U2Vjb25kTWF0Y2godCxlKX19fV07dmFyIGo9W3t0ZXN0OlsvUm9rdVxcL0RWUC9dLGRlc2NyaWJlKGUpe2NvbnN0IHQ9Ty5nZXRGaXJzdE1hdGNoKC9Sb2t1XFwvRFZQLShcXGQrXFwuXFxkKykvaSxlKTtyZXR1cm57bmFtZTpFLlJva3UsdmVyc2lvbjp0fX19LHt0ZXN0Olsvd2luZG93cyBwaG9uZS9pXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvd2luZG93cyBwaG9uZSAoPzpvcyk/XFxzPyhcXGQrKFxcLlxcZCspKikvaSxlKTtyZXR1cm57bmFtZTpFLldpbmRvd3NQaG9uZSx2ZXJzaW9uOnR9fX0se3Rlc3Q6Wy93aW5kb3dzIC9pXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvV2luZG93cyAoKE5UfFhQKSggXFxkXFxkPy5cXGQpPykvaSxlKSxuPU8uZ2V0V2luZG93c1ZlcnNpb25OYW1lKHQpO3JldHVybntuYW1lOkUuV2luZG93cyx2ZXJzaW9uOnQsdmVyc2lvbk5hbWU6bn19fSx7dGVzdDpbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcXC8vXSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOkUuaU9TfSxuPU8uZ2V0U2Vjb25kTWF0Y2goLyhWZXJzaW9uXFwvKShcXGRbXFxkLl0rKS8sZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19LHt0ZXN0OlsvbWFjaW50b3NoL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9Ty5nZXRGaXJzdE1hdGNoKC9tYWMgb3MgeCAoXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSkucmVwbGFjZSgvW19cXHNdL2csXCIuXCIpLG49Ty5nZXRNYWNPU1ZlcnNpb25OYW1lKHQpLHI9e25hbWU6RS5NYWNPUyx2ZXJzaW9uOnR9O3JldHVybiBuJiYoci52ZXJzaW9uTmFtZT1uKSxyfX0se3Rlc3Q6Wy8oaXBvZHxpcGhvbmV8aXBhZCkvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1PLmdldEZpcnN0TWF0Y2goL29zIChcXGQrKFtfXFxzXVxcZCspKikgbGlrZSBtYWMgb3MgeC9pLGUpLnJlcGxhY2UoL1tfXFxzXS9nLFwiLlwiKTtyZXR1cm57bmFtZTpFLmlPUyx2ZXJzaW9uOnR9fX0se3Rlc3QoZSl7Y29uc3QgdD0hZS50ZXN0KC9saWtlIGFuZHJvaWQvaSksbj1lLnRlc3QoL2FuZHJvaWQvaSk7cmV0dXJuIHQmJm59LGRlc2NyaWJlKGUpe2NvbnN0IHQ9Ty5nZXRGaXJzdE1hdGNoKC9hbmRyb2lkW1xccy8tXShcXGQrKFxcLlxcZCspKikvaSxlKSxuPU8uZ2V0QW5kcm9pZFZlcnNpb25OYW1lKHQpLHI9e25hbWU6RS5BbmRyb2lkLHZlcnNpb246dH07cmV0dXJuIG4mJihyLnZlcnNpb25OYW1lPW4pLHJ9fSx7dGVzdDpbLyh3ZWJ8aHB3KVtvMF1zL2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9Ty5nZXRGaXJzdE1hdGNoKC8oPzp3ZWJ8aHB3KVtvMF1zXFwvKFxcZCsoXFwuXFxkKykqKS9pLGUpLG49e25hbWU6RS5XZWJPU307cmV0dXJuIHQmJnQubGVuZ3RoJiYobi52ZXJzaW9uPXQpLG59fSx7dGVzdDpbL2JsYWNrYmVycnl8XFxiYmJcXGQrL2ksL3JpbVxcc3RhYmxldC9pXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVxcZCtcXC8oXFxkKyhbX1xcc11cXGQrKSopL2ksZSl8fE8uZ2V0Rmlyc3RNYXRjaCgvXFxiYmIoXFxkKykvaSxlKTtyZXR1cm57bmFtZTpFLkJsYWNrQmVycnksdmVyc2lvbjp0fX19LHt0ZXN0OlsvYmFkYS9pXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSxlKTtyZXR1cm57bmFtZTpFLkJhZGEsdmVyc2lvbjp0fX19LHt0ZXN0OlsvdGl6ZW4vaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD1PLmdldEZpcnN0TWF0Y2goL3RpemVuWy9cXHNdKFxcZCsoXFwuXFxkKykqKS9pLGUpO3JldHVybntuYW1lOkUuVGl6ZW4sdmVyc2lvbjp0fX19LHt0ZXN0OlsvbGludXgvaV0sZGVzY3JpYmU6KCk9Pih7bmFtZTpFLkxpbnV4fSl9LHt0ZXN0OlsvQ3JPUy9dLGRlc2NyaWJlOigpPT4oe25hbWU6RS5DaHJvbWVPU30pfSx7dGVzdDpbL1BsYXlTdGF0aW9uIDQvXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvUGxheVN0YXRpb24gNFsvXFxzXShcXGQrKFxcLlxcZCspKikvaSxlKTtyZXR1cm57bmFtZTpFLlBsYXlTdGF0aW9uNCx2ZXJzaW9uOnR9fX1dLEk9W3t0ZXN0OlsvZ29vZ2xlYm90L2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6XCJib3RcIix2ZW5kb3I6XCJHb29nbGVcIn0pfSx7dGVzdDpbL2h1YXdlaS9pXSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvKGNhbi1sMDEpL2ksZSkmJlwiTm92YVwiLG49e3R5cGU6Qy5tb2JpbGUsdmVuZG9yOlwiSHVhd2VpXCJ9O3JldHVybiB0JiYobi5tb2RlbD10KSxufX0se3Rlc3Q6Wy9uZXh1c1xccyooPzo3fDh8OXwxMCkuKi9pXSxkZXNjcmliZTooKT0+KHt0eXBlOkMudGFibGV0LHZlbmRvcjpcIk5leHVzXCJ9KX0se3Rlc3Q6Wy9pcGFkL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy50YWJsZXQsdmVuZG9yOlwiQXBwbGVcIixtb2RlbDpcImlQYWRcIn0pfSx7dGVzdDpbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcXC8vXSxkZXNjcmliZTooKT0+KHt0eXBlOkMudGFibGV0LHZlbmRvcjpcIkFwcGxlXCIsbW9kZWw6XCJpUGFkXCJ9KX0se3Rlc3Q6Wy9rZnR0IGJ1aWxkL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy50YWJsZXQsdmVuZG9yOlwiQW1hem9uXCIsbW9kZWw6XCJLaW5kbGUgRmlyZSBIRCA3XCJ9KX0se3Rlc3Q6Wy9zaWxrL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy50YWJsZXQsdmVuZG9yOlwiQW1hem9uXCJ9KX0se3Rlc3Q6Wy90YWJsZXQoPyEgcGMpL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy50YWJsZXR9KX0se3Rlc3QoZSl7Y29uc3QgdD1lLnRlc3QoL2lwb2R8aXBob25lL2kpLG49ZS50ZXN0KC9saWtlIChpcG9kfGlwaG9uZSkvaSk7cmV0dXJuIHQmJiFufSxkZXNjcmliZShlKXtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvKGlwb2R8aXBob25lKS9pLGUpO3JldHVybnt0eXBlOkMubW9iaWxlLHZlbmRvcjpcIkFwcGxlXCIsbW9kZWw6dH19fSx7dGVzdDpbL25leHVzXFxzKlswLTZdLiovaSwvZ2FsYXh5IG5leHVzL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy5tb2JpbGUsdmVuZG9yOlwiTmV4dXNcIn0pfSx7dGVzdDpbL1teLV1tb2JpL2ldLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy5tb2JpbGV9KX0se3Rlc3Q6ZT0+XCJibGFja2JlcnJ5XCI9PT1lLmdldEJyb3dzZXJOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkMubW9iaWxlLHZlbmRvcjpcIkJsYWNrQmVycnlcIn0pfSx7dGVzdDplPT5cImJhZGFcIj09PWUuZ2V0QnJvd3Nlck5hbWUoITApLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy5tb2JpbGV9KX0se3Rlc3Q6ZT0+XCJ3aW5kb3dzIHBob25lXCI9PT1lLmdldEJyb3dzZXJOYW1lKCksZGVzY3JpYmU6KCk9Pih7dHlwZTpDLm1vYmlsZSx2ZW5kb3I6XCJNaWNyb3NvZnRcIn0pfSx7dGVzdChlKXtjb25zdCB0PU51bWJlcihTdHJpbmcoZS5nZXRPU1ZlcnNpb24oKSkuc3BsaXQoXCIuXCIpWzBdKTtyZXR1cm5cImFuZHJvaWRcIj09PWUuZ2V0T1NOYW1lKCEwKSYmdD49M30sZGVzY3JpYmU6KCk9Pih7dHlwZTpDLnRhYmxldH0pfSx7dGVzdDplPT5cImFuZHJvaWRcIj09PWUuZ2V0T1NOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkMubW9iaWxlfSl9LHt0ZXN0OmU9PlwibWFjb3NcIj09PWUuZ2V0T1NOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkMuZGVza3RvcCx2ZW5kb3I6XCJBcHBsZVwifSl9LHt0ZXN0OmU9Plwid2luZG93c1wiPT09ZS5nZXRPU05hbWUoITApLGRlc2NyaWJlOigpPT4oe3R5cGU6Qy5kZXNrdG9wfSl9LHt0ZXN0OmU9PlwibGludXhcIj09PWUuZ2V0T1NOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkMuZGVza3RvcH0pfSx7dGVzdDplPT5cInBsYXlzdGF0aW9uIDRcIj09PWUuZ2V0T1NOYW1lKCEwKSxkZXNjcmliZTooKT0+KHt0eXBlOkMudHZ9KX0se3Rlc3Q6ZT0+XCJyb2t1XCI9PT1lLmdldE9TTmFtZSghMCksZGVzY3JpYmU6KCk9Pih7dHlwZTpDLnR2fSl9XSx4PVt7dGVzdDplPT5cIm1pY3Jvc29mdCBlZGdlXCI9PT1lLmdldEJyb3dzZXJOYW1lKCEwKSxkZXNjcmliZShlKXtpZigvXFxzZWRnXFwvL2kudGVzdChlKSlyZXR1cm57bmFtZTpULkJsaW5rfTtjb25zdCB0PU8uZ2V0Rmlyc3RNYXRjaCgvZWRnZVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm57bmFtZTpULkVkZ2VIVE1MLHZlcnNpb246dH19fSx7dGVzdDpbL3RyaWRlbnQvaV0sZGVzY3JpYmUoZSl7Y29uc3QgdD17bmFtZTpULlRyaWRlbnR9LG49Ty5nZXRGaXJzdE1hdGNoKC90cmlkZW50XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdDplPT5lLnRlc3QoL3ByZXN0by9pKSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlQuUHJlc3RvfSxuPU8uZ2V0Rmlyc3RNYXRjaCgvcHJlc3RvXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLGUpO3JldHVybiBuJiYodC52ZXJzaW9uPW4pLHR9fSx7dGVzdChlKXtjb25zdCB0PWUudGVzdCgvZ2Vja28vaSksbj1lLnRlc3QoL2xpa2UgZ2Vja28vaSk7cmV0dXJuIHQmJiFufSxkZXNjcmliZShlKXtjb25zdCB0PXtuYW1lOlQuR2Vja299LG49Ty5nZXRGaXJzdE1hdGNoKC9nZWNrb1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSxlKTtyZXR1cm4gbiYmKHQudmVyc2lvbj1uKSx0fX0se3Rlc3Q6Wy8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2ldLGRlc2NyaWJlOigpPT4oe25hbWU6VC5CbGlua30pfSx7dGVzdDpbLyhhcHBsZSk/d2Via2l0L2ldLGRlc2NyaWJlKGUpe2NvbnN0IHQ9e25hbWU6VC5XZWJLaXR9LG49Ty5nZXRGaXJzdE1hdGNoKC93ZWJraXRcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksZSk7cmV0dXJuIG4mJih0LnZlcnNpb249biksdH19XTtjbGFzcyBMe2NvbnN0cnVjdG9yKGUsdD0hMSl7aWYobnVsbD09ZXx8XCJcIj09PWUpdGhyb3cgbmV3IEVycm9yKFwiVXNlckFnZW50IHBhcmFtZXRlciBjYW4ndCBiZSBlbXB0eVwiKTt0aGlzLl91YT1lLHRoaXMucGFyc2VkUmVzdWx0PXt9LCEwIT09dCYmdGhpcy5wYXJzZSgpfWdldFVBKCl7cmV0dXJuIHRoaXMuX3VhfXRlc3QoZSl7cmV0dXJuIGUudGVzdCh0aGlzLl91YSl9cGFyc2VCcm93c2VyKCl7dGhpcy5wYXJzZWRSZXN1bHQuYnJvd3Nlcj17fTtjb25zdCBlPU8uZmluZChBLChlPT57aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS50ZXN0KXJldHVybiBlLnRlc3QodGhpcyk7aWYoZS50ZXN0IGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuIGUudGVzdC5zb21lKChlPT50aGlzLnRlc3QoZSkpKTt0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyJ3MgdGVzdCBmdW5jdGlvbiBpcyBub3QgdmFsaWRcIil9KSk7cmV0dXJuIGUmJih0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyPWUuZGVzY3JpYmUodGhpcy5nZXRVQSgpKSksdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3Nlcn1nZXRCcm93c2VyKCl7cmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXI/dGhpcy5wYXJzZWRSZXN1bHQuYnJvd3Nlcjp0aGlzLnBhcnNlQnJvd3NlcigpfWdldEJyb3dzZXJOYW1lKGUpe3JldHVybiBlP1N0cmluZyh0aGlzLmdldEJyb3dzZXIoKS5uYW1lKS50b0xvd2VyQ2FzZSgpfHxcIlwiOnRoaXMuZ2V0QnJvd3NlcigpLm5hbWV8fFwiXCJ9Z2V0QnJvd3NlclZlcnNpb24oKXtyZXR1cm4gdGhpcy5nZXRCcm93c2VyKCkudmVyc2lvbn1nZXRPUygpe3JldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5vcz90aGlzLnBhcnNlZFJlc3VsdC5vczp0aGlzLnBhcnNlT1MoKX1wYXJzZU9TKCl7dGhpcy5wYXJzZWRSZXN1bHQub3M9e307Y29uc3QgZT1PLmZpbmQoaiwoZT0+e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUudGVzdClyZXR1cm4gZS50ZXN0KHRoaXMpO2lmKGUudGVzdCBpbnN0YW5jZW9mIEFycmF5KXJldHVybiBlLnRlc3Quc29tZSgoZT0+dGhpcy50ZXN0KGUpKSk7dGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpfSkpO3JldHVybiBlJiYodGhpcy5wYXJzZWRSZXN1bHQub3M9ZS5kZXNjcmliZSh0aGlzLmdldFVBKCkpKSx0aGlzLnBhcnNlZFJlc3VsdC5vc31nZXRPU05hbWUoZSl7Y29uc3R7bmFtZTp0fT10aGlzLmdldE9TKCk7cmV0dXJuIGU/U3RyaW5nKHQpLnRvTG93ZXJDYXNlKCl8fFwiXCI6dHx8XCJcIn1nZXRPU1ZlcnNpb24oKXtyZXR1cm4gdGhpcy5nZXRPUygpLnZlcnNpb259Z2V0UGxhdGZvcm0oKXtyZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm0/dGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm06dGhpcy5wYXJzZVBsYXRmb3JtKCl9Z2V0UGxhdGZvcm1UeXBlKGU9ITEpe2NvbnN0e3R5cGU6dH09dGhpcy5nZXRQbGF0Zm9ybSgpO3JldHVybiBlP1N0cmluZyh0KS50b0xvd2VyQ2FzZSgpfHxcIlwiOnR8fFwiXCJ9cGFyc2VQbGF0Zm9ybSgpe3RoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtPXt9O2NvbnN0IGU9Ty5maW5kKEksKGU9PntpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRlc3QpcmV0dXJuIGUudGVzdCh0aGlzKTtpZihlLnRlc3QgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gZS50ZXN0LnNvbWUoKGU9PnRoaXMudGVzdChlKSkpO3Rocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKX0pKTtyZXR1cm4gZSYmKHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtPWUuZGVzY3JpYmUodGhpcy5nZXRVQSgpKSksdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm19Z2V0RW5naW5lKCl7cmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZT90aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU6dGhpcy5wYXJzZUVuZ2luZSgpfWdldEVuZ2luZU5hbWUoZSl7cmV0dXJuIGU/U3RyaW5nKHRoaXMuZ2V0RW5naW5lKCkubmFtZSkudG9Mb3dlckNhc2UoKXx8XCJcIjp0aGlzLmdldEVuZ2luZSgpLm5hbWV8fFwiXCJ9cGFyc2VFbmdpbmUoKXt0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU9e307Y29uc3QgZT1PLmZpbmQoeCwoZT0+e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUudGVzdClyZXR1cm4gZS50ZXN0KHRoaXMpO2lmKGUudGVzdCBpbnN0YW5jZW9mIEFycmF5KXJldHVybiBlLnRlc3Quc29tZSgoZT0+dGhpcy50ZXN0KGUpKSk7dGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpfSkpO3JldHVybiBlJiYodGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lPWUuZGVzY3JpYmUodGhpcy5nZXRVQSgpKSksdGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lfXBhcnNlKCl7cmV0dXJuIHRoaXMucGFyc2VCcm93c2VyKCksdGhpcy5wYXJzZU9TKCksdGhpcy5wYXJzZVBsYXRmb3JtKCksdGhpcy5wYXJzZUVuZ2luZSgpLHRoaXN9Z2V0UmVzdWx0KCl7cmV0dXJuIE8uYXNzaWduKHt9LHRoaXMucGFyc2VkUmVzdWx0KX1zYXRpc2ZpZXMoZSl7Y29uc3QgdD17fTtsZXQgbj0wO2NvbnN0IHI9e307bGV0IGk9MDtpZihPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChvPT57Y29uc3Qgcz1lW29dO1wic3RyaW5nXCI9PXR5cGVvZiBzPyhyW29dPXMsaSs9MSk6XCJvYmplY3RcIj09dHlwZW9mIHMmJih0W29dPXMsbis9MSl9KSksbj4wKXtjb25zdCBlPU9iamVjdC5rZXlzKHQpLG49Ty5maW5kKGUsKGU9PnRoaXMuaXNPUyhlKSkpO2lmKG4pe2NvbnN0IGU9dGhpcy5zYXRpc2ZpZXModFtuXSk7aWYodm9pZCAwIT09ZSlyZXR1cm4gZX1jb25zdCByPU8uZmluZChlLChlPT50aGlzLmlzUGxhdGZvcm0oZSkpKTtpZihyKXtjb25zdCBlPXRoaXMuc2F0aXNmaWVzKHRbcl0pO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGV9fWlmKGk+MCl7Y29uc3QgZT1PYmplY3Qua2V5cyhyKSx0PU8uZmluZChlLChlPT50aGlzLmlzQnJvd3NlcihlLCEwKSkpO2lmKHZvaWQgMCE9PXQpcmV0dXJuIHRoaXMuY29tcGFyZVZlcnNpb24oclt0XSl9fWlzQnJvd3NlcihlLHQ9ITEpe2NvbnN0IG49dGhpcy5nZXRCcm93c2VyTmFtZSgpLnRvTG93ZXJDYXNlKCk7bGV0IHI9ZS50b0xvd2VyQ2FzZSgpO2NvbnN0IGk9Ty5nZXRCcm93c2VyVHlwZUJ5QWxpYXMocik7cmV0dXJuIHQmJmkmJihyPWkudG9Mb3dlckNhc2UoKSkscj09PW59Y29tcGFyZVZlcnNpb24oZSl7bGV0IHQ9WzBdLG49ZSxyPSExO2NvbnN0IGk9dGhpcy5nZXRCcm93c2VyVmVyc2lvbigpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXJldHVyblwiPlwiPT09ZVswXXx8XCI8XCI9PT1lWzBdPyhuPWUuc3Vic3RyKDEpLFwiPVwiPT09ZVsxXT8ocj0hMCxuPWUuc3Vic3RyKDIpKTp0PVtdLFwiPlwiPT09ZVswXT90LnB1c2goMSk6dC5wdXNoKC0xKSk6XCI9XCI9PT1lWzBdP249ZS5zdWJzdHIoMSk6XCJ+XCI9PT1lWzBdJiYocj0hMCxuPWUuc3Vic3RyKDEpKSx0LmluZGV4T2YoTy5jb21wYXJlVmVyc2lvbnMoaSxuLHIpKT4tMX1pc09TKGUpe3JldHVybiB0aGlzLmdldE9TTmFtZSghMCk9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKX1pc1BsYXRmb3JtKGUpe3JldHVybiB0aGlzLmdldFBsYXRmb3JtVHlwZSghMCk9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKX1pc0VuZ2luZShlKXtyZXR1cm4gdGhpcy5nZXRFbmdpbmVOYW1lKCEwKT09PVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpfWlzKGUsdD0hMSl7cmV0dXJuIHRoaXMuaXNCcm93c2VyKGUsdCl8fHRoaXMuaXNPUyhlKXx8dGhpcy5pc1BsYXRmb3JtKGUpfXNvbWUoZT1bXSl7cmV0dXJuIGUuc29tZSgoZT0+dGhpcy5pcyhlKSkpfX1cbi8qIVxuICogQm93c2VyIC0gYSBicm93c2VyIGRldGVjdG9yXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGFuY2VkaWtzb24vYm93c2VyXG4gKiBNSVQgTGljZW5zZSB8IChjKSBEdXN0aW4gRGlheiAyMDEyLTIwMTVcbiAqIE1JVCBMaWNlbnNlIHwgKGMpIERlbmlzIERlbWNoZW5rbyAyMDE1LTIwMTlcbiAqL2NsYXNzIER7c3RhdGljIGdldFBhcnNlcihlLHQ9ITEpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIlVzZXJBZ2VudCBzaG91bGQgYmUgYSBzdHJpbmdcIik7cmV0dXJuIG5ldyBMKGUsdCl9c3RhdGljIHBhcnNlKGUpe3JldHVybiBuZXcgTChlKS5nZXRSZXN1bHQoKX1zdGF0aWMgZ2V0IEJST1dTRVJfTUFQKCl7cmV0dXJuIE19c3RhdGljIGdldCBFTkdJTkVfTUFQKCl7cmV0dXJuIFR9c3RhdGljIGdldCBPU19NQVAoKXtyZXR1cm4gRX1zdGF0aWMgZ2V0IFBMQVRGT1JNU19NQVAoKXtyZXR1cm4gQ319ZnVuY3Rpb24gTigpe3JldHVybiBEYXRlLm5vdygpK01hdGgucmFuZG9tKCkudG9TdHJpbmcoKX1mdW5jdGlvbiBSKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG11c3QgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NcIil9ZnVuY3Rpb24gRihlLHQpe3JldHVybiBudWxsIT10JiZ0LnByb3h5VXJsP3QucHJveHlVcmwrKFwiL1wiPT09dC5wcm94eVVybC5zbGljZSgtMSk/XCJcIjpcIi9cIikrZS5zdWJzdHJpbmcoOCk6ZX1mdW5jdGlvbiBCKGUpe3JldHVybiBudWxsIT1lJiZlLmNhbGxPYmplY3RCdW5kbGVVcmxPdmVycmlkZT9lLmNhbGxPYmplY3RCdW5kbGVVcmxPdmVycmlkZTpGKFwiaHR0cHM6Ly9jLmRhaWx5LmNvL2NhbGwtbWFjaGluZS92ZXJzaW9uZWQvXCIuY29uY2F0KFwiMC44My4xXCIsXCIvc3RhdGljL2NhbGwtbWFjaGluZS1vYmplY3QtYnVuZGxlLmpzXCIpLGUpfWZ1bmN0aW9uIFUoZSl7dHJ5e25ldyBVUkwoZSl9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuITB9Y29uc3QgVj1cInVuZGVmaW5lZFwiPT10eXBlb2YgX19TRU5UUllfREVCVUdfX3x8X19TRU5UUllfREVCVUdfXyxKPVwiOC41NS4wXCIsJD1nbG9iYWxUaGlzO2Z1bmN0aW9uIHEoZSx0LG4pe2NvbnN0IHI9bnx8JCxpPXIuX19TRU5UUllfXz1yLl9fU0VOVFJZX198fHt9LG89aVtKXT1pW0pdfHx7fTtyZXR1cm4gb1tlXXx8KG9bZV09dCgpKX1jb25zdCB6PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fLFc9W1wiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCIsXCJsb2dcIixcImFzc2VydFwiLFwidHJhY2VcIl0sSD17fTtmdW5jdGlvbiBHKGUpe2lmKCEoXCJjb25zb2xlXCJpbiAkKSlyZXR1cm4gZSgpO2NvbnN0IHQ9JC5jb25zb2xlLG49e30scj1PYmplY3Qua2V5cyhIKTtyLmZvckVhY2goKGU9Pntjb25zdCByPUhbZV07bltlXT10W2VdLHRbZV09cn0pKTt0cnl7cmV0dXJuIGUoKX1maW5hbGx5e3IuZm9yRWFjaCgoZT0+e3RbZV09bltlXX0pKX19Y29uc3QgUT1xKFwibG9nZ2VyXCIsKGZ1bmN0aW9uKCl7bGV0IGU9ITE7Y29uc3QgdD17ZW5hYmxlOigpPT57ZT0hMH0sZGlzYWJsZTooKT0+e2U9ITF9LGlzRW5hYmxlZDooKT0+ZX07cmV0dXJuIHo/Vy5mb3JFYWNoKChuPT57dFtuXT0oLi4udCk9PntlJiZHKCgoKT0+eyQuY29uc29sZVtuXShgU2VudHJ5IExvZ2dlciBbJHtufV06YCwuLi50KX0pKX19KSk6Vy5mb3JFYWNoKChlPT57dFtlXT0oKT0+e319KSksdH0pKSxLPVwiP1wiLFk9L1xcKGVycm9yOiAoLiopXFwpLyxYPS9jYXB0dXJlTWVzc2FnZXxjYXB0dXJlRXhjZXB0aW9uLztmdW5jdGlvbiBaKGUpe3JldHVybiBlW2UubGVuZ3RoLTFdfHx7fX1jb25zdCBlZT1cIjxhbm9ueW1vdXM+XCI7ZnVuY3Rpb24gdGUoZSl7dHJ5e3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLm5hbWV8fGVlfWNhdGNoKGUpe3JldHVybiBlZX19ZnVuY3Rpb24gbmUoZSl7Y29uc3QgdD1lLmV4Y2VwdGlvbjtpZih0KXtjb25zdCBlPVtdO3RyeXtyZXR1cm4gdC52YWx1ZXMuZm9yRWFjaCgodD0+e3Quc3RhY2t0cmFjZS5mcmFtZXMmJmUucHVzaCguLi50LnN0YWNrdHJhY2UuZnJhbWVzKX0pKSxlfWNhdGNoKGUpe3JldHVybn19fWNvbnN0IHJlPXt9LGllPXt9O2Z1bmN0aW9uIG9lKGUsdCl7cmVbZV09cmVbZV18fFtdLHJlW2VdLnB1c2godCl9ZnVuY3Rpb24gc2UoZSx0KXtpZighaWVbZV0pe2llW2VdPSEwO3RyeXt0KCl9Y2F0Y2godCl7eiYmUS5lcnJvcihgRXJyb3Igd2hpbGUgaW5zdHJ1bWVudGluZyAke2V9YCx0KX19fWZ1bmN0aW9uIGFlKGUsdCl7Y29uc3Qgbj1lJiZyZVtlXTtpZihuKWZvcihjb25zdCByIG9mIG4pdHJ5e3IodCl9Y2F0Y2godCl7eiYmUS5lcnJvcihgRXJyb3Igd2hpbGUgdHJpZ2dlcmluZyBpbnN0cnVtZW50YXRpb24gaGFuZGxlci5cXG5UeXBlOiAke2V9XFxuTmFtZTogJHt0ZShyKX1cXG5FcnJvcjpgLHQpfX1sZXQgY2U9bnVsbDtmdW5jdGlvbiBsZSgpe2NlPSQub25lcnJvciwkLm9uZXJyb3I9ZnVuY3Rpb24oZSx0LG4scixpKXtyZXR1cm4gYWUoXCJlcnJvclwiLHtjb2x1bW46cixlcnJvcjppLGxpbmU6bixtc2c6ZSx1cmw6dH0pLCEhY2UmJmNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sJC5vbmVycm9yLl9fU0VOVFJZX0lOU1RSVU1FTlRFRF9fPSEwfWxldCB1ZT1udWxsO2Z1bmN0aW9uIGRlKCl7dWU9JC5vbnVuaGFuZGxlZHJlamVjdGlvbiwkLm9udW5oYW5kbGVkcmVqZWN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBhZShcInVuaGFuZGxlZHJlamVjdGlvblwiLGUpLCF1ZXx8dWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSwkLm9udW5oYW5kbGVkcmVqZWN0aW9uLl9fU0VOVFJZX0lOU1RSVU1FTlRFRF9fPSEwfWZ1bmN0aW9uIHBlKCl7cmV0dXJuIGhlKCQpLCR9ZnVuY3Rpb24gaGUoZSl7Y29uc3QgdD1lLl9fU0VOVFJZX189ZS5fX1NFTlRSWV9ffHx7fTtyZXR1cm4gdC52ZXJzaW9uPXQudmVyc2lvbnx8Six0W0pdPXRbSl18fHt9fWNvbnN0IGZlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gdmUoZSl7c3dpdGNoKGZlLmNhbGwoZSkpe2Nhc2VcIltvYmplY3QgRXJyb3JdXCI6Y2FzZVwiW29iamVjdCBFeGNlcHRpb25dXCI6Y2FzZVwiW29iamVjdCBET01FeGNlcHRpb25dXCI6Y2FzZVwiW29iamVjdCBXZWJBc3NlbWJseS5FeGNlcHRpb25dXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4gQ2UoZSxFcnJvcil9fWZ1bmN0aW9uIGdlKGUsdCl7cmV0dXJuIGZlLmNhbGwoZSk9PT1gW29iamVjdCAke3R9XWB9ZnVuY3Rpb24gbWUoZSl7cmV0dXJuIGdlKGUsXCJFcnJvckV2ZW50XCIpfWZ1bmN0aW9uIHllKGUpe3JldHVybiBnZShlLFwiRE9NRXJyb3JcIil9ZnVuY3Rpb24gYmUoZSl7cmV0dXJuIGdlKGUsXCJTdHJpbmdcIil9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiZcIl9fc2VudHJ5X3RlbXBsYXRlX3N0cmluZ19fXCJpbiBlJiZcIl9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fXCJpbiBlfWZ1bmN0aW9uIHdlKGUpe3JldHVybiBudWxsPT09ZXx8X2UoZSl8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlfWZ1bmN0aW9uIFNlKGUpe3JldHVybiBnZShlLFwiT2JqZWN0XCIpfWZ1bmN0aW9uIGtlKGUpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBFdmVudCYmQ2UoZSxFdmVudCl9ZnVuY3Rpb24gTWUoZSl7cmV0dXJuIEJvb2xlYW4oZSYmZS50aGVuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW4pfWZ1bmN0aW9uIENlKGUsdCl7dHJ5e3JldHVybiBlIGluc3RhbmNlb2YgdH1jYXRjaChlKXtyZXR1cm4hMX19ZnVuY3Rpb24gRWUoZSl7cmV0dXJuIShcIm9iamVjdFwiIT10eXBlb2YgZXx8bnVsbD09PWV8fCFlLl9faXNWdWUmJiFlLl9pc1Z1ZSl9Y29uc3QgVGU9JDtmdW5jdGlvbiBPZShlLHQ9e30pe2lmKCFlKXJldHVyblwiPHVua25vd24+XCI7dHJ5e2xldCBuPWU7Y29uc3Qgcj01LGk9W107bGV0IG89MCxzPTA7Y29uc3QgYT1cIiA+IFwiLGM9YS5sZW5ndGg7bGV0IGw7Y29uc3QgdT1BcnJheS5pc0FycmF5KHQpP3Q6dC5rZXlBdHRycyxkPSFBcnJheS5pc0FycmF5KHQpJiZ0Lm1heFN0cmluZ0xlbmd0aHx8ODA7Zm9yKDtuJiZvKys8ciYmKGw9UGUobix1KSwhKFwiaHRtbFwiPT09bHx8bz4xJiZzK2kubGVuZ3RoKmMrbC5sZW5ndGg+PWQpKTspaS5wdXNoKGwpLHMrPWwubGVuZ3RoLG49bi5wYXJlbnROb2RlO3JldHVybiBpLnJldmVyc2UoKS5qb2luKGEpfWNhdGNoKGUpe3JldHVyblwiPHVua25vd24+XCJ9fWZ1bmN0aW9uIFBlKGUsdCl7Y29uc3Qgbj1lLHI9W107aWYoIW58fCFuLnRhZ05hbWUpcmV0dXJuXCJcIjtpZihUZS5IVE1MRWxlbWVudCYmbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZuLmRhdGFzZXQpe2lmKG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYobi5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlFbGVtZW50fXIucHVzaChuLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk7Y29uc3QgaT10JiZ0Lmxlbmd0aD90LmZpbHRlcigoZT0+bi5nZXRBdHRyaWJ1dGUoZSkpKS5tYXAoKGU9PltlLG4uZ2V0QXR0cmlidXRlKGUpXSkpOm51bGw7aWYoaSYmaS5sZW5ndGgpaS5mb3JFYWNoKChlPT57ci5wdXNoKGBbJHtlWzBdfT1cIiR7ZVsxXX1cIl1gKX0pKTtlbHNle24uaWQmJnIucHVzaChgIyR7bi5pZH1gKTtjb25zdCBlPW4uY2xhc3NOYW1lO2lmKGUmJmJlKGUpKXtjb25zdCB0PWUuc3BsaXQoL1xccysvKTtmb3IoY29uc3QgZSBvZiB0KXIucHVzaChgLiR7ZX1gKX19Y29uc3Qgbz1bXCJhcmlhLWxhYmVsXCIsXCJ0eXBlXCIsXCJuYW1lXCIsXCJ0aXRsZVwiLFwiYWx0XCJdO2Zvcihjb25zdCBlIG9mIG8pe2NvbnN0IHQ9bi5nZXRBdHRyaWJ1dGUoZSk7dCYmci5wdXNoKGBbJHtlfT1cIiR7dH1cIl1gKX1yZXR1cm4gci5qb2luKFwiXCIpfWZ1bmN0aW9uIEFlKGUsdD0wKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PXR8fGUubGVuZ3RoPD10P2U6YCR7ZS5zbGljZSgwLHQpfS4uLmB9ZnVuY3Rpb24gamUoZSx0KXtpZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm5cIlwiO2NvbnN0IG49W107Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2NvbnN0IHI9ZVt0XTt0cnl7RWUocik/bi5wdXNoKFwiW1Z1ZVZpZXdNb2RlbF1cIik6bi5wdXNoKFN0cmluZyhyKSl9Y2F0Y2goZSl7bi5wdXNoKFwiW3ZhbHVlIGNhbm5vdCBiZSBzZXJpYWxpemVkXVwiKX19cmV0dXJuIG4uam9pbih0KX1mdW5jdGlvbiBJZShlLHQsbj0hMSl7cmV0dXJuISFiZShlKSYmKGdlKHQsXCJSZWdFeHBcIik/dC50ZXN0KGUpOiEhYmUodCkmJihuP2U9PT10OmUuaW5jbHVkZXModCkpKX1mdW5jdGlvbiB4ZShlLHQ9W10sbj0hMSl7cmV0dXJuIHQuc29tZSgodD0+SWUoZSx0LG4pKSl9ZnVuY3Rpb24gTGUoZSx0LG4pe2lmKCEodCBpbiBlKSlyZXR1cm47Y29uc3Qgcj1lW3RdLGk9bihyKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZOZShpLHIpO3RyeXtlW3RdPWl9Y2F0Y2gobil7eiYmUS5sb2coYEZhaWxlZCB0byByZXBsYWNlIG1ldGhvZCBcIiR7dH1cIiBpbiBvYmplY3RgLGUpfX1mdW5jdGlvbiBEZShlLHQsbil7dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9Y2F0Y2gobil7eiYmUS5sb2coYEZhaWxlZCB0byBhZGQgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgXCIke3R9XCIgdG8gb2JqZWN0YCxlKX19ZnVuY3Rpb24gTmUoZSx0KXt0cnl7Y29uc3Qgbj10LnByb3RvdHlwZXx8e307ZS5wcm90b3R5cGU9dC5wcm90b3R5cGU9bixEZShlLFwiX19zZW50cnlfb3JpZ2luYWxfX1wiLHQpfWNhdGNoKGUpe319ZnVuY3Rpb24gUmUoZSl7cmV0dXJuIGUuX19zZW50cnlfb3JpZ2luYWxfX31mdW5jdGlvbiBGZShlKXtpZih2ZShlKSlyZXR1cm57bWVzc2FnZTplLm1lc3NhZ2UsbmFtZTplLm5hbWUsc3RhY2s6ZS5zdGFjaywuLi5VZShlKX07aWYoa2UoZSkpe2NvbnN0IHQ9e3R5cGU6ZS50eXBlLHRhcmdldDpCZShlLnRhcmdldCksY3VycmVudFRhcmdldDpCZShlLmN1cnJlbnRUYXJnZXQpLC4uLlVlKGUpfTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgQ3VzdG9tRXZlbnQmJkNlKGUsQ3VzdG9tRXZlbnQpJiYodC5kZXRhaWw9ZS5kZXRhaWwpLHR9cmV0dXJuIGV9ZnVuY3Rpb24gQmUoZSl7dHJ5e3JldHVybiB0PWUsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEVsZW1lbnQmJkNlKHQsRWxlbWVudCk/T2UoZSk6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWNhdGNoKGUpe3JldHVyblwiPHVua25vd24+XCJ9dmFyIHR9ZnVuY3Rpb24gVWUoZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lKXtjb25zdCB0PXt9O2Zvcihjb25zdCBuIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJih0W25dPWVbbl0pO3JldHVybiB0fXJldHVybnt9fWZ1bmN0aW9uIFZlKGUpe3JldHVybiBKZShlLG5ldyBNYXApfWZ1bmN0aW9uIEplKGUsdCl7aWYoZnVuY3Rpb24oZSl7aWYoIVNlKGUpKXJldHVybiExO3RyeXtjb25zdCB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKS5jb25zdHJ1Y3Rvci5uYW1lO3JldHVybiF0fHxcIk9iamVjdFwiPT09dH1jYXRjaChlKXtyZXR1cm4hMH19KGUpKXtjb25zdCBuPXQuZ2V0KGUpO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG47Y29uc3Qgcj17fTt0LnNldChlLHIpO2Zvcihjb25zdCBuIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpKXZvaWQgMCE9PWVbbl0mJihyW25dPUplKGVbbl0sdCkpO3JldHVybiByfWlmKEFycmF5LmlzQXJyYXkoZSkpe2NvbnN0IG49dC5nZXQoZSk7aWYodm9pZCAwIT09bilyZXR1cm4gbjtjb25zdCByPVtdO3JldHVybiB0LnNldChlLHIpLGUuZm9yRWFjaCgoZT0+e3IucHVzaChKZShlLHQpKX0pKSxyfXJldHVybiBlfWZ1bmN0aW9uICRlKCl7cmV0dXJuIERhdGUubm93KCkvMWUzfWNvbnN0IHFlPWZ1bmN0aW9uKCl7Y29uc3R7cGVyZm9ybWFuY2U6ZX09JDtpZighZXx8IWUubm93KXJldHVybiAkZTtjb25zdCB0PURhdGUubm93KCktZS5ub3coKSxuPW51bGw9PWUudGltZU9yaWdpbj90OmUudGltZU9yaWdpbjtyZXR1cm4oKT0+KG4rZS5ub3coKSkvMWUzfSgpO2Z1bmN0aW9uIHplKCl7Y29uc3QgZT0kLHQ9ZS5jcnlwdG98fGUubXNDcnlwdG87bGV0IG49KCk9PjE2Kk1hdGgucmFuZG9tKCk7dHJ5e2lmKHQmJnQucmFuZG9tVVVJRClyZXR1cm4gdC5yYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLFwiXCIpO3QmJnQuZ2V0UmFuZG9tVmFsdWVzJiYobj0oKT0+e2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIHQuZ2V0UmFuZG9tVmFsdWVzKGUpLGVbMF19KX1jYXRjaChlKXt9cmV0dXJuKFsxZTddKzFlMys0ZTMrOGUzKzFlMTEpLnJlcGxhY2UoL1swMThdL2csKGU9PihlXigxNSZuKCkpPj5lLzQpLnRvU3RyaW5nKDE2KSkpfWZ1bmN0aW9uIFdlKGUpe3JldHVybiBlLmV4Y2VwdGlvbiYmZS5leGNlcHRpb24udmFsdWVzP2UuZXhjZXB0aW9uLnZhbHVlc1swXTp2b2lkIDB9ZnVuY3Rpb24gSGUoZSl7Y29uc3R7bWVzc2FnZTp0LGV2ZW50X2lkOm59PWU7aWYodClyZXR1cm4gdDtjb25zdCByPVdlKGUpO3JldHVybiByP3IudHlwZSYmci52YWx1ZT9gJHtyLnR5cGV9OiAke3IudmFsdWV9YDpyLnR5cGV8fHIudmFsdWV8fG58fFwiPHVua25vd24+XCI6bnx8XCI8dW5rbm93bj5cIn1mdW5jdGlvbiBHZShlLHQsbil7Y29uc3Qgcj1lLmV4Y2VwdGlvbj1lLmV4Y2VwdGlvbnx8e30saT1yLnZhbHVlcz1yLnZhbHVlc3x8W10sbz1pWzBdPWlbMF18fHt9O28udmFsdWV8fChvLnZhbHVlPXR8fFwiXCIpLG8udHlwZXx8KG8udHlwZT1ufHxcIkVycm9yXCIpfWZ1bmN0aW9uIFFlKGUsdCl7Y29uc3Qgbj1XZShlKTtpZighbilyZXR1cm47Y29uc3Qgcj1uLm1lY2hhbmlzbTtpZihuLm1lY2hhbmlzbT17dHlwZTpcImdlbmVyaWNcIixoYW5kbGVkOiEwLC4uLnIsLi4udH0sdCYmXCJkYXRhXCJpbiB0KXtjb25zdCBlPXsuLi5yJiZyLmRhdGEsLi4udC5kYXRhfTtuLm1lY2hhbmlzbS5kYXRhPWV9fWZ1bmN0aW9uIEtlKGUpe2lmKGZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZS5fX3NlbnRyeV9jYXB0dXJlZF9ffWNhdGNoKGUpe319KGUpKXJldHVybiEwO3RyeXtEZShlLFwiX19zZW50cnlfY2FwdHVyZWRfX1wiLCEwKX1jYXRjaChlKXt9cmV0dXJuITF9dmFyIFllO2Z1bmN0aW9uIFhlKGUpe3JldHVybiBuZXcgZXQoKHQ9Pnt0KGUpfSkpfWZ1bmN0aW9uIFplKGUpe3JldHVybiBuZXcgZXQoKCh0LG4pPT57bihlKX0pKX0oKCk9Pntjb25zdHtwZXJmb3JtYW5jZTplfT0kO2lmKCFlfHwhZS5ub3cpcmV0dXJuO2NvbnN0IHQ9MzZlNSxuPWUubm93KCkscj1EYXRlLm5vdygpLGk9ZS50aW1lT3JpZ2luP01hdGguYWJzKGUudGltZU9yaWdpbituLXIpOnQsbz1pPHQscz1lLnRpbWluZyYmZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0LGE9XCJudW1iZXJcIj09dHlwZW9mIHM/TWF0aC5hYnMocytuLXIpOnQ7KG98fGE8dCkmJihpPD1hJiZlLnRpbWVPcmlnaW4pfSkoKSxmdW5jdGlvbihlKXtlW2UuUEVORElORz0wXT1cIlBFTkRJTkdcIjtlW2UuUkVTT0xWRUQ9MV09XCJSRVNPTFZFRFwiO2VbZS5SRUpFQ1RFRD0yXT1cIlJFSkVDVEVEXCJ9KFllfHwoWWU9e30pKTtjbGFzcyBldHtjb25zdHJ1Y3RvcihlKXtldC5wcm90b3R5cGUuX19pbml0LmNhbGwodGhpcyksZXQucHJvdG90eXBlLl9faW5pdDIuY2FsbCh0aGlzKSxldC5wcm90b3R5cGUuX19pbml0My5jYWxsKHRoaXMpLGV0LnByb3RvdHlwZS5fX2luaXQ0LmNhbGwodGhpcyksdGhpcy5fc3RhdGU9WWUuUEVORElORyx0aGlzLl9oYW5kbGVycz1bXTt0cnl7ZSh0aGlzLl9yZXNvbHZlLHRoaXMuX3JlamVjdCl9Y2F0Y2goZSl7dGhpcy5fcmVqZWN0KGUpfX10aGVuKGUsdCl7cmV0dXJuIG5ldyBldCgoKG4scik9Pnt0aGlzLl9oYW5kbGVycy5wdXNoKFshMSx0PT57aWYoZSl0cnl7bihlKHQpKX1jYXRjaChlKXtyKGUpfWVsc2Ugbih0KX0sZT0+e2lmKHQpdHJ5e24odChlKSl9Y2F0Y2goZSl7cihlKX1lbHNlIHIoZSl9XSksdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCl9KSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMudGhlbigoZT0+ZSksZSl9ZmluYWxseShlKXtyZXR1cm4gbmV3IGV0KCgodCxuKT0+e2xldCByLGk7cmV0dXJuIHRoaXMudGhlbigodD0+e2k9ITEscj10LGUmJmUoKX0pLCh0PT57aT0hMCxyPXQsZSYmZSgpfSkpLnRoZW4oKCgpPT57aT9uKHIpOnQocil9KSl9KSl9X19pbml0KCl7dGhpcy5fcmVzb2x2ZT1lPT57dGhpcy5fc2V0UmVzdWx0KFllLlJFU09MVkVELGUpfX1fX2luaXQyKCl7dGhpcy5fcmVqZWN0PWU9Pnt0aGlzLl9zZXRSZXN1bHQoWWUuUkVKRUNURUQsZSl9fV9faW5pdDMoKXt0aGlzLl9zZXRSZXN1bHQ9KGUsdCk9Pnt0aGlzLl9zdGF0ZT09PVllLlBFTkRJTkcmJihNZSh0KT90LnRoZW4odGhpcy5fcmVzb2x2ZSx0aGlzLl9yZWplY3QpOih0aGlzLl9zdGF0ZT1lLHRoaXMuX3ZhbHVlPXQsdGhpcy5fZXhlY3V0ZUhhbmRsZXJzKCkpKX19X19pbml0NCgpe3RoaXMuX2V4ZWN1dGVIYW5kbGVycz0oKT0+e2lmKHRoaXMuX3N0YXRlPT09WWUuUEVORElORylyZXR1cm47Y29uc3QgZT10aGlzLl9oYW5kbGVycy5zbGljZSgpO3RoaXMuX2hhbmRsZXJzPVtdLGUuZm9yRWFjaCgoZT0+e2VbMF18fCh0aGlzLl9zdGF0ZT09PVllLlJFU09MVkVEJiZlWzFdKHRoaXMuX3ZhbHVlKSx0aGlzLl9zdGF0ZT09PVllLlJFSkVDVEVEJiZlWzJdKHRoaXMuX3ZhbHVlKSxlWzBdPSEwKX0pKX19fWZ1bmN0aW9uIHR0KGUpe2NvbnN0IHQ9cWUoKSxuPXtzaWQ6emUoKSxpbml0OiEwLHRpbWVzdGFtcDp0LHN0YXJ0ZWQ6dCxkdXJhdGlvbjowLHN0YXR1czpcIm9rXCIsZXJyb3JzOjAsaWdub3JlRHVyYXRpb246ITEsdG9KU09OOigpPT5mdW5jdGlvbihlKXtyZXR1cm4gVmUoe3NpZDpgJHtlLnNpZH1gLGluaXQ6ZS5pbml0LHN0YXJ0ZWQ6bmV3IERhdGUoMWUzKmUuc3RhcnRlZCkudG9JU09TdHJpbmcoKSx0aW1lc3RhbXA6bmV3IERhdGUoMWUzKmUudGltZXN0YW1wKS50b0lTT1N0cmluZygpLHN0YXR1czplLnN0YXR1cyxlcnJvcnM6ZS5lcnJvcnMsZGlkOlwibnVtYmVyXCI9PXR5cGVvZiBlLmRpZHx8XCJzdHJpbmdcIj09dHlwZW9mIGUuZGlkP2Ake2UuZGlkfWA6dm9pZCAwLGR1cmF0aW9uOmUuZHVyYXRpb24sYWJub3JtYWxfbWVjaGFuaXNtOmUuYWJub3JtYWxfbWVjaGFuaXNtLGF0dHJzOntyZWxlYXNlOmUucmVsZWFzZSxlbnZpcm9ubWVudDplLmVudmlyb25tZW50LGlwX2FkZHJlc3M6ZS5pcEFkZHJlc3MsdXNlcl9hZ2VudDplLnVzZXJBZ2VudH19KX0obil9O3JldHVybiBlJiZudChuLGUpLG59ZnVuY3Rpb24gbnQoZSx0PXt9KXtpZih0LnVzZXImJighZS5pcEFkZHJlc3MmJnQudXNlci5pcF9hZGRyZXNzJiYoZS5pcEFkZHJlc3M9dC51c2VyLmlwX2FkZHJlc3MpLGUuZGlkfHx0LmRpZHx8KGUuZGlkPXQudXNlci5pZHx8dC51c2VyLmVtYWlsfHx0LnVzZXIudXNlcm5hbWUpKSxlLnRpbWVzdGFtcD10LnRpbWVzdGFtcHx8cWUoKSx0LmFibm9ybWFsX21lY2hhbmlzbSYmKGUuYWJub3JtYWxfbWVjaGFuaXNtPXQuYWJub3JtYWxfbWVjaGFuaXNtKSx0Lmlnbm9yZUR1cmF0aW9uJiYoZS5pZ25vcmVEdXJhdGlvbj10Lmlnbm9yZUR1cmF0aW9uKSx0LnNpZCYmKGUuc2lkPTMyPT09dC5zaWQubGVuZ3RoP3Quc2lkOnplKCkpLHZvaWQgMCE9PXQuaW5pdCYmKGUuaW5pdD10LmluaXQpLCFlLmRpZCYmdC5kaWQmJihlLmRpZD1gJHt0LmRpZH1gKSxcIm51bWJlclwiPT10eXBlb2YgdC5zdGFydGVkJiYoZS5zdGFydGVkPXQuc3RhcnRlZCksZS5pZ25vcmVEdXJhdGlvbillLmR1cmF0aW9uPXZvaWQgMDtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiB0LmR1cmF0aW9uKWUuZHVyYXRpb249dC5kdXJhdGlvbjtlbHNle2NvbnN0IHQ9ZS50aW1lc3RhbXAtZS5zdGFydGVkO2UuZHVyYXRpb249dD49MD90OjB9dC5yZWxlYXNlJiYoZS5yZWxlYXNlPXQucmVsZWFzZSksdC5lbnZpcm9ubWVudCYmKGUuZW52aXJvbm1lbnQ9dC5lbnZpcm9ubWVudCksIWUuaXBBZGRyZXNzJiZ0LmlwQWRkcmVzcyYmKGUuaXBBZGRyZXNzPXQuaXBBZGRyZXNzKSwhZS51c2VyQWdlbnQmJnQudXNlckFnZW50JiYoZS51c2VyQWdlbnQ9dC51c2VyQWdlbnQpLFwibnVtYmVyXCI9PXR5cGVvZiB0LmVycm9ycyYmKGUuZXJyb3JzPXQuZXJyb3JzKSx0LnN0YXR1cyYmKGUuc3RhdHVzPXQuc3RhdHVzKX1mdW5jdGlvbiBydCgpe3JldHVybiB6ZSgpfWZ1bmN0aW9uIGl0KCl7cmV0dXJuIHplKCkuc3Vic3RyaW5nKDE2KX1mdW5jdGlvbiBvdChlLHQsbj0yKXtpZighdHx8XCJvYmplY3RcIiE9dHlwZW9mIHR8fG48PTApcmV0dXJuIHQ7aWYoZSYmdCYmMD09PU9iamVjdC5rZXlzKHQpLmxlbmd0aClyZXR1cm4gZTtjb25zdCByPXsuLi5lfTtmb3IoY29uc3QgZSBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpJiYocltlXT1vdChyW2VdLHRbZV0sbi0xKSk7cmV0dXJuIHJ9Y29uc3Qgc3Q9XCJfc2VudHJ5U3BhblwiO2Z1bmN0aW9uIGF0KGUsdCl7dD9EZShlLHN0LHQpOmRlbGV0ZSBlW3N0XX1mdW5jdGlvbiBjdChlKXtyZXR1cm4gZVtzdF19Y2xhc3MgbHR7Y29uc3RydWN0b3IoKXt0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnM9ITEsdGhpcy5fc2NvcGVMaXN0ZW5lcnM9W10sdGhpcy5fZXZlbnRQcm9jZXNzb3JzPVtdLHRoaXMuX2JyZWFkY3J1bWJzPVtdLHRoaXMuX2F0dGFjaG1lbnRzPVtdLHRoaXMuX3VzZXI9e30sdGhpcy5fdGFncz17fSx0aGlzLl9leHRyYT17fSx0aGlzLl9jb250ZXh0cz17fSx0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGE9e30sdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0PXt0cmFjZUlkOnJ0KCksc3BhbklkOml0KCl9fWNsb25lKCl7Y29uc3QgZT1uZXcgbHQ7cmV0dXJuIGUuX2JyZWFkY3J1bWJzPVsuLi50aGlzLl9icmVhZGNydW1ic10sZS5fdGFncz17Li4udGhpcy5fdGFnc30sZS5fZXh0cmE9ey4uLnRoaXMuX2V4dHJhfSxlLl9jb250ZXh0cz17Li4udGhpcy5fY29udGV4dHN9LHRoaXMuX2NvbnRleHRzLmZsYWdzJiYoZS5fY29udGV4dHMuZmxhZ3M9e3ZhbHVlczpbLi4udGhpcy5fY29udGV4dHMuZmxhZ3MudmFsdWVzXX0pLGUuX3VzZXI9dGhpcy5fdXNlcixlLl9sZXZlbD10aGlzLl9sZXZlbCxlLl9zZXNzaW9uPXRoaXMuX3Nlc3Npb24sZS5fdHJhbnNhY3Rpb25OYW1lPXRoaXMuX3RyYW5zYWN0aW9uTmFtZSxlLl9maW5nZXJwcmludD10aGlzLl9maW5nZXJwcmludCxlLl9ldmVudFByb2Nlc3NvcnM9Wy4uLnRoaXMuX2V2ZW50UHJvY2Vzc29yc10sZS5fcmVxdWVzdFNlc3Npb249dGhpcy5fcmVxdWVzdFNlc3Npb24sZS5fYXR0YWNobWVudHM9Wy4uLnRoaXMuX2F0dGFjaG1lbnRzXSxlLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGE9ey4uLnRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YX0sZS5fcHJvcGFnYXRpb25Db250ZXh0PXsuLi50aGlzLl9wcm9wYWdhdGlvbkNvbnRleHR9LGUuX2NsaWVudD10aGlzLl9jbGllbnQsZS5fbGFzdEV2ZW50SWQ9dGhpcy5fbGFzdEV2ZW50SWQsYXQoZSxjdCh0aGlzKSksZX1zZXRDbGllbnQoZSl7dGhpcy5fY2xpZW50PWV9c2V0TGFzdEV2ZW50SWQoZSl7dGhpcy5fbGFzdEV2ZW50SWQ9ZX1nZXRDbGllbnQoKXtyZXR1cm4gdGhpcy5fY2xpZW50fWxhc3RFdmVudElkKCl7cmV0dXJuIHRoaXMuX2xhc3RFdmVudElkfWFkZFNjb3BlTGlzdGVuZXIoZSl7dGhpcy5fc2NvcGVMaXN0ZW5lcnMucHVzaChlKX1hZGRFdmVudFByb2Nlc3NvcihlKXtyZXR1cm4gdGhpcy5fZXZlbnRQcm9jZXNzb3JzLnB1c2goZSksdGhpc31zZXRVc2VyKGUpe3JldHVybiB0aGlzLl91c2VyPWV8fHtlbWFpbDp2b2lkIDAsaWQ6dm9pZCAwLGlwX2FkZHJlc3M6dm9pZCAwLHVzZXJuYW1lOnZvaWQgMH0sdGhpcy5fc2Vzc2lvbiYmbnQodGhpcy5fc2Vzc2lvbix7dXNlcjplfSksdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfWdldFVzZXIoKXtyZXR1cm4gdGhpcy5fdXNlcn1nZXRSZXF1ZXN0U2Vzc2lvbigpe3JldHVybiB0aGlzLl9yZXF1ZXN0U2Vzc2lvbn1zZXRSZXF1ZXN0U2Vzc2lvbihlKXtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlc3Npb249ZSx0aGlzfXNldFRhZ3MoZSl7cmV0dXJuIHRoaXMuX3RhZ3M9ey4uLnRoaXMuX3RhZ3MsLi4uZX0sdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfXNldFRhZyhlLHQpe3JldHVybiB0aGlzLl90YWdzPXsuLi50aGlzLl90YWdzLFtlXTp0fSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0RXh0cmFzKGUpe3JldHVybiB0aGlzLl9leHRyYT17Li4udGhpcy5fZXh0cmEsLi4uZX0sdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfXNldEV4dHJhKGUsdCl7cmV0dXJuIHRoaXMuX2V4dHJhPXsuLi50aGlzLl9leHRyYSxbZV06dH0sdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfXNldEZpbmdlcnByaW50KGUpe3JldHVybiB0aGlzLl9maW5nZXJwcmludD1lLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31zZXRMZXZlbChlKXtyZXR1cm4gdGhpcy5fbGV2ZWw9ZSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0VHJhbnNhY3Rpb25OYW1lKGUpe3JldHVybiB0aGlzLl90cmFuc2FjdGlvbk5hbWU9ZSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0Q29udGV4dChlLHQpe3JldHVybiBudWxsPT09dD9kZWxldGUgdGhpcy5fY29udGV4dHNbZV06dGhpcy5fY29udGV4dHNbZV09dCx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9c2V0U2Vzc2lvbihlKXtyZXR1cm4gZT90aGlzLl9zZXNzaW9uPWU6ZGVsZXRlIHRoaXMuX3Nlc3Npb24sdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSx0aGlzfWdldFNlc3Npb24oKXtyZXR1cm4gdGhpcy5fc2Vzc2lvbn11cGRhdGUoZSl7aWYoIWUpcmV0dXJuIHRoaXM7Y29uc3QgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2UodGhpcyk6ZSxbbixyXT10IGluc3RhbmNlb2YgdXQ/W3QuZ2V0U2NvcGVEYXRhKCksdC5nZXRSZXF1ZXN0U2Vzc2lvbigpXTpTZSh0KT9bZSxlLnJlcXVlc3RTZXNzaW9uXTpbXSx7dGFnczppLGV4dHJhOm8sdXNlcjpzLGNvbnRleHRzOmEsbGV2ZWw6YyxmaW5nZXJwcmludDpsPVtdLHByb3BhZ2F0aW9uQ29udGV4dDp1fT1ufHx7fTtyZXR1cm4gdGhpcy5fdGFncz17Li4udGhpcy5fdGFncywuLi5pfSx0aGlzLl9leHRyYT17Li4udGhpcy5fZXh0cmEsLi4ub30sdGhpcy5fY29udGV4dHM9ey4uLnRoaXMuX2NvbnRleHRzLC4uLmF9LHMmJk9iamVjdC5rZXlzKHMpLmxlbmd0aCYmKHRoaXMuX3VzZXI9cyksYyYmKHRoaXMuX2xldmVsPWMpLGwubGVuZ3RoJiYodGhpcy5fZmluZ2VycHJpbnQ9bCksdSYmKHRoaXMuX3Byb3BhZ2F0aW9uQ29udGV4dD11KSxyJiYodGhpcy5fcmVxdWVzdFNlc3Npb249ciksdGhpc31jbGVhcigpe3JldHVybiB0aGlzLl9icmVhZGNydW1icz1bXSx0aGlzLl90YWdzPXt9LHRoaXMuX2V4dHJhPXt9LHRoaXMuX3VzZXI9e30sdGhpcy5fY29udGV4dHM9e30sdGhpcy5fbGV2ZWw9dm9pZCAwLHRoaXMuX3RyYW5zYWN0aW9uTmFtZT12b2lkIDAsdGhpcy5fZmluZ2VycHJpbnQ9dm9pZCAwLHRoaXMuX3JlcXVlc3RTZXNzaW9uPXZvaWQgMCx0aGlzLl9zZXNzaW9uPXZvaWQgMCxhdCh0aGlzLHZvaWQgMCksdGhpcy5fYXR0YWNobWVudHM9W10sdGhpcy5zZXRQcm9wYWdhdGlvbkNvbnRleHQoe3RyYWNlSWQ6cnQoKX0pLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31hZGRCcmVhZGNydW1iKGUsdCl7Y29uc3Qgbj1cIm51bWJlclwiPT10eXBlb2YgdD90OjEwMDtpZihuPD0wKXJldHVybiB0aGlzO2NvbnN0IHI9e3RpbWVzdGFtcDokZSgpLC4uLmV9O3JldHVybiB0aGlzLl9icmVhZGNydW1icy5wdXNoKHIpLHRoaXMuX2JyZWFkY3J1bWJzLmxlbmd0aD5uJiYodGhpcy5fYnJlYWRjcnVtYnM9dGhpcy5fYnJlYWRjcnVtYnMuc2xpY2UoLW4pLHRoaXMuX2NsaWVudCYmdGhpcy5fY2xpZW50LnJlY29yZERyb3BwZWRFdmVudChcImJ1ZmZlcl9vdmVyZmxvd1wiLFwibG9nX2l0ZW1cIikpLHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksdGhpc31nZXRMYXN0QnJlYWRjcnVtYigpe3JldHVybiB0aGlzLl9icmVhZGNydW1ic1t0aGlzLl9icmVhZGNydW1icy5sZW5ndGgtMV19Y2xlYXJCcmVhZGNydW1icygpe3JldHVybiB0aGlzLl9icmVhZGNydW1icz1bXSx0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLHRoaXN9YWRkQXR0YWNobWVudChlKXtyZXR1cm4gdGhpcy5fYXR0YWNobWVudHMucHVzaChlKSx0aGlzfWNsZWFyQXR0YWNobWVudHMoKXtyZXR1cm4gdGhpcy5fYXR0YWNobWVudHM9W10sdGhpc31nZXRTY29wZURhdGEoKXtyZXR1cm57YnJlYWRjcnVtYnM6dGhpcy5fYnJlYWRjcnVtYnMsYXR0YWNobWVudHM6dGhpcy5fYXR0YWNobWVudHMsY29udGV4dHM6dGhpcy5fY29udGV4dHMsdGFnczp0aGlzLl90YWdzLGV4dHJhOnRoaXMuX2V4dHJhLHVzZXI6dGhpcy5fdXNlcixsZXZlbDp0aGlzLl9sZXZlbCxmaW5nZXJwcmludDp0aGlzLl9maW5nZXJwcmludHx8W10sZXZlbnRQcm9jZXNzb3JzOnRoaXMuX2V2ZW50UHJvY2Vzc29ycyxwcm9wYWdhdGlvbkNvbnRleHQ6dGhpcy5fcHJvcGFnYXRpb25Db250ZXh0LHNka1Byb2Nlc3NpbmdNZXRhZGF0YTp0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEsdHJhbnNhY3Rpb25OYW1lOnRoaXMuX3RyYW5zYWN0aW9uTmFtZSxzcGFuOmN0KHRoaXMpfX1zZXRTREtQcm9jZXNzaW5nTWV0YWRhdGEoZSl7cmV0dXJuIHRoaXMuX3Nka1Byb2Nlc3NpbmdNZXRhZGF0YT1vdCh0aGlzLl9zZGtQcm9jZXNzaW5nTWV0YWRhdGEsZSwyKSx0aGlzfXNldFByb3BhZ2F0aW9uQ29udGV4dChlKXtyZXR1cm4gdGhpcy5fcHJvcGFnYXRpb25Db250ZXh0PXtzcGFuSWQ6aXQoKSwuLi5lfSx0aGlzfWdldFByb3BhZ2F0aW9uQ29udGV4dCgpe3JldHVybiB0aGlzLl9wcm9wYWdhdGlvbkNvbnRleHR9Y2FwdHVyZUV4Y2VwdGlvbihlLHQpe2NvbnN0IG49dCYmdC5ldmVudF9pZD90LmV2ZW50X2lkOnplKCk7aWYoIXRoaXMuX2NsaWVudClyZXR1cm4gUS53YXJuKFwiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV4Y2VwdGlvbiFcIiksbjtjb25zdCByPW5ldyBFcnJvcihcIlNlbnRyeSBzeW50aGV0aWNFeGNlcHRpb25cIik7cmV0dXJuIHRoaXMuX2NsaWVudC5jYXB0dXJlRXhjZXB0aW9uKGUse29yaWdpbmFsRXhjZXB0aW9uOmUsc3ludGhldGljRXhjZXB0aW9uOnIsLi4udCxldmVudF9pZDpufSx0aGlzKSxufWNhcHR1cmVNZXNzYWdlKGUsdCxuKXtjb25zdCByPW4mJm4uZXZlbnRfaWQ/bi5ldmVudF9pZDp6ZSgpO2lmKCF0aGlzLl9jbGllbnQpcmV0dXJuIFEud2FybihcIk5vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBtZXNzYWdlIVwiKSxyO2NvbnN0IGk9bmV3IEVycm9yKGUpO3JldHVybiB0aGlzLl9jbGllbnQuY2FwdHVyZU1lc3NhZ2UoZSx0LHtvcmlnaW5hbEV4Y2VwdGlvbjplLHN5bnRoZXRpY0V4Y2VwdGlvbjppLC4uLm4sZXZlbnRfaWQ6cn0sdGhpcykscn1jYXB0dXJlRXZlbnQoZSx0KXtjb25zdCBuPXQmJnQuZXZlbnRfaWQ/dC5ldmVudF9pZDp6ZSgpO3JldHVybiB0aGlzLl9jbGllbnQ/KHRoaXMuX2NsaWVudC5jYXB0dXJlRXZlbnQoZSx7Li4udCxldmVudF9pZDpufSx0aGlzKSxuKTooUS53YXJuKFwiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50IVwiKSxuKX1fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKXt0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnN8fCh0aGlzLl9ub3RpZnlpbmdMaXN0ZW5lcnM9ITAsdGhpcy5fc2NvcGVMaXN0ZW5lcnMuZm9yRWFjaCgoZT0+e2UodGhpcyl9KSksdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzPSExKX19Y29uc3QgdXQ9bHQ7Y2xhc3MgZHR7Y29uc3RydWN0b3IoZSx0KXtsZXQgbixyO249ZXx8bmV3IHV0LHI9dHx8bmV3IHV0LHRoaXMuX3N0YWNrPVt7c2NvcGU6bn1dLHRoaXMuX2lzb2xhdGlvblNjb3BlPXJ9d2l0aFNjb3BlKGUpe2NvbnN0IHQ9dGhpcy5fcHVzaFNjb3BlKCk7bGV0IG47dHJ5e249ZSh0KX1jYXRjaChlKXt0aHJvdyB0aGlzLl9wb3BTY29wZSgpLGV9cmV0dXJuIE1lKG4pP24udGhlbigoZT0+KHRoaXMuX3BvcFNjb3BlKCksZSkpLChlPT57dGhyb3cgdGhpcy5fcG9wU2NvcGUoKSxlfSkpOih0aGlzLl9wb3BTY29wZSgpLG4pfWdldENsaWVudCgpe3JldHVybiB0aGlzLmdldFN0YWNrVG9wKCkuY2xpZW50fWdldFNjb3BlKCl7cmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5zY29wZX1nZXRJc29sYXRpb25TY29wZSgpe3JldHVybiB0aGlzLl9pc29sYXRpb25TY29wZX1nZXRTdGFja1RvcCgpe3JldHVybiB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGgtMV19X3B1c2hTY29wZSgpe2NvbnN0IGU9dGhpcy5nZXRTY29wZSgpLmNsb25lKCk7cmV0dXJuIHRoaXMuX3N0YWNrLnB1c2goe2NsaWVudDp0aGlzLmdldENsaWVudCgpLHNjb3BlOmV9KSxlfV9wb3BTY29wZSgpe3JldHVybiEodGhpcy5fc3RhY2subGVuZ3RoPD0xKSYmISF0aGlzLl9zdGFjay5wb3AoKX19ZnVuY3Rpb24gcHQoKXtjb25zdCBlPWhlKHBlKCkpO3JldHVybiBlLnN0YWNrPWUuc3RhY2t8fG5ldyBkdChxKFwiZGVmYXVsdEN1cnJlbnRTY29wZVwiLCgoKT0+bmV3IHV0KSkscShcImRlZmF1bHRJc29sYXRpb25TY29wZVwiLCgoKT0+bmV3IHV0KSkpfWZ1bmN0aW9uIGh0KGUpe3JldHVybiBwdCgpLndpdGhTY29wZShlKX1mdW5jdGlvbiBmdChlLHQpe2NvbnN0IG49cHQoKTtyZXR1cm4gbi53aXRoU2NvcGUoKCgpPT4obi5nZXRTdGFja1RvcCgpLnNjb3BlPWUsdChlKSkpKX1mdW5jdGlvbiB2dChlKXtyZXR1cm4gcHQoKS53aXRoU2NvcGUoKCgpPT5lKHB0KCkuZ2V0SXNvbGF0aW9uU2NvcGUoKSkpKX1mdW5jdGlvbiBndChlKXtjb25zdCB0PWhlKGUpO3JldHVybiB0LmFjcz90LmFjczp7d2l0aElzb2xhdGlvblNjb3BlOnZ0LHdpdGhTY29wZTpodCx3aXRoU2V0U2NvcGU6ZnQsd2l0aFNldElzb2xhdGlvblNjb3BlOihlLHQpPT52dCh0KSxnZXRDdXJyZW50U2NvcGU6KCk9PnB0KCkuZ2V0U2NvcGUoKSxnZXRJc29sYXRpb25TY29wZTooKT0+cHQoKS5nZXRJc29sYXRpb25TY29wZSgpfX1mdW5jdGlvbiBtdCgpe3JldHVybiBndChwZSgpKS5nZXRDdXJyZW50U2NvcGUoKX1mdW5jdGlvbiB5dCgpe3JldHVybiBndChwZSgpKS5nZXRJc29sYXRpb25TY29wZSgpfWZ1bmN0aW9uIGJ0KCl7cmV0dXJuIG10KCkuZ2V0Q2xpZW50KCl9ZnVuY3Rpb24gX3QoZSl7Y29uc3QgdD1lLmdldFByb3BhZ2F0aW9uQ29udGV4dCgpLHt0cmFjZUlkOm4sc3BhbklkOnIscGFyZW50U3BhbklkOml9PXQ7cmV0dXJuIFZlKHt0cmFjZV9pZDpuLHNwYW5faWQ6cixwYXJlbnRfc3Bhbl9pZDppfSl9ZnVuY3Rpb24gd3QoZSl7Y29uc3QgdD1lLl9zZW50cnlNZXRyaWNzO2lmKCF0KXJldHVybjtjb25zdCBuPXt9O2Zvcihjb25zdFssW2Uscl1db2YgdCl7KG5bZV18fChuW2VdPVtdKSkucHVzaChWZShyKSl9cmV0dXJuIG59Y29uc3QgU3Q9L15zZW50cnktLztmdW5jdGlvbiBrdChlKXtjb25zdCB0PWZ1bmN0aW9uKGUpe2lmKCFlfHwhYmUoZSkmJiFBcnJheS5pc0FycmF5KGUpKXJldHVybjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlLnJlZHVjZSgoKGUsdCk9Pntjb25zdCBuPU10KHQpO3JldHVybiBPYmplY3QuZW50cmllcyhuKS5mb3JFYWNoKCgoW3Qsbl0pPT57ZVt0XT1ufSkpLGV9KSx7fSk7cmV0dXJuIE10KGUpfShlKTtpZighdClyZXR1cm47Y29uc3Qgbj1PYmplY3QuZW50cmllcyh0KS5yZWR1Y2UoKChlLFt0LG5dKT0+e2lmKHQubWF0Y2goU3QpKXtlW3Quc2xpY2UoNyldPW59cmV0dXJuIGV9KSx7fSk7cmV0dXJuIE9iamVjdC5rZXlzKG4pLmxlbmd0aD4wP246dm9pZCAwfWZ1bmN0aW9uIE10KGUpe3JldHVybiBlLnNwbGl0KFwiLFwiKS5tYXAoKGU9PmUuc3BsaXQoXCI9XCIpLm1hcCgoZT0+ZGVjb2RlVVJJQ29tcG9uZW50KGUudHJpbSgpKSkpKSkucmVkdWNlKCgoZSxbdCxuXSk9Pih0JiZuJiYoZVt0XT1uKSxlKSkse30pfWxldCBDdD0hMTtmdW5jdGlvbiBFdChlKXtjb25zdHtzcGFuSWQ6dCx0cmFjZUlkOm4saXNSZW1vdGU6cn09ZS5zcGFuQ29udGV4dCgpO3JldHVybiBWZSh7cGFyZW50X3NwYW5faWQ6cj90OlB0KGUpLnBhcmVudF9zcGFuX2lkLHNwYW5faWQ6cj9pdCgpOnQsdHJhY2VfaWQ6bn0pfWZ1bmN0aW9uIFR0KGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlP090KGUpOkFycmF5LmlzQXJyYXkoZSk/ZVswXStlWzFdLzFlOTplIGluc3RhbmNlb2YgRGF0ZT9PdChlLmdldFRpbWUoKSk6cWUoKX1mdW5jdGlvbiBPdChlKXtyZXR1cm4gZT45OTk5OTk5OTk5P2UvMWUzOmV9ZnVuY3Rpb24gUHQoZSl7aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZS5nZXRTcGFuSlNPTn0oZSkpcmV0dXJuIGUuZ2V0U3BhbkpTT04oKTt0cnl7Y29uc3R7c3BhbklkOnQsdHJhY2VJZDpufT1lLnNwYW5Db250ZXh0KCk7aWYoZnVuY3Rpb24oZSl7Y29uc3QgdD1lO3JldHVybiEhKHQuYXR0cmlidXRlcyYmdC5zdGFydFRpbWUmJnQubmFtZSYmdC5lbmRUaW1lJiZ0LnN0YXR1cyl9KGUpKXtjb25zdHthdHRyaWJ1dGVzOnIsc3RhcnRUaW1lOmksbmFtZTpvLGVuZFRpbWU6cyxwYXJlbnRTcGFuSWQ6YSxzdGF0dXM6Y309ZTtyZXR1cm4gVmUoe3NwYW5faWQ6dCx0cmFjZV9pZDpuLGRhdGE6cixkZXNjcmlwdGlvbjpvLHBhcmVudF9zcGFuX2lkOmEsc3RhcnRfdGltZXN0YW1wOlR0KGkpLHRpbWVzdGFtcDpUdChzKXx8dm9pZCAwLHN0YXR1czpBdChjKSxvcDpyW1wic2VudHJ5Lm9wXCJdLG9yaWdpbjpyW1wic2VudHJ5Lm9yaWdpblwiXSxfbWV0cmljc19zdW1tYXJ5Ond0KGUpfSl9cmV0dXJue3NwYW5faWQ6dCx0cmFjZV9pZDpufX1jYXRjaChlKXtyZXR1cm57fX19ZnVuY3Rpb24gQXQoZSl7aWYoZSYmMCE9PWUuY29kZSlyZXR1cm4gMT09PWUuY29kZT9cIm9rXCI6ZS5tZXNzYWdlfHxcInVua25vd25fZXJyb3JcIn1mdW5jdGlvbiBqdChlKXtyZXR1cm4gZS5fc2VudHJ5Um9vdFNwYW58fGV9ZnVuY3Rpb24gSXQoKXtDdHx8KEcoKCgpPT57Y29uc29sZS53YXJuKFwiW1NlbnRyeV0gRGVwcmVjYXRpb24gd2FybmluZzogUmV0dXJuaW5nIG51bGwgZnJvbSBgYmVmb3JlU2VuZFNwYW5gIHdpbGwgYmUgZGlzYWxsb3dlZCBmcm9tIFNESyB2ZXJzaW9uIDkuMC4wIG9ud2FyZHMuIFRoZSBjYWxsYmFjayB3aWxsIG9ubHkgc3VwcG9ydCBtdXRhdGluZyBzcGFucy4gVG8gZHJvcCBjZXJ0YWluIHNwYW5zLCBjb25maWd1cmUgdGhlIHJlc3BlY3RpdmUgaW50ZWdyYXRpb25zIGRpcmVjdGx5LlwiKX0pKSxDdD0hMCl9Y29uc3QgeHQ9XCJwcm9kdWN0aW9uXCI7ZnVuY3Rpb24gTHQoZSx0KXtjb25zdCBuPXQuZ2V0T3B0aW9ucygpLHtwdWJsaWNLZXk6cn09dC5nZXREc24oKXx8e30saT1WZSh7ZW52aXJvbm1lbnQ6bi5lbnZpcm9ubWVudHx8eHQscmVsZWFzZTpuLnJlbGVhc2UscHVibGljX2tleTpyLHRyYWNlX2lkOmV9KTtyZXR1cm4gdC5lbWl0KFwiY3JlYXRlRHNjXCIsaSksaX1mdW5jdGlvbiBEdChlKXtjb25zdCB0PWJ0KCk7aWYoIXQpcmV0dXJue307Y29uc3Qgbj1qdChlKSxyPW4uX2Zyb3plbkRzYztpZihyKXJldHVybiByO2NvbnN0IGk9bi5zcGFuQ29udGV4dCgpLnRyYWNlU3RhdGUsbz1pJiZpLmdldChcInNlbnRyeS5kc2NcIikscz1vJiZrdChvKTtpZihzKXJldHVybiBzO2NvbnN0IGE9THQoZS5zcGFuQ29udGV4dCgpLnRyYWNlSWQsdCksYz1QdChuKSxsPWMuZGF0YXx8e30sdT1sW1wic2VudHJ5LnNhbXBsZV9yYXRlXCJdO251bGwhPXUmJihhLnNhbXBsZV9yYXRlPWAke3V9YCk7Y29uc3QgZD1sW1wic2VudHJ5LnNvdXJjZVwiXSxwPWMuZGVzY3JpcHRpb247cmV0dXJuXCJ1cmxcIiE9PWQmJnAmJihhLnRyYW5zYWN0aW9uPXApLGZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgX19TRU5UUllfVFJBQ0lOR19fJiYhX19TRU5UUllfVFJBQ0lOR19fKXJldHVybiExO2NvbnN0IHQ9YnQoKSxuPWV8fHQmJnQuZ2V0T3B0aW9ucygpO3JldHVybiEhbiYmKG4uZW5hYmxlVHJhY2luZ3x8XCJ0cmFjZXNTYW1wbGVSYXRlXCJpbiBufHxcInRyYWNlc1NhbXBsZXJcImluIG4pfSgpJiYoYS5zYW1wbGVkPVN0cmluZyhmdW5jdGlvbihlKXtjb25zdHt0cmFjZUZsYWdzOnR9PWUuc3BhbkNvbnRleHQoKTtyZXR1cm4gMT09PXR9KG4pKSksdC5lbWl0KFwiY3JlYXRlRHNjXCIsYSxuKSxhfWNvbnN0IE50PS9eKD86KFxcdyspOilcXC9cXC8oPzooXFx3KykoPzo6KFxcdyspPyk/QCkoW1xcdy4tXSspKD86OihcXGQrKSk/XFwvKC4rKS87ZnVuY3Rpb24gUnQoZSx0PSExKXtjb25zdHtob3N0Om4scGF0aDpyLHBhc3M6aSxwb3J0Om8scHJvamVjdElkOnMscHJvdG9jb2w6YSxwdWJsaWNLZXk6Y309ZTtyZXR1cm5gJHthfTovLyR7Y30ke3QmJmk/YDoke2l9YDpcIlwifUAke259JHtvP2A6JHtvfWA6XCJcIn0vJHtyP2Ake3J9L2A6cn0ke3N9YH1mdW5jdGlvbiBGdChlKXtyZXR1cm57cHJvdG9jb2w6ZS5wcm90b2NvbCxwdWJsaWNLZXk6ZS5wdWJsaWNLZXl8fFwiXCIscGFzczplLnBhc3N8fFwiXCIsaG9zdDplLmhvc3QscG9ydDplLnBvcnR8fFwiXCIscGF0aDplLnBhdGh8fFwiXCIscHJvamVjdElkOmUucHJvamVjdElkfX1mdW5jdGlvbiBCdChlKXtjb25zdCB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2Z1bmN0aW9uKGUpe2NvbnN0IHQ9TnQuZXhlYyhlKTtpZighdClyZXR1cm4gdm9pZCBHKCgoKT0+e2NvbnNvbGUuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogJHtlfWApfSkpO2NvbnN0W24scixpPVwiXCIsbz1cIlwiLHM9XCJcIixhPVwiXCJdPXQuc2xpY2UoMSk7bGV0IGM9XCJcIixsPWE7Y29uc3QgdT1sLnNwbGl0KFwiL1wiKTtpZih1Lmxlbmd0aD4xJiYoYz11LnNsaWNlKDAsLTEpLmpvaW4oXCIvXCIpLGw9dS5wb3AoKSksbCl7Y29uc3QgZT1sLm1hdGNoKC9eXFxkKy8pO2UmJihsPWVbMF0pfXJldHVybiBGdCh7aG9zdDpvLHBhc3M6aSxwYXRoOmMscHJvamVjdElkOmwscG9ydDpzLHByb3RvY29sOm4scHVibGljS2V5OnJ9KX0oZSk6RnQoZSk7aWYodCYmZnVuY3Rpb24oZSl7aWYoIXopcmV0dXJuITA7Y29uc3R7cG9ydDp0LHByb2plY3RJZDpuLHByb3RvY29sOnJ9PWU7cmV0dXJuIShbXCJwcm90b2NvbFwiLFwicHVibGljS2V5XCIsXCJob3N0XCIsXCJwcm9qZWN0SWRcIl0uZmluZCgodD0+IWVbdF0mJihRLmVycm9yKGBJbnZhbGlkIFNlbnRyeSBEc246ICR7dH0gbWlzc2luZ2ApLCEwKSkpfHwobi5tYXRjaCgvXlxcZCskLyk/ZnVuY3Rpb24oZSl7cmV0dXJuXCJodHRwXCI9PT1lfHxcImh0dHBzXCI9PT1lfShyKT90JiZpc05hTihwYXJzZUludCh0LDEwKSkmJihRLmVycm9yKGBJbnZhbGlkIFNlbnRyeSBEc246IEludmFsaWQgcG9ydCAke3R9YCksMSk6KFEuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogSW52YWxpZCBwcm90b2NvbCAke3J9YCksMSk6KFEuZXJyb3IoYEludmFsaWQgU2VudHJ5IERzbjogSW52YWxpZCBwcm9qZWN0SWQgJHtufWApLDEpKSl9KHQpKXJldHVybiB0fWZ1bmN0aW9uIFV0KGUsdD0xMDAsbj0xLzApe3RyeXtyZXR1cm4gSnQoXCJcIixlLHQsbil9Y2F0Y2goZSl7cmV0dXJue0VSUk9SOmAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHtlfSlgfX19ZnVuY3Rpb24gVnQoZSx0PTMsbj0xMDI0MDApe2NvbnN0IHI9VXQoZSx0KTtyZXR1cm4gaT1yLGZ1bmN0aW9uKGUpe3JldHVybn4tZW5jb2RlVVJJKGUpLnNwbGl0KC8lLi58Li8pLmxlbmd0aH0oSlNPTi5zdHJpbmdpZnkoaSkpPm4/VnQoZSx0LTEsbik6cjt2YXIgaX1mdW5jdGlvbiBKdChlLHQsbj0xLzAscj0xLzAsaT1mdW5jdGlvbigpe2NvbnN0IGU9XCJmdW5jdGlvblwiPT10eXBlb2YgV2Vha1NldCx0PWU/bmV3IFdlYWtTZXQ6W107cmV0dXJuW2Z1bmN0aW9uKG4pe2lmKGUpcmV0dXJuISF0LmhhcyhuKXx8KHQuYWRkKG4pLCExKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdPT09bilyZXR1cm4hMDtyZXR1cm4gdC5wdXNoKG4pLCExfSxmdW5jdGlvbihuKXtpZihlKXQuZGVsZXRlKG4pO2Vsc2UgZm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXT09PW4pe3Quc3BsaWNlKGUsMSk7YnJlYWt9fV19KCkpe2NvbnN0W28sc109aTtpZihudWxsPT10fHxbXCJib29sZWFuXCIsXCJzdHJpbmdcIl0uaW5jbHVkZXModHlwZW9mIHQpfHxcIm51bWJlclwiPT10eXBlb2YgdCYmTnVtYmVyLmlzRmluaXRlKHQpKXJldHVybiB0O2NvbnN0IGE9ZnVuY3Rpb24oZSx0KXt0cnl7aWYoXCJkb21haW5cIj09PWUmJnQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0Ll9ldmVudHMpcmV0dXJuXCJbRG9tYWluXVwiO2lmKFwiZG9tYWluRW1pdHRlclwiPT09ZSlyZXR1cm5cIltEb21haW5FbWl0dGVyXVwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWwmJnQ9PT1nbG9iYWwpcmV0dXJuXCJbR2xvYmFsXVwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJnQ9PT13aW5kb3cpcmV0dXJuXCJbV2luZG93XVwiO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmdD09PWRvY3VtZW50KXJldHVyblwiW0RvY3VtZW50XVwiO2lmKEVlKHQpKXJldHVyblwiW1Z1ZVZpZXdNb2RlbF1cIjtpZihTZShuPXQpJiZcIm5hdGl2ZUV2ZW50XCJpbiBuJiZcInByZXZlbnREZWZhdWx0XCJpbiBuJiZcInN0b3BQcm9wYWdhdGlvblwiaW4gbilyZXR1cm5cIltTeW50aGV0aWNFdmVudF1cIjtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmIU51bWJlci5pc0Zpbml0ZSh0KSlyZXR1cm5gWyR7dH1dYDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KXJldHVybmBbRnVuY3Rpb246ICR7dGUodCl9XWA7aWYoXCJzeW1ib2xcIj09dHlwZW9mIHQpcmV0dXJuYFske1N0cmluZyh0KX1dYDtpZihcImJpZ2ludFwiPT10eXBlb2YgdClyZXR1cm5gW0JpZ0ludDogJHtTdHJpbmcodCl9XWA7Y29uc3Qgcj1mdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gdD90LmNvbnN0cnVjdG9yLm5hbWU6XCJudWxsIHByb3RvdHlwZVwifSh0KTtyZXR1cm4vXkhUTUwoXFx3KilFbGVtZW50JC8udGVzdChyKT9gW0hUTUxFbGVtZW50OiAke3J9XWA6YFtvYmplY3QgJHtyfV1gfWNhdGNoKGUpe3JldHVybmAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHtlfSlgfXZhciBufShlLHQpO2lmKCFhLnN0YXJ0c1dpdGgoXCJbb2JqZWN0IFwiKSlyZXR1cm4gYTtpZih0Ll9fc2VudHJ5X3NraXBfbm9ybWFsaXphdGlvbl9fKXJldHVybiB0O2NvbnN0IGM9XCJudW1iZXJcIj09dHlwZW9mIHQuX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fP3QuX19zZW50cnlfb3ZlcnJpZGVfbm9ybWFsaXphdGlvbl9kZXB0aF9fOm47aWYoMD09PWMpcmV0dXJuIGEucmVwbGFjZShcIm9iamVjdCBcIixcIlwiKTtpZihvKHQpKXJldHVyblwiW0NpcmN1bGFyIH5dXCI7Y29uc3QgbD10O2lmKGwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGwudG9KU09OKXRyeXtyZXR1cm4gSnQoXCJcIixsLnRvSlNPTigpLGMtMSxyLGkpfWNhdGNoKGUpe31jb25zdCB1PUFycmF5LmlzQXJyYXkodCk/W106e307bGV0IGQ9MDtjb25zdCBwPUZlKHQpO2Zvcihjb25zdCBlIGluIHApe2lmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocCxlKSljb250aW51ZTtpZihkPj1yKXt1W2VdPVwiW01heFByb3BlcnRpZXMgfl1cIjticmVha31jb25zdCB0PXBbZV07dVtlXT1KdChlLHQsYy0xLHIsaSksZCsrfXJldHVybiBzKHQpLHV9ZnVuY3Rpb24gJHQoZSx0PVtdKXtyZXR1cm5bZSx0XX1mdW5jdGlvbiBxdChlLHQpe2NvbnN0W24scl09ZTtyZXR1cm5bbixbLi4ucix0XV19ZnVuY3Rpb24genQoZSx0KXtjb25zdCBuPWVbMV07Zm9yKGNvbnN0IGUgb2Ygbil7aWYodChlLGVbMF0udHlwZSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gV3QoZSl7cmV0dXJuICQuX19TRU5UUllfXyYmJC5fX1NFTlRSWV9fLmVuY29kZVBvbHlmaWxsPyQuX19TRU5UUllfXy5lbmNvZGVQb2x5ZmlsbChlKToobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUoZSl9ZnVuY3Rpb24gSHQoZSl7Y29uc3RbdCxuXT1lO2xldCByPUpTT04uc3RyaW5naWZ5KHQpO2Z1bmN0aW9uIGkoZSl7XCJzdHJpbmdcIj09dHlwZW9mIHI/cj1cInN0cmluZ1wiPT10eXBlb2YgZT9yK2U6W1d0KHIpLGVdOnIucHVzaChcInN0cmluZ1wiPT10eXBlb2YgZT9XdChlKTplKX1mb3IoY29uc3QgZSBvZiBuKXtjb25zdFt0LG5dPWU7aWYoaShgXFxuJHtKU09OLnN0cmluZ2lmeSh0KX1cXG5gKSxcInN0cmluZ1wiPT10eXBlb2Ygbnx8biBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpaShuKTtlbHNle2xldCBlO3RyeXtlPUpTT04uc3RyaW5naWZ5KG4pfWNhdGNoKHQpe2U9SlNPTi5zdHJpbmdpZnkoVXQobikpfWkoZSl9fXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiByP3I6ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLnJlZHVjZSgoKGUsdCk9PmUrdC5sZW5ndGgpLDApLG49bmV3IFVpbnQ4QXJyYXkodCk7bGV0IHI9MDtmb3IoY29uc3QgdCBvZiBlKW4uc2V0KHQscikscis9dC5sZW5ndGg7cmV0dXJuIG59KHIpfWZ1bmN0aW9uIEd0KGUpe2NvbnN0IHQ9XCJzdHJpbmdcIj09dHlwZW9mIGUuZGF0YT9XdChlLmRhdGEpOmUuZGF0YTtyZXR1cm5bVmUoe3R5cGU6XCJhdHRhY2htZW50XCIsbGVuZ3RoOnQubGVuZ3RoLGZpbGVuYW1lOmUuZmlsZW5hbWUsY29udGVudF90eXBlOmUuY29udGVudFR5cGUsYXR0YWNobWVudF90eXBlOmUuYXR0YWNobWVudFR5cGV9KSx0XX1jb25zdCBRdD17c2Vzc2lvbjpcInNlc3Npb25cIixzZXNzaW9uczpcInNlc3Npb25cIixhdHRhY2htZW50OlwiYXR0YWNobWVudFwiLHRyYW5zYWN0aW9uOlwidHJhbnNhY3Rpb25cIixldmVudDpcImVycm9yXCIsY2xpZW50X3JlcG9ydDpcImludGVybmFsXCIsdXNlcl9yZXBvcnQ6XCJkZWZhdWx0XCIscHJvZmlsZTpcInByb2ZpbGVcIixwcm9maWxlX2NodW5rOlwicHJvZmlsZVwiLHJlcGxheV9ldmVudDpcInJlcGxheVwiLHJlcGxheV9yZWNvcmRpbmc6XCJyZXBsYXlcIixjaGVja19pbjpcIm1vbml0b3JcIixmZWVkYmFjazpcImZlZWRiYWNrXCIsc3BhbjpcInNwYW5cIixzdGF0c2Q6XCJtZXRyaWNfYnVja2V0XCIscmF3X3NlY3VyaXR5Olwic2VjdXJpdHlcIn07ZnVuY3Rpb24gS3QoZSl7cmV0dXJuIFF0W2VdfWZ1bmN0aW9uIFl0KGUpe2lmKCFlfHwhZS5zZGspcmV0dXJuO2NvbnN0e25hbWU6dCx2ZXJzaW9uOm59PWUuc2RrO3JldHVybntuYW1lOnQsdmVyc2lvbjpufX1mdW5jdGlvbiBYdChlLHQsbixyKXtjb25zdCBpPVl0KG4pLG89ZS50eXBlJiZcInJlcGxheV9ldmVudFwiIT09ZS50eXBlP2UudHlwZTpcImV2ZW50XCI7IWZ1bmN0aW9uKGUsdCl7dCYmKGUuc2RrPWUuc2RrfHx7fSxlLnNkay5uYW1lPWUuc2RrLm5hbWV8fHQubmFtZSxlLnNkay52ZXJzaW9uPWUuc2RrLnZlcnNpb258fHQudmVyc2lvbixlLnNkay5pbnRlZ3JhdGlvbnM9Wy4uLmUuc2RrLmludGVncmF0aW9uc3x8W10sLi4udC5pbnRlZ3JhdGlvbnN8fFtdXSxlLnNkay5wYWNrYWdlcz1bLi4uZS5zZGsucGFja2FnZXN8fFtdLC4uLnQucGFja2FnZXN8fFtdXSl9KGUsbiYmbi5zZGspO2NvbnN0IHM9ZnVuY3Rpb24oZSx0LG4scil7Y29uc3QgaT1lLnNka1Byb2Nlc3NpbmdNZXRhZGF0YSYmZS5zZGtQcm9jZXNzaW5nTWV0YWRhdGEuZHluYW1pY1NhbXBsaW5nQ29udGV4dDtyZXR1cm57ZXZlbnRfaWQ6ZS5ldmVudF9pZCxzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi50JiZ7c2RrOnR9LC4uLiEhbiYmciYme2RzbjpSdChyKX0sLi4uaSYme3RyYWNlOlZlKHsuLi5pfSl9fX0oZSxpLHIsdCk7ZGVsZXRlIGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhO3JldHVybiAkdChzLFtbe3R5cGU6b30sZV1dKX1mdW5jdGlvbiBadChlLHQsbixyPTApe3JldHVybiBuZXcgZXQoKChpLG8pPT57Y29uc3Qgcz1lW3JdO2lmKG51bGw9PT10fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBzKWkodCk7ZWxzZXtjb25zdCBhPXMoey4uLnR9LG4pO1YmJnMuaWQmJm51bGw9PT1hJiZRLmxvZyhgRXZlbnQgcHJvY2Vzc29yIFwiJHtzLmlkfVwiIGRyb3BwZWQgZXZlbnRgKSxNZShhKT9hLnRoZW4oKHQ9Plp0KGUsdCxuLHIrMSkudGhlbihpKSkpLnRoZW4obnVsbCxvKTpadChlLGEsbixyKzEpLnRoZW4oaSkudGhlbihudWxsLG8pfX0pKX1sZXQgZW4sdG4sbm47ZnVuY3Rpb24gcm4oZSx0KXtjb25zdHtmaW5nZXJwcmludDpuLHNwYW46cixicmVhZGNydW1iczppLHNka1Byb2Nlc3NpbmdNZXRhZGF0YTpvfT10OyFmdW5jdGlvbihlLHQpe2NvbnN0e2V4dHJhOm4sdGFnczpyLHVzZXI6aSxjb250ZXh0czpvLGxldmVsOnMsdHJhbnNhY3Rpb25OYW1lOmF9PXQsYz1WZShuKTtjJiZPYmplY3Qua2V5cyhjKS5sZW5ndGgmJihlLmV4dHJhPXsuLi5jLC4uLmUuZXh0cmF9KTtjb25zdCBsPVZlKHIpO2wmJk9iamVjdC5rZXlzKGwpLmxlbmd0aCYmKGUudGFncz17Li4ubCwuLi5lLnRhZ3N9KTtjb25zdCB1PVZlKGkpO3UmJk9iamVjdC5rZXlzKHUpLmxlbmd0aCYmKGUudXNlcj17Li4udSwuLi5lLnVzZXJ9KTtjb25zdCBkPVZlKG8pO2QmJk9iamVjdC5rZXlzKGQpLmxlbmd0aCYmKGUuY29udGV4dHM9ey4uLmQsLi4uZS5jb250ZXh0c30pO3MmJihlLmxldmVsPXMpO2EmJlwidHJhbnNhY3Rpb25cIiE9PWUudHlwZSYmKGUudHJhbnNhY3Rpb249YSl9KGUsdCksciYmZnVuY3Rpb24oZSx0KXtlLmNvbnRleHRzPXt0cmFjZTpFdCh0KSwuLi5lLmNvbnRleHRzfSxlLnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17ZHluYW1pY1NhbXBsaW5nQ29udGV4dDpEdCh0KSwuLi5lLnNka1Byb2Nlc3NpbmdNZXRhZGF0YX07Y29uc3Qgbj1qdCh0KSxyPVB0KG4pLmRlc2NyaXB0aW9uO3ImJiFlLnRyYW5zYWN0aW9uJiZcInRyYW5zYWN0aW9uXCI9PT1lLnR5cGUmJihlLnRyYW5zYWN0aW9uPXIpfShlLHIpLGZ1bmN0aW9uKGUsdCl7ZS5maW5nZXJwcmludD1lLmZpbmdlcnByaW50P0FycmF5LmlzQXJyYXkoZS5maW5nZXJwcmludCk/ZS5maW5nZXJwcmludDpbZS5maW5nZXJwcmludF06W10sdCYmKGUuZmluZ2VycHJpbnQ9ZS5maW5nZXJwcmludC5jb25jYXQodCkpO2UuZmluZ2VycHJpbnQmJiFlLmZpbmdlcnByaW50Lmxlbmd0aCYmZGVsZXRlIGUuZmluZ2VycHJpbnR9KGUsbiksZnVuY3Rpb24oZSx0KXtjb25zdCBuPVsuLi5lLmJyZWFkY3J1bWJzfHxbXSwuLi50XTtlLmJyZWFkY3J1bWJzPW4ubGVuZ3RoP246dm9pZCAwfShlLGkpLGZ1bmN0aW9uKGUsdCl7ZS5zZGtQcm9jZXNzaW5nTWV0YWRhdGE9ey4uLmUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLC4uLnR9fShlLG8pfWZ1bmN0aW9uIG9uKGUsdCl7Y29uc3R7ZXh0cmE6bix0YWdzOnIsdXNlcjppLGNvbnRleHRzOm8sbGV2ZWw6cyxzZGtQcm9jZXNzaW5nTWV0YWRhdGE6YSxicmVhZGNydW1iczpjLGZpbmdlcnByaW50OmwsZXZlbnRQcm9jZXNzb3JzOnUsYXR0YWNobWVudHM6ZCxwcm9wYWdhdGlvbkNvbnRleHQ6cCx0cmFuc2FjdGlvbk5hbWU6aCxzcGFuOmZ9PXQ7c24oZSxcImV4dHJhXCIsbiksc24oZSxcInRhZ3NcIixyKSxzbihlLFwidXNlclwiLGkpLHNuKGUsXCJjb250ZXh0c1wiLG8pLGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhPW90KGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLGEsMikscyYmKGUubGV2ZWw9cyksaCYmKGUudHJhbnNhY3Rpb25OYW1lPWgpLGYmJihlLnNwYW49ZiksYy5sZW5ndGgmJihlLmJyZWFkY3J1bWJzPVsuLi5lLmJyZWFkY3J1bWJzLC4uLmNdKSxsLmxlbmd0aCYmKGUuZmluZ2VycHJpbnQ9Wy4uLmUuZmluZ2VycHJpbnQsLi4ubF0pLHUubGVuZ3RoJiYoZS5ldmVudFByb2Nlc3NvcnM9Wy4uLmUuZXZlbnRQcm9jZXNzb3JzLC4uLnVdKSxkLmxlbmd0aCYmKGUuYXR0YWNobWVudHM9Wy4uLmUuYXR0YWNobWVudHMsLi4uZF0pLGUucHJvcGFnYXRpb25Db250ZXh0PXsuLi5lLnByb3BhZ2F0aW9uQ29udGV4dCwuLi5wfX1mdW5jdGlvbiBzbihlLHQsbil7ZVt0XT1vdChlW3RdLG4sMSl9ZnVuY3Rpb24gYW4oZSx0LG4scixpLG8pe2NvbnN0e25vcm1hbGl6ZURlcHRoOnM9Myxub3JtYWxpemVNYXhCcmVhZHRoOmE9MWUzfT1lLGM9ey4uLnQsZXZlbnRfaWQ6dC5ldmVudF9pZHx8bi5ldmVudF9pZHx8emUoKSx0aW1lc3RhbXA6dC50aW1lc3RhbXB8fCRlKCl9LGw9bi5pbnRlZ3JhdGlvbnN8fGUuaW50ZWdyYXRpb25zLm1hcCgoZT0+ZS5uYW1lKSk7IWZ1bmN0aW9uKGUsdCl7Y29uc3R7ZW52aXJvbm1lbnQ6bixyZWxlYXNlOnIsZGlzdDppLG1heFZhbHVlTGVuZ3RoOm89MjUwfT10O2UuZW52aXJvbm1lbnQ9ZS5lbnZpcm9ubWVudHx8bnx8eHQsIWUucmVsZWFzZSYmciYmKGUucmVsZWFzZT1yKTshZS5kaXN0JiZpJiYoZS5kaXN0PWkpO2UubWVzc2FnZSYmKGUubWVzc2FnZT1BZShlLm1lc3NhZ2UsbykpO2NvbnN0IHM9ZS5leGNlcHRpb24mJmUuZXhjZXB0aW9uLnZhbHVlcyYmZS5leGNlcHRpb24udmFsdWVzWzBdO3MmJnMudmFsdWUmJihzLnZhbHVlPUFlKHMudmFsdWUsbykpO2NvbnN0IGE9ZS5yZXF1ZXN0O2EmJmEudXJsJiYoYS51cmw9QWUoYS51cmwsbykpfShjLGUpLGZ1bmN0aW9uKGUsdCl7dC5sZW5ndGg+MCYmKGUuc2RrPWUuc2RrfHx7fSxlLnNkay5pbnRlZ3JhdGlvbnM9Wy4uLmUuc2RrLmludGVncmF0aW9uc3x8W10sLi4udF0pfShjLGwpLGkmJmkuZW1pdChcImFwcGx5RnJhbWVNZXRhZGF0YVwiLHQpLHZvaWQgMD09PXQudHlwZSYmZnVuY3Rpb24oZSx0KXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9JC5fc2VudHJ5RGVidWdJZHM7aWYoIXQpcmV0dXJue307Y29uc3Qgbj1PYmplY3Qua2V5cyh0KTtyZXR1cm4gbm4mJm4ubGVuZ3RoPT09dG58fCh0bj1uLmxlbmd0aCxubj1uLnJlZHVjZSgoKG4scik9Pntlbnx8KGVuPXt9KTtjb25zdCBpPWVuW3JdO2lmKGkpbltpWzBdXT1pWzFdO2Vsc2V7Y29uc3QgaT1lKHIpO2ZvcihsZXQgZT1pLmxlbmd0aC0xO2U+PTA7ZS0tKXtjb25zdCBvPWlbZV0scz1vJiZvLmZpbGVuYW1lLGE9dFtyXTtpZihzJiZhKXtuW3NdPWEsZW5bcl09W3MsYV07YnJlYWt9fX1yZXR1cm4gbn0pLHt9KSksbm59KHQpO3RyeXtlLmV4Y2VwdGlvbi52YWx1ZXMuZm9yRWFjaCgoZT0+e2Uuc3RhY2t0cmFjZS5mcmFtZXMuZm9yRWFjaCgoZT0+e24mJmUuZmlsZW5hbWUmJihlLmRlYnVnX2lkPW5bZS5maWxlbmFtZV0pfSkpfSkpfWNhdGNoKGUpe319KGMsZS5zdGFja1BhcnNlcik7Y29uc3QgdT1mdW5jdGlvbihlLHQpe2lmKCF0KXJldHVybiBlO2NvbnN0IG49ZT9lLmNsb25lKCk6bmV3IHV0O3JldHVybiBuLnVwZGF0ZSh0KSxufShyLG4uY2FwdHVyZUNvbnRleHQpO24ubWVjaGFuaXNtJiZRZShjLG4ubWVjaGFuaXNtKTtjb25zdCBkPWk/aS5nZXRFdmVudFByb2Nlc3NvcnMoKTpbXSxwPXEoXCJnbG9iYWxTY29wZVwiLCgoKT0+bmV3IHV0KSkuZ2V0U2NvcGVEYXRhKCk7aWYobyl7b24ocCxvLmdldFNjb3BlRGF0YSgpKX1pZih1KXtvbihwLHUuZ2V0U2NvcGVEYXRhKCkpfWNvbnN0IGg9Wy4uLm4uYXR0YWNobWVudHN8fFtdLC4uLnAuYXR0YWNobWVudHNdO2gubGVuZ3RoJiYobi5hdHRhY2htZW50cz1oKSxybihjLHApO3JldHVybiBadChbLi4uZCwuLi5wLmV2ZW50UHJvY2Vzc29yc10sYyxuKS50aGVuKChlPT4oZSYmZnVuY3Rpb24oZSl7Y29uc3QgdD17fTt0cnl7ZS5leGNlcHRpb24udmFsdWVzLmZvckVhY2goKGU9PntlLnN0YWNrdHJhY2UuZnJhbWVzLmZvckVhY2goKGU9PntlLmRlYnVnX2lkJiYoZS5hYnNfcGF0aD90W2UuYWJzX3BhdGhdPWUuZGVidWdfaWQ6ZS5maWxlbmFtZSYmKHRbZS5maWxlbmFtZV09ZS5kZWJ1Z19pZCksZGVsZXRlIGUuZGVidWdfaWQpfSkpfSkpfWNhdGNoKGUpe31pZigwPT09T2JqZWN0LmtleXModCkubGVuZ3RoKXJldHVybjtlLmRlYnVnX21ldGE9ZS5kZWJ1Z19tZXRhfHx7fSxlLmRlYnVnX21ldGEuaW1hZ2VzPWUuZGVidWdfbWV0YS5pbWFnZXN8fFtdO2NvbnN0IG49ZS5kZWJ1Z19tZXRhLmltYWdlcztPYmplY3QuZW50cmllcyh0KS5mb3JFYWNoKCgoW2UsdF0pPT57bi5wdXNoKHt0eXBlOlwic291cmNlbWFwXCIsY29kZV9maWxlOmUsZGVidWdfaWQ6dH0pfSkpfShlKSxcIm51bWJlclwiPT10eXBlb2YgcyYmcz4wP2Z1bmN0aW9uKGUsdCxuKXtpZighZSlyZXR1cm4gbnVsbDtjb25zdCByPXsuLi5lLC4uLmUuYnJlYWRjcnVtYnMmJnticmVhZGNydW1iczplLmJyZWFkY3J1bWJzLm1hcCgoZT0+KHsuLi5lLC4uLmUuZGF0YSYme2RhdGE6VXQoZS5kYXRhLHQsbil9fSkpKX0sLi4uZS51c2VyJiZ7dXNlcjpVdChlLnVzZXIsdCxuKX0sLi4uZS5jb250ZXh0cyYme2NvbnRleHRzOlV0KGUuY29udGV4dHMsdCxuKX0sLi4uZS5leHRyYSYme2V4dHJhOlV0KGUuZXh0cmEsdCxuKX19O2UuY29udGV4dHMmJmUuY29udGV4dHMudHJhY2UmJnIuY29udGV4dHMmJihyLmNvbnRleHRzLnRyYWNlPWUuY29udGV4dHMudHJhY2UsZS5jb250ZXh0cy50cmFjZS5kYXRhJiYoci5jb250ZXh0cy50cmFjZS5kYXRhPVV0KGUuY29udGV4dHMudHJhY2UuZGF0YSx0LG4pKSk7ZS5zcGFucyYmKHIuc3BhbnM9ZS5zcGFucy5tYXAoKGU9Pih7Li4uZSwuLi5lLmRhdGEmJntkYXRhOlV0KGUuZGF0YSx0LG4pfX0pKSkpO2UuY29udGV4dHMmJmUuY29udGV4dHMuZmxhZ3MmJnIuY29udGV4dHMmJihyLmNvbnRleHRzLmZsYWdzPVV0KGUuY29udGV4dHMuZmxhZ3MsMyxuKSk7cmV0dXJuIHJ9KGUscyxhKTplKSkpfWZ1bmN0aW9uIGNuKGUpe2lmKGUpcmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdXR8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGV9KGUpfHxmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkuc29tZSgoZT0+bG4uaW5jbHVkZXMoZSkpKX0oZSk/e2NhcHR1cmVDb250ZXh0OmV9OmV9Y29uc3QgbG49W1widXNlclwiLFwibGV2ZWxcIixcImV4dHJhXCIsXCJjb250ZXh0c1wiLFwidGFnc1wiLFwiZmluZ2VycHJpbnRcIixcInJlcXVlc3RTZXNzaW9uXCIsXCJwcm9wYWdhdGlvbkNvbnRleHRcIl07ZnVuY3Rpb24gdW4oZSx0KXtyZXR1cm4gbXQoKS5jYXB0dXJlRXZlbnQoZSx0KX1mdW5jdGlvbiBkbihlKXtjb25zdCB0PWJ0KCksbj15dCgpLHI9bXQoKSx7cmVsZWFzZTppLGVudmlyb25tZW50Om89eHR9PXQmJnQuZ2V0T3B0aW9ucygpfHx7fSx7dXNlckFnZW50OnN9PSQubmF2aWdhdG9yfHx7fSxhPXR0KHtyZWxlYXNlOmksZW52aXJvbm1lbnQ6byx1c2VyOnIuZ2V0VXNlcigpfHxuLmdldFVzZXIoKSwuLi5zJiZ7dXNlckFnZW50OnN9LC4uLmV9KSxjPW4uZ2V0U2Vzc2lvbigpO3JldHVybiBjJiZcIm9rXCI9PT1jLnN0YXR1cyYmbnQoYyx7c3RhdHVzOlwiZXhpdGVkXCJ9KSxwbigpLG4uc2V0U2Vzc2lvbihhKSxyLnNldFNlc3Npb24oYSksYX1mdW5jdGlvbiBwbigpe2NvbnN0IGU9eXQoKSx0PW10KCksbj10LmdldFNlc3Npb24oKXx8ZS5nZXRTZXNzaW9uKCk7biYmZnVuY3Rpb24oZSx0KXtsZXQgbj17fTt0P249e3N0YXR1czp0fTpcIm9rXCI9PT1lLnN0YXR1cyYmKG49e3N0YXR1czpcImV4aXRlZFwifSksbnQoZSxuKX0obiksaG4oKSxlLnNldFNlc3Npb24oKSx0LnNldFNlc3Npb24oKX1mdW5jdGlvbiBobigpe2NvbnN0IGU9eXQoKSx0PW10KCksbj1idCgpLHI9dC5nZXRTZXNzaW9uKCl8fGUuZ2V0U2Vzc2lvbigpO3ImJm4mJm4uY2FwdHVyZVNlc3Npb24ocil9ZnVuY3Rpb24gZm4oZT0hMSl7ZT9wbigpOmhuKCl9ZnVuY3Rpb24gdm4oZSx0LG4pe3JldHVybiB0fHxgJHtmdW5jdGlvbihlKXtyZXR1cm5gJHtmdW5jdGlvbihlKXtjb25zdCB0PWUucHJvdG9jb2w/YCR7ZS5wcm90b2NvbH06YDpcIlwiLG49ZS5wb3J0P2A6JHtlLnBvcnR9YDpcIlwiO3JldHVybmAke3R9Ly8ke2UuaG9zdH0ke259JHtlLnBhdGg/YC8ke2UucGF0aH1gOlwiXCJ9L2FwaS9gfShlKX0ke2UucHJvamVjdElkfS9lbnZlbG9wZS9gfShlKX0/JHtmdW5jdGlvbihlLHQpe2NvbnN0IG49e3NlbnRyeV92ZXJzaW9uOlwiN1wifTtyZXR1cm4gZS5wdWJsaWNLZXkmJihuLnNlbnRyeV9rZXk9ZS5wdWJsaWNLZXkpLHQmJihuLnNlbnRyeV9jbGllbnQ9YCR7dC5uYW1lfS8ke3QudmVyc2lvbn1gKSxuZXcgVVJMU2VhcmNoUGFyYW1zKG4pLnRvU3RyaW5nKCl9KGUsbil9YH1jb25zdCBnbj1bXTtmdW5jdGlvbiBtbihlLHQpe2Zvcihjb25zdCBuIG9mIHQpbiYmbi5hZnRlckFsbFNldHVwJiZuLmFmdGVyQWxsU2V0dXAoZSl9ZnVuY3Rpb24geW4oZSx0LG4pe2lmKG5bdC5uYW1lXSlWJiZRLmxvZyhgSW50ZWdyYXRpb24gc2tpcHBlZCBiZWNhdXNlIGl0IHdhcyBhbHJlYWR5IGluc3RhbGxlZDogJHt0Lm5hbWV9YCk7ZWxzZXtpZihuW3QubmFtZV09dCwtMT09PWduLmluZGV4T2YodC5uYW1lKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5zZXR1cE9uY2UmJih0LnNldHVwT25jZSgpLGduLnB1c2godC5uYW1lKSksdC5zZXR1cCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5zZXR1cCYmdC5zZXR1cChlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnByZXByb2Nlc3NFdmVudCl7Y29uc3Qgbj10LnByZXByb2Nlc3NFdmVudC5iaW5kKHQpO2Uub24oXCJwcmVwcm9jZXNzRXZlbnRcIiwoKHQscik9Pm4odCxyLGUpKSl9aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5wcm9jZXNzRXZlbnQpe2NvbnN0IG49dC5wcm9jZXNzRXZlbnQuYmluZCh0KSxyPU9iamVjdC5hc3NpZ24oKCh0LHIpPT5uKHQscixlKSkse2lkOnQubmFtZX0pO2UuYWRkRXZlbnRQcm9jZXNzb3Iocil9ViYmUS5sb2coYEludGVncmF0aW9uIGluc3RhbGxlZDogJHt0Lm5hbWV9YCl9fWNsYXNzIGJuIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0PVwid2FyblwiKXtzdXBlcihlKSx0aGlzLm1lc3NhZ2U9ZSx0aGlzLmxvZ0xldmVsPXR9fWNvbnN0IF9uPVwiTm90IGNhcHR1cmluZyBleGNlcHRpb24gYmVjYXVzZSBpdCdzIGFscmVhZHkgYmVlbiBjYXB0dXJlZC5cIjtjbGFzcyB3bntjb25zdHJ1Y3RvcihlKXtpZih0aGlzLl9vcHRpb25zPWUsdGhpcy5faW50ZWdyYXRpb25zPXt9LHRoaXMuX251bVByb2Nlc3Npbmc9MCx0aGlzLl9vdXRjb21lcz17fSx0aGlzLl9ob29rcz17fSx0aGlzLl9ldmVudFByb2Nlc3NvcnM9W10sZS5kc24/dGhpcy5fZHNuPUJ0KGUuZHNuKTpWJiZRLndhcm4oXCJObyBEU04gcHJvdmlkZWQsIGNsaWVudCB3aWxsIG5vdCBzZW5kIGV2ZW50cy5cIiksdGhpcy5fZHNuKXtjb25zdCB0PXZuKHRoaXMuX2RzbixlLnR1bm5lbCxlLl9tZXRhZGF0YT9lLl9tZXRhZGF0YS5zZGs6dm9pZCAwKTt0aGlzLl90cmFuc3BvcnQ9ZS50cmFuc3BvcnQoe3R1bm5lbDp0aGlzLl9vcHRpb25zLnR1bm5lbCxyZWNvcmREcm9wcGVkRXZlbnQ6dGhpcy5yZWNvcmREcm9wcGVkRXZlbnQuYmluZCh0aGlzKSwuLi5lLnRyYW5zcG9ydE9wdGlvbnMsdXJsOnR9KX1jb25zdCB0PVtcImVuYWJsZVRyYWNpbmdcIixcInRyYWNlc1NhbXBsZVJhdGVcIixcInRyYWNlc1NhbXBsZXJcIl0uZmluZCgodD0+dCBpbiBlJiZudWxsPT1lW3RdKSk7dCYmRygoKCk9Pntjb25zb2xlLndhcm4oYFtTZW50cnldIERlcHJlY2F0aW9uIHdhcm5pbmc6IFxcYCR7dH1cXGAgaXMgc2V0IHRvIHVuZGVmaW5lZCwgd2hpY2ggbGVhZHMgdG8gdHJhY2luZyBiZWluZyBlbmFibGVkLiBJbiB2OSwgYSB2YWx1ZSBvZiBcXGB1bmRlZmluZWRcXGAgd2lsbCByZXN1bHQgaW4gdHJhY2luZyBiZWluZyBkaXNhYmxlZC5gKX0pKX1jYXB0dXJlRXhjZXB0aW9uKGUsdCxuKXtjb25zdCByPXplKCk7aWYoS2UoZSkpcmV0dXJuIFYmJlEubG9nKF9uKSxyO2NvbnN0IGk9e2V2ZW50X2lkOnIsLi4udH07cmV0dXJuIHRoaXMuX3Byb2Nlc3ModGhpcy5ldmVudEZyb21FeGNlcHRpb24oZSxpKS50aGVuKChlPT50aGlzLl9jYXB0dXJlRXZlbnQoZSxpLG4pKSkpLGkuZXZlbnRfaWR9Y2FwdHVyZU1lc3NhZ2UoZSx0LG4scil7Y29uc3QgaT17ZXZlbnRfaWQ6emUoKSwuLi5ufSxvPV9lKGUpP2U6U3RyaW5nKGUpLHM9d2UoZSk/dGhpcy5ldmVudEZyb21NZXNzYWdlKG8sdCxpKTp0aGlzLmV2ZW50RnJvbUV4Y2VwdGlvbihlLGkpO3JldHVybiB0aGlzLl9wcm9jZXNzKHMudGhlbigoZT0+dGhpcy5fY2FwdHVyZUV2ZW50KGUsaSxyKSkpKSxpLmV2ZW50X2lkfWNhcHR1cmVFdmVudChlLHQsbil7Y29uc3Qgcj16ZSgpO2lmKHQmJnQub3JpZ2luYWxFeGNlcHRpb24mJktlKHQub3JpZ2luYWxFeGNlcHRpb24pKXJldHVybiBWJiZRLmxvZyhfbikscjtjb25zdCBpPXtldmVudF9pZDpyLC4uLnR9LG89KGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfHx7fSkuY2FwdHVyZWRTcGFuU2NvcGU7cmV0dXJuIHRoaXMuX3Byb2Nlc3ModGhpcy5fY2FwdHVyZUV2ZW50KGUsaSxvfHxuKSksaS5ldmVudF9pZH1jYXB0dXJlU2Vzc2lvbihlKXtcInN0cmluZ1wiIT10eXBlb2YgZS5yZWxlYXNlP1YmJlEud2FybihcIkRpc2NhcmRlZCBzZXNzaW9uIGJlY2F1c2Ugb2YgbWlzc2luZyBvciBub24tc3RyaW5nIHJlbGVhc2VcIik6KHRoaXMuc2VuZFNlc3Npb24oZSksbnQoZSx7aW5pdDohMX0pKX1nZXREc24oKXtyZXR1cm4gdGhpcy5fZHNufWdldE9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc31nZXRTZGtNZXRhZGF0YSgpe3JldHVybiB0aGlzLl9vcHRpb25zLl9tZXRhZGF0YX1nZXRUcmFuc3BvcnQoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0fWZsdXNoKGUpe2NvbnN0IHQ9dGhpcy5fdHJhbnNwb3J0O3JldHVybiB0Pyh0aGlzLmVtaXQoXCJmbHVzaFwiKSx0aGlzLl9pc0NsaWVudERvbmVQcm9jZXNzaW5nKGUpLnRoZW4oKG49PnQuZmx1c2goZSkudGhlbigoZT0+biYmZSkpKSkpOlhlKCEwKX1jbG9zZShlKXtyZXR1cm4gdGhpcy5mbHVzaChlKS50aGVuKChlPT4odGhpcy5nZXRPcHRpb25zKCkuZW5hYmxlZD0hMSx0aGlzLmVtaXQoXCJjbG9zZVwiKSxlKSkpfWdldEV2ZW50UHJvY2Vzc29ycygpe3JldHVybiB0aGlzLl9ldmVudFByb2Nlc3NvcnN9YWRkRXZlbnRQcm9jZXNzb3IoZSl7dGhpcy5fZXZlbnRQcm9jZXNzb3JzLnB1c2goZSl9aW5pdCgpeyh0aGlzLl9pc0VuYWJsZWQoKXx8dGhpcy5fb3B0aW9ucy5pbnRlZ3JhdGlvbnMuc29tZSgoKHtuYW1lOmV9KT0+ZS5zdGFydHNXaXRoKFwiU3BvdGxpZ2h0XCIpKSkpJiZ0aGlzLl9zZXR1cEludGVncmF0aW9ucygpfWdldEludGVncmF0aW9uQnlOYW1lKGUpe3JldHVybiB0aGlzLl9pbnRlZ3JhdGlvbnNbZV19YWRkSW50ZWdyYXRpb24oZSl7Y29uc3QgdD10aGlzLl9pbnRlZ3JhdGlvbnNbZS5uYW1lXTt5bih0aGlzLGUsdGhpcy5faW50ZWdyYXRpb25zKSx0fHxtbih0aGlzLFtlXSl9c2VuZEV2ZW50KGUsdD17fSl7dGhpcy5lbWl0KFwiYmVmb3JlU2VuZEV2ZW50XCIsZSx0KTtsZXQgbj1YdChlLHRoaXMuX2Rzbix0aGlzLl9vcHRpb25zLl9tZXRhZGF0YSx0aGlzLl9vcHRpb25zLnR1bm5lbCk7Zm9yKGNvbnN0IGUgb2YgdC5hdHRhY2htZW50c3x8W10pbj1xdChuLEd0KGUpKTtjb25zdCByPXRoaXMuc2VuZEVudmVsb3BlKG4pO3ImJnIudGhlbigodD0+dGhpcy5lbWl0KFwiYWZ0ZXJTZW5kRXZlbnRcIixlLHQpKSxudWxsKX1zZW5kU2Vzc2lvbihlKXtjb25zdCB0PWZ1bmN0aW9uKGUsdCxuLHIpe2NvbnN0IGk9WXQobik7cmV0dXJuICR0KHtzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi5pJiZ7c2RrOml9LC4uLiEhciYmdCYme2RzbjpSdCh0KX19LFtcImFnZ3JlZ2F0ZXNcImluIGU/W3t0eXBlOlwic2Vzc2lvbnNcIn0sZV06W3t0eXBlOlwic2Vzc2lvblwifSxlLnRvSlNPTigpXV0pfShlLHRoaXMuX2Rzbix0aGlzLl9vcHRpb25zLl9tZXRhZGF0YSx0aGlzLl9vcHRpb25zLnR1bm5lbCk7dGhpcy5zZW5kRW52ZWxvcGUodCl9cmVjb3JkRHJvcHBlZEV2ZW50KGUsdCxuKXtpZih0aGlzLl9vcHRpb25zLnNlbmRDbGllbnRSZXBvcnRzKXtjb25zdCByPVwibnVtYmVyXCI9PXR5cGVvZiBuP246MSxpPWAke2V9OiR7dH1gO1YmJlEubG9nKGBSZWNvcmRpbmcgb3V0Y29tZTogXCIke2l9XCIke3I+MT9gICgke3J9IHRpbWVzKWA6XCJcIn1gKSx0aGlzLl9vdXRjb21lc1tpXT0odGhpcy5fb3V0Y29tZXNbaV18fDApK3J9fW9uKGUsdCl7Y29uc3Qgbj10aGlzLl9ob29rc1tlXT10aGlzLl9ob29rc1tlXXx8W107cmV0dXJuIG4ucHVzaCh0KSwoKT0+e2NvbnN0IGU9bi5pbmRleE9mKHQpO2U+LTEmJm4uc3BsaWNlKGUsMSl9fWVtaXQoZSwuLi50KXtjb25zdCBuPXRoaXMuX2hvb2tzW2VdO24mJm4uZm9yRWFjaCgoZT0+ZSguLi50KSkpfXNlbmRFbnZlbG9wZShlKXtyZXR1cm4gdGhpcy5lbWl0KFwiYmVmb3JlRW52ZWxvcGVcIixlKSx0aGlzLl9pc0VuYWJsZWQoKSYmdGhpcy5fdHJhbnNwb3J0P3RoaXMuX3RyYW5zcG9ydC5zZW5kKGUpLnRoZW4obnVsbCwoZT0+KFYmJlEuZXJyb3IoXCJFcnJvciB3aGlsZSBzZW5kaW5nIGVudmVsb3BlOlwiLGUpLGUpKSk6KFYmJlEuZXJyb3IoXCJUcmFuc3BvcnQgZGlzYWJsZWRcIiksWGUoe30pKX1fc2V0dXBJbnRlZ3JhdGlvbnMoKXtjb25zdHtpbnRlZ3JhdGlvbnM6ZX09dGhpcy5fb3B0aW9uczt0aGlzLl9pbnRlZ3JhdGlvbnM9ZnVuY3Rpb24oZSx0KXtjb25zdCBuPXt9O3JldHVybiB0LmZvckVhY2goKHQ9Pnt0JiZ5bihlLHQsbil9KSksbn0odGhpcyxlKSxtbih0aGlzLGUpfV91cGRhdGVTZXNzaW9uRnJvbUV2ZW50KGUsdCl7bGV0IG49XCJmYXRhbFwiPT09dC5sZXZlbCxyPSExO2NvbnN0IGk9dC5leGNlcHRpb24mJnQuZXhjZXB0aW9uLnZhbHVlcztpZihpKXtyPSEwO2Zvcihjb25zdCBlIG9mIGkpe2NvbnN0IHQ9ZS5tZWNoYW5pc207aWYodCYmITE9PT10LmhhbmRsZWQpe249ITA7YnJlYWt9fX1jb25zdCBvPVwib2tcIj09PWUuc3RhdHVzOyhvJiYwPT09ZS5lcnJvcnN8fG8mJm4pJiYobnQoZSx7Li4ubiYme3N0YXR1czpcImNyYXNoZWRcIn0sZXJyb3JzOmUuZXJyb3JzfHxOdW1iZXIocnx8bil9KSx0aGlzLmNhcHR1cmVTZXNzaW9uKGUpKX1faXNDbGllbnREb25lUHJvY2Vzc2luZyhlKXtyZXR1cm4gbmV3IGV0KCh0PT57bGV0IG49MDtjb25zdCByPXNldEludGVydmFsKCgoKT0+ezA9PXRoaXMuX251bVByb2Nlc3Npbmc/KGNsZWFySW50ZXJ2YWwociksdCghMCkpOihuKz0xLGUmJm4+PWUmJihjbGVhckludGVydmFsKHIpLHQoITEpKSl9KSwxKX0pKX1faXNFbmFibGVkKCl7cmV0dXJuITEhPT10aGlzLmdldE9wdGlvbnMoKS5lbmFibGVkJiZ2b2lkIDAhPT10aGlzLl90cmFuc3BvcnR9X3ByZXBhcmVFdmVudChlLHQsbj1tdCgpLHI9eXQoKSl7Y29uc3QgaT10aGlzLmdldE9wdGlvbnMoKSxvPU9iamVjdC5rZXlzKHRoaXMuX2ludGVncmF0aW9ucyk7cmV0dXJuIXQuaW50ZWdyYXRpb25zJiZvLmxlbmd0aD4wJiYodC5pbnRlZ3JhdGlvbnM9byksdGhpcy5lbWl0KFwicHJlcHJvY2Vzc0V2ZW50XCIsZSx0KSxlLnR5cGV8fHIuc2V0TGFzdEV2ZW50SWQoZS5ldmVudF9pZHx8dC5ldmVudF9pZCksYW4oaSxlLHQsbix0aGlzLHIpLnRoZW4oKGU9PntpZihudWxsPT09ZSlyZXR1cm4gZTtlLmNvbnRleHRzPXt0cmFjZTpfdChuKSwuLi5lLmNvbnRleHRzfTtjb25zdCB0PWZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj10LmdldFByb3BhZ2F0aW9uQ29udGV4dCgpO3JldHVybiBuLmRzY3x8THQobi50cmFjZUlkLGUpfSh0aGlzLG4pO3JldHVybiBlLnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17ZHluYW1pY1NhbXBsaW5nQ29udGV4dDp0LC4uLmUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfSxlfSkpfV9jYXB0dXJlRXZlbnQoZSx0PXt9LG4pe3JldHVybiB0aGlzLl9wcm9jZXNzRXZlbnQoZSx0LG4pLnRoZW4oKGU9PmUuZXZlbnRfaWQpLChlPT57ViYmKGUgaW5zdGFuY2VvZiBibiYmXCJsb2dcIj09PWUubG9nTGV2ZWw/US5sb2coZS5tZXNzYWdlKTpRLndhcm4oZSkpfSkpfV9wcm9jZXNzRXZlbnQoZSx0LG4pe2NvbnN0IHI9dGhpcy5nZXRPcHRpb25zKCkse3NhbXBsZVJhdGU6aX09cixvPWtuKGUpLHM9U24oZSksYT1lLnR5cGV8fFwiZXJyb3JcIixjPWBiZWZvcmUgc2VuZCBmb3IgdHlwZSBcXGAke2F9XFxgYCxsPXZvaWQgMD09PWk/dm9pZCAwOmZ1bmN0aW9uKGUpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4gTnVtYmVyKGUpO2NvbnN0IHQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/cGFyc2VGbG9hdChlKTplO2lmKCEoXCJudW1iZXJcIiE9dHlwZW9mIHR8fGlzTmFOKHQpfHx0PDB8fHQ+MSkpcmV0dXJuIHQ7ViYmUS53YXJuKGBbVHJhY2luZ10gR2l2ZW4gc2FtcGxlIHJhdGUgaXMgaW52YWxpZC4gU2FtcGxlIHJhdGUgbXVzdCBiZSBhIGJvb2xlYW4gb3IgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiBHb3QgJHtKU09OLnN0cmluZ2lmeShlKX0gb2YgdHlwZSAke0pTT04uc3RyaW5naWZ5KHR5cGVvZiBlKX0uYCl9KGkpO2lmKHMmJlwibnVtYmVyXCI9PXR5cGVvZiBsJiZNYXRoLnJhbmRvbSgpPmwpcmV0dXJuIHRoaXMucmVjb3JkRHJvcHBlZEV2ZW50KFwic2FtcGxlX3JhdGVcIixcImVycm9yXCIsZSksWmUobmV3IGJuKGBEaXNjYXJkaW5nIGV2ZW50IGJlY2F1c2UgaXQncyBub3QgaW5jbHVkZWQgaW4gdGhlIHJhbmRvbSBzYW1wbGUgKHNhbXBsaW5nIHJhdGUgPSAke2l9KWAsXCJsb2dcIikpO2NvbnN0IHU9XCJyZXBsYXlfZXZlbnRcIj09PWE/XCJyZXBsYXlcIjphLGQ9KGUuc2RrUHJvY2Vzc2luZ01ldGFkYXRhfHx7fSkuY2FwdHVyZWRTcGFuSXNvbGF0aW9uU2NvcGU7cmV0dXJuIHRoaXMuX3ByZXBhcmVFdmVudChlLHQsbixkKS50aGVuKChuPT57aWYobnVsbD09PW4pdGhyb3cgdGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoXCJldmVudF9wcm9jZXNzb3JcIix1LGUpLG5ldyBibihcIkFuIGV2ZW50IHByb2Nlc3NvciByZXR1cm5lZCBgbnVsbGAsIHdpbGwgbm90IHNlbmQgZXZlbnQuXCIsXCJsb2dcIik7aWYodC5kYXRhJiYhMD09PXQuZGF0YS5fX3NlbnRyeV9fKXJldHVybiBuO2NvbnN0IGk9ZnVuY3Rpb24oZSx0LG4scil7Y29uc3R7YmVmb3JlU2VuZDppLGJlZm9yZVNlbmRUcmFuc2FjdGlvbjpvLGJlZm9yZVNlbmRTcGFuOnN9PXQ7aWYoU24obikmJmkpcmV0dXJuIGkobixyKTtpZihrbihuKSl7aWYobi5zcGFucyYmcyl7Y29uc3QgdD1bXTtmb3IoY29uc3QgciBvZiBuLnNwYW5zKXtjb25zdCBuPXMocik7bj90LnB1c2gobik6KEl0KCksZS5yZWNvcmREcm9wcGVkRXZlbnQoXCJiZWZvcmVfc2VuZFwiLFwic3BhblwiKSl9bi5zcGFucz10fWlmKG8pe2lmKG4uc3BhbnMpe2NvbnN0IGU9bi5zcGFucy5sZW5ndGg7bi5zZGtQcm9jZXNzaW5nTWV0YWRhdGE9ey4uLm4uc2RrUHJvY2Vzc2luZ01ldGFkYXRhLHNwYW5Db3VudEJlZm9yZVByb2Nlc3Npbmc6ZX19cmV0dXJuIG8obixyKX19cmV0dXJuIG59KHRoaXMscixuLHQpO3JldHVybiBmdW5jdGlvbihlLHQpe2NvbnN0IG49YCR7dH0gbXVzdCByZXR1cm4gXFxgbnVsbFxcYCBvciBhIHZhbGlkIGV2ZW50LmA7aWYoTWUoZSkpcmV0dXJuIGUudGhlbigoZT0+e2lmKCFTZShlKSYmbnVsbCE9PWUpdGhyb3cgbmV3IGJuKG4pO3JldHVybiBlfSksKGU9Pnt0aHJvdyBuZXcgYm4oYCR7dH0gcmVqZWN0ZWQgd2l0aCAke2V9YCl9KSk7aWYoIVNlKGUpJiZudWxsIT09ZSl0aHJvdyBuZXcgYm4obik7cmV0dXJuIGV9KGksYyl9KSkudGhlbigocj0+e2lmKG51bGw9PT1yKXtpZih0aGlzLnJlY29yZERyb3BwZWRFdmVudChcImJlZm9yZV9zZW5kXCIsdSxlKSxvKXtjb25zdCB0PTErKGUuc3BhbnN8fFtdKS5sZW5ndGg7dGhpcy5yZWNvcmREcm9wcGVkRXZlbnQoXCJiZWZvcmVfc2VuZFwiLFwic3BhblwiLHQpfXRocm93IG5ldyBibihgJHtjfSByZXR1cm5lZCBcXGBudWxsXFxgLCB3aWxsIG5vdCBzZW5kIGV2ZW50LmAsXCJsb2dcIil9Y29uc3QgaT1uJiZuLmdldFNlc3Npb24oKTtpZighbyYmaSYmdGhpcy5fdXBkYXRlU2Vzc2lvbkZyb21FdmVudChpLHIpLG8pe2NvbnN0IGU9KHIuc2RrUHJvY2Vzc2luZ01ldGFkYXRhJiZyLnNka1Byb2Nlc3NpbmdNZXRhZGF0YS5zcGFuQ291bnRCZWZvcmVQcm9jZXNzaW5nfHwwKS0oci5zcGFucz9yLnNwYW5zLmxlbmd0aDowKTtlPjAmJnRoaXMucmVjb3JkRHJvcHBlZEV2ZW50KFwiYmVmb3JlX3NlbmRcIixcInNwYW5cIixlKX1jb25zdCBzPXIudHJhbnNhY3Rpb25faW5mbztpZihvJiZzJiZyLnRyYW5zYWN0aW9uIT09ZS50cmFuc2FjdGlvbil7Y29uc3QgZT1cImN1c3RvbVwiO3IudHJhbnNhY3Rpb25faW5mbz17Li4ucyxzb3VyY2U6ZX19cmV0dXJuIHRoaXMuc2VuZEV2ZW50KHIsdCkscn0pKS50aGVuKG51bGwsKGU9PntpZihlIGluc3RhbmNlb2YgYm4pdGhyb3cgZTt0aHJvdyB0aGlzLmNhcHR1cmVFeGNlcHRpb24oZSx7ZGF0YTp7X19zZW50cnlfXzohMH0sb3JpZ2luYWxFeGNlcHRpb246ZX0pLG5ldyBibihgRXZlbnQgcHJvY2Vzc2luZyBwaXBlbGluZSB0aHJldyBhbiBlcnJvciwgb3JpZ2luYWwgZXZlbnQgd2lsbCBub3QgYmUgc2VudC4gRGV0YWlscyBoYXZlIGJlZW4gc2VudCBhcyBhIG5ldyBldmVudC5cXG5SZWFzb246ICR7ZX1gKX0pKX1fcHJvY2VzcyhlKXt0aGlzLl9udW1Qcm9jZXNzaW5nKyssZS50aGVuKChlPT4odGhpcy5fbnVtUHJvY2Vzc2luZy0tLGUpKSwoZT0+KHRoaXMuX251bVByb2Nlc3NpbmctLSxlKSkpfV9jbGVhck91dGNvbWVzKCl7Y29uc3QgZT10aGlzLl9vdXRjb21lcztyZXR1cm4gdGhpcy5fb3V0Y29tZXM9e30sT2JqZWN0LmVudHJpZXMoZSkubWFwKCgoW2UsdF0pPT57Y29uc3RbbixyXT1lLnNwbGl0KFwiOlwiKTtyZXR1cm57cmVhc29uOm4sY2F0ZWdvcnk6cixxdWFudGl0eTp0fX0pKX1fZmx1c2hPdXRjb21lcygpe1YmJlEubG9nKFwiRmx1c2hpbmcgb3V0Y29tZXMuLi5cIik7Y29uc3QgZT10aGlzLl9jbGVhck91dGNvbWVzKCk7aWYoMD09PWUubGVuZ3RoKXJldHVybiB2b2lkKFYmJlEubG9nKFwiTm8gb3V0Y29tZXMgdG8gc2VuZFwiKSk7aWYoIXRoaXMuX2RzbilyZXR1cm4gdm9pZChWJiZRLmxvZyhcIk5vIGRzbiBwcm92aWRlZCwgd2lsbCBub3Qgc2VuZCBvdXRjb21lc1wiKSk7ViYmUS5sb2coXCJTZW5kaW5nIG91dGNvbWVzOlwiLGUpO2NvbnN0IHQ9KG49ZSwkdCgocj10aGlzLl9vcHRpb25zLnR1bm5lbCYmUnQodGhpcy5fZHNuKSk/e2RzbjpyfTp7fSxbW3t0eXBlOlwiY2xpZW50X3JlcG9ydFwifSx7dGltZXN0YW1wOml8fCRlKCksZGlzY2FyZGVkX2V2ZW50czpufV1dKSk7dmFyIG4scixpO3RoaXMuc2VuZEVudmVsb3BlKHQpfX1mdW5jdGlvbiBTbihlKXtyZXR1cm4gdm9pZCAwPT09ZS50eXBlfWZ1bmN0aW9uIGtuKGUpe3JldHVyblwidHJhbnNhY3Rpb25cIj09PWUudHlwZX1mdW5jdGlvbiBNbihlKXtjb25zdCB0PVtdO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIHQuc3BsaWNlKHQuaW5kZXhPZihlKSwxKVswXXx8UHJvbWlzZS5yZXNvbHZlKHZvaWQgMCl9cmV0dXJueyQ6dCxhZGQ6ZnVuY3Rpb24ocil7aWYoISh2b2lkIDA9PT1lfHx0Lmxlbmd0aDxlKSlyZXR1cm4gWmUobmV3IGJuKFwiTm90IGFkZGluZyBQcm9taXNlIGJlY2F1c2UgYnVmZmVyIGxpbWl0IHdhcyByZWFjaGVkLlwiKSk7Y29uc3QgaT1yKCk7cmV0dXJuLTE9PT10LmluZGV4T2YoaSkmJnQucHVzaChpKSxpLnRoZW4oKCgpPT5uKGkpKSkudGhlbihudWxsLCgoKT0+bihpKS50aGVuKG51bGwsKCgpPT57fSkpKSksaX0sZHJhaW46ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBldCgoKG4scik9PntsZXQgaT10Lmxlbmd0aDtpZighaSlyZXR1cm4gbighMCk7Y29uc3Qgbz1zZXRUaW1lb3V0KCgoKT0+e2UmJmU+MCYmbighMSl9KSxlKTt0LmZvckVhY2goKGU9PntYZShlKS50aGVuKCgoKT0+ey0taXx8KGNsZWFyVGltZW91dChvKSxuKCEwKSl9KSxyKX0pKX0pKX19fWZ1bmN0aW9uIENuKGUse3N0YXR1c0NvZGU6dCxoZWFkZXJzOm59LHI9RGF0ZS5ub3coKSl7Y29uc3QgaT17Li4uZX0sbz1uJiZuW1wieC1zZW50cnktcmF0ZS1saW1pdHNcIl0scz1uJiZuW1wicmV0cnktYWZ0ZXJcIl07aWYobylmb3IoY29uc3QgZSBvZiBvLnRyaW0oKS5zcGxpdChcIixcIikpe2NvbnN0W3QsbiwsLG9dPWUuc3BsaXQoXCI6XCIsNSkscz1wYXJzZUludCh0LDEwKSxhPTFlMyooaXNOYU4ocyk/NjA6cyk7aWYobilmb3IoY29uc3QgZSBvZiBuLnNwbGl0KFwiO1wiKSlcIm1ldHJpY19idWNrZXRcIj09PWUmJm8mJiFvLnNwbGl0KFwiO1wiKS5pbmNsdWRlcyhcImN1c3RvbVwiKXx8KGlbZV09cithKTtlbHNlIGkuYWxsPXIrYX1lbHNlIHM/aS5hbGw9citmdW5jdGlvbihlLHQ9RGF0ZS5ub3coKSl7Y29uc3Qgbj1wYXJzZUludChgJHtlfWAsMTApO2lmKCFpc05hTihuKSlyZXR1cm4gMWUzKm47Y29uc3Qgcj1EYXRlLnBhcnNlKGAke2V9YCk7cmV0dXJuIGlzTmFOKHIpPzZlNDpyLXR9KHMscik6NDI5PT09dCYmKGkuYWxsPXIrNmU0KTtyZXR1cm4gaX1mdW5jdGlvbiBFbihlLHQsbj1NbihlLmJ1ZmZlclNpemV8fDY0KSl7bGV0IHI9e307cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaSl7Y29uc3Qgbz1bXTtpZih6dChpLCgodCxuKT0+e2NvbnN0IGk9S3Qobik7aWYoZnVuY3Rpb24oZSx0LG49RGF0ZS5ub3coKSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbdF18fGUuYWxsfHwwfShlLHQpPm59KHIsaSkpe2NvbnN0IHI9VG4odCxuKTtlLnJlY29yZERyb3BwZWRFdmVudChcInJhdGVsaW1pdF9iYWNrb2ZmXCIsaSxyKX1lbHNlIG8ucHVzaCh0KX0pKSwwPT09by5sZW5ndGgpcmV0dXJuIFhlKHt9KTtjb25zdCBzPSR0KGlbMF0sbyksYT10PT57enQocywoKG4scik9Pntjb25zdCBpPVRuKG4scik7ZS5yZWNvcmREcm9wcGVkRXZlbnQodCxLdChyKSxpKX0pKX07cmV0dXJuIG4uYWRkKCgoKT0+dCh7Ym9keTpIdChzKX0pLnRoZW4oKGU9Pih2b2lkIDAhPT1lLnN0YXR1c0NvZGUmJihlLnN0YXR1c0NvZGU8MjAwfHxlLnN0YXR1c0NvZGU+PTMwMCkmJlYmJlEud2FybihgU2VudHJ5IHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBjb2RlICR7ZS5zdGF0dXNDb2RlfSB0byBzZW50IGV2ZW50LmApLHI9Q24ocixlKSxlKSksKGU9Pnt0aHJvdyBhKFwibmV0d29ya19lcnJvclwiKSxlfSkpKSkudGhlbigoZT0+ZSksKGU9PntpZihlIGluc3RhbmNlb2YgYm4pcmV0dXJuIFYmJlEuZXJyb3IoXCJTa2lwcGVkIHNlbmRpbmcgZXZlbnQgYmVjYXVzZSBidWZmZXIgaXMgZnVsbC5cIiksYShcInF1ZXVlX292ZXJmbG93XCIpLFhlKHt9KTt0aHJvdyBlfSkpfSxmbHVzaDplPT5uLmRyYWluKGUpfX1mdW5jdGlvbiBUbihlLHQpe2lmKFwiZXZlbnRcIj09PXR8fFwidHJhbnNhY3Rpb25cIj09PXQpcmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZVsxXTp2b2lkIDB9Y29uc3QgT249MTAwO2Z1bmN0aW9uIFBuKGUsdCl7Y29uc3Qgbj1idCgpLHI9eXQoKTtpZighbilyZXR1cm47Y29uc3R7YmVmb3JlQnJlYWRjcnVtYjppPW51bGwsbWF4QnJlYWRjcnVtYnM6bz1Pbn09bi5nZXRPcHRpb25zKCk7aWYobzw9MClyZXR1cm47Y29uc3Qgcz17dGltZXN0YW1wOiRlKCksLi4uZX0sYT1pP0coKCgpPT5pKHMsdCkpKTpzO251bGwhPT1hJiYobi5lbWl0JiZuLmVtaXQoXCJiZWZvcmVBZGRCcmVhZGNydW1iXCIsYSx0KSxyLmFkZEJyZWFkY3J1bWIoYSxvKSl9bGV0IEFuO2NvbnN0IGpuPW5ldyBXZWFrTWFwLEluPSgpPT4oe25hbWU6XCJGdW5jdGlvblRvU3RyaW5nXCIsc2V0dXBPbmNlKCl7QW49RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO3RyeXtGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oLi4uZSl7Y29uc3QgdD1SZSh0aGlzKSxuPWpuLmhhcyhidCgpKSYmdm9pZCAwIT09dD90OnRoaXM7cmV0dXJuIEFuLmFwcGx5KG4sZSl9fWNhdGNoKGUpe319LHNldHVwKGUpe2puLnNldChlLCEwKX19KSx4bj1bL15TY3JpcHQgZXJyb3JcXC4/JC8sL15KYXZhc2NyaXB0IGVycm9yOiBTY3JpcHQgZXJyb3JcXC4/IG9uIGxpbmUgMCQvLC9eUmVzaXplT2JzZXJ2ZXIgbG9vcCBjb21wbGV0ZWQgd2l0aCB1bmRlbGl2ZXJlZCBub3RpZmljYXRpb25zLiQvLC9eQ2Fubm90IHJlZGVmaW5lIHByb3BlcnR5OiBnb29nbGV0YWckLyxcInVuZGVmaW5lZCBpcyBub3QgYW4gb2JqZWN0IChldmFsdWF0aW5nICdhLkwnKVwiLCdjYW5cXCd0IHJlZGVmaW5lIG5vbi1jb25maWd1cmFibGUgcHJvcGVydHkgXCJzb2xhbmFcIicsXCJ2digpLmdldFJlc3RyaWN0aW9ucyBpcyBub3QgYSBmdW5jdGlvbi4gKEluICd2digpLmdldFJlc3RyaWN0aW9ucygxLGEpJywgJ3Z2KCkuZ2V0UmVzdHJpY3Rpb25zJyBpcyB1bmRlZmluZWQpXCIsXCJDYW4ndCBmaW5kIHZhcmlhYmxlOiBfQXV0b2ZpbGxDYWxsYmFja0hhbmRsZXJcIiwvXk5vbi1FcnJvciBwcm9taXNlIHJlamVjdGlvbiBjYXB0dXJlZCB3aXRoIHZhbHVlOiBPYmplY3QgTm90IEZvdW5kIE1hdGNoaW5nIElkOlxcZCssIE1ldGhvZE5hbWU6c2ltdWxhdGVFdmVudCwgUGFyYW1Db3VudDpcXGQrJC9dLExuPShlPXt9KT0+KHtuYW1lOlwiSW5ib3VuZEZpbHRlcnNcIixwcm9jZXNzRXZlbnQodCxuLHIpe2NvbnN0IGk9ci5nZXRPcHRpb25zKCksbz1mdW5jdGlvbihlPXt9LHQ9e30pe3JldHVybnthbGxvd1VybHM6Wy4uLmUuYWxsb3dVcmxzfHxbXSwuLi50LmFsbG93VXJsc3x8W11dLGRlbnlVcmxzOlsuLi5lLmRlbnlVcmxzfHxbXSwuLi50LmRlbnlVcmxzfHxbXV0saWdub3JlRXJyb3JzOlsuLi5lLmlnbm9yZUVycm9yc3x8W10sLi4udC5pZ25vcmVFcnJvcnN8fFtdLC4uLmUuZGlzYWJsZUVycm9yRGVmYXVsdHM/W106eG5dLGlnbm9yZVRyYW5zYWN0aW9uczpbLi4uZS5pZ25vcmVUcmFuc2FjdGlvbnN8fFtdLC4uLnQuaWdub3JlVHJhbnNhY3Rpb25zfHxbXV0saWdub3JlSW50ZXJuYWw6dm9pZCAwPT09ZS5pZ25vcmVJbnRlcm5hbHx8ZS5pZ25vcmVJbnRlcm5hbH19KGUsaSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYodC5pZ25vcmVJbnRlcm5hbCYmZnVuY3Rpb24oZSl7dHJ5e3JldHVyblwiU2VudHJ5RXJyb3JcIj09PWUuZXhjZXB0aW9uLnZhbHVlc1swXS50eXBlfWNhdGNoKGUpe31yZXR1cm4hMX0oZSkpcmV0dXJuIFYmJlEud2FybihgRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgaW50ZXJuYWwgU2VudHJ5IEVycm9yLlxcbkV2ZW50OiAke0hlKGUpfWApLCEwO2lmKGZ1bmN0aW9uKGUsdCl7aWYoZS50eXBlfHwhdHx8IXQubGVuZ3RoKXJldHVybiExO3JldHVybiBmdW5jdGlvbihlKXtjb25zdCB0PVtdO2UubWVzc2FnZSYmdC5wdXNoKGUubWVzc2FnZSk7bGV0IG47dHJ5e249ZS5leGNlcHRpb24udmFsdWVzW2UuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGgtMV19Y2F0Y2goZSl7fW4mJm4udmFsdWUmJih0LnB1c2gobi52YWx1ZSksbi50eXBlJiZ0LnB1c2goYCR7bi50eXBlfTogJHtuLnZhbHVlfWApKTtyZXR1cm4gdH0oZSkuc29tZSgoZT0+eGUoZSx0KSkpfShlLHQuaWdub3JlRXJyb3JzKSlyZXR1cm4gViYmUS53YXJuKGBFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IFxcYGlnbm9yZUVycm9yc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7SGUoZSl9YCksITA7aWYoZnVuY3Rpb24oZSl7aWYoZS50eXBlKXJldHVybiExO2lmKCFlLmV4Y2VwdGlvbnx8IWUuZXhjZXB0aW9uLnZhbHVlc3x8MD09PWUuZXhjZXB0aW9uLnZhbHVlcy5sZW5ndGgpcmV0dXJuITE7cmV0dXJuIWUubWVzc2FnZSYmIWUuZXhjZXB0aW9uLnZhbHVlcy5zb21lKChlPT5lLnN0YWNrdHJhY2V8fGUudHlwZSYmXCJFcnJvclwiIT09ZS50eXBlfHxlLnZhbHVlKSl9KGUpKXJldHVybiBWJiZRLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIG5vdCBoYXZpbmcgYW4gZXJyb3IgbWVzc2FnZSwgZXJyb3IgdHlwZSBvciBzdGFja3RyYWNlLlxcbkV2ZW50OiAke0hlKGUpfWApLCEwO2lmKGZ1bmN0aW9uKGUsdCl7aWYoXCJ0cmFuc2FjdGlvblwiIT09ZS50eXBlfHwhdHx8IXQubGVuZ3RoKXJldHVybiExO2NvbnN0IG49ZS50cmFuc2FjdGlvbjtyZXR1cm4hIW4mJnhlKG4sdCl9KGUsdC5pZ25vcmVUcmFuc2FjdGlvbnMpKXJldHVybiBWJiZRLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIGJlaW5nIG1hdGNoZWQgYnkgXFxgaWdub3JlVHJhbnNhY3Rpb25zXFxgIG9wdGlvbi5cXG5FdmVudDogJHtIZShlKX1gKSwhMDtpZihmdW5jdGlvbihlLHQpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuITE7Y29uc3Qgbj1EbihlKTtyZXR1cm4hIW4mJnhlKG4sdCl9KGUsdC5kZW55VXJscykpcmV0dXJuIFYmJlEud2FybihgRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgbWF0Y2hlZCBieSBcXGBkZW55VXJsc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7SGUoZSl9LlxcblVybDogJHtEbihlKX1gKSwhMDtpZighZnVuY3Rpb24oZSx0KXtpZighdHx8IXQubGVuZ3RoKXJldHVybiEwO2NvbnN0IG49RG4oZSk7cmV0dXJuIW58fHhlKG4sdCl9KGUsdC5hbGxvd1VybHMpKXJldHVybiBWJiZRLndhcm4oYEV2ZW50IGRyb3BwZWQgZHVlIHRvIG5vdCBiZWluZyBtYXRjaGVkIGJ5IFxcYGFsbG93VXJsc1xcYCBvcHRpb24uXFxuRXZlbnQ6ICR7SGUoZSl9LlxcblVybDogJHtEbihlKX1gKSwhMDtyZXR1cm4hMX0odCxvKT9udWxsOnR9fSk7ZnVuY3Rpb24gRG4oZSl7dHJ5e2xldCB0O3RyeXt0PWUuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlLmZyYW1lc31jYXRjaChlKXt9cmV0dXJuIHQ/ZnVuY3Rpb24oZT1bXSl7Zm9yKGxldCB0PWUubGVuZ3RoLTE7dD49MDt0LS0pe2NvbnN0IG49ZVt0XTtpZihuJiZcIjxhbm9ueW1vdXM+XCIhPT1uLmZpbGVuYW1lJiZcIltuYXRpdmUgY29kZV1cIiE9PW4uZmlsZW5hbWUpcmV0dXJuIG4uZmlsZW5hbWV8fG51bGx9cmV0dXJuIG51bGx9KHQpOm51bGx9Y2F0Y2godCl7cmV0dXJuIFYmJlEuZXJyb3IoYENhbm5vdCBleHRyYWN0IHVybCBmb3IgZXZlbnQgJHtIZShlKX1gKSxudWxsfX1mdW5jdGlvbiBObihlLHQsbj0yNTAscixpLG8scyl7aWYoIShvLmV4Y2VwdGlvbiYmby5leGNlcHRpb24udmFsdWVzJiZzJiZDZShzLm9yaWdpbmFsRXhjZXB0aW9uLEVycm9yKSkpcmV0dXJuO2NvbnN0IGE9by5leGNlcHRpb24udmFsdWVzLmxlbmd0aD4wP28uZXhjZXB0aW9uLnZhbHVlc1tvLmV4Y2VwdGlvbi52YWx1ZXMubGVuZ3RoLTFdOnZvaWQgMDt2YXIgYyxsO2EmJihvLmV4Y2VwdGlvbi52YWx1ZXM9KGM9Um4oZSx0LGkscy5vcmlnaW5hbEV4Y2VwdGlvbixyLG8uZXhjZXB0aW9uLnZhbHVlcyxhLDApLGw9bixjLm1hcCgoZT0+KGUudmFsdWUmJihlLnZhbHVlPUFlKGUudmFsdWUsbCkpLGUpKSkpKX1mdW5jdGlvbiBSbihlLHQsbixyLGksbyxzLGEpe2lmKG8ubGVuZ3RoPj1uKzEpcmV0dXJuIG87bGV0IGM9Wy4uLm9dO2lmKENlKHJbaV0sRXJyb3IpKXtGbihzLGEpO2NvbnN0IG89ZSh0LHJbaV0pLGw9Yy5sZW5ndGg7Qm4obyxpLGwsYSksYz1SbihlLHQsbixyW2ldLGksW28sLi4uY10sbyxsKX1yZXR1cm4gQXJyYXkuaXNBcnJheShyLmVycm9ycykmJnIuZXJyb3JzLmZvckVhY2goKChyLG8pPT57aWYoQ2UocixFcnJvcikpe0ZuKHMsYSk7Y29uc3QgbD1lKHQsciksdT1jLmxlbmd0aDtCbihsLGBlcnJvcnNbJHtvfV1gLHUsYSksYz1SbihlLHQsbixyLGksW2wsLi4uY10sbCx1KX19KSksY31mdW5jdGlvbiBGbihlLHQpe2UubWVjaGFuaXNtPWUubWVjaGFuaXNtfHx7dHlwZTpcImdlbmVyaWNcIixoYW5kbGVkOiEwfSxlLm1lY2hhbmlzbT17Li4uZS5tZWNoYW5pc20sLi4uXCJBZ2dyZWdhdGVFcnJvclwiPT09ZS50eXBlJiZ7aXNfZXhjZXB0aW9uX2dyb3VwOiEwfSxleGNlcHRpb25faWQ6dH19ZnVuY3Rpb24gQm4oZSx0LG4scil7ZS5tZWNoYW5pc209ZS5tZWNoYW5pc218fHt0eXBlOlwiZ2VuZXJpY1wiLGhhbmRsZWQ6ITB9LGUubWVjaGFuaXNtPXsuLi5lLm1lY2hhbmlzbSx0eXBlOlwiY2hhaW5lZFwiLHNvdXJjZTp0LGV4Y2VwdGlvbl9pZDpuLHBhcmVudF9pZDpyfX1mdW5jdGlvbiBVbihlKXtpZighZSlyZXR1cm57fTtjb25zdCB0PWUubWF0Y2goL14oKFteOi8/I10rKTopPyhcXC9cXC8oW14vPyNdKikpPyhbXj8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8pO2lmKCF0KXJldHVybnt9O2NvbnN0IG49dFs2XXx8XCJcIixyPXRbOF18fFwiXCI7cmV0dXJue2hvc3Q6dFs0XSxwYXRoOnRbNV0scHJvdG9jb2w6dFsyXSxzZWFyY2g6bixoYXNoOnIscmVsYXRpdmU6dFs1XStuK3J9fWZ1bmN0aW9uIFZuKCl7XCJjb25zb2xlXCJpbiAkJiZXLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UgaW4gJC5jb25zb2xlJiZMZSgkLmNvbnNvbGUsZSwoZnVuY3Rpb24odCl7cmV0dXJuIEhbZV09dCxmdW5jdGlvbiguLi50KXthZShcImNvbnNvbGVcIix7YXJnczp0LGxldmVsOmV9KTtjb25zdCBuPUhbZV07biYmbi5hcHBseSgkLmNvbnNvbGUsdCl9fSkpfSkpfWZ1bmN0aW9uIEpuKGUpe3JldHVyblwid2FyblwiPT09ZT9cIndhcm5pbmdcIjpbXCJmYXRhbFwiLFwiZXJyb3JcIixcIndhcm5pbmdcIixcImxvZ1wiLFwiaW5mb1wiLFwiZGVidWdcIl0uaW5jbHVkZXMoZSk/ZTpcImxvZ1wifWNvbnN0ICRuPSgpPT57bGV0IGU7cmV0dXJue25hbWU6XCJEZWR1cGVcIixwcm9jZXNzRXZlbnQodCl7aWYodC50eXBlKXJldHVybiB0O3RyeXtpZihmdW5jdGlvbihlLHQpe2lmKCF0KXJldHVybiExO2lmKGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1lLm1lc3NhZ2Uscj10Lm1lc3NhZ2U7aWYoIW4mJiFyKXJldHVybiExO2lmKG4mJiFyfHwhbiYmcilyZXR1cm4hMTtpZihuIT09cilyZXR1cm4hMTtpZighem4oZSx0KSlyZXR1cm4hMTtpZighcW4oZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH0oZSx0KSlyZXR1cm4hMDtpZihmdW5jdGlvbihlLHQpe2NvbnN0IG49V24odCkscj1XbihlKTtpZighbnx8IXIpcmV0dXJuITE7aWYobi50eXBlIT09ci50eXBlfHxuLnZhbHVlIT09ci52YWx1ZSlyZXR1cm4hMTtpZighem4oZSx0KSlyZXR1cm4hMTtpZighcW4oZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH0oZSx0KSlyZXR1cm4hMDtyZXR1cm4hMX0odCxlKSlyZXR1cm4gViYmUS53YXJuKFwiRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgYSBkdXBsaWNhdGUgb2YgcHJldmlvdXNseSBjYXB0dXJlZCBldmVudC5cIiksbnVsbH1jYXRjaChlKXt9cmV0dXJuIGU9dH19fTtmdW5jdGlvbiBxbihlLHQpe2xldCBuPW5lKGUpLHI9bmUodCk7aWYoIW4mJiFyKXJldHVybiEwO2lmKG4mJiFyfHwhbiYmcilyZXR1cm4hMTtpZihyLmxlbmd0aCE9PW4ubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgZT0wO2U8ci5sZW5ndGg7ZSsrKXtjb25zdCB0PXJbZV0saT1uW2VdO2lmKHQuZmlsZW5hbWUhPT1pLmZpbGVuYW1lfHx0LmxpbmVubyE9PWkubGluZW5vfHx0LmNvbG5vIT09aS5jb2xub3x8dC5mdW5jdGlvbiE9PWkuZnVuY3Rpb24pcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gem4oZSx0KXtsZXQgbj1lLmZpbmdlcnByaW50LHI9dC5maW5nZXJwcmludDtpZighbiYmIXIpcmV0dXJuITA7aWYobiYmIXJ8fCFuJiZyKXJldHVybiExO3RyeXtyZXR1cm4hKG4uam9pbihcIlwiKSE9PXIuam9pbihcIlwiKSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIFduKGUpe3JldHVybiBlLmV4Y2VwdGlvbiYmZS5leGNlcHRpb24udmFsdWVzJiZlLmV4Y2VwdGlvbi52YWx1ZXNbMF19ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIHZvaWQgMD09PWU/dm9pZCAwOmU+PTQwMCYmZTw1MDA/XCJ3YXJuaW5nXCI6ZT49NTAwP1wiZXJyb3JcIjp2b2lkIDB9Y29uc3QgR249JDtmdW5jdGlvbiBRbihlKXtyZXR1cm4gZSYmL15mdW5jdGlvblxccytcXHcrXFwoXFwpXFxzK1xce1xccytcXFtuYXRpdmUgY29kZVxcXVxccytcXH0kLy50ZXN0KGUudG9TdHJpbmcoKSl9ZnVuY3Rpb24gS24oKXtpZihcInN0cmluZ1wiPT10eXBlb2YgRWRnZVJ1bnRpbWUpcmV0dXJuITA7aWYoIWZ1bmN0aW9uKCl7aWYoIShcImZldGNoXCJpbiBHbikpcmV0dXJuITE7dHJ5e3JldHVybiBuZXcgSGVhZGVycyxuZXcgUmVxdWVzdChcImh0dHA6Ly93d3cuZXhhbXBsZS5jb21cIiksbmV3IFJlc3BvbnNlLCEwfWNhdGNoKGUpe3JldHVybiExfX0oKSlyZXR1cm4hMTtpZihRbihHbi5mZXRjaCkpcmV0dXJuITA7bGV0IGU9ITE7Y29uc3QgdD1Hbi5kb2N1bWVudDtpZih0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNyZWF0ZUVsZW1lbnQpdHJ5e2NvbnN0IG49dC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO24uaGlkZGVuPSEwLHQuaGVhZC5hcHBlbmRDaGlsZChuKSxuLmNvbnRlbnRXaW5kb3cmJm4uY29udGVudFdpbmRvdy5mZXRjaCYmKGU9UW4obi5jb250ZW50V2luZG93LmZldGNoKSksdC5oZWFkLnJlbW92ZUNoaWxkKG4pfWNhdGNoKGUpe3omJlEud2FybihcIkNvdWxkIG5vdCBjcmVhdGUgc2FuZGJveCBpZnJhbWUgZm9yIHB1cmUgZmV0Y2ggY2hlY2ssIGJhaWxpbmcgdG8gd2luZG93LmZldGNoOiBcIixlKX1yZXR1cm4gZX1mdW5jdGlvbiBZbihlLHQpe2NvbnN0IG49XCJmZXRjaFwiO29lKG4sZSksc2UobiwoKCk9PmZ1bmN0aW9uKGUsdD0hMSl7aWYodCYmIUtuKCkpcmV0dXJuO0xlKCQsXCJmZXRjaFwiLChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oLi4ubil7Y29uc3Qgcj1uZXcgRXJyb3Ise21ldGhvZDppLHVybDpvfT1mdW5jdGlvbihlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJue21ldGhvZDpcIkdFVFwiLHVybDpcIlwifTtpZigyPT09ZS5sZW5ndGgpe2NvbnN0W3Qsbl09ZTtyZXR1cm57dXJsOlpuKHQpLG1ldGhvZDpYbihuLFwibWV0aG9kXCIpP1N0cmluZyhuLm1ldGhvZCkudG9VcHBlckNhc2UoKTpcIkdFVFwifX1jb25zdCB0PWVbMF07cmV0dXJue3VybDpabih0KSxtZXRob2Q6WG4odCxcIm1ldGhvZFwiKT9TdHJpbmcodC5tZXRob2QpLnRvVXBwZXJDYXNlKCk6XCJHRVRcIn19KG4pLHM9e2FyZ3M6bixmZXRjaERhdGE6e21ldGhvZDppLHVybDpvfSxzdGFydFRpbWVzdGFtcDoxZTMqcWUoKSx2aXJ0dWFsRXJyb3I6cn07cmV0dXJuIGV8fGFlKFwiZmV0Y2hcIix7Li4uc30pLHQuYXBwbHkoJCxuKS50aGVuKChhc3luYyB0PT4oZT9lKHQpOmFlKFwiZmV0Y2hcIix7Li4ucyxlbmRUaW1lc3RhbXA6MWUzKnFlKCkscmVzcG9uc2U6dH0pLHQpKSwoZT0+e3Rocm93IGFlKFwiZmV0Y2hcIix7Li4ucyxlbmRUaW1lc3RhbXA6MWUzKnFlKCksZXJyb3I6ZX0pLHZlKGUpJiZ2b2lkIDA9PT1lLnN0YWNrJiYoZS5zdGFjaz1yLnN0YWNrLERlKGUsXCJmcmFtZXNUb1BvcFwiLDEpKSxlfSkpfX0pKX0odm9pZCAwLHQpKSl9ZnVuY3Rpb24gWG4oZSx0KXtyZXR1cm4hIWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYhIWVbdF19ZnVuY3Rpb24gWm4oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplP1huKGUsXCJ1cmxcIik/ZS51cmw6ZS50b1N0cmluZz9lLnRvU3RyaW5nKCk6XCJcIjpcIlwifWNvbnN0IGVyPSQ7Y29uc3QgdHI9JDtsZXQgbnI9MDtmdW5jdGlvbiBycigpe3JldHVybiBucj4wfWZ1bmN0aW9uIGlyKGUsdD17fSl7aWYoIWZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9KGUpKXJldHVybiBlO3RyeXtjb25zdCB0PWUuX19zZW50cnlfd3JhcHBlZF9fO2lmKHQpcmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD90OmU7aWYoUmUoZSkpcmV0dXJuIGV9Y2F0Y2godCl7cmV0dXJuIGV9Y29uc3Qgbj1mdW5jdGlvbiguLi5uKXt0cnl7Y29uc3Qgcj1uLm1hcCgoZT0+aXIoZSx0KSkpO3JldHVybiBlLmFwcGx5KHRoaXMscil9Y2F0Y2goZSl7dGhyb3cgbnIrKyxzZXRUaW1lb3V0KCgoKT0+e25yLS19KSksZnVuY3Rpb24oLi4uZSl7Y29uc3QgdD1ndChwZSgpKTtpZigyPT09ZS5sZW5ndGgpe2NvbnN0W24scl09ZTtyZXR1cm4gbj90LndpdGhTZXRTY29wZShuLHIpOnQud2l0aFNjb3BlKHIpfXQud2l0aFNjb3BlKGVbMF0pfSgocj0+e3ZhciBpLG87ci5hZGRFdmVudFByb2Nlc3NvcigoZT0+KHQubWVjaGFuaXNtJiYoR2UoZSx2b2lkIDAsdm9pZCAwKSxRZShlLHQubWVjaGFuaXNtKSksZS5leHRyYT17Li4uZS5leHRyYSxhcmd1bWVudHM6bn0sZSkpKSxpPWUsbXQoKS5jYXB0dXJlRXhjZXB0aW9uKGksY24obykpfSkpLGV9fTt0cnl7Zm9yKGNvbnN0IHQgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSYmKG5bdF09ZVt0XSl9Y2F0Y2goZSl7fU5lKG4sZSksRGUoZSxcIl9fc2VudHJ5X3dyYXBwZWRfX1wiLG4pO3RyeXtPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sXCJuYW1lXCIpLmNvbmZpZ3VyYWJsZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJuYW1lXCIse2dldDooKT0+ZS5uYW1lfSl9Y2F0Y2goZSl7fXJldHVybiBufWNvbnN0IG9yPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fO2Z1bmN0aW9uIHNyKGUsdCl7Y29uc3Qgbj1scihlLHQpLHI9e3R5cGU6cHIodCksdmFsdWU6aHIodCl9O3JldHVybiBuLmxlbmd0aCYmKHIuc3RhY2t0cmFjZT17ZnJhbWVzOm59KSx2b2lkIDA9PT1yLnR5cGUmJlwiXCI9PT1yLnZhbHVlJiYoci52YWx1ZT1cIlVucmVjb3ZlcmFibGUgZXJyb3IgY2F1Z2h0XCIpLHJ9ZnVuY3Rpb24gYXIoZSx0LG4scil7Y29uc3QgaT1idCgpLG89aSYmaS5nZXRPcHRpb25zKCkubm9ybWFsaXplRGVwdGgscz1mdW5jdGlvbihlKXtmb3IoY29uc3QgdCBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpKXtjb25zdCBuPWVbdF07aWYobiBpbnN0YW5jZW9mIEVycm9yKXJldHVybiBufXJldHVybn0odCksYT17X19zZXJpYWxpemVkX186VnQodCxvKX07aWYocylyZXR1cm57ZXhjZXB0aW9uOnt2YWx1ZXM6W3NyKGUscyldfSxleHRyYTphfTtjb25zdCBjPXtleGNlcHRpb246e3ZhbHVlczpbe3R5cGU6a2UodCk/dC5jb25zdHJ1Y3Rvci5uYW1lOnI/XCJVbmhhbmRsZWRSZWplY3Rpb25cIjpcIkVycm9yXCIsdmFsdWU6Z3IodCx7aXNVbmhhbmRsZWRSZWplY3Rpb246cn0pfV19LGV4dHJhOmF9O2lmKG4pe2NvbnN0IHQ9bHIoZSxuKTt0Lmxlbmd0aCYmKGMuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlPXtmcmFtZXM6dH0pfXJldHVybiBjfWZ1bmN0aW9uIGNyKGUsdCl7cmV0dXJue2V4Y2VwdGlvbjp7dmFsdWVzOltzcihlLHQpXX19fWZ1bmN0aW9uIGxyKGUsdCl7Y29uc3Qgbj10LnN0YWNrdHJhY2V8fHQuc3RhY2t8fFwiXCIscj1mdW5jdGlvbihlKXtpZihlJiZ1ci50ZXN0KGUubWVzc2FnZSkpcmV0dXJuIDE7cmV0dXJuIDB9KHQpLGk9ZnVuY3Rpb24oZSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUuZnJhbWVzVG9Qb3ApcmV0dXJuIGUuZnJhbWVzVG9Qb3A7cmV0dXJuIDB9KHQpO3RyeXtyZXR1cm4gZShuLHIsaSl9Y2F0Y2goZSl7fXJldHVybltdfWNvbnN0IHVyPS9NaW5pZmllZCBSZWFjdCBlcnJvciAjXFxkKzsvaTtmdW5jdGlvbiBkcihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgV2ViQXNzZW1ibHkmJnZvaWQgMCE9PVdlYkFzc2VtYmx5LkV4Y2VwdGlvbiYmZSBpbnN0YW5jZW9mIFdlYkFzc2VtYmx5LkV4Y2VwdGlvbn1mdW5jdGlvbiBwcihlKXtjb25zdCB0PWUmJmUubmFtZTtpZighdCYmZHIoZSkpe3JldHVybiBlLm1lc3NhZ2UmJkFycmF5LmlzQXJyYXkoZS5tZXNzYWdlKSYmMj09ZS5tZXNzYWdlLmxlbmd0aD9lLm1lc3NhZ2VbMF06XCJXZWJBc3NlbWJseS5FeGNlcHRpb25cIn1yZXR1cm4gdH1mdW5jdGlvbiBocihlKXtjb25zdCB0PWUmJmUubWVzc2FnZTtyZXR1cm4gdD90LmVycm9yJiZcInN0cmluZ1wiPT10eXBlb2YgdC5lcnJvci5tZXNzYWdlP3QuZXJyb3IubWVzc2FnZTpkcihlKSYmQXJyYXkuaXNBcnJheShlLm1lc3NhZ2UpJiYyPT1lLm1lc3NhZ2UubGVuZ3RoP2UubWVzc2FnZVsxXTp0OlwiTm8gZXJyb3IgbWVzc2FnZVwifWZ1bmN0aW9uIGZyKGUsdCxuLHIsaSl7bGV0IG87aWYobWUodCkmJnQuZXJyb3Ipe3JldHVybiBjcihlLHQuZXJyb3IpfWlmKHllKHQpfHxnZSh0LFwiRE9NRXhjZXB0aW9uXCIpKXtjb25zdCBpPXQ7aWYoXCJzdGFja1wiaW4gdClvPWNyKGUsdCk7ZWxzZXtjb25zdCB0PWkubmFtZXx8KHllKGkpP1wiRE9NRXJyb3JcIjpcIkRPTUV4Y2VwdGlvblwiKSxzPWkubWVzc2FnZT9gJHt0fTogJHtpLm1lc3NhZ2V9YDp0O289dnIoZSxzLG4sciksR2UobyxzKX1yZXR1cm5cImNvZGVcImluIGkmJihvLnRhZ3M9ey4uLm8udGFncyxcIkRPTUV4Y2VwdGlvbi5jb2RlXCI6YCR7aS5jb2RlfWB9KSxvfWlmKHZlKHQpKXJldHVybiBjcihlLHQpO2lmKFNlKHQpfHxrZSh0KSl7cmV0dXJuIG89YXIoZSx0LG4saSksUWUobyx7c3ludGhldGljOiEwfSksb31yZXR1cm4gbz12cihlLHQsbixyKSxHZShvLGAke3R9YCx2b2lkIDApLFFlKG8se3N5bnRoZXRpYzohMH0pLG99ZnVuY3Rpb24gdnIoZSx0LG4scil7Y29uc3QgaT17fTtpZihyJiZuKXtjb25zdCByPWxyKGUsbik7ci5sZW5ndGgmJihpLmV4Y2VwdGlvbj17dmFsdWVzOlt7dmFsdWU6dCxzdGFja3RyYWNlOntmcmFtZXM6cn19XX0pLFFlKGkse3N5bnRoZXRpYzohMH0pfWlmKF9lKHQpKXtjb25zdHtfX3NlbnRyeV90ZW1wbGF0ZV9zdHJpbmdfXzplLF9fc2VudHJ5X3RlbXBsYXRlX3ZhbHVlc19fOm59PXQ7cmV0dXJuIGkubG9nZW50cnk9e21lc3NhZ2U6ZSxwYXJhbXM6bn0saX1yZXR1cm4gaS5tZXNzYWdlPXQsaX1mdW5jdGlvbiBncihlLHtpc1VuaGFuZGxlZFJlamVjdGlvbjp0fSl7Y29uc3Qgbj1mdW5jdGlvbihlLHQ9NDApe2NvbnN0IG49T2JqZWN0LmtleXMoRmUoZSkpO24uc29ydCgpO2NvbnN0IHI9blswXTtpZighcilyZXR1cm5cIltvYmplY3QgaGFzIG5vIGtleXNdXCI7aWYoci5sZW5ndGg+PXQpcmV0dXJuIEFlKHIsdCk7Zm9yKGxldCBlPW4ubGVuZ3RoO2U+MDtlLS0pe2NvbnN0IHI9bi5zbGljZSgwLGUpLmpvaW4oXCIsIFwiKTtpZighKHIubGVuZ3RoPnQpKXJldHVybiBlPT09bi5sZW5ndGg/cjpBZShyLHQpfXJldHVyblwiXCJ9KGUpLHI9dD9cInByb21pc2UgcmVqZWN0aW9uXCI6XCJleGNlcHRpb25cIjtpZihtZShlKSlyZXR1cm5gRXZlbnQgXFxgRXJyb3JFdmVudFxcYCBjYXB0dXJlZCBhcyAke3J9IHdpdGggbWVzc2FnZSBcXGAke2UubWVzc2FnZX1cXGBgO2lmKGtlKGUpKXtyZXR1cm5gRXZlbnQgXFxgJHtmdW5jdGlvbihlKXt0cnl7Y29uc3QgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIHQ/dC5jb25zdHJ1Y3Rvci5uYW1lOnZvaWQgMH1jYXRjaChlKXt9fShlKX1cXGAgKHR5cGU9JHtlLnR5cGV9KSBjYXB0dXJlZCBhcyAke3J9YH1yZXR1cm5gT2JqZWN0IGNhcHR1cmVkIGFzICR7cn0gd2l0aCBrZXlzOiAke259YH1jbGFzcyBtciBleHRlbmRzIHdue2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9e3BhcmVudFNwYW5Jc0Fsd2F5c1Jvb3RTcGFuOiEwLC4uLmV9OyFmdW5jdGlvbihlLHQsbj1bdF0scj1cIm5wbVwiKXtjb25zdCBpPWUuX21ldGFkYXRhfHx7fTtpLnNka3x8KGkuc2RrPXtuYW1lOmBzZW50cnkuamF2YXNjcmlwdC4ke3R9YCxwYWNrYWdlczpuLm1hcCgoZT0+KHtuYW1lOmAke3J9OkBzZW50cnkvJHtlfWAsdmVyc2lvbjpKfSkpKSx2ZXJzaW9uOkp9KSxlLl9tZXRhZGF0YT1pfSh0LFwiYnJvd3NlclwiLFtcImJyb3dzZXJcIl0sdHIuU0VOVFJZX1NES19TT1VSQ0V8fFwibnBtXCIpLHN1cGVyKHQpLHQuc2VuZENsaWVudFJlcG9ydHMmJnRyLmRvY3VtZW50JiZ0ci5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCgoKT0+e1wiaGlkZGVuXCI9PT10ci5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUmJnRoaXMuX2ZsdXNoT3V0Y29tZXMoKX0pKX1ldmVudEZyb21FeGNlcHRpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSx0LG4scil7Y29uc3QgaT1mcihlLHQsbiYmbi5zeW50aGV0aWNFeGNlcHRpb258fHZvaWQgMCxyKTtyZXR1cm4gUWUoaSksaS5sZXZlbD1cImVycm9yXCIsbiYmbi5ldmVudF9pZCYmKGkuZXZlbnRfaWQ9bi5ldmVudF9pZCksWGUoaSl9KHRoaXMuX29wdGlvbnMuc3RhY2tQYXJzZXIsZSx0LHRoaXMuX29wdGlvbnMuYXR0YWNoU3RhY2t0cmFjZSl9ZXZlbnRGcm9tTWVzc2FnZShlLHQ9XCJpbmZvXCIsbil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuPVwiaW5mb1wiLHIsaSl7Y29uc3Qgbz12cihlLHQsciYmci5zeW50aGV0aWNFeGNlcHRpb258fHZvaWQgMCxpKTtyZXR1cm4gby5sZXZlbD1uLHImJnIuZXZlbnRfaWQmJihvLmV2ZW50X2lkPXIuZXZlbnRfaWQpLFhlKG8pfSh0aGlzLl9vcHRpb25zLnN0YWNrUGFyc2VyLGUsdCxuLHRoaXMuX29wdGlvbnMuYXR0YWNoU3RhY2t0cmFjZSl9Y2FwdHVyZVVzZXJGZWVkYmFjayhlKXtpZighdGhpcy5faXNFbmFibGVkKCkpcmV0dXJuIHZvaWQob3ImJlEud2FybihcIlNESyBub3QgZW5hYmxlZCwgd2lsbCBub3QgY2FwdHVyZSB1c2VyIGZlZWRiYWNrLlwiKSk7Y29uc3QgdD1mdW5jdGlvbihlLHttZXRhZGF0YTp0LHR1bm5lbDpuLGRzbjpyfSl7Y29uc3QgaT17ZXZlbnRfaWQ6ZS5ldmVudF9pZCxzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi50JiZ0LnNkayYme3Nkazp7bmFtZTp0LnNkay5uYW1lLHZlcnNpb246dC5zZGsudmVyc2lvbn19LC4uLiEhbiYmISFyJiZ7ZHNuOlJ0KHIpfX0sbz1mdW5jdGlvbihlKXtyZXR1cm5be3R5cGU6XCJ1c2VyX3JlcG9ydFwifSxlXX0oZSk7cmV0dXJuICR0KGksW29dKX0oZSx7bWV0YWRhdGE6dGhpcy5nZXRTZGtNZXRhZGF0YSgpLGRzbjp0aGlzLmdldERzbigpLHR1bm5lbDp0aGlzLmdldE9wdGlvbnMoKS50dW5uZWx9KTt0aGlzLnNlbmRFbnZlbG9wZSh0KX1fcHJlcGFyZUV2ZW50KGUsdCxuKXtyZXR1cm4gZS5wbGF0Zm9ybT1lLnBsYXRmb3JtfHxcImphdmFzY3JpcHRcIixzdXBlci5fcHJlcGFyZUV2ZW50KGUsdCxuKX19Y29uc3QgeXI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIF9fU0VOVFJZX0RFQlVHX198fF9fU0VOVFJZX0RFQlVHX18sYnI9JDtsZXQgX3Isd3IsU3Isa3I7ZnVuY3Rpb24gTXIoKXtpZighYnIuZG9jdW1lbnQpcmV0dXJuO2NvbnN0IGU9YWUuYmluZChudWxsLFwiZG9tXCIpLHQ9Q3IoZSwhMCk7YnIuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdCwhMSksYnIuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsdCwhMSksW1wiRXZlbnRUYXJnZXRcIixcIk5vZGVcIl0uZm9yRWFjaCgodD0+e2NvbnN0IG49YnJbdF0scj1uJiZuLnByb3RvdHlwZTtyJiZyLmhhc093blByb3BlcnR5JiZyLmhhc093blByb3BlcnR5KFwiYWRkRXZlbnRMaXN0ZW5lclwiKSYmKExlKHIsXCJhZGRFdmVudExpc3RlbmVyXCIsKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLHIsaSl7aWYoXCJjbGlja1wiPT09bnx8XCJrZXlwcmVzc1wiPT1uKXRyeXtjb25zdCByPXRoaXMuX19zZW50cnlfaW5zdHJ1bWVudGF0aW9uX2hhbmRsZXJzX189dGhpcy5fX3NlbnRyeV9pbnN0cnVtZW50YXRpb25faGFuZGxlcnNfX3x8e30sbz1yW25dPXJbbl18fHtyZWZDb3VudDowfTtpZighby5oYW5kbGVyKXtjb25zdCByPUNyKGUpO28uaGFuZGxlcj1yLHQuY2FsbCh0aGlzLG4scixpKX1vLnJlZkNvdW50Kyt9Y2F0Y2goZSl7fXJldHVybiB0LmNhbGwodGhpcyxuLHIsaSl9fSkpLExlKHIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4scil7aWYoXCJjbGlja1wiPT09dHx8XCJrZXlwcmVzc1wiPT10KXRyeXtjb25zdCBuPXRoaXMuX19zZW50cnlfaW5zdHJ1bWVudGF0aW9uX2hhbmRsZXJzX198fHt9LGk9blt0XTtpJiYoaS5yZWZDb3VudC0tLGkucmVmQ291bnQ8PTAmJihlLmNhbGwodGhpcyx0LGkuaGFuZGxlcixyKSxpLmhhbmRsZXI9dm9pZCAwLGRlbGV0ZSBuW3RdKSwwPT09T2JqZWN0LmtleXMobikubGVuZ3RoJiZkZWxldGUgdGhpcy5fX3NlbnRyeV9pbnN0cnVtZW50YXRpb25faGFuZGxlcnNfXyl9Y2F0Y2goZSl7fXJldHVybiBlLmNhbGwodGhpcyx0LG4scil9fSkpKX0pKX1mdW5jdGlvbiBDcihlLHQ9ITEpe3JldHVybiBuPT57aWYoIW58fG4uX3NlbnRyeUNhcHR1cmVkKXJldHVybjtjb25zdCByPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZS50YXJnZXR9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fShuKTtpZihmdW5jdGlvbihlLHQpe3JldHVyblwia2V5cHJlc3NcIj09PWUmJighdHx8IXQudGFnTmFtZXx8XCJJTlBVVFwiIT09dC50YWdOYW1lJiZcIlRFWFRBUkVBXCIhPT10LnRhZ05hbWUmJiF0LmlzQ29udGVudEVkaXRhYmxlKX0obi50eXBlLHIpKXJldHVybjtEZShuLFwiX3NlbnRyeUNhcHR1cmVkXCIsITApLHImJiFyLl9zZW50cnlJZCYmRGUocixcIl9zZW50cnlJZFwiLHplKCkpO2NvbnN0IGk9XCJrZXlwcmVzc1wiPT09bi50eXBlP1wiaW5wdXRcIjpuLnR5cGU7aWYoIWZ1bmN0aW9uKGUpe2lmKGUudHlwZSE9PXdyKXJldHVybiExO3RyeXtpZighZS50YXJnZXR8fGUudGFyZ2V0Ll9zZW50cnlJZCE9PVNyKXJldHVybiExfWNhdGNoKGUpe31yZXR1cm4hMH0obikpe2Uoe2V2ZW50Om4sbmFtZTppLGdsb2JhbDp0fSksd3I9bi50eXBlLFNyPXI/ci5fc2VudHJ5SWQ6dm9pZCAwfWNsZWFyVGltZW91dChfciksX3I9YnIuc2V0VGltZW91dCgoKCk9PntTcj12b2lkIDAsd3I9dm9pZCAwfSksMWUzKX19ZnVuY3Rpb24gRXIoZSl7Y29uc3QgdD1cImhpc3RvcnlcIjtvZSh0LGUpLHNlKHQsVHIpfWZ1bmN0aW9uIFRyKCl7aWYoIWZ1bmN0aW9uKCl7Y29uc3QgZT1lci5jaHJvbWUsdD1lJiZlLmFwcCYmZS5hcHAucnVudGltZSxuPVwiaGlzdG9yeVwiaW4gZXImJiEhZXIuaGlzdG9yeS5wdXNoU3RhdGUmJiEhZXIuaGlzdG9yeS5yZXBsYWNlU3RhdGU7cmV0dXJuIXQmJm59KCkpcmV0dXJuO2NvbnN0IGU9YnIub25wb3BzdGF0ZTtmdW5jdGlvbiB0KGUpe3JldHVybiBmdW5jdGlvbiguLi50KXtjb25zdCBuPXQubGVuZ3RoPjI/dFsyXTp2b2lkIDA7aWYobil7Y29uc3QgZT1rcix0PVN0cmluZyhuKTtrcj10O2FlKFwiaGlzdG9yeVwiLHtmcm9tOmUsdG86dH0pfXJldHVybiBlLmFwcGx5KHRoaXMsdCl9fWJyLm9ucG9wc3RhdGU9ZnVuY3Rpb24oLi4udCl7Y29uc3Qgbj1ici5sb2NhdGlvbi5ocmVmLHI9a3I7a3I9bjtpZihhZShcImhpc3RvcnlcIix7ZnJvbTpyLHRvOm59KSxlKXRyeXtyZXR1cm4gZS5hcHBseSh0aGlzLHQpfWNhdGNoKGUpe319LExlKGJyLmhpc3RvcnksXCJwdXNoU3RhdGVcIix0KSxMZShici5oaXN0b3J5LFwicmVwbGFjZVN0YXRlXCIsdCl9Y29uc3QgT3I9e307ZnVuY3Rpb24gUHIoZSl7T3JbZV09dm9pZCAwfWNvbnN0IEFyPVwiX19zZW50cnlfeGhyX3YzX19cIjtmdW5jdGlvbiBqcigpe2lmKCFici5YTUxIdHRwUmVxdWVzdClyZXR1cm47Y29uc3QgZT1YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGU7ZS5vcGVuPW5ldyBQcm94eShlLm9wZW4se2FwcGx5KGUsdCxuKXtjb25zdCByPW5ldyBFcnJvcixpPTFlMypxZSgpLG89YmUoblswXSk/blswXS50b1VwcGVyQ2FzZSgpOnZvaWQgMCxzPWZ1bmN0aW9uKGUpe2lmKGJlKGUpKXJldHVybiBlO3RyeXtyZXR1cm4gZS50b1N0cmluZygpfWNhdGNoKGUpe31yZXR1cm59KG5bMV0pO2lmKCFvfHwhcylyZXR1cm4gZS5hcHBseSh0LG4pO3RbQXJdPXttZXRob2Q6byx1cmw6cyxyZXF1ZXN0X2hlYWRlcnM6e319LFwiUE9TVFwiPT09byYmcy5tYXRjaCgvc2VudHJ5X2tleS8pJiYodC5fX3NlbnRyeV9vd25fcmVxdWVzdF9fPSEwKTtjb25zdCBhPSgpPT57Y29uc3QgZT10W0FyXTtpZihlJiY0PT09dC5yZWFkeVN0YXRlKXt0cnl7ZS5zdGF0dXNfY29kZT10LnN0YXR1c31jYXRjaChlKXt9YWUoXCJ4aHJcIix7ZW5kVGltZXN0YW1wOjFlMypxZSgpLHN0YXJ0VGltZXN0YW1wOmkseGhyOnQsdmlydHVhbEVycm9yOnJ9KX19O3JldHVyblwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9ucmVhZHlzdGF0ZWNoYW5nZT90Lm9ucmVhZHlzdGF0ZWNoYW5nZT1uZXcgUHJveHkodC5vbnJlYWR5c3RhdGVjaGFuZ2Use2FwcGx5OihlLHQsbik9PihhKCksZS5hcHBseSh0LG4pKX0pOnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIixhKSx0LnNldFJlcXVlc3RIZWFkZXI9bmV3IFByb3h5KHQuc2V0UmVxdWVzdEhlYWRlcix7YXBwbHkoZSx0LG4pe2NvbnN0W3IsaV09bixvPXRbQXJdO3JldHVybiBvJiZiZShyKSYmYmUoaSkmJihvLnJlcXVlc3RfaGVhZGVyc1tyLnRvTG93ZXJDYXNlKCldPWkpLGUuYXBwbHkodCxuKX19KSxlLmFwcGx5KHQsbil9fSksZS5zZW5kPW5ldyBQcm94eShlLnNlbmQse2FwcGx5KGUsdCxuKXtjb25zdCByPXRbQXJdO2lmKCFyKXJldHVybiBlLmFwcGx5KHQsbik7dm9pZCAwIT09blswXSYmKHIuYm9keT1uWzBdKTtyZXR1cm4gYWUoXCJ4aHJcIix7c3RhcnRUaW1lc3RhbXA6MWUzKnFlKCkseGhyOnR9KSxlLmFwcGx5KHQsbil9fSl9ZnVuY3Rpb24gSXIoZSx0PWZ1bmN0aW9uKGUpe2NvbnN0IHQ9T3JbZV07aWYodClyZXR1cm4gdDtsZXQgbj1icltlXTtpZihRbihuKSlyZXR1cm4gT3JbZV09bi5iaW5kKGJyKTtjb25zdCByPWJyLmRvY3VtZW50O2lmKHImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIuY3JlYXRlRWxlbWVudCl0cnl7Y29uc3QgdD1yLmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7dC5oaWRkZW49ITAsci5oZWFkLmFwcGVuZENoaWxkKHQpO2NvbnN0IGk9dC5jb250ZW50V2luZG93O2kmJmlbZV0mJihuPWlbZV0pLHIuaGVhZC5yZW1vdmVDaGlsZCh0KX1jYXRjaCh0KXt5ciYmUS53YXJuKGBDb3VsZCBub3QgY3JlYXRlIHNhbmRib3ggaWZyYW1lIGZvciAke2V9IGNoZWNrLCBiYWlsaW5nIHRvIHdpbmRvdy4ke2V9OiBgLHQpfXJldHVybiBuP09yW2VdPW4uYmluZChicik6bn0oXCJmZXRjaFwiKSl7bGV0IG49MCxyPTA7cmV0dXJuIEVuKGUsKGZ1bmN0aW9uKGkpe2NvbnN0IG89aS5ib2R5Lmxlbmd0aDtuKz1vLHIrKztjb25zdCBzPXtib2R5OmkuYm9keSxtZXRob2Q6XCJQT1NUXCIscmVmZXJyZXJQb2xpY3k6XCJvcmlnaW5cIixoZWFkZXJzOmUuaGVhZGVycyxrZWVwYWxpdmU6bjw9NmU0JiZyPDE1LC4uLmUuZmV0Y2hPcHRpb25zfTtpZighdClyZXR1cm4gUHIoXCJmZXRjaFwiKSxaZShcIk5vIGZldGNoIGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZVwiKTt0cnl7cmV0dXJuIHQoZS51cmwscykudGhlbigoZT0+KG4tPW8sci0tLHtzdGF0dXNDb2RlOmUuc3RhdHVzLGhlYWRlcnM6e1wieC1zZW50cnktcmF0ZS1saW1pdHNcIjplLmhlYWRlcnMuZ2V0KFwiWC1TZW50cnktUmF0ZS1MaW1pdHNcIiksXCJyZXRyeS1hZnRlclwiOmUuaGVhZGVycy5nZXQoXCJSZXRyeS1BZnRlclwiKX19KSkpfWNhdGNoKGUpe3JldHVybiBQcihcImZldGNoXCIpLG4tPW8sci0tLFplKGUpfX0pKX1mdW5jdGlvbiB4cihlLHQsbixyKXtjb25zdCBpPXtmaWxlbmFtZTplLGZ1bmN0aW9uOlwiPGFub255bW91cz5cIj09PXQ/Szp0LGluX2FwcDohMH07cmV0dXJuIHZvaWQgMCE9PW4mJihpLmxpbmVubz1uKSx2b2lkIDAhPT1yJiYoaS5jb2xubz1yKSxpfWNvbnN0IExyPS9eXFxzKmF0IChcXFMrPykoPzo6KFxcZCspKSg/OjooXFxkKykpXFxzKiQvaSxEcj0vXlxccyphdCAoPzooLis/XFwpKD86IFxcWy4rXFxdKT98Lio/KSA/XFwoKD86YWRkcmVzcyBhdCApPyk/KD86YXN5bmMgKT8oKD86PGFub255bW91cz58Wy1hLXpdKzp8LipidW5kbGV8XFwvKT8uKj8pKD86OihcXGQrKSk/KD86OihcXGQrKSk/XFwpP1xccyokL2ksTnI9L1xcKChcXFMqKSg/OjooXFxkKykpKD86OihcXGQrKSlcXCkvLFJyPS9eXFxzKiguKj8pKD86XFwoKC4qPylcXCkpPyg/Ol58QCk/KCg/OlstYS16XSspPzpcXC8uKj98XFxbbmF0aXZlIGNvZGVcXF18W15AXSooPzpidW5kbGV8XFxkK1xcLmpzKXxcXC9bXFx3XFwtLiAvPV0rKSg/OjooXFxkKykpPyg/OjooXFxkKykpP1xccyokL2ksRnI9LyhcXFMrKSBsaW5lIChcXGQrKSg/OiA+IGV2YWwgbGluZSBcXGQrKSogPiBldmFsL2ksQnI9ZnVuY3Rpb24oLi4uZSl7Y29uc3QgdD1lLnNvcnQoKChlLHQpPT5lWzBdLXRbMF0pKS5tYXAoKGU9PmVbMV0pKTtyZXR1cm4oZSxuPTAscj0wKT0+e2NvbnN0IGk9W10sbz1lLnNwbGl0KFwiXFxuXCIpO2ZvcihsZXQgZT1uO2U8by5sZW5ndGg7ZSsrKXtjb25zdCBuPW9bZV07aWYobi5sZW5ndGg+MTAyNCljb250aW51ZTtjb25zdCBzPVkudGVzdChuKT9uLnJlcGxhY2UoWSxcIiQxXCIpOm47aWYoIXMubWF0Y2goL1xcUypFcnJvcjogLykpe2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9ZShzKTtpZih0KXtpLnB1c2godCk7YnJlYWt9fWlmKGkubGVuZ3RoPj01MCtyKWJyZWFrfX1yZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWUubGVuZ3RoKXJldHVybltdO2NvbnN0IHQ9QXJyYXkuZnJvbShlKTsvc2VudHJ5V3JhcHBlZC8udGVzdChaKHQpLmZ1bmN0aW9ufHxcIlwiKSYmdC5wb3AoKTt0LnJldmVyc2UoKSxYLnRlc3QoWih0KS5mdW5jdGlvbnx8XCJcIikmJih0LnBvcCgpLFgudGVzdChaKHQpLmZ1bmN0aW9ufHxcIlwiKSYmdC5wb3AoKSk7cmV0dXJuIHQuc2xpY2UoMCw1MCkubWFwKChlPT4oey4uLmUsZmlsZW5hbWU6ZS5maWxlbmFtZXx8Wih0KS5maWxlbmFtZSxmdW5jdGlvbjplLmZ1bmN0aW9ufHxLfSkpKX0oaS5zbGljZShyKSl9fSguLi5bWzMwLGU9Pntjb25zdCB0PUxyLmV4ZWMoZSk7aWYodCl7Y29uc3RbLGUsbixyXT10O3JldHVybiB4cihlLEssK24sK3IpfWNvbnN0IG49RHIuZXhlYyhlKTtpZihuKXtpZihuWzJdJiYwPT09blsyXS5pbmRleE9mKFwiZXZhbFwiKSl7Y29uc3QgZT1Oci5leGVjKG5bMl0pO2UmJihuWzJdPWVbMV0sblszXT1lWzJdLG5bNF09ZVszXSl9Y29uc3RbZSx0XT1VcihuWzFdfHxLLG5bMl0pO3JldHVybiB4cih0LGUsblszXT8rblszXTp2b2lkIDAsbls0XT8rbls0XTp2b2lkIDApfX1dLFs1MCxlPT57Y29uc3QgdD1Sci5leGVjKGUpO2lmKHQpe2lmKHRbM10mJnRbM10uaW5kZXhPZihcIiA+IGV2YWxcIik+LTEpe2NvbnN0IGU9RnIuZXhlYyh0WzNdKTtlJiYodFsxXT10WzFdfHxcImV2YWxcIix0WzNdPWVbMV0sdFs0XT1lWzJdLHRbNV09XCJcIil9bGV0IGU9dFszXSxuPXRbMV18fEs7cmV0dXJuW24sZV09VXIobixlKSx4cihlLG4sdFs0XT8rdFs0XTp2b2lkIDAsdFs1XT8rdFs1XTp2b2lkIDApfX1dXSksVXI9KGUsdCk9Pntjb25zdCBuPS0xIT09ZS5pbmRleE9mKFwic2FmYXJpLWV4dGVuc2lvblwiKSxyPS0xIT09ZS5pbmRleE9mKFwic2FmYXJpLXdlYi1leHRlbnNpb25cIik7cmV0dXJuIG58fHI/Wy0xIT09ZS5pbmRleE9mKFwiQFwiKT9lLnNwbGl0KFwiQFwiKVswXTpLLG4/YHNhZmFyaS1leHRlbnNpb246JHt0fWA6YHNhZmFyaS13ZWItZXh0ZW5zaW9uOiR7dH1gXTpbZSx0XX0sVnI9MTAyNCxKcj0oZT17fSk9Pntjb25zdCB0PXtjb25zb2xlOiEwLGRvbTohMCxmZXRjaDohMCxoaXN0b3J5OiEwLHNlbnRyeTohMCx4aHI6ITAsLi4uZX07cmV0dXJue25hbWU6XCJCcmVhZGNydW1ic1wiLHNldHVwKGUpe3ZhciBuO3QuY29uc29sZSYmZnVuY3Rpb24oZSl7Y29uc3QgdD1cImNvbnNvbGVcIjtvZSh0LGUpLHNlKHQsVm4pfShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoYnQoKSE9PWUpcmV0dXJuO2NvbnN0IG49e2NhdGVnb3J5OlwiY29uc29sZVwiLGRhdGE6e2FyZ3VtZW50czp0LmFyZ3MsbG9nZ2VyOlwiY29uc29sZVwifSxsZXZlbDpKbih0LmxldmVsKSxtZXNzYWdlOmplKHQuYXJncyxcIiBcIil9O2lmKFwiYXNzZXJ0XCI9PT10LmxldmVsKXtpZighMSE9PXQuYXJnc1swXSlyZXR1cm47bi5tZXNzYWdlPWBBc3NlcnRpb24gZmFpbGVkOiAke2plKHQuYXJncy5zbGljZSgxKSxcIiBcIil8fFwiY29uc29sZS5hc3NlcnRcIn1gLG4uZGF0YS5hcmd1bWVudHM9dC5hcmdzLnNsaWNlKDEpfVBuKG4se2lucHV0OnQuYXJncyxsZXZlbDp0LmxldmVsfSl9fShlKSksdC5kb20mJihuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKGJ0KCkhPT1lKXJldHVybjtsZXQgcixpLG89XCJvYmplY3RcIj09dHlwZW9mIHQ/dC5zZXJpYWxpemVBdHRyaWJ1dGU6dm9pZCAwLHM9XCJvYmplY3RcIj09dHlwZW9mIHQmJlwibnVtYmVyXCI9PXR5cGVvZiB0Lm1heFN0cmluZ0xlbmd0aD90Lm1heFN0cmluZ0xlbmd0aDp2b2lkIDA7cyYmcz5WciYmKG9yJiZRLndhcm4oYFxcYGRvbS5tYXhTdHJpbmdMZW5ndGhcXGAgY2Fubm90IGV4Y2VlZCAxMDI0LCBidXQgYSB2YWx1ZSBvZiAke3N9IHdhcyBjb25maWd1cmVkLiBTZW50cnkgd2lsbCB1c2UgMTAyNCBpbnN0ZWFkLmApLHM9VnIpLFwic3RyaW5nXCI9PXR5cGVvZiBvJiYobz1bb10pO3RyeXtjb25zdCBlPW4uZXZlbnQsdD1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJiEhZS50YXJnZXR9KGUpP2UudGFyZ2V0OmU7cj1PZSh0LHtrZXlBdHRyczpvLG1heFN0cmluZ0xlbmd0aDpzfSksaT1mdW5jdGlvbihlKXtpZighVGUuSFRNTEVsZW1lbnQpcmV0dXJuIG51bGw7bGV0IHQ9ZTtmb3IobGV0IGU9MDtlPDU7ZSsrKXtpZighdClyZXR1cm4gbnVsbDtpZih0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2lmKHQuZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIHQuZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYodC5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIHQuZGF0YXNldC5zZW50cnlFbGVtZW50fXQ9dC5wYXJlbnROb2RlfXJldHVybiBudWxsfSh0KX1jYXRjaChlKXtyPVwiPHVua25vd24+XCJ9aWYoMD09PXIubGVuZ3RoKXJldHVybjtjb25zdCBhPXtjYXRlZ29yeTpgdWkuJHtuLm5hbWV9YCxtZXNzYWdlOnJ9O2kmJihhLmRhdGE9e1widWkuY29tcG9uZW50X25hbWVcIjppfSksUG4oYSx7ZXZlbnQ6bi5ldmVudCxuYW1lOm4ubmFtZSxnbG9iYWw6bi5nbG9iYWx9KX19KGUsdC5kb20pLG9lKFwiZG9tXCIsbiksc2UoXCJkb21cIixNcikpLHQueGhyJiZmdW5jdGlvbihlKXtvZShcInhoclwiLGUpLHNlKFwieGhyXCIsanIpfShmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoYnQoKSE9PWUpcmV0dXJuO2NvbnN0e3N0YXJ0VGltZXN0YW1wOm4sZW5kVGltZXN0YW1wOnJ9PXQsaT10LnhocltBcl07aWYoIW58fCFyfHwhaSlyZXR1cm47Y29uc3R7bWV0aG9kOm8sdXJsOnMsc3RhdHVzX2NvZGU6YSxib2R5OmN9PWksbD17bWV0aG9kOm8sdXJsOnMsc3RhdHVzX2NvZGU6YX0sdT17eGhyOnQueGhyLGlucHV0OmMsc3RhcnRUaW1lc3RhbXA6bixlbmRUaW1lc3RhbXA6cn07UG4oe2NhdGVnb3J5OlwieGhyXCIsZGF0YTpsLHR5cGU6XCJodHRwXCIsbGV2ZWw6SG4oYSl9LHUpfX0oZSkpLHQuZmV0Y2gmJlluKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtpZihidCgpIT09ZSlyZXR1cm47Y29uc3R7c3RhcnRUaW1lc3RhbXA6bixlbmRUaW1lc3RhbXA6cn09dDtpZihyJiYoIXQuZmV0Y2hEYXRhLnVybC5tYXRjaCgvc2VudHJ5X2tleS8pfHxcIlBPU1RcIiE9PXQuZmV0Y2hEYXRhLm1ldGhvZCkpaWYodC5lcnJvcil7UG4oe2NhdGVnb3J5OlwiZmV0Y2hcIixkYXRhOnQuZmV0Y2hEYXRhLGxldmVsOlwiZXJyb3JcIix0eXBlOlwiaHR0cFwifSx7ZGF0YTp0LmVycm9yLGlucHV0OnQuYXJncyxzdGFydFRpbWVzdGFtcDpuLGVuZFRpbWVzdGFtcDpyfSl9ZWxzZXtjb25zdCBlPXQucmVzcG9uc2UsaT17Li4udC5mZXRjaERhdGEsc3RhdHVzX2NvZGU6ZSYmZS5zdGF0dXN9LG89e2lucHV0OnQuYXJncyxyZXNwb25zZTplLHN0YXJ0VGltZXN0YW1wOm4sZW5kVGltZXN0YW1wOnJ9O1BuKHtjYXRlZ29yeTpcImZldGNoXCIsZGF0YTppLHR5cGU6XCJodHRwXCIsbGV2ZWw6SG4oaS5zdGF0dXNfY29kZSl9LG8pfX19KGUpKSx0Lmhpc3RvcnkmJkVyKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtpZihidCgpIT09ZSlyZXR1cm47bGV0IG49dC5mcm9tLHI9dC50bztjb25zdCBpPVVuKHRyLmxvY2F0aW9uLmhyZWYpO2xldCBvPW4/VW4obik6dm9pZCAwO2NvbnN0IHM9VW4ocik7byYmby5wYXRofHwobz1pKSxpLnByb3RvY29sPT09cy5wcm90b2NvbCYmaS5ob3N0PT09cy5ob3N0JiYocj1zLnJlbGF0aXZlKSxpLnByb3RvY29sPT09by5wcm90b2NvbCYmaS5ob3N0PT09by5ob3N0JiYobj1vLnJlbGF0aXZlKSxQbih7Y2F0ZWdvcnk6XCJuYXZpZ2F0aW9uXCIsZGF0YTp7ZnJvbTpuLHRvOnJ9fSl9fShlKSksdC5zZW50cnkmJmUub24oXCJiZWZvcmVTZW5kRXZlbnRcIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7YnQoKT09PWUmJlBuKHtjYXRlZ29yeTpcInNlbnRyeS5cIisoXCJ0cmFuc2FjdGlvblwiPT09dC50eXBlP1widHJhbnNhY3Rpb25cIjpcImV2ZW50XCIpLGV2ZW50X2lkOnQuZXZlbnRfaWQsbGV2ZWw6dC5sZXZlbCxtZXNzYWdlOkhlKHQpfSx7ZXZlbnQ6dH0pfX0oZSkpfX19O2NvbnN0ICRyPVtcIkV2ZW50VGFyZ2V0XCIsXCJXaW5kb3dcIixcIk5vZGVcIixcIkFwcGxpY2F0aW9uQ2FjaGVcIixcIkF1ZGlvVHJhY2tMaXN0XCIsXCJCcm9hZGNhc3RDaGFubmVsXCIsXCJDaGFubmVsTWVyZ2VyTm9kZVwiLFwiQ3J5cHRvT3BlcmF0aW9uXCIsXCJFdmVudFNvdXJjZVwiLFwiRmlsZVJlYWRlclwiLFwiSFRNTFVua25vd25FbGVtZW50XCIsXCJJREJEYXRhYmFzZVwiLFwiSURCUmVxdWVzdFwiLFwiSURCVHJhbnNhY3Rpb25cIixcIktleU9wZXJhdGlvblwiLFwiTWVkaWFDb250cm9sbGVyXCIsXCJNZXNzYWdlUG9ydFwiLFwiTW9kYWxXaW5kb3dcIixcIk5vdGlmaWNhdGlvblwiLFwiU1ZHRWxlbWVudEluc3RhbmNlXCIsXCJTY3JlZW5cIixcIlNoYXJlZFdvcmtlclwiLFwiVGV4dFRyYWNrXCIsXCJUZXh0VHJhY2tDdWVcIixcIlRleHRUcmFja0xpc3RcIixcIldlYlNvY2tldFwiLFwiV2ViU29ja2V0V29ya2VyXCIsXCJXb3JrZXJcIixcIlhNTEh0dHBSZXF1ZXN0XCIsXCJYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0XCIsXCJYTUxIdHRwUmVxdWVzdFVwbG9hZFwiXSxxcj0oZT17fSk9Pntjb25zdCB0PXtYTUxIdHRwUmVxdWVzdDohMCxldmVudFRhcmdldDohMCxyZXF1ZXN0QW5pbWF0aW9uRnJhbWU6ITAsc2V0SW50ZXJ2YWw6ITAsc2V0VGltZW91dDohMCwuLi5lfTtyZXR1cm57bmFtZTpcIkJyb3dzZXJBcGlFcnJvcnNcIixzZXR1cE9uY2UoKXt0LnNldFRpbWVvdXQmJkxlKHRyLFwic2V0VGltZW91dFwiLHpyKSx0LnNldEludGVydmFsJiZMZSh0cixcInNldEludGVydmFsXCIsenIpLHQucmVxdWVzdEFuaW1hdGlvbkZyYW1lJiZMZSh0cixcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiLFdyKSx0LlhNTEh0dHBSZXF1ZXN0JiZcIlhNTEh0dHBSZXF1ZXN0XCJpbiB0ciYmTGUoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLFwic2VuZFwiLEhyKTtjb25zdCBlPXQuZXZlbnRUYXJnZXQ7aWYoZSl7KEFycmF5LmlzQXJyYXkoZSk/ZTokcikuZm9yRWFjaChHcil9fX19O2Z1bmN0aW9uIHpyKGUpe3JldHVybiBmdW5jdGlvbiguLi50KXtjb25zdCBuPXRbMF07cmV0dXJuIHRbMF09aXIobix7bWVjaGFuaXNtOntkYXRhOntmdW5jdGlvbjp0ZShlKX0saGFuZGxlZDohMSx0eXBlOlwiaW5zdHJ1bWVudFwifX0pLGUuYXBwbHkodGhpcyx0KX19ZnVuY3Rpb24gV3IoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsW2lyKHQse21lY2hhbmlzbTp7ZGF0YTp7ZnVuY3Rpb246XCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIixoYW5kbGVyOnRlKGUpfSxoYW5kbGVkOiExLHR5cGU6XCJpbnN0cnVtZW50XCJ9fSldKX19ZnVuY3Rpb24gSHIoZSl7cmV0dXJuIGZ1bmN0aW9uKC4uLnQpe2NvbnN0IG49dGhpcztyZXR1cm5bXCJvbmxvYWRcIixcIm9uZXJyb3JcIixcIm9ucHJvZ3Jlc3NcIixcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiXS5mb3JFYWNoKChlPT57ZSBpbiBuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuW2VdJiZMZShuLGUsKGZ1bmN0aW9uKHQpe2NvbnN0IG49e21lY2hhbmlzbTp7ZGF0YTp7ZnVuY3Rpb246ZSxoYW5kbGVyOnRlKHQpfSxoYW5kbGVkOiExLHR5cGU6XCJpbnN0cnVtZW50XCJ9fSxyPVJlKHQpO3JldHVybiByJiYobi5tZWNoYW5pc20uZGF0YS5oYW5kbGVyPXRlKHIpKSxpcih0LG4pfSkpfSkpLGUuYXBwbHkodGhpcyx0KX19ZnVuY3Rpb24gR3IoZSl7Y29uc3QgdD10cltlXSxuPXQmJnQucHJvdG90eXBlO24mJm4uaGFzT3duUHJvcGVydHkmJm4uaGFzT3duUHJvcGVydHkoXCJhZGRFdmVudExpc3RlbmVyXCIpJiYoTGUobixcImFkZEV2ZW50TGlzdGVuZXJcIiwoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4scixpKXt0cnl7XCJmdW5jdGlvblwiPT10eXBlb2Ygci5oYW5kbGVFdmVudCYmKHIuaGFuZGxlRXZlbnQ9aXIoci5oYW5kbGVFdmVudCx7bWVjaGFuaXNtOntkYXRhOntmdW5jdGlvbjpcImhhbmRsZUV2ZW50XCIsaGFuZGxlcjp0ZShyKSx0YXJnZXQ6ZX0saGFuZGxlZDohMSx0eXBlOlwiaW5zdHJ1bWVudFwifX0pKX1jYXRjaChlKXt9cmV0dXJuIHQuYXBwbHkodGhpcyxbbixpcihyLHttZWNoYW5pc206e2RhdGE6e2Z1bmN0aW9uOlwiYWRkRXZlbnRMaXN0ZW5lclwiLGhhbmRsZXI6dGUociksdGFyZ2V0OmV9LGhhbmRsZWQ6ITEsdHlwZTpcImluc3RydW1lbnRcIn19KSxpXSl9fSkpLExlKG4sXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4scil7dHJ5e2NvbnN0IGk9bi5fX3NlbnRyeV93cmFwcGVkX187aSYmZS5jYWxsKHRoaXMsdCxpLHIpfWNhdGNoKGUpe31yZXR1cm4gZS5jYWxsKHRoaXMsdCxuLHIpfX0pKSl9Y29uc3QgUXI9KCk9Pih7bmFtZTpcIkJyb3dzZXJTZXNzaW9uXCIsc2V0dXBPbmNlKCl7dm9pZCAwIT09dHIuZG9jdW1lbnQ/KGRuKHtpZ25vcmVEdXJhdGlvbjohMH0pLGZuKCksRXIoKCh7ZnJvbTplLHRvOnR9KT0+e3ZvaWQgMCE9PWUmJmUhPT10JiYoZG4oe2lnbm9yZUR1cmF0aW9uOiEwfSksZm4oKSl9KSkpOm9yJiZRLndhcm4oXCJVc2luZyB0aGUgYGJyb3dzZXJTZXNzaW9uSW50ZWdyYXRpb25gIGluIG5vbi1icm93c2VyIGVudmlyb25tZW50cyBpcyBub3Qgc3VwcG9ydGVkLlwiKX19KSxLcj0oZT17fSk9Pntjb25zdCB0PXtvbmVycm9yOiEwLG9udW5oYW5kbGVkcmVqZWN0aW9uOiEwLC4uLmV9O3JldHVybntuYW1lOlwiR2xvYmFsSGFuZGxlcnNcIixzZXR1cE9uY2UoKXtFcnJvci5zdGFja1RyYWNlTGltaXQ9NTB9LHNldHVwKGUpe3Qub25lcnJvciYmKCFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7Y29uc3QgdD1cImVycm9yXCI7b2UodCxlKSxzZSh0LGxlKX0oKHQ9Pntjb25zdHtzdGFja1BhcnNlcjpuLGF0dGFjaFN0YWNrdHJhY2U6cn09WHIoKTtpZihidCgpIT09ZXx8cnIoKSlyZXR1cm47Y29uc3R7bXNnOmksdXJsOm8sbGluZTpzLGNvbHVtbjphLGVycm9yOmN9PXQsbD1mdW5jdGlvbihlLHQsbixyKXtjb25zdCBpPWUuZXhjZXB0aW9uPWUuZXhjZXB0aW9ufHx7fSxvPWkudmFsdWVzPWkudmFsdWVzfHxbXSxzPW9bMF09b1swXXx8e30sYT1zLnN0YWNrdHJhY2U9cy5zdGFja3RyYWNlfHx7fSxjPWEuZnJhbWVzPWEuZnJhbWVzfHxbXSxsPXIsdT1uLGQ9YmUodCkmJnQubGVuZ3RoPjA/dDpmdW5jdGlvbigpe3RyeXtyZXR1cm4gVGUuZG9jdW1lbnQubG9jYXRpb24uaHJlZn1jYXRjaChlKXtyZXR1cm5cIlwifX0oKTswPT09Yy5sZW5ndGgmJmMucHVzaCh7Y29sbm86bCxmaWxlbmFtZTpkLGZ1bmN0aW9uOkssaW5fYXBwOiEwLGxpbmVubzp1fSk7cmV0dXJuIGV9KGZyKG4sY3x8aSx2b2lkIDAsciwhMSksbyxzLGEpO2wubGV2ZWw9XCJlcnJvclwiLHVuKGwse29yaWdpbmFsRXhjZXB0aW9uOmMsbWVjaGFuaXNtOntoYW5kbGVkOiExLHR5cGU6XCJvbmVycm9yXCJ9fSl9KSl9KGUpLFlyKFwib25lcnJvclwiKSksdC5vbnVuaGFuZGxlZHJlamVjdGlvbiYmKCFmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7Y29uc3QgdD1cInVuaGFuZGxlZHJlamVjdGlvblwiO29lKHQsZSksc2UodCxkZSl9KCh0PT57Y29uc3R7c3RhY2tQYXJzZXI6bixhdHRhY2hTdGFja3RyYWNlOnJ9PVhyKCk7aWYoYnQoKSE9PWV8fHJyKCkpcmV0dXJuO2NvbnN0IGk9ZnVuY3Rpb24oZSl7aWYod2UoZSkpcmV0dXJuIGU7dHJ5e2lmKFwicmVhc29uXCJpbiBlKXJldHVybiBlLnJlYXNvbjtpZihcImRldGFpbFwiaW4gZSYmXCJyZWFzb25cImluIGUuZGV0YWlsKXJldHVybiBlLmRldGFpbC5yZWFzb259Y2F0Y2goZSl7fXJldHVybiBlfSh0KSxvPXdlKGkpP3tleGNlcHRpb246e3ZhbHVlczpbe3R5cGU6XCJVbmhhbmRsZWRSZWplY3Rpb25cIix2YWx1ZTpgTm9uLUVycm9yIHByb21pc2UgcmVqZWN0aW9uIGNhcHR1cmVkIHdpdGggdmFsdWU6ICR7U3RyaW5nKGkpfWB9XX19OmZyKG4saSx2b2lkIDAsciwhMCk7by5sZXZlbD1cImVycm9yXCIsdW4obyx7b3JpZ2luYWxFeGNlcHRpb246aSxtZWNoYW5pc206e2hhbmRsZWQ6ITEsdHlwZTpcIm9udW5oYW5kbGVkcmVqZWN0aW9uXCJ9fSl9KSl9KGUpLFlyKFwib251bmhhbmRsZWRyZWplY3Rpb25cIikpfX19O2Z1bmN0aW9uIFlyKGUpe29yJiZRLmxvZyhgR2xvYmFsIEhhbmRsZXIgYXR0YWNoZWQ6ICR7ZX1gKX1mdW5jdGlvbiBYcigpe2NvbnN0IGU9YnQoKTtyZXR1cm4gZSYmZS5nZXRPcHRpb25zKCl8fHtzdGFja1BhcnNlcjooKT0+W10sYXR0YWNoU3RhY2t0cmFjZTohMX19Y29uc3QgWnI9KCk9Pih7bmFtZTpcIkh0dHBDb250ZXh0XCIscHJlcHJvY2Vzc0V2ZW50KGUpe2lmKCF0ci5uYXZpZ2F0b3ImJiF0ci5sb2NhdGlvbiYmIXRyLmRvY3VtZW50KXJldHVybjtjb25zdCB0PWUucmVxdWVzdCYmZS5yZXF1ZXN0LnVybHx8dHIubG9jYXRpb24mJnRyLmxvY2F0aW9uLmhyZWYse3JlZmVycmVyOm59PXRyLmRvY3VtZW50fHx7fSx7dXNlckFnZW50OnJ9PXRyLm5hdmlnYXRvcnx8e30saT17Li4uZS5yZXF1ZXN0JiZlLnJlcXVlc3QuaGVhZGVycywuLi5uJiZ7UmVmZXJlcjpufSwuLi5yJiZ7XCJVc2VyLUFnZW50XCI6cn19LG89ey4uLmUucmVxdWVzdCwuLi50JiZ7dXJsOnR9LGhlYWRlcnM6aX07ZS5yZXF1ZXN0PW99fSksZWk9KGU9e30pPT57Y29uc3QgdD1lLmxpbWl0fHw1LG49ZS5rZXl8fFwiY2F1c2VcIjtyZXR1cm57bmFtZTpcIkxpbmtlZEVycm9yc1wiLHByZXByb2Nlc3NFdmVudChlLHIsaSl7Y29uc3Qgbz1pLmdldE9wdGlvbnMoKTtObihzcixvLnN0YWNrUGFyc2VyLG8ubWF4VmFsdWVMZW5ndGgsbix0LGUscil9fX07dmFyIHRpPVwibmV3XCIsbmk9XCJsb2FkaW5nXCIscmk9XCJsb2FkZWRcIixpaT1cImpvaW5pbmctbWVldGluZ1wiLG9pPVwiam9pbmVkLW1lZXRpbmdcIixzaT1cImxlZnQtbWVldGluZ1wiLGFpPVwiZXJyb3JcIixjaT1cImJsb2NrZWRcIixsaT1cIm9mZlwiLHVpPVwic2VuZGFibGVcIixkaT1cImxvYWRpbmdcIixwaT1cImludGVycnVwdGVkXCIsaGk9XCJwbGF5YWJsZVwiLGZpPVwidW5rbm93blwiLHZpPVwiZnVsbFwiLGdpPVwibG9iYnlcIixtaT1cIm5vbmVcIix5aT1cImJhc2VcIixiaT1cIipcIixfaT1cImVqZWN0ZWRcIix3aT1cIm5iZi1yb29tXCIsU2k9XCJuYmYtdG9rZW5cIixraT1cImV4cC1yb29tXCIsTWk9XCJleHAtdG9rZW5cIixDaT1cIm5vLXJvb21cIixFaT1cIm1lZXRpbmctZnVsbFwiLFRpPVwiZW5kLW9mLWxpZmVcIixPaT1cIm5vdC1hbGxvd2VkXCIsUGk9XCJjb25uZWN0aW9uLWVycm9yXCIsQWk9XCJjYW0taW4tdXNlXCIsamk9XCJtaWMtaW4tdXNlXCIsSWk9XCJjYW0tbWljLWluLXVzZVwiLHhpPVwicGVybWlzc2lvbnNcIixMaT1cInVuZGVmaW5lZC1tZWRpYWRldmljZXNcIixEaT1cIm5vdC1mb3VuZFwiLE5pPVwiY29uc3RyYWludHNcIixSaT1cInVua25vd25cIixGaT1cImlmcmFtZS1yZWFkeS1mb3ItbGF1bmNoLWNvbmZpZ1wiLEJpPVwiaWZyYW1lLWxhdW5jaC1jb25maWdcIixVaT1cInRoZW1lLXVwZGF0ZWRcIixWaT1cImxvYWRpbmdcIixKaT1cImxvYWQtYXR0ZW1wdC1mYWlsZWRcIiwkaT1cImxvYWRlZFwiLHFpPVwic3RhcnRlZC1jYW1lcmFcIix6aT1cImNhbWVyYS1lcnJvclwiLFdpPVwiam9pbmluZy1tZWV0aW5nXCIsSGk9XCJqb2luZWQtbWVldGluZ1wiLEdpPVwibGVmdC1tZWV0aW5nXCIsUWk9XCJwYXJ0aWNpcGFudC1qb2luZWRcIixLaT1cInBhcnRpY2lwYW50LXVwZGF0ZWRcIixZaT1cInBhcnRpY2lwYW50LWxlZnRcIixYaT1cInBhcnRpY2lwYW50LWNvdW50cy11cGRhdGVkXCIsWmk9XCJhY2Nlc3Mtc3RhdGUtdXBkYXRlZFwiLGVvPVwibWVldGluZy1zZXNzaW9uLXN1bW1hcnktdXBkYXRlZFwiLHRvPVwibWVldGluZy1zZXNzaW9uLXN0YXRlLXVwZGF0ZWRcIixubz1cIm1lZXRpbmctc2Vzc2lvbi1kYXRhLWVycm9yXCIscm89XCJ3YWl0aW5nLXBhcnRpY2lwYW50LWFkZGVkXCIsaW89XCJ3YWl0aW5nLXBhcnRpY2lwYW50LXVwZGF0ZWRcIixvbz1cIndhaXRpbmctcGFydGljaXBhbnQtcmVtb3ZlZFwiLHNvPVwidHJhY2stc3RhcnRlZFwiLGFvPVwidHJhY2stc3RvcHBlZFwiLGNvPVwidHJhbnNjcmlwdGlvbi1zdGFydGVkXCIsbG89XCJ0cmFuc2NyaXB0aW9uLXN0b3BwZWRcIix1bz1cInRyYW5zY3JpcHRpb24tZXJyb3JcIixwbz1cInJlY29yZGluZy1zdGFydGVkXCIsaG89XCJyZWNvcmRpbmctc3RvcHBlZFwiLGZvPVwicmVjb3JkaW5nLXN0YXRzXCIsdm89XCJyZWNvcmRpbmctZXJyb3JcIixnbz1cInJlY29yZGluZy11cGxvYWQtY29tcGxldGVkXCIsbW89XCJyZWNvcmRpbmctZGF0YVwiLHlvPVwiYXBwLW1lc3NhZ2VcIixibz1cInRyYW5zY3JpcHRpb24tbWVzc2FnZVwiLF9vPVwicmVtb3RlLW1lZGlhLXBsYXllci1zdGFydGVkXCIsd289XCJyZW1vdGUtbWVkaWEtcGxheWVyLXVwZGF0ZWRcIixTbz1cInJlbW90ZS1tZWRpYS1wbGF5ZXItc3RvcHBlZFwiLGtvPVwibG9jYWwtc2NyZWVuLXNoYXJlLXN0YXJ0ZWRcIixNbz1cImxvY2FsLXNjcmVlbi1zaGFyZS1zdG9wcGVkXCIsQ289XCJsb2NhbC1zY3JlZW4tc2hhcmUtY2FuY2VsZWRcIixFbz1cImFjdGl2ZS1zcGVha2VyLWNoYW5nZVwiLFRvPVwiYWN0aXZlLXNwZWFrZXItbW9kZS1jaGFuZ2VcIixPbz1cIm5ldHdvcmstcXVhbGl0eS1jaGFuZ2VcIixQbz1cIm5ldHdvcmstY29ubmVjdGlvblwiLEFvPVwiY3B1LWxvYWQtY2hhbmdlXCIsam89XCJmYWNlLWNvdW50cy11cGRhdGVkXCIsSW89XCJmdWxsc2NyZWVuXCIseG89XCJleGl0ZWQtZnVsbHNjcmVlblwiLExvPVwibGl2ZS1zdHJlYW1pbmctc3RhcnRlZFwiLERvPVwibGl2ZS1zdHJlYW1pbmctdXBkYXRlZFwiLE5vPVwibGl2ZS1zdHJlYW1pbmctc3RvcHBlZFwiLFJvPVwibGl2ZS1zdHJlYW1pbmctZXJyb3JcIixGbz1cImxhbmctdXBkYXRlZFwiLEJvPVwicmVjZWl2ZS1zZXR0aW5ncy11cGRhdGVkXCIsVW89XCJpbnB1dC1zZXR0aW5ncy11cGRhdGVkXCIsVm89XCJub25mYXRhbC1lcnJvclwiLEpvPVwiZXJyb3JcIiwkbz00MDk2LHFvPTEwMjQwMCx6bz1cImlmcmFtZS1jYWxsLW1lc3NhZ2VcIixXbz1cImxvY2FsLXNjcmVlbi1zdGFydFwiLEhvPVwiZGFpbHktbWV0aG9kLXVwZGF0ZS1saXZlLXN0cmVhbWluZy1lbmRwb2ludHNcIixHbz1cInRyYW5zbWl0LWxvZ1wiLFFvPVwiZGFpbHktY3VzdG9tLXRyYWNrXCIsS289e05PTkU6XCJub25lXCIsQkdCTFVSOlwiYmFja2dyb3VuZC1ibHVyXCIsQkdJTUFHRTpcImJhY2tncm91bmQtaW1hZ2VcIixGQUNFX0RFVEVDVElPTjpcImZhY2UtZGV0ZWN0aW9uXCJ9LFlvPXtOT05FOlwibm9uZVwiLE5PSVNFX0NBTkNFTExBVElPTjpcIm5vaXNlLWNhbmNlbGxhdGlvblwifSxYbz17UExBWTpcInBsYXlcIixQQVVTRTpcInBhdXNlXCJ9LFpvPVtcImpwZ1wiLFwicG5nXCIsXCJqcGVnXCJdLGVzPVwiYWRkLWVuZHBvaW50c1wiLHRzPVwicmVtb3ZlLWVuZHBvaW50c1wiLG5zPVwic2lwLWNhbGwtdHJhbnNmZXJcIjtmdW5jdGlvbiBycygpe3JldHVybiFpcygpJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudD93aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDpcIlwifWZ1bmN0aW9uIGlzKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLnByb2R1Y3QmJlwiUmVhY3ROYXRpdmVcIj09PW5hdmlnYXRvci5wcm9kdWN0fWZ1bmN0aW9uIG9zKCl7cmV0dXJuIG5hdmlnYXRvciYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWF9ZnVuY3Rpb24gc3MoKXtyZXR1cm4hIShuYXZpZ2F0b3ImJm5hdmlnYXRvci5tZWRpYURldmljZXMmJm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKSYmKGZ1bmN0aW9uKGUsdCl7aWYoIWV8fCF0KXJldHVybiEwO3N3aXRjaChlKXtjYXNlXCJDaHJvbWVcIjpyZXR1cm4gdC5tYWpvcj49NzU7Y2FzZVwiU2FmYXJpXCI6cmV0dXJuIFJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImN1cnJlbnREaXJlY3Rpb25cIikmJiEoMTM9PT10Lm1ham9yJiYwPT09dC5taW5vciYmMD09PXQucG9pbnQpO2Nhc2VcIkZpcmVmb3hcIjpyZXR1cm4gdC5tYWpvcj49Njd9cmV0dXJuITB9KG1zKCkseXMoKSl8fGlzKCkpfWZ1bmN0aW9uIGFzKCl7aWYoaXMoKSlyZXR1cm4hMTtpZighZG9jdW1lbnQpcmV0dXJuITE7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtyZXR1cm4hIWUucmVxdWVzdEZ1bGxzY3JlZW58fCEhZS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbn12YXIgY3M9XCJub25lXCIsbHM9XCJzb2Z0d2FyZVwiLHVzPVwiaGFyZHdhcmVcIjt2YXIgZHM9ZnVuY3Rpb24oKXt0cnl7dmFyIGUsdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLG49ITE7KGU9dC5nZXRDb250ZXh0KFwid2ViZ2wyXCIse2ZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6ITB9KSl8fChuPSEwLGU9dC5nZXRDb250ZXh0KFwid2ViZ2wyXCIpKTt2YXIgcj1udWxsIT1lO3JldHVybiB0LnJlbW92ZSgpLHI/bj9sczp1czpjc31jYXRjaChlKXtyZXR1cm4gY3N9fSgpO2Z1bmN0aW9uIHBzKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtyZXR1cm4haXMoKSYmKGRzIT09Y3MmJihlP2Z1bmN0aW9uKCl7aWYoZ3MoKSlyZXR1cm4hMTtyZXR1cm5bXCJDaHJvbWVcIixcIkZpcmVmb3hcIl0uaW5jbHVkZXMobXMoKSl9KCk6ZnVuY3Rpb24oKXtpZihncygpKXJldHVybiExO3ZhciBlPW1zKCk7aWYoXCJTYWZhcmlcIj09PWUpe3ZhciB0PVNzKCk7aWYodC5tYWpvcjwxNXx8MTU9PT10Lm1ham9yJiZ0Lm1pbm9yPDQpcmV0dXJuITF9aWYoXCJDaHJvbWVcIj09PWUpe3JldHVybiBicygpLm1ham9yPj03N31pZihcIkZpcmVmb3hcIj09PWUpe3JldHVybiBrcygpLm1ham9yPj05N31yZXR1cm5bXCJDaHJvbWVcIixcIkZpcmVmb3hcIixcIlNhZmFyaVwiXS5pbmNsdWRlcyhlKX0oKSkpfWZ1bmN0aW9uIGhzKCl7aWYoaXMoKSlyZXR1cm4hMTtpZih2cygpKXJldHVybiExO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBBdWRpb1dvcmtsZXROb2RlKXJldHVybiExO3N3aXRjaChtcygpKXtjYXNlXCJDaHJvbWVcIjpjYXNlXCJGaXJlZm94XCI6cmV0dXJuITA7Y2FzZVwiU2FmYXJpXCI6dmFyIGU9eXMoKTtyZXR1cm4gZS5tYWpvcj4xN3x8MTc9PT1lLm1ham9yJiZlLm1pbm9yPj00fXJldHVybiExfWZ1bmN0aW9uIGZzKCl7cmV0dXJuIG9zKCkmJiFmdW5jdGlvbigpe3ZhciBlLHQ9bXMoKTtpZighcnMoKSlyZXR1cm4hMDtzd2l0Y2godCl7Y2FzZVwiQ2hyb21lXCI6cmV0dXJuKGU9YnMoKSkubWFqb3ImJmUubWFqb3I+MCYmZS5tYWpvcjw3NTtjYXNlXCJGaXJlZm94XCI6cmV0dXJuKGU9a3MoKSkubWFqb3I8OTE7Y2FzZVwiU2FmYXJpXCI6cmV0dXJuKGU9U3MoKSkubWFqb3I8MTN8fDEzPT09ZS5tYWpvciYmZS5taW5vcjwxO2RlZmF1bHQ6cmV0dXJuITB9fSgpfWZ1bmN0aW9uIHZzKCl7cmV0dXJuIHJzKCkubWF0Y2goL0xpbnV4OyBBbmRyb2lkLyl9ZnVuY3Rpb24gZ3MoKXt2YXIgZSx0PXJzKCksbj10Lm1hdGNoKC9NYWMvKSYmKCFpcygpJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZudWxsIT09KGU9d2luZG93KSYmdm9pZCAwIT09ZSYmbnVsbCE9PShlPWUubmF2aWdhdG9yKSYmdm9pZCAwIT09ZSYmZS5tYXhUb3VjaFBvaW50cz93aW5kb3cubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzOjApPj01O3JldHVybiEhKHQubWF0Y2goL01vYmkvKXx8dC5tYXRjaCgvQW5kcm9pZC8pfHxuKXx8KCEhcnMoKS5tYXRjaCgvRGFpbHlBbmRcXC8vKXx8dm9pZCAwKX1mdW5jdGlvbiBtcygpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciBlPXJzKCk7cmV0dXJuIF9zKCk/XCJTYWZhcmlcIjplLmluZGV4T2YoXCJFZGdlXCIpPi0xP1wiRWRnZVwiOmUubWF0Y2goL0Nocm9tZVxcLy8pP1wiQ2hyb21lXCI6ZS5pbmRleE9mKFwiU2FmYXJpXCIpPi0xfHx3cygpP1wiU2FmYXJpXCI6ZS5pbmRleE9mKFwiRmlyZWZveFwiKT4tMT9cIkZpcmVmb3hcIjplLmluZGV4T2YoXCJNU0lFXCIpPi0xfHxlLmluZGV4T2YoXCIuTkVUXCIpPi0xP1wiSUVcIjpcIlVua25vd24gQnJvd3NlclwifX1mdW5jdGlvbiB5cygpe3N3aXRjaChtcygpKXtjYXNlXCJDaHJvbWVcIjpyZXR1cm4gYnMoKTtjYXNlXCJTYWZhcmlcIjpyZXR1cm4gU3MoKTtjYXNlXCJGaXJlZm94XCI6cmV0dXJuIGtzKCk7Y2FzZVwiRWRnZVwiOnJldHVybiBmdW5jdGlvbigpe3ZhciBlPTAsdD0wO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciBuPXJzKCkubWF0Y2goL0VkZ2VcXC8oXFxkKykuKFxcZCspLyk7aWYobil0cnl7ZT1wYXJzZUludChuWzFdKSx0PXBhcnNlSW50KG5bMl0pfWNhdGNoKGUpe319cmV0dXJue21ham9yOmUsbWlub3I6dH19KCl9fWZ1bmN0aW9uIGJzKCl7dmFyIGU9MCx0PTAsbj0wLHI9MCxpPSExO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciBvPXJzKCkscz1vLm1hdGNoKC9DaHJvbWVcXC8oXFxkKykuKFxcZCspLihcXGQrKS4oXFxkKykvKTtpZihzKXRyeXtlPXBhcnNlSW50KHNbMV0pLHQ9cGFyc2VJbnQoc1syXSksbj1wYXJzZUludChzWzNdKSxyPXBhcnNlSW50KHNbNF0pLGk9by5pbmRleE9mKFwiT1BSL1wiKT4tMX1jYXRjaChlKXt9fXJldHVybnttYWpvcjplLG1pbm9yOnQsYnVpbGQ6bixwYXRjaDpyLG9wZXJhOml9fWZ1bmN0aW9uIF9zKCl7cmV0dXJuISFycygpLm1hdGNoKC9pUGFkfGlQaG9uZXxpUG9kL2kpJiZvcygpfWZ1bmN0aW9uIHdzKCl7cmV0dXJuIHJzKCkuaW5kZXhPZihcIkFwcGxlV2ViS2l0LzYwNS4xLjE1XCIpPi0xfWZ1bmN0aW9uIFNzKCl7dmFyIGU9MCx0PTAsbj0wO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpe3ZhciByPXJzKCkubWF0Y2goL1ZlcnNpb25cXC8oXFxkKykuKFxcZCspKC4oXFxkKykpPy8pO2lmKHIpdHJ5e2U9cGFyc2VJbnQoclsxXSksdD1wYXJzZUludChyWzJdKSxuPXBhcnNlSW50KHJbNF0pfWNhdGNoKGUpe31lbHNlKF9zKCl8fHdzKCkpJiYoZT0xNCx0PTAsbj0zKX1yZXR1cm57bWFqb3I6ZSxtaW5vcjp0LHBvaW50Om59fWZ1bmN0aW9uIGtzKCl7dmFyIGU9MCx0PTA7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyl7dmFyIG49cnMoKS5tYXRjaCgvRmlyZWZveFxcLyhcXGQrKS4oXFxkKykvKTtpZihuKXRyeXtlPXBhcnNlSW50KG5bMV0pLHQ9cGFyc2VJbnQoblsyXSl9Y2F0Y2goZSl7fX1yZXR1cm57bWFqb3I6ZSxtaW5vcjp0fX12YXIgTXM9ZnVuY3Rpb24oKXtyZXR1cm4gbygoZnVuY3Rpb24gZSgpe3QodGhpcyxlKX0pLFt7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtSKCl9fSx7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21EYWlseUpzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe1IoKX19LHtrZXk6XCJzZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbixyKXtSKCl9fSx7a2V5Olwic2VuZE1lc3NhZ2VUb0RhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe1IoKX19LHtrZXk6XCJyZW1vdmVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe1IoKX19XSl9KCk7ZnVuY3Rpb24gQ3MoZSx0KXt2YXIgbj1PYmplY3Qua2V5cyhlKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO3QmJihyPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIEVzKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e307dCUyP0NzKE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dShlLHQsblt0XSl9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6Q3MoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobix0KSl9KSl9cmV0dXJuIGV9ZnVuY3Rpb24gVHMoKXt0cnl7dmFyIGU9IUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSl9Y2F0Y2goZSl7fXJldHVybihUcz1mdW5jdGlvbigpe3JldHVybiEhZX0pKCl9dmFyIE9zPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBuLHIsaSxvO3JldHVybiB0KHRoaXMsZSkscj10aGlzLGk9YShpPWUpLChuPXMocixUcygpP1JlZmxlY3QuY29uc3RydWN0KGksb3x8W10sYShyKS5jb25zdHJ1Y3Rvcik6aS5hcHBseShyLG8pKSkuX3dyYXBwZWRMaXN0ZW5lcnM9e30sbi5fbWVzc2FnZUNhbGxiYWNrcz17fSxufXJldHVybiBsKGUsTXMpLG8oZSxbe2tleTpcImFkZExpc3RlbmVyRm9yTWVzc2FnZXNGcm9tQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcyxpPWZ1bmN0aW9uKGkpe2lmKGkuZGF0YSYmXCJpZnJhbWUtY2FsbC1tZXNzYWdlXCI9PT1pLmRhdGEud2hhdCYmKCFpLmRhdGEuY2FsbENsaWVudElkfHxpLmRhdGEuY2FsbENsaWVudElkPT09dCkmJighaS5kYXRhLmZyb218fFwibW9kdWxlXCIhPT1pLmRhdGEuZnJvbSkpe3ZhciBvPUVzKHt9LGkuZGF0YSk7aWYoZGVsZXRlIG8uZnJvbSxvLmNhbGxiYWNrU3RhbXAmJnIuX21lc3NhZ2VDYWxsYmFja3Nbby5jYWxsYmFja1N0YW1wXSl7dmFyIHM9by5jYWxsYmFja1N0YW1wO3IuX21lc3NhZ2VDYWxsYmFja3Nbc10uY2FsbChuLG8pLGRlbGV0ZSByLl9tZXNzYWdlQ2FsbGJhY2tzW3NdfWRlbGV0ZSBvLndoYXQsZGVsZXRlIG8uY2FsbGJhY2tTdGFtcCxlLmNhbGwobixvKX19O3RoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV09aSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpKX19LHtrZXk6XCJhZGRMaXN0ZW5lckZvck1lc3NhZ2VzRnJvbURhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24ocil7dmFyIGk7aWYoISghci5kYXRhfHxyLmRhdGEud2hhdCE9PXpvfHwhci5kYXRhLmFjdGlvbnx8ci5kYXRhLmZyb20mJlwibW9kdWxlXCIhPT1yLmRhdGEuZnJvbXx8ci5kYXRhLmNhbGxDbGllbnRJZCYmdCYmci5kYXRhLmNhbGxDbGllbnRJZCE9PXR8fG51bGwhPXImJm51bGwhPT0oaT1yLmRhdGEpJiZ2b2lkIDAhPT1pJiZpLmNhbGxGcmFtZUlkKSl7dmFyIG89ci5kYXRhO2UuY2FsbChuLG8pfX07dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1yLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHIpfX0se2tleTpcInNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFuKXRocm93IG5ldyBFcnJvcihcInVuZGVmaW5lZCBjYWxsQ2xpZW50SWQuIEFyZSB5b3UgdHJ5aW5nIHRvIHVzZSBhIERhaWx5Q2FsbCBpbnN0YW5jZSBwcmV2aW91c2x5IGRlc3Ryb3llZD9cIik7dmFyIGk9RXMoe30sZSk7aWYoaS53aGF0PXpvLGkuZnJvbT1cIm1vZHVsZVwiLGkuY2FsbENsaWVudElkPW4sdCl7dmFyIG89TigpO3RoaXMuX21lc3NhZ2VDYWxsYmFja3Nbb109dCxpLmNhbGxiYWNrU3RhbXA9b312YXIgcz1yP3IuY29udGVudFdpbmRvdzp3aW5kb3csYT10aGlzLl9jYWxsTWFjaGluZVRhcmdldE9yaWdpbihyKTthJiZzLnBvc3RNZXNzYWdlKGksYSl9fSx7a2V5Olwic2VuZE1lc3NhZ2VUb0RhaWx5SnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Uud2hhdD16byxlLmNhbGxDbGllbnRJZD10LGUuZnJvbT1cImVtYmVkZGVkXCIsd2luZG93LnBvc3RNZXNzYWdlKGUsdGhpcy5fdGFyZ2V0T3JpZ2luRnJvbVdpbmRvd0xvY2F0aW9uKCkpfX0se2tleTpcInJlbW92ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXTt0JiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZGVsZXRlIHRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV0pfX0se2tleTpcImZvcndhcmRQYWNrYWdlZE1lc3NhZ2VUb0NhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPUVzKHt9LGUpO3IuY2FsbENsaWVudElkPW47dmFyIGk9dD90LmNvbnRlbnRXaW5kb3c6d2luZG93LG89dGhpcy5fY2FsbE1hY2hpbmVUYXJnZXRPcmlnaW4odCk7byYmaS5wb3N0TWVzc2FnZShyLG8pfX0se2tleTpcImFkZExpc3RlbmVyRm9yUGFja2FnZWRNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24obil7aWYobi5kYXRhJiZcImlmcmFtZS1jYWxsLW1lc3NhZ2VcIj09PW4uZGF0YS53aGF0JiYoIW4uZGF0YS5jYWxsQ2xpZW50SWR8fG4uZGF0YS5jYWxsQ2xpZW50SWQ9PT10KSYmKCFuLmRhdGEuZnJvbXx8XCJtb2R1bGVcIiE9PW4uZGF0YS5mcm9tKSl7dmFyIHI9bi5kYXRhO2Uocil9fTtyZXR1cm4gdGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1uLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLG4pLGV9fSx7a2V5OlwicmVtb3ZlTGlzdGVuZXJGb3JQYWNrYWdlZE1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXTt0JiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZGVsZXRlIHRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV0pfX0se2tleTpcIl9jYWxsTWFjaGluZVRhcmdldE9yaWdpblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlP2Uuc3JjP25ldyBVUkwoZS5zcmMpLm9yaWdpbjp2b2lkIDA6dGhpcy5fdGFyZ2V0T3JpZ2luRnJvbVdpbmRvd0xvY2F0aW9uKCl9fSx7a2V5OlwiX3RhcmdldE9yaWdpbkZyb21XaW5kb3dMb2NhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJmaWxlOlwiPT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sP1wiKlwiOndpbmRvdy5sb2NhdGlvbi5vcmlnaW59fV0pfSgpO2Z1bmN0aW9uIFBzKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBBcygpe3RyeXt2YXIgZT0hQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sKGZ1bmN0aW9uKCl7fSkpKX1jYXRjaChlKXt9cmV0dXJuKEFzPWZ1bmN0aW9uKCl7cmV0dXJuISFlfSkoKX12YXIganM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIG4scixpLG87cmV0dXJuIHQodGhpcyxlKSxyPXRoaXMsaT1hKGk9ZSksbj1zKHIsQXMoKT9SZWZsZWN0LmNvbnN0cnVjdChpLG98fFtdLGEocikuY29uc3RydWN0b3IpOmkuYXBwbHkocixvKSksZ2xvYmFsLmNhbGxNYWNoaW5lVG9EYWlseUpzRW1pdHRlcj1nbG9iYWwuY2FsbE1hY2hpbmVUb0RhaWx5SnNFbWl0dGVyfHxuZXcgeS5FdmVudEVtaXR0ZXIsZ2xvYmFsLmRhaWx5SnNUb0NhbGxNYWNoaW5lRW1pdHRlcj1nbG9iYWwuZGFpbHlKc1RvQ2FsbE1hY2hpbmVFbWl0dGVyfHxuZXcgeS5FdmVudEVtaXR0ZXIsbi5fd3JhcHBlZExpc3RlbmVycz17fSxuLl9tZXNzYWdlQ2FsbGJhY2tzPXt9LG59cmV0dXJuIGwoZSxNcyksbyhlLFt7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9hZGRMaXN0ZW5lcihlLGdsb2JhbC5jYWxsTWFjaGluZVRvRGFpbHlKc0VtaXR0ZXIsdCxuLFwicmVjZWl2ZWQgY2FsbCBtYWNoaW5lIG1lc3NhZ2VcIil9fSx7a2V5OlwiYWRkTGlzdGVuZXJGb3JNZXNzYWdlc0Zyb21EYWlseUpzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2FkZExpc3RlbmVyKGUsZ2xvYmFsLmRhaWx5SnNUb0NhbGxNYWNoaW5lRW1pdHRlcix0LG4sXCJyZWNlaXZlZCBkYWlseS1qcyBtZXNzYWdlXCIpfX0se2tleTpcInNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9zZW5kTWVzc2FnZShlLGdsb2JhbC5kYWlseUpzVG9DYWxsTWFjaGluZUVtaXR0ZXIsbix0LFwic2VuZGluZyBtZXNzYWdlIHRvIGNhbGwgbWFjaGluZVwiKX19LHtrZXk6XCJzZW5kTWVzc2FnZVRvRGFpbHlKc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fc2VuZE1lc3NhZ2UoZSxnbG9iYWwuY2FsbE1hY2hpbmVUb0RhaWx5SnNFbWl0dGVyLHQsbnVsbCxcInNlbmRpbmcgbWVzc2FnZSB0byBkYWlseS1qc1wiKX19LHtrZXk6XCJyZW1vdmVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3dyYXBwZWRMaXN0ZW5lcnNbZV07dCYmKGdsb2JhbC5jYWxsTWFjaGluZVRvRGFpbHlKc0VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoXCJtZXNzYWdlXCIsdCksZ2xvYmFsLmRhaWx5SnNUb0NhbGxNYWNoaW5lRW1pdHRlci5yZW1vdmVMaXN0ZW5lcihcIm1lc3NhZ2VcIix0KSxkZWxldGUgdGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXSl9fSx7a2V5OlwiX2FkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz10aGlzLHM9ZnVuY3Rpb24odCl7aWYodC5jYWxsQ2xpZW50SWQ9PT1uKXtpZih0LmNhbGxiYWNrU3RhbXAmJm8uX21lc3NhZ2VDYWxsYmFja3NbdC5jYWxsYmFja1N0YW1wXSl7dmFyIGk9dC5jYWxsYmFja1N0YW1wO28uX21lc3NhZ2VDYWxsYmFja3NbaV0uY2FsbChyLHQpLGRlbGV0ZSBvLl9tZXNzYWdlQ2FsbGJhY2tzW2ldfWUuY2FsbChyLHQpfX07dGhpcy5fd3JhcHBlZExpc3RlbmVyc1tlXT1zLHQuYWRkTGlzdGVuZXIoXCJtZXNzYWdlXCIscyl9fSx7a2V5OlwiX3NlbmRNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9QcyhPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe3UoZSx0LG5bdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlBzKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSkpfXJldHVybiBlfSh7fSxlKTtpZihvLmNhbGxDbGllbnRJZD1uLHIpe3ZhciBzPU4oKTt0aGlzLl9tZXNzYWdlQ2FsbGJhY2tzW3NdPXIsby5jYWxsYmFja1N0YW1wPXN9dC5lbWl0KFwibWVzc2FnZVwiLG8pfX1dKX0oKSxJcz1cInJlcGxhY2VcIix4cz1cInNoYWxsb3ctbWVyZ2VcIixMcz1bSXMseHNdO3ZhciBEcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30scj1uLmRhdGEsaT1uLm1lcmdlU3RyYXRlZ3ksbz12b2lkIDA9PT1pP0lzOmk7dCh0aGlzLGUpLGUuX3ZhbGlkYXRlTWVyZ2VTdHJhdGVneShvKSxlLl92YWxpZGF0ZURhdGEocixvKSx0aGlzLm1lcmdlU3RyYXRlZ3k9byx0aGlzLmRhdGE9cn1yZXR1cm4gbyhlLFt7a2V5OlwiaXNOb09wXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5pc05vT3BVcGRhdGUodGhpcy5kYXRhLHRoaXMubWVyZ2VTdHJhdGVneSl9fV0sW3trZXk6XCJpc05vT3BVcGRhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiAwPT09T2JqZWN0LmtleXMoZSkubGVuZ3RoJiZ0PT09eHN9fSx7a2V5OlwiX3ZhbGlkYXRlTWVyZ2VTdHJhdGVneVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFMcy5pbmNsdWRlcyhlKSl0aHJvdyBFcnJvcihcIlVucmVjb2duaXplZCBtZXJnZVN0cmF0ZWd5IHByb3ZpZGVkLiBPcHRpb25zIGFyZTogW1wiLmNvbmNhdChMcyxcIl1cIikpfX0se2tleTpcIl92YWxpZGF0ZURhdGFcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFmdW5jdGlvbihlKXtpZihudWxsPT1lfHxcIm9iamVjdFwiIT09bihlKSlyZXR1cm4hMTt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PXR8fHQ9PT1PYmplY3QucHJvdG90eXBlfShlKSl0aHJvdyBFcnJvcihcIk1lZXRpbmcgc2Vzc2lvbiBkYXRhIG11c3QgYmUgYSBwbGFpbiAobWFwLWxpa2UpIG9iamVjdFwiKTt2YXIgcjt0cnl7aWYocj1KU09OLnN0cmluZ2lmeShlKSx0PT09SXMpe3ZhciBpPUpTT04ucGFyc2Uocik7UyhpLGUpfHxjb25zb2xlLndhcm4oXCJUaGUgbWVldGluZyBzZXNzaW9uIGRhdGEgcHJvdmlkZWQgd2lsbCBiZSBtb2RpZmllZCB3aGVuIHNlcmlhbGl6ZWQuXCIsaSxlKX1lbHNlIGlmKHQ9PT14cylmb3IodmFyIG8gaW4gZSlpZihPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZ2b2lkIDAhPT1lW29dKXt2YXIgcz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVbb10pKTtTKGVbb10scyl8fGNvbnNvbGUud2FybihcIkF0IGxlYXN0IG9uZSBrZXkgaW4gdGhlIG1lZXRpbmcgc2Vzc2lvbiBkYXRhIHByb3ZpZGVkIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBzZXJpYWxpemVkLlwiLHMsZVtvXSl9fWNhdGNoKGUpe3Rocm93IEVycm9yKFwiTWVldGluZyBzZXNzaW9uIGRhdGEgbXVzdCBiZSBzZXJpYWxpemFibGUgdG8gSlNPTjogXCIuY29uY2F0KGUpKX1pZihyLmxlbmd0aD5xbyl0aHJvdyBFcnJvcihcIk1lZXRpbmcgc2Vzc2lvbiBkYXRhIGlzIHRvbyBsYXJnZSAoXCIuY29uY2F0KHIubGVuZ3RoLFwiIGNoYXJhY3RlcnMpLiBNYXhpbXVtIHNpemUgc3VwcHBvcnRlZCBpcyBcIikuY29uY2F0KHFvLFwiLlwiKSl9fV0pfSgpO2Z1bmN0aW9uIE5zKCl7dHJ5e3ZhciBlPSFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpfWNhdGNoKGUpe31yZXR1cm4oTnM9ZnVuY3Rpb24oKXtyZXR1cm4hIWV9KSgpfWZ1bmN0aW9uIFJzKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIE1hcD9uZXcgTWFwOnZvaWQgMDtyZXR1cm4gUnM9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWV8fCFmdW5jdGlvbihlKXt0cnl7cmV0dXJuLTEhPT1GdW5jdGlvbi50b1N0cmluZy5jYWxsKGUpLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpfWNhdGNoKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9fShlKSlyZXR1cm4gZTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtpZih2b2lkIDAhPT10KXtpZih0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dC5zZXQoZSxuKX1mdW5jdGlvbiBuKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuKXtpZihOcygpKXJldHVybiBSZWZsZWN0LmNvbnN0cnVjdC5hcHBseShudWxsLGFyZ3VtZW50cyk7dmFyIHI9W251bGxdO3IucHVzaC5hcHBseShyLHQpO3ZhciBpPW5ldyhlLmJpbmQuYXBwbHkoZSxyKSk7cmV0dXJuIG4mJmMoaSxuLnByb3RvdHlwZSksaX0oZSxhcmd1bWVudHMsYSh0aGlzKS5jb25zdHJ1Y3Rvcil9cmV0dXJuIG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpuLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGMobixlKX0sUnMoZSl9ZnVuY3Rpb24gRnMoKXt0cnl7dmFyIGU9IUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLChmdW5jdGlvbigpe30pKSl9Y2F0Y2goZSl7fXJldHVybihGcz1mdW5jdGlvbigpe3JldHVybiEhZX0pKCl9ZnVuY3Rpb24gQnMoZSl7dmFyIHQsbj1udWxsPT09KHQ9d2luZG93Ll9kYWlseSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGVuZGluZ3M7aWYobil7dmFyIHI9bi5pbmRleE9mKGUpOy0xIT09ciYmbi5zcGxpY2UociwxKX19dmFyIFVzPWZ1bmN0aW9uKCl7cmV0dXJuIG8oKGZ1bmN0aW9uIGUobil7dCh0aGlzLGUpLHRoaXMuX2N1cnJlbnRMb2FkPW51bGwsdGhpcy5fY2FsbENsaWVudElkPW59KSxbe2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLGk9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDA7aWYodGhpcy5sb2FkZWQpcmV0dXJuIHdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW3RoaXMuX2NhbGxDbGllbnRJZF0uY2FsbE1hY2hpbmUucmVzZXQoKSx2b2lkIHIoITApO2U9dGhpcy5fY2FsbENsaWVudElkLHdpbmRvdy5fZGFpbHkucGVuZGluZ3MucHVzaChlKSx0aGlzLl9jdXJyZW50TG9hZCYmdGhpcy5fY3VycmVudExvYWQuY2FuY2VsKCksdGhpcy5fY3VycmVudExvYWQ9bmV3IFZzKG4sKGZ1bmN0aW9uKCl7cighMSl9KSwoZnVuY3Rpb24oZSxuKXtufHxCcyh0Ll9jYWxsQ2xpZW50SWQpLGkoZSxuKX0pKSx0aGlzLl9jdXJyZW50TG9hZC5zdGFydCgpfX0se2tleTpcImNhbmNlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudExvYWQmJnRoaXMuX2N1cnJlbnRMb2FkLmNhbmNlbCgpLEJzKHRoaXMuX2NhbGxDbGllbnRJZCl9fSx7a2V5OlwibG9hZGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRMb2FkJiZ0aGlzLl9jdXJyZW50TG9hZC5zdWNjZWVkZWR9fV0pfSgpLFZzPWZ1bmN0aW9uKCl7cmV0dXJuIG8oKGZ1bmN0aW9uIGUoKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30scj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxpPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwO3QodGhpcyxlKSx0aGlzLl9hdHRlbXB0c1JlbWFpbmluZz0zLHRoaXMuX2N1cnJlbnRBdHRlbXB0PW51bGwsdGhpcy5fZGFpbHlDb25maWc9bix0aGlzLl9zdWNjZXNzQ2FsbGJhY2s9cix0aGlzLl9mYWlsdXJlQ2FsbGJhY2s9aX0pLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX2N1cnJlbnRBdHRlbXB0KXt2YXIgdD1mdW5jdGlvbihuKXtlLl9jdXJyZW50QXR0ZW1wdC5jYW5jZWxsZWR8fChlLl9hdHRlbXB0c1JlbWFpbmluZy0tLGUuX2ZhaWx1cmVDYWxsYmFjayhuLGUuX2F0dGVtcHRzUmVtYWluaW5nPjApLGUuX2F0dGVtcHRzUmVtYWluaW5nPD0wfHxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UuX2N1cnJlbnRBdHRlbXB0LmNhbmNlbGxlZHx8KGUuX2N1cnJlbnRBdHRlbXB0PW5ldyBxcyhlLl9kYWlseUNvbmZpZyxlLl9zdWNjZXNzQ2FsbGJhY2ssdCksZS5fY3VycmVudEF0dGVtcHQuc3RhcnQoKSl9KSwzZTMpKX07dGhpcy5fY3VycmVudEF0dGVtcHQ9bmV3IHFzKHRoaXMuX2RhaWx5Q29uZmlnLHRoaXMuX3N1Y2Nlc3NDYWxsYmFjayx0KSx0aGlzLl9jdXJyZW50QXR0ZW1wdC5zdGFydCgpfX19LHtrZXk6XCJjYW5jZWxcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRBdHRlbXB0JiZ0aGlzLl9jdXJyZW50QXR0ZW1wdC5jYW5jZWwoKX19LHtrZXk6XCJjYW5jZWxsZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudEF0dGVtcHQmJnRoaXMuX2N1cnJlbnRBdHRlbXB0LmNhbmNlbGxlZH19LHtrZXk6XCJzdWNjZWVkZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudEF0dGVtcHQmJnRoaXMuX2N1cnJlbnRBdHRlbXB0LnN1Y2NlZWRlZH19XSl9KCksSnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cmV0dXJuIHQodGhpcyxlKSxuPXRoaXMsaT1hcmd1bWVudHMscj1hKHI9ZSkscyhuLEZzKCk/UmVmbGVjdC5jb25zdHJ1Y3QocixpfHxbXSxhKG4pLmNvbnN0cnVjdG9yKTpyLmFwcGx5KG4saSkpO3ZhciBuLHIsaX1yZXR1cm4gbChlLFJzKEVycm9yKSksbyhlKX0oKSwkcz0yZTQscXM9ZnVuY3Rpb24oKXtyZXR1cm4gbygoZnVuY3Rpb24gZShuLHIsaSl7dCh0aGlzLGUpLHRoaXMuX2xvYWRBdHRlbXB0SW1wbD1pcygpfHwhbi5hdm9pZEV2YWw/bmV3IHpzKG4scixpKTpuZXcgV3MobixyLGkpfSksW3trZXk6XCJzdGFydFwiLHZhbHVlOihlPXAoKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9sb2FkQXR0ZW1wdEltcGwuc3RhcnQoKX0pKSxmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sb2FkQXR0ZW1wdEltcGwuY2FuY2VsKCl9fSx7a2V5OlwiY2FuY2VsbGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRBdHRlbXB0SW1wbC5jYW5jZWxsZWR9fSx7a2V5Olwic3VjY2VlZGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRBdHRlbXB0SW1wbC5zdWNjZWVkZWR9fV0pO3ZhciBlfSgpLHpzPWZ1bmN0aW9uKCl7cmV0dXJuIG8oKGZ1bmN0aW9uIGUobixyLGkpe3QodGhpcyxlKSx0aGlzLmNhbmNlbGxlZD0hMSx0aGlzLnN1Y2NlZWRlZD0hMSx0aGlzLl9uZXR3b3JrVGltZWRPdXQ9ITEsdGhpcy5fbmV0d29ya1RpbWVvdXQ9bnVsbCx0aGlzLl9pb3NDYWNoZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgaU9TQ2FsbE9iamVjdEJ1bmRsZUNhY2hlJiZpT1NDYWxsT2JqZWN0QnVuZGxlQ2FjaGUsdGhpcy5fcmVmZXRjaEhlYWRlcnM9bnVsbCx0aGlzLl9kYWlseUNvbmZpZz1uLHRoaXMuX3N1Y2Nlc3NDYWxsYmFjaz1yLHRoaXMuX2ZhaWx1cmVDYWxsYmFjaz1pfSksW3trZXk6XCJzdGFydFwiLHZhbHVlOihpPXAoKGZ1bmN0aW9uKigpe3ZhciBlPUIodGhpcy5fZGFpbHlDb25maWcpOyEoeWllbGQgdGhpcy5fdHJ5TG9hZEZyb21JT1NDYWNoZShlKSkmJnRoaXMuX2xvYWRGcm9tTmV0d29yayhlKX0pKSxmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fbmV0d29ya1RpbWVvdXQpLHRoaXMuY2FuY2VsbGVkPSEwfX0se2tleTpcIl90cnlMb2FkRnJvbUlPU0NhY2hlXCIsdmFsdWU6KHI9cCgoZnVuY3Rpb24qKGUpe2lmKCF0aGlzLl9pb3NDYWNoZSlyZXR1cm4hMTt0cnl7dmFyIHQ9eWllbGQgdGhpcy5faW9zQ2FjaGUuZ2V0KGUpO3JldHVybiEhdGhpcy5jYW5jZWxsZWR8fCEhdCYmKHQuY29kZT8oRnVuY3Rpb24oJ1widXNlIHN0cmljdFwiOycrdC5jb2RlKSgpLHRoaXMuc3VjY2VlZGVkPSEwLHRoaXMuX3N1Y2Nlc3NDYWxsYmFjaygpLCEwKToodGhpcy5fcmVmZXRjaEhlYWRlcnM9dC5yZWZldGNoSGVhZGVycywhMSkpfWNhdGNoKGUpe3JldHVybiExfX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcIl9sb2FkRnJvbU5ldHdvcmtcIix2YWx1ZToobj1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpczt0aGlzLl9uZXR3b3JrVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX25ldHdvcmtUaW1lZE91dD0hMCx0Ll9mYWlsdXJlQ2FsbGJhY2soe21zZzpcIlRpbWVkIG91dCAoPlwiLmNvbmNhdCgkcyxcIiBtcykgd2hlbiBsb2FkaW5nIGNhbGwgb2JqZWN0IGJ1bmRsZSBcIikuY29uY2F0KGUpLHR5cGU6XCJ0aW1lb3V0XCJ9KX0pLCRzKTt0cnl7dmFyIG49dGhpcy5fcmVmZXRjaEhlYWRlcnM/e2hlYWRlcnM6dGhpcy5fcmVmZXRjaEhlYWRlcnN9Ont9LHI9eWllbGQgZmV0Y2goZSxuKTtpZihjbGVhclRpbWVvdXQodGhpcy5fbmV0d29ya1RpbWVvdXQpLHRoaXMuY2FuY2VsbGVkfHx0aGlzLl9uZXR3b3JrVGltZWRPdXQpdGhyb3cgbmV3IEpzO3ZhciBpPXlpZWxkIHRoaXMuX2dldEJ1bmRsZUNvZGVGcm9tUmVzcG9uc2UoZSxyKTtpZih0aGlzLmNhbmNlbGxlZCl0aHJvdyBuZXcgSnM7RnVuY3Rpb24oJ1widXNlIHN0cmljdFwiOycraSkoKSx0aGlzLl9pb3NDYWNoZSYmdGhpcy5faW9zQ2FjaGUuc2V0KGUsaSxyLmhlYWRlcnMpLHRoaXMuc3VjY2VlZGVkPSEwLHRoaXMuX3N1Y2Nlc3NDYWxsYmFjaygpfWNhdGNoKHQpe2lmKGNsZWFyVGltZW91dCh0aGlzLl9uZXR3b3JrVGltZW91dCksdCBpbnN0YW5jZW9mIEpzfHx0aGlzLmNhbmNlbGxlZHx8dGhpcy5fbmV0d29ya1RpbWVkT3V0KXJldHVybjt0aGlzLl9mYWlsdXJlQ2FsbGJhY2soe21zZzpcIkZhaWxlZCB0byBsb2FkIGNhbGwgb2JqZWN0IGJ1bmRsZSBcIi5jb25jYXQoZSxcIjogXCIpLmNvbmNhdCh0KSx0eXBlOnQubWVzc2FnZX0pfX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcIl9nZXRCdW5kbGVDb2RlRnJvbVJlc3BvbnNlXCIsdmFsdWU6KGU9cCgoZnVuY3Rpb24qKGUsdCl7aWYodC5vaylyZXR1cm4geWllbGQgdC50ZXh0KCk7aWYodGhpcy5faW9zQ2FjaGUmJjMwND09PXQuc3RhdHVzKXJldHVybih5aWVsZCB0aGlzLl9pb3NDYWNoZS5yZW5ldyhlLHQuaGVhZGVycykpLmNvZGU7dGhyb3cgbmV3IEVycm9yKFwiUmVjZWl2ZWQgXCIuY29uY2F0KHQuc3RhdHVzLFwiIHJlc3BvbnNlXCIpKX0pKSxmdW5jdGlvbih0LG4pe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfV0pO3ZhciBlLG4scixpfSgpLFdzPWZ1bmN0aW9uKCl7cmV0dXJuIG8oKGZ1bmN0aW9uIGUobixyLGkpe3QodGhpcyxlKSx0aGlzLmNhbmNlbGxlZD0hMSx0aGlzLnN1Y2NlZWRlZD0hMSx0aGlzLl9kYWlseUNvbmZpZz1uLHRoaXMuX3N1Y2Nlc3NDYWxsYmFjaz1yLHRoaXMuX2ZhaWx1cmVDYWxsYmFjaz1pLHRoaXMuX2F0dGVtcHRJZD1OKCksdGhpcy5fbmV0d29ya1RpbWVvdXQ9bnVsbCx0aGlzLl9zY3JpcHRFbGVtZW50PW51bGx9KSxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt3aW5kb3cuX2RhaWx5Q2FsbE1hY2hpbmVMb2FkV2FpdGxpc3R8fCh3aW5kb3cuX2RhaWx5Q2FsbE1hY2hpbmVMb2FkV2FpdGxpc3Q9bmV3IFNldCk7dmFyIGU9Qih0aGlzLl9kYWlseUNvbmZpZyk7XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZG9jdW1lbnQ/XCJ1bmRlZmluZWRcIjpuKGRvY3VtZW50KSk/dGhpcy5fc3RhcnRMb2FkaW5nKGUpOnRoaXMuX2ZhaWx1cmVDYWxsYmFjayh7bXNnOlwiQ2FsbCBvYmplY3QgYnVuZGxlIG11c3QgYmUgbG9hZGVkIGluIGEgRE9NL3dlYiBjb250ZXh0XCIsdHlwZTpcIm1pc3NpbmcgY29udGV4dFwifSl9fSx7a2V5OlwiY2FuY2VsXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zdG9wTG9hZGluZygpLHRoaXMuY2FuY2VsbGVkPSEwfX0se2tleTpcIl9zdGFydExvYWRpbmdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3NpZ25VcEZvckNhbGxNYWNoaW5lTG9hZFdhaXRsaXN0KCksdGhpcy5fbmV0d29ya1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9zdG9wTG9hZGluZygpLHQuX2ZhaWx1cmVDYWxsYmFjayh7bXNnOlwiVGltZWQgb3V0ICg+XCIuY29uY2F0KCRzLFwiIG1zKSB3aGVuIGxvYWRpbmcgY2FsbCBvYmplY3QgYnVuZGxlIFwiKS5jb25jYXQoZSksdHlwZTpcInRpbWVvdXRcIn0pfSksJHMpO3ZhciBuPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7dGhpcy5fc2NyaXB0RWxlbWVudD1yLHIub25sb2FkPWZ1bmN0aW9uKCl7dC5fc3RvcExvYWRpbmcoKSx0LnN1Y2NlZWRlZD0hMCx0Ll9zdWNjZXNzQ2FsbGJhY2soKX0sci5vbmVycm9yPWZ1bmN0aW9uKGUpe3QuX3N0b3BMb2FkaW5nKCksdC5fZmFpbHVyZUNhbGxiYWNrKHttc2c6XCJGYWlsZWQgdG8gbG9hZCBjYWxsIG9iamVjdCBidW5kbGUgXCIuY29uY2F0KGUudGFyZ2V0LnNyYyksdHlwZTplLm1lc3NhZ2V9KX0sci5zcmM9ZSxuLmFwcGVuZENoaWxkKHIpfX0se2tleTpcIl9zdG9wTG9hZGluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fd2l0aGRyYXdGcm9tQ2FsbE1hY2hpbmVMb2FkV2FpdGxpc3QoKSxjbGVhclRpbWVvdXQodGhpcy5fbmV0d29ya1RpbWVvdXQpLHRoaXMuX3NjcmlwdEVsZW1lbnQmJih0aGlzLl9zY3JpcHRFbGVtZW50Lm9ubG9hZD1udWxsLHRoaXMuX3NjcmlwdEVsZW1lbnQub25lcnJvcj1udWxsKX19LHtrZXk6XCJfc2lnblVwRm9yQ2FsbE1hY2hpbmVMb2FkV2FpdGxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5fZGFpbHlDYWxsTWFjaGluZUxvYWRXYWl0bGlzdC5hZGQodGhpcy5fYXR0ZW1wdElkKX19LHtrZXk6XCJfd2l0aGRyYXdGcm9tQ2FsbE1hY2hpbmVMb2FkV2FpdGxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5fZGFpbHlDYWxsTWFjaGluZUxvYWRXYWl0bGlzdC5kZWxldGUodGhpcy5fYXR0ZW1wdElkKX19XSl9KCksSHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiEwPT09S3MoZS5sb2NhbCx0LG4pfSxHcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUubG9jYWwuc3RyZWFtcyYmZS5sb2NhbC5zdHJlYW1zW3RdJiZlLmxvY2FsLnN0cmVhbXNbdF0uc3RyZWFtJiZlLmxvY2FsLnN0cmVhbXNbdF0uc3RyZWFtW1wiZ2V0XCIuY29uY2F0KFwidmlkZW9cIj09PW4/XCJWaWRlb1wiOlwiQXVkaW9cIixcIlRyYWNrc1wiKV0oKVswXX0sUXM9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9WXMoZSx0LG4scik7cmV0dXJuIGkmJmkucGVuZGluZ1RyYWNrfSxLcz1mdW5jdGlvbihlLHQsbil7aWYoIWUpcmV0dXJuITE7dmFyIHI9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2VcImF2YXRhclwiOnJldHVybiEwO2Nhc2VcInN0YWdlZFwiOnJldHVybiBlO2RlZmF1bHQ6cmV0dXJuISFlfX0saT1lLnB1YmxpYy5zdWJzY3JpYmVkVHJhY2tzO3JldHVybiBpJiZpW3RdPy0xPT09W1wiY2FtLWF1ZGlvXCIsXCJjYW0tdmlkZW9cIixcInNjcmVlbi12aWRlb1wiLFwic2NyZWVuLWF1ZGlvXCIsXCJybXBBdWRpb1wiLFwicm1wVmlkZW9cIl0uaW5kZXhPZihuKSYmaVt0XS5jdXN0b20/WyEwLFwic3RhZ2VkXCJdLmluY2x1ZGVzKGlbdF0uY3VzdG9tKT9yKGlbdF0uY3VzdG9tKTpyKGlbdF0uY3VzdG9tW25dKTpyKGlbdF1bbl0pOiFpfHxyKGkuQUxMKX0sWXM9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9T2JqZWN0LnZhbHVlcyhlLnN0cmVhbXN8fHt9KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcnRpY2lwYW50SWQ9PT10JiZlLnR5cGU9PT1uJiZlLnBlbmRpbmdUcmFjayYmZS5wZW5kaW5nVHJhY2sua2luZD09PXJ9KSkuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IERhdGUodC5zdGFydHRpbWUpLW5ldyBEYXRlKGUuc3RhcnR0aW1lKX0pKTtyZXR1cm4gaSYmaVswXX0sWHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxvY2FsLnB1YmxpYy5jdXN0b21UcmFja3M7aWYobiYmblt0XSlyZXR1cm4gblt0XS50cmFja307ZnVuY3Rpb24gWnMoZSx0KXtmb3IodmFyIG49dC5nZXRTdGF0ZSgpLHI9MCxpPVtcImNhbVwiLFwic2NyZWVuXCJdO3I8aS5sZW5ndGg7cisrKWZvcih2YXIgbz1pW3JdLHM9MCxhPVtcInZpZGVvXCIsXCJhdWRpb1wiXTtzPGEubGVuZ3RoO3MrKyl7dmFyIGM9YVtzXSxsPVwiY2FtXCI9PT1vP2M6XCJzY3JlZW5cIi5jb25jYXQoYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStjLnNsaWNlKDEpKSx1PWUudHJhY2tzW2xdO2lmKHUpe3ZhciBkPWUubG9jYWw/R3MobixvLGMpOlFzKG4sZS5zZXNzaW9uX2lkLG8sYyk7XCJwbGF5YWJsZVwiPT09dS5zdGF0ZSYmKHUudHJhY2s9ZCksdS5wZXJzaXN0ZW50VHJhY2s9ZH19fWZ1bmN0aW9uIGVhKGUsdCl7dHJ5e3ZhciBuPXQuZ2V0U3RhdGUoKTtmb3IodmFyIHIgaW4gZS50cmFja3MpaWYoIXRhKHIpKXt2YXIgaT1lLnRyYWNrc1tyXS5raW5kO2lmKGkpe3ZhciBvPWUudHJhY2tzW3JdO2lmKG8pe3ZhciBzPWUubG9jYWw/WHMobixyKTpRcyhuLGUuc2Vzc2lvbl9pZCxyLGkpO1wicGxheWFibGVcIj09PW8uc3RhdGUmJihlLnRyYWNrc1tyXS50cmFjaz1zKSxvLnBlcnNpc3RlbnRUcmFjaz1zfX1lbHNlIGNvbnNvbGUuZXJyb3IoXCJ1bmtub3duIHR5cGUgZm9yIGN1c3RvbSB0cmFja1wiKX19Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX19ZnVuY3Rpb24gdGEoZSl7cmV0dXJuW1widmlkZW9cIixcImF1ZGlvXCIsXCJzY3JlZW5WaWRlb1wiLFwic2NyZWVuQXVkaW9cIl0uaW5jbHVkZXMoZSl9ZnVuY3Rpb24gbmEoZSx0LG4pe3ZhciByPW4uZ2V0U3RhdGUoKTtpZihlLmxvY2FsKXtpZihlLmF1ZGlvKXRyeXtlLmF1ZGlvVHJhY2s9ci5sb2NhbC5zdHJlYW1zLmNhbS5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSxlLmF1ZGlvVHJhY2t8fChlLmF1ZGlvPSExKX1jYXRjaChlKXt9aWYoZS52aWRlbyl0cnl7ZS52aWRlb1RyYWNrPXIubG9jYWwuc3RyZWFtcy5jYW0uc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0sZS52aWRlb1RyYWNrfHwoZS52aWRlbz0hMSl9Y2F0Y2goZSl7fWlmKGUuc2NyZWVuKXRyeXtlLnNjcmVlblZpZGVvVHJhY2s9ci5sb2NhbC5zdHJlYW1zLnNjcmVlbi5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSxlLnNjcmVlbkF1ZGlvVHJhY2s9ci5sb2NhbC5zdHJlYW1zLnNjcmVlbi5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSxlLnNjcmVlblZpZGVvVHJhY2t8fGUuc2NyZWVuQXVkaW9UcmFja3x8KGUuc2NyZWVuPSExKX1jYXRjaChlKXt9fWVsc2V7dmFyIGk9ITA7dHJ5e3ZhciBvPXIucGFydGljaXBhbnRzW2Uuc2Vzc2lvbl9pZF07byYmby5wdWJsaWMmJm8ucHVibGljLnJ0Y1R5cGUmJlwicGVlci10by1wZWVyXCI9PT1vLnB1YmxpYy5ydGNUeXBlLmltcGwmJm8ucHJpdmF0ZSYmIVtcImNvbm5lY3RlZFwiLFwiY29tcGxldGVkXCJdLmluY2x1ZGVzKG8ucHJpdmF0ZS5wZWVyaW5nU3RhdGUpJiYoaT0hMSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX1pZighaSlyZXR1cm4gZS5hdWRpbz0hMSxlLmF1ZGlvVHJhY2s9ITEsZS52aWRlbz0hMSxlLnZpZGVvVHJhY2s9ITEsZS5zY3JlZW49ITEsdm9pZChlLnNjcmVlblRyYWNrPSExKTt0cnl7ci5zdHJlYW1zO2lmKGUuYXVkaW8mJkhzKHIsZS5zZXNzaW9uX2lkLFwiY2FtLWF1ZGlvXCIpKXt2YXIgcz1RcyhyLGUuc2Vzc2lvbl9pZCxcImNhbVwiLFwiYXVkaW9cIik7cyYmKHQmJnQuYXVkaW9UcmFjayYmdC5hdWRpb1RyYWNrLmlkPT09cy5pZD9lLmF1ZGlvVHJhY2s9czpzLm11dGVkfHwoZS5hdWRpb1RyYWNrPXMpKSxlLmF1ZGlvVHJhY2t8fChlLmF1ZGlvPSExKX1pZihlLnZpZGVvJiZIcyhyLGUuc2Vzc2lvbl9pZCxcImNhbS12aWRlb1wiKSl7dmFyIGE9UXMocixlLnNlc3Npb25faWQsXCJjYW1cIixcInZpZGVvXCIpO2EmJih0JiZ0LnZpZGVvVHJhY2smJnQudmlkZW9UcmFjay5pZD09PWEuaWQ/ZS52aWRlb1RyYWNrPWE6YS5tdXRlZHx8KGUudmlkZW9UcmFjaz1hKSksZS52aWRlb1RyYWNrfHwoZS52aWRlbz0hMSl9aWYoZS5zY3JlZW4mJkhzKHIsZS5zZXNzaW9uX2lkLFwic2NyZWVuLWF1ZGlvXCIpKXt2YXIgYz1RcyhyLGUuc2Vzc2lvbl9pZCxcInNjcmVlblwiLFwiYXVkaW9cIik7YyYmKHQmJnQuc2NyZWVuQXVkaW9UcmFjayYmdC5zY3JlZW5BdWRpb1RyYWNrLmlkPT09Yy5pZD9lLnNjcmVlbkF1ZGlvVHJhY2s9YzpjLm11dGVkfHwoZS5zY3JlZW5BdWRpb1RyYWNrPWMpKX1pZihlLnNjcmVlbiYmSHMocixlLnNlc3Npb25faWQsXCJzY3JlZW4tdmlkZW9cIikpe3ZhciBsPVFzKHIsZS5zZXNzaW9uX2lkLFwic2NyZWVuXCIsXCJ2aWRlb1wiKTtsJiYodCYmdC5zY3JlZW5WaWRlb1RyYWNrJiZ0LnNjcmVlblZpZGVvVHJhY2suaWQ9PT1sLmlkP2Uuc2NyZWVuVmlkZW9UcmFjaz1sOmwubXV0ZWR8fChlLnNjcmVlblZpZGVvVHJhY2s9bCkpfWUuc2NyZWVuVmlkZW9UcmFja3x8ZS5zY3JlZW5BdWRpb1RyYWNrfHwoZS5zY3JlZW49ITEpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJ1bmV4cGVjdGVkIGVycm9yIG1hdGNoaW5nIHVwIHRyYWNrc1wiLGUpfX19ZnVuY3Rpb24gcmEoZSx0KXt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbXCJAQGl0ZXJhdG9yXCJdO2lmKCFuKXtpZihBcnJheS5pc0FycmF5KGUpfHwobj1mdW5jdGlvbihlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBpYShlLHQpO3ZhciBuPXt9LnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PW4mJmUuY29uc3RydWN0b3ImJihuPWUuY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PW58fFwiU2V0XCI9PT1uP0FycmF5LmZyb20oZSk6XCJBcmd1bWVudHNcIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP2lhKGUsdCk6dm9pZCAwfX0oZSkpfHx0JiZlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpe24mJihlPW4pO3ZhciByPTAsaT1mdW5jdGlvbigpe307cmV0dXJue3M6aSxuOmZ1bmN0aW9uKCl7cmV0dXJuIHI+PWUubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTplW3IrK119fSxlOmZ1bmN0aW9uKGUpe3Rocm93IGV9LGY6aX19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciBvLHM9ITAsYT0hMTtyZXR1cm57czpmdW5jdGlvbigpe249bi5jYWxsKGUpfSxuOmZ1bmN0aW9uKCl7dmFyIGU9bi5uZXh0KCk7cmV0dXJuIHM9ZS5kb25lLGV9LGU6ZnVuY3Rpb24oZSl7YT0hMCxvPWV9LGY6ZnVuY3Rpb24oKXt0cnl7c3x8bnVsbD09bi5yZXR1cm58fG4ucmV0dXJuKCl9ZmluYWxseXtpZihhKXRocm93IG99fX19ZnVuY3Rpb24gaWEoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIG49MCxyPUFycmF5KHQpO248dDtuKyspcltuXT1lW25dO3JldHVybiByfXZhciBvYT1uZXcgTWFwLHNhPW51bGw7ZnVuY3Rpb24gYWEoZSx0KXt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl18fGVbXCJAQGl0ZXJhdG9yXCJdO2lmKCFuKXtpZihBcnJheS5pc0FycmF5KGUpfHwobj1mdW5jdGlvbihlLHQpe2lmKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBjYShlLHQpO3ZhciBuPXt9LnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PW4mJmUuY29uc3RydWN0b3ImJihuPWUuY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PW58fFwiU2V0XCI9PT1uP0FycmF5LmZyb20oZSk6XCJBcmd1bWVudHNcIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP2NhKGUsdCk6dm9pZCAwfX0oZSkpfHx0JiZlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpe24mJihlPW4pO3ZhciByPTAsaT1mdW5jdGlvbigpe307cmV0dXJue3M6aSxuOmZ1bmN0aW9uKCl7cmV0dXJuIHI+PWUubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTplW3IrK119fSxlOmZ1bmN0aW9uKGUpe3Rocm93IGV9LGY6aX19dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfXZhciBvLHM9ITAsYT0hMTtyZXR1cm57czpmdW5jdGlvbigpe249bi5jYWxsKGUpfSxuOmZ1bmN0aW9uKCl7dmFyIGU9bi5uZXh0KCk7cmV0dXJuIHM9ZS5kb25lLGV9LGU6ZnVuY3Rpb24oZSl7YT0hMCxvPWV9LGY6ZnVuY3Rpb24oKXt0cnl7c3x8bnVsbD09bi5yZXR1cm58fG4ucmV0dXJuKCl9ZmluYWxseXtpZihhKXRocm93IG99fX19ZnVuY3Rpb24gY2EoZSx0KXsobnVsbD09dHx8dD5lLmxlbmd0aCkmJih0PWUubGVuZ3RoKTtmb3IodmFyIG49MCxyPUFycmF5KHQpO248dDtuKyspcltuXT1lW25dO3JldHVybiByfXZhciBsYT1uZXcgTWFwLHVhPW51bGw7ZnVuY3Rpb24gZGEoZSl7aGEoKT9mdW5jdGlvbihlKXtvYS5oYXMoZSl8fChvYS5zZXQoZSx7fSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbigoZnVuY3Rpb24odCl7b2EuaGFzKGUpJiYob2EuZ2V0KGUpLmxhc3REZXZpY2VzU3RyaW5nPUpTT04uc3RyaW5naWZ5KHQpLHNhfHwoc2E9ZnVuY3Rpb24oKXt2YXIgZT1wKChmdW5jdGlvbiooKXt2YXIgZSx0PXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLG49cmEob2Eua2V5cygpKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciByPWUudmFsdWUsaT1KU09OLnN0cmluZ2lmeSh0KTtpIT09b2EuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nJiYob2EuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nPWkscih0KSl9fWNhdGNoKGUpe24uZShlKX1maW5hbGx5e24uZigpfX0pKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLHNhKSkpfSkpLmNhdGNoKChmdW5jdGlvbigpe30pKSl9KGUpOmZ1bmN0aW9uKGUpe2xhLmhhcyhlKXx8KGxhLnNldChlLHt9KSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKChmdW5jdGlvbih0KXtsYS5oYXMoZSkmJihsYS5nZXQoZSkubGFzdERldmljZXNTdHJpbmc9SlNPTi5zdHJpbmdpZnkodCksdWF8fCh1YT1zZXRJbnRlcnZhbChwKChmdW5jdGlvbiooKXt2YXIgZSx0PXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLG49YWEobGEua2V5cygpKTt0cnl7Zm9yKG4ucygpOyEoZT1uLm4oKSkuZG9uZTspe3ZhciByPWUudmFsdWUsaT1KU09OLnN0cmluZ2lmeSh0KTtpIT09bGEuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nJiYobGEuZ2V0KHIpLmxhc3REZXZpY2VzU3RyaW5nPWkscih0KSl9fWNhdGNoKGUpe24uZShlKX1maW5hbGx5e24uZigpfX0pKSwzZTMpKSl9KSkpfShlKX1mdW5jdGlvbiBwYShlKXtoYSgpP2Z1bmN0aW9uKGUpe29hLmhhcyhlKSYmKG9hLmRlbGV0ZShlKSwwPT09b2Euc2l6ZSYmc2EmJihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIixzYSksc2E9bnVsbCkpfShlKTpmdW5jdGlvbihlKXtsYS5oYXMoZSkmJihsYS5kZWxldGUoZSksMD09PWxhLnNpemUmJnVhJiYoY2xlYXJJbnRlcnZhbCh1YSksdWE9bnVsbCkpfShlKX1mdW5jdGlvbiBoYSgpe3ZhciBlO3JldHVybiBpcygpfHx2b2lkIDAhPT0obnVsbD09PShlPW5hdmlnYXRvci5tZWRpYURldmljZXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm9uZGV2aWNlY2hhbmdlKX12YXIgZmE9bmV3IFNldDtmdW5jdGlvbiB2YShlLHQpe3ZhciBuPXQuaXNMb2NhbFNjcmVlblZpZGVvO3JldHVybiBlJiZcImxpdmVcIj09PWUucmVhZHlTdGF0ZSYmIWZ1bmN0aW9uKGUsdCl7cmV0dXJuKCF0LmlzTG9jYWxTY3JlZW5WaWRlb3x8XCJDaHJvbWVcIiE9PW1zKCkpJiZlLm11dGVkJiYhZmEuaGFzKGUuaWQpfShlLHtpc0xvY2FsU2NyZWVuVmlkZW86bn0pfWZ1bmN0aW9uIGdhKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9nYShPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe3UoZSx0LG5bdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOmdhKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSkpfXJldHVybiBlfXZhciB5YT1PYmplY3QuZnJlZXplKHtWSURFTzpcInZpZGVvXCIsQVVESU86XCJhdWRpb1wiLFNDUkVFTl9WSURFTzpcInNjcmVlblZpZGVvXCIsU0NSRUVOX0FVRElPOlwic2NyZWVuQXVkaW9cIixDVVNUT01fVklERU86XCJjdXN0b21WaWRlb1wiLENVU1RPTV9BVURJTzpcImN1c3RvbUF1ZGlvXCJ9KSxiYT1PYmplY3QuZnJlZXplKHtQQVJUSUNJUEFOVFM6XCJwYXJ0aWNpcGFudHNcIixTVFJFQU1JTkc6XCJzdHJlYW1pbmdcIixUUkFOU0NSSVBUSU9OOlwidHJhbnNjcmlwdGlvblwifSksX2E9T2JqZWN0LnZhbHVlcyh5YSksd2E9W1widlwiLFwiYVwiLFwic3ZcIixcInNhXCIsXCJjdlwiLFwiY2FcIl07T2JqZWN0LmZyZWV6ZShfYS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZVt0XT13YVtuXSxlfSkse30pKSxPYmplY3QuZnJlZXplKHdhLnJlZHVjZSgoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlW3RdPV9hW25dLGV9KSx7fSkpO3ZhciBTYT1beWEuVklERU8seWEuQVVESU8seWEuU0NSRUVOX1ZJREVPLHlhLlNDUkVFTl9BVURJT10sa2E9T2JqZWN0LnZhbHVlcyhiYSksTWE9W1wicFwiLFwic1wiLFwidFwiXTtPYmplY3QuZnJlZXplKGthLnJlZHVjZSgoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlW3RdPU1hW25dLGV9KSx7fSkpLE9iamVjdC5mcmVlemUoTWEucmVkdWNlKChmdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09a2Fbbl0sZX0pLHt9KSk7dmFyIENhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPW4uYmFzZSxpPW4uYnlVc2VySWQsbz1uLmJ5UGFydGljaXBhbnRJZDt0KHRoaXMsZSksdGhpcy5iYXNlPXIsdGhpcy5ieVVzZXJJZD1pLHRoaXMuYnlQYXJ0aWNpcGFudElkPW99cmV0dXJuIG8oZSxbe2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtpZih0aGlzLmJhc2UgaW5zdGFuY2VvZiBFYT90LmJhc2U9dGhpcy5iYXNlLmNsb25lKCk6dC5iYXNlPXRoaXMuYmFzZSx2b2lkIDAhPT10aGlzLmJ5VXNlcklkKWZvcih2YXIgbiBpbiB0LmJ5VXNlcklkPXt9LHRoaXMuYnlVc2VySWQpe3ZhciByPXRoaXMuYnlVc2VySWRbbl07dC5ieVVzZXJJZFtuXT1yIGluc3RhbmNlb2YgRWE/ci5jbG9uZSgpOnJ9aWYodm9pZCAwIT09dGhpcy5ieVBhcnRpY2lwYW50SWQpZm9yKHZhciBpIGluIHQuYnlQYXJ0aWNpcGFudElkPXt9LHRoaXMuYnlQYXJ0aWNpcGFudElkKXt2YXIgbz10aGlzLmJ5UGFydGljaXBhbnRJZFtpXTt0LmJ5UGFydGljaXBhbnRJZFtpXT1vIGluc3RhbmNlb2YgRWE/by5jbG9uZSgpOm99cmV0dXJuIHR9fSx7a2V5OlwidG9KU09OT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT17fTtpZihcImJvb2xlYW5cIj09dHlwZW9mIHRoaXMuYmFzZT9lLmJhc2U9dGhpcy5iYXNlOnRoaXMuYmFzZSBpbnN0YW5jZW9mIEVhJiYoZS5iYXNlPXRoaXMuYmFzZS50b0pTT05PYmplY3QoKSksdm9pZCAwIT09dGhpcy5ieVVzZXJJZClmb3IodmFyIHQgaW4gZS5ieVVzZXJJZD17fSx0aGlzLmJ5VXNlcklkKXt2YXIgbj10aGlzLmJ5VXNlcklkW3RdO2UuYnlVc2VySWRbdF09biBpbnN0YW5jZW9mIEVhP24udG9KU09OT2JqZWN0KCk6bn1pZih2b2lkIDAhPT10aGlzLmJ5UGFydGljaXBhbnRJZClmb3IodmFyIHIgaW4gZS5ieVBhcnRpY2lwYW50SWQ9e30sdGhpcy5ieVBhcnRpY2lwYW50SWQpe3ZhciBpPXRoaXMuYnlQYXJ0aWNpcGFudElkW3JdO2UuYnlQYXJ0aWNpcGFudElkW3JdPWkgaW5zdGFuY2VvZiBFYT9pLnRvSlNPTk9iamVjdCgpOml9cmV0dXJuIGV9fSx7a2V5OlwidG9NaW5pZmllZEpTT05PYmplY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXt9O2lmKHZvaWQgMCE9PXRoaXMuYmFzZSYmKFwiYm9vbGVhblwiPT10eXBlb2YgdGhpcy5iYXNlP2UuYj10aGlzLmJhc2U6ZS5iPXRoaXMuYmFzZS50b01pbmlmaWVkSlNPTk9iamVjdCgpKSx2b2lkIDAhPT10aGlzLmJ5VXNlcklkKWZvcih2YXIgdCBpbiBlLnU9e30sdGhpcy5ieVVzZXJJZCl7dmFyIG49dGhpcy5ieVVzZXJJZFt0XTtlLnVbdF09XCJib29sZWFuXCI9PXR5cGVvZiBuP246bi50b01pbmlmaWVkSlNPTk9iamVjdCgpfWlmKHZvaWQgMCE9PXRoaXMuYnlQYXJ0aWNpcGFudElkKWZvcih2YXIgciBpbiBlLnA9e30sdGhpcy5ieVBhcnRpY2lwYW50SWQpe3ZhciBpPXRoaXMuYnlQYXJ0aWNpcGFudElkW3JdO2UucFtyXT1cImJvb2xlYW5cIj09dHlwZW9mIGk/aTppLnRvTWluaWZpZWRKU09OT2JqZWN0KCl9cmV0dXJuIGV9fSx7a2V5Olwibm9ybWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iYXNlIGluc3RhbmNlb2YgRWEmJih0aGlzLmJhc2U9dGhpcy5iYXNlLm5vcm1hbGl6ZSgpKSx0aGlzLmJ5VXNlcklkJiYodGhpcy5ieVVzZXJJZD1PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModGhpcy5ieVVzZXJJZCkubWFwKChmdW5jdGlvbihlKXt2YXIgdD1mKGUsMiksbj10WzBdLHI9dFsxXTtyZXR1cm5bbixyIGluc3RhbmNlb2YgRWE/ci5ub3JtYWxpemUoKTpyXX0pKSkpLHRoaXMuYnlQYXJ0aWNpcGFudElkJiYodGhpcy5ieVBhcnRpY2lwYW50SWQ9T2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRoaXMuYnlQYXJ0aWNpcGFudElkKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PWYoZSwyKSxuPXRbMF0scj10WzFdO3JldHVybltuLHIgaW5zdGFuY2VvZiBFYT9yLm5vcm1hbGl6ZSgpOnJdfSkpKSksdGhpc319XSxbe2tleTpcImZyb21KU09OT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG4scixpO2lmKHZvaWQgMCE9PXQuYmFzZSYmKG49XCJib29sZWFuXCI9PXR5cGVvZiB0LmJhc2U/dC5iYXNlOkVhLmZyb21KU09OT2JqZWN0KHQuYmFzZSkpLHZvaWQgMCE9PXQuYnlVc2VySWQpZm9yKHZhciBvIGluIHI9e30sdC5ieVVzZXJJZCl7dmFyIHM9dC5ieVVzZXJJZFtvXTtyW29dPVwiYm9vbGVhblwiPT10eXBlb2Ygcz9zOkVhLmZyb21KU09OT2JqZWN0KHMpfWlmKHZvaWQgMCE9PXQuYnlQYXJ0aWNpcGFudElkKWZvcih2YXIgYSBpbiBpPXt9LHQuYnlQYXJ0aWNpcGFudElkKXt2YXIgYz10LmJ5UGFydGljaXBhbnRJZFthXTtpW2FdPVwiYm9vbGVhblwiPT10eXBlb2YgYz9jOkVhLmZyb21KU09OT2JqZWN0KGMpfXJldHVybiBuZXcgZSh7YmFzZTpuLGJ5VXNlcklkOnIsYnlQYXJ0aWNpcGFudElkOml9KX19LHtrZXk6XCJmcm9tTWluaWZpZWRKU09OT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG4scixpO2lmKHZvaWQgMCE9PXQuYiYmKG49XCJib29sZWFuXCI9PXR5cGVvZiB0LmI/dC5iOkVhLmZyb21NaW5pZmllZEpTT05PYmplY3QodC5iKSksdm9pZCAwIT09dC51KWZvcih2YXIgbyBpbiByPXt9LHQudSl7dmFyIHM9dC51W29dO3Jbb109XCJib29sZWFuXCI9PXR5cGVvZiBzP3M6RWEuZnJvbU1pbmlmaWVkSlNPTk9iamVjdChzKX1pZih2b2lkIDAhPT10LnApZm9yKHZhciBhIGluIGk9e30sdC5wKXt2YXIgYz10LnBbYV07aVthXT1cImJvb2xlYW5cIj09dHlwZW9mIGM/YzpFYS5mcm9tTWluaWZpZWRKU09OT2JqZWN0KGMpfXJldHVybiBuZXcgZSh7YmFzZTpuLGJ5VXNlcklkOnIsYnlQYXJ0aWNpcGFudElkOml9KX19LHtrZXk6XCJ2YWxpZGF0ZUpTT05PYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT09bihlKSlyZXR1cm5bITEsXCJjYW5SZWNlaXZlIG11c3QgYmUgYW4gb2JqZWN0XCJdO2Zvcih2YXIgdD1bXCJiYXNlXCIsXCJieVVzZXJJZFwiLFwiYnlQYXJ0aWNpcGFudElkXCJdLHI9MCxpPU9iamVjdC5rZXlzKGUpO3I8aS5sZW5ndGg7cisrKXt2YXIgbz1pW3JdO2lmKCF0LmluY2x1ZGVzKG8pKXJldHVyblshMSxcImNhblJlY2VpdmUgY2FuIG9ubHkgY29udGFpbiBrZXlzIChcIi5jb25jYXQodC5qb2luKFwiLCBcIiksXCIpXCIpXTtpZihcImJhc2VcIj09PW8pe3ZhciBzPWYoRWEudmFsaWRhdGVKU09OT2JqZWN0KGUuYmFzZSwhMCksMiksYT1zWzBdLGM9c1sxXTtpZighYSlyZXR1cm5bITEsY119ZWxzZXtpZihcIm9iamVjdFwiIT09bihlW29dKSlyZXR1cm5bITEsXCJpbnZhbGlkIChub24tb2JqZWN0KSB2YWx1ZSBmb3IgZmllbGQgJ1wiLmNvbmNhdChvLFwiJyBpbiBjYW5SZWNlaXZlXCIpXTtmb3IodmFyIGw9MCx1PU9iamVjdC52YWx1ZXMoZVtvXSk7bDx1Lmxlbmd0aDtsKyspe3ZhciBkPXVbbF0scD1mKEVhLnZhbGlkYXRlSlNPTk9iamVjdChkKSwyKSxoPXBbMF0sdj1wWzFdO2lmKCFoKXJldHVyblshMSx2XX19fXJldHVyblshMF19fV0pfSgpLEVhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxyPW4udmlkZW8saT1uLmF1ZGlvLG89bi5zY3JlZW5WaWRlbyxzPW4uc2NyZWVuQXVkaW8sYT1uLmN1c3RvbVZpZGVvLGM9bi5jdXN0b21BdWRpbzt0KHRoaXMsZSksdGhpcy52aWRlbz1yLHRoaXMuYXVkaW89aSx0aGlzLnNjcmVlblZpZGVvPW8sdGhpcy5zY3JlZW5BdWRpbz1zLHRoaXMuY3VzdG9tVmlkZW89YSx0aGlzLmN1c3RvbUF1ZGlvPWN9cmV0dXJuIG8oZSxbe2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdm9pZCAwIT09dGhpcy52aWRlbyYmKHQudmlkZW89dGhpcy52aWRlbyksdm9pZCAwIT09dGhpcy5hdWRpbyYmKHQuYXVkaW89dGhpcy5hdWRpbyksdm9pZCAwIT09dGhpcy5zY3JlZW5WaWRlbyYmKHQuc2NyZWVuVmlkZW89dGhpcy5zY3JlZW5WaWRlbyksdm9pZCAwIT09dGhpcy5zY3JlZW5BdWRpbyYmKHQuc2NyZWVuQXVkaW89dGhpcy5zY3JlZW5BdWRpbyksdm9pZCAwIT09dGhpcy5jdXN0b21WaWRlbyYmKHQuY3VzdG9tVmlkZW89bWEoe30sdGhpcy5jdXN0b21WaWRlbykpLHZvaWQgMCE9PXRoaXMuY3VzdG9tQXVkaW8mJih0LmN1c3RvbUF1ZGlvPW1hKHt9LHRoaXMuY3VzdG9tQXVkaW8pKSx0fX0se2tleTpcInRvSlNPTk9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHZvaWQgMCE9PXRoaXMudmlkZW8mJihlLnZpZGVvPXRoaXMudmlkZW8pLHZvaWQgMCE9PXRoaXMuYXVkaW8mJihlLmF1ZGlvPXRoaXMuYXVkaW8pLHZvaWQgMCE9PXRoaXMuc2NyZWVuVmlkZW8mJihlLnNjcmVlblZpZGVvPXRoaXMuc2NyZWVuVmlkZW8pLHZvaWQgMCE9PXRoaXMuc2NyZWVuQXVkaW8mJihlLnNjcmVlbkF1ZGlvPXRoaXMuc2NyZWVuQXVkaW8pLHZvaWQgMCE9PXRoaXMuY3VzdG9tVmlkZW8mJihlLmN1c3RvbVZpZGVvPW1hKHt9LHRoaXMuY3VzdG9tVmlkZW8pKSx2b2lkIDAhPT10aGlzLmN1c3RvbUF1ZGlvJiYoZS5jdXN0b21BdWRpbz1tYSh7fSx0aGlzLmN1c3RvbUF1ZGlvKSksZX19LHtrZXk6XCJ0b01pbmlmaWVkSlNPTk9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHZvaWQgMCE9PXRoaXMudmlkZW8mJihlLnY9dGhpcy52aWRlbyksdm9pZCAwIT09dGhpcy5hdWRpbyYmKGUuYT10aGlzLmF1ZGlvKSx2b2lkIDAhPT10aGlzLnNjcmVlblZpZGVvJiYoZS5zdj10aGlzLnNjcmVlblZpZGVvKSx2b2lkIDAhPT10aGlzLnNjcmVlbkF1ZGlvJiYoZS5zYT10aGlzLnNjcmVlbkF1ZGlvKSx2b2lkIDAhPT10aGlzLmN1c3RvbVZpZGVvJiYoZS5jdj1tYSh7fSx0aGlzLmN1c3RvbVZpZGVvKSksdm9pZCAwIT09dGhpcy5jdXN0b21BdWRpbyYmKGUuY2E9bWEoe30sdGhpcy5jdXN0b21BdWRpbykpLGV9fSx7a2V5Olwibm9ybWFsaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIGUmJjE9PT1PYmplY3Qua2V5cyhlKS5sZW5ndGgmJmVbXCIqXCJdPT09dH1yZXR1cm4hKCEwIT09dGhpcy52aWRlb3x8ITAhPT10aGlzLmF1ZGlvfHwhMCE9PXRoaXMuc2NyZWVuVmlkZW98fCEwIT09dGhpcy5zY3JlZW5BdWRpb3x8IWUodGhpcy5jdXN0b21WaWRlbywhMCl8fCFlKHRoaXMuY3VzdG9tQXVkaW8sITApKXx8KCExIT09dGhpcy52aWRlb3x8ITEhPT10aGlzLmF1ZGlvfHwhMSE9PXRoaXMuc2NyZWVuVmlkZW98fCExIT09dGhpcy5zY3JlZW5BdWRpb3x8IWUodGhpcy5jdXN0b21WaWRlbywhMSl8fCFlKHRoaXMuY3VzdG9tQXVkaW8sITEpKSYmdGhpc319XSxbe2tleTpcImZyb21Cb29sZWFuXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHt2aWRlbzp0LGF1ZGlvOnQsc2NyZWVuVmlkZW86dCxzY3JlZW5BdWRpbzp0LGN1c3RvbVZpZGVvOntcIipcIjp0fSxjdXN0b21BdWRpbzp7XCIqXCI6dH19KX19LHtrZXk6XCJmcm9tSlNPTk9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh7dmlkZW86dC52aWRlbyxhdWRpbzp0LmF1ZGlvLHNjcmVlblZpZGVvOnQuc2NyZWVuVmlkZW8sc2NyZWVuQXVkaW86dC5zY3JlZW5BdWRpbyxjdXN0b21WaWRlbzp2b2lkIDAhPT10LmN1c3RvbVZpZGVvP21hKHt9LHQuY3VzdG9tVmlkZW8pOnZvaWQgMCxjdXN0b21BdWRpbzp2b2lkIDAhPT10LmN1c3RvbUF1ZGlvP21hKHt9LHQuY3VzdG9tQXVkaW8pOnZvaWQgMH0pfX0se2tleTpcImZyb21NaW5pZmllZEpTT05PYmplY3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUoe3ZpZGVvOnQudixhdWRpbzp0LmEsc2NyZWVuVmlkZW86dC5zdixzY3JlZW5BdWRpbzp0LnNhLGN1c3RvbVZpZGVvOnQuY3YsY3VzdG9tQXVkaW86dC5jYX0pfX0se2tleTpcInZhbGlkYXRlSlNPTk9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoXCJib29sZWFuXCI9PXR5cGVvZiBlKXJldHVyblshMF07aWYoXCJvYmplY3RcIiE9PW4oZSkpcmV0dXJuWyExLFwiaW52YWxpZCAobm9uLW9iamVjdCwgbm9uLWJvb2xlYW4pIHZhbHVlIGluIGNhblJlY2VpdmVcIl07Zm9yKHZhciByPU9iamVjdC5rZXlzKGUpLGk9MCxvPXI7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV07aWYoIV9hLmluY2x1ZGVzKHMpKXJldHVyblshMSxcImludmFsaWQgbWVkaWEgdHlwZSAnXCIuY29uY2F0KHMsXCInIGluIGNhblJlY2VpdmVcIildO2lmKFNhLmluY2x1ZGVzKHMpKXtpZihcImJvb2xlYW5cIiE9dHlwZW9mIGVbc10pcmV0dXJuWyExLFwiaW52YWxpZCAobm9uLWJvb2xlYW4pIHZhbHVlIGZvciBtZWRpYSB0eXBlICdcIi5jb25jYXQocyxcIicgaW4gY2FuUmVjZWl2ZVwiKV19ZWxzZXtpZihcIm9iamVjdFwiIT09bihlW3NdKSlyZXR1cm5bITEsXCJpbnZhbGlkIChub24tb2JqZWN0KSB2YWx1ZSBmb3IgbWVkaWEgdHlwZSAnXCIuY29uY2F0KHMsXCInIGluIGNhblJlY2VpdmVcIildO2Zvcih2YXIgYT0wLGM9T2JqZWN0LnZhbHVlcyhlW3NdKTthPGMubGVuZ3RoO2ErKyl7aWYoXCJib29sZWFuXCIhPXR5cGVvZiBjW2FdKXJldHVyblshMSxcImludmFsaWQgKG5vbi1ib29sZWFuKSB2YWx1ZSBmb3IgZW50cnkgd2l0aGluICdcIi5jb25jYXQocyxcIicgaW4gY2FuUmVjZWl2ZVwiKV19aWYodCYmdm9pZCAwPT09ZVtzXVtcIipcIl0pcmV0dXJuWyExLCdjYW5SZWNlaXZlIFwiYmFzZVwiIHBlcm1pc3Npb24gbXVzdCBzcGVjaWZ5IFwiKlwiIGFzIGFuIGVudHJ5IHdpdGhpbiBcXCcnLmNvbmNhdChzLFwiJ1wiKV19fXJldHVybiB0JiZyLmxlbmd0aCE9PV9hLmxlbmd0aD9bITEsJ2NhblJlY2VpdmUgXCJiYXNlXCIgcGVybWlzc2lvbiBtdXN0IHNwZWNpZnkgYWxsIG1lZGlhIHR5cGVzOiAnLmNvbmNhdChfYS5qb2luKFwiLCBcIiksXCIgKG9yIGJlIHNldCB0byBhIGJvb2xlYW4gc2hvcnRoYW5kKVwiKV06WyEwXX19XSl9KCksVGE9W1wicmVzdWx0XCJdLE9hPVtcInByZXNlcnZlSWZyYW1lXCJdO2Z1bmN0aW9uIFBhKGUsdCl7dmFyIG49T2JqZWN0LmtleXMoZSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTt0JiYocj1yLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBBYShlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbdF0/YXJndW1lbnRzW3RdOnt9O3QlMj9QYShPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKHQpe3UoZSx0LG5bdF0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlBhKE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sdCkpfSkpfXJldHVybiBlfWZ1bmN0aW9uIGphKCl7dHJ5e3ZhciBlPSFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSwoZnVuY3Rpb24oKXt9KSkpfWNhdGNoKGUpe31yZXR1cm4oamE9ZnVuY3Rpb24oKXtyZXR1cm4hIWV9KSgpfWZ1bmN0aW9uIElhKGUsdCl7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdfHxlW1wiQEBpdGVyYXRvclwiXTtpZighbil7aWYoQXJyYXkuaXNBcnJheShlKXx8KG49ZnVuY3Rpb24oZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4geGEoZSx0KTt2YXIgbj17fS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1uJiZlLmNvbnN0cnVjdG9yJiYobj1lLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1ufHxcIlNldFwiPT09bj9BcnJheS5mcm9tKGUpOlwiQXJndW1lbnRzXCI9PT1ufHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKT94YShlLHQpOnZvaWQgMH19KGUpKXx8dCYmZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXtuJiYoZT1uKTt2YXIgcj0wLGk9ZnVuY3Rpb24oKXt9O3JldHVybntzOmksbjpmdW5jdGlvbigpe3JldHVybiByPj1lLmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6ZVtyKytdfX0sZTpmdW5jdGlvbihlKXt0aHJvdyBlfSxmOml9fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX12YXIgbyxzPSEwLGE9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtuPW4uY2FsbChlKX0sbjpmdW5jdGlvbigpe3ZhciBlPW4ubmV4dCgpO3JldHVybiBzPWUuZG9uZSxlfSxlOmZ1bmN0aW9uKGUpe2E9ITAsbz1lfSxmOmZ1bmN0aW9uKCl7dHJ5e3N8fG51bGw9PW4ucmV0dXJufHxuLnJldHVybigpfWZpbmFsbHl7aWYoYSl0aHJvdyBvfX19fWZ1bmN0aW9uIHhhKGUsdCl7KG51bGw9PXR8fHQ+ZS5sZW5ndGgpJiYodD1lLmxlbmd0aCk7Zm9yKHZhciBuPTAscj1BcnJheSh0KTtuPHQ7bisrKXJbbl09ZVtuXTtyZXR1cm4gcn12YXIgTGE9e307dmFyIERhPVwidmlkZW9cIixOYT1cInZvaWNlXCIsUmE9aXMoKT97ZGF0YTp7fX06e2RhdGE6e30sdG9wb2xvZ3k6XCJub25lXCJ9LEZhPXtwcmVzZW50OjAsaGlkZGVuOjB9LEJhPXttYXhCaXRyYXRlOnttaW46MWU1LG1heDoyNWU1fSxtYXhGcmFtZXJhdGU6e21pbjoxLG1heDozMH0sc2NhbGVSZXNvbHV0aW9uRG93bkJ5OnttaW46MSxtYXg6OH19LFVhPU9iamVjdC5rZXlzKEJhKSxWYT1bXCJzdGF0ZVwiLFwidm9sdW1lXCIsXCJzaW11bGNhc3RFbmNvZGluZ3NcIl0sSmE9e2FuZHJvaWRJbkNhbGxOb3RpZmljYXRpb246e3RpdGxlOlwic3RyaW5nXCIsc3VidGl0bGU6XCJzdHJpbmdcIixpY29uTmFtZTpcInN0cmluZ1wiLGRpc2FibGVGb3JDdXN0b21PdmVycmlkZTpcImJvb2xlYW5cIn0sZGlzYWJsZUF1dG9EZXZpY2VNYW5hZ2VtZW50OnthdWRpbzpcImJvb2xlYW5cIix2aWRlbzpcImJvb2xlYW5cIn19LCRhPXtpZDp7aWNvblBhdGg6XCJzdHJpbmdcIixpY29uUGF0aERhcmtNb2RlOlwic3RyaW5nXCIsbGFiZWw6XCJzdHJpbmdcIix0b29sdGlwOlwic3RyaW5nXCIsdmlzdWFsU3RhdGU6XCInZGVmYXVsdCcgfCAnc2lkZWJhci1vcGVuJyB8ICdhY3RpdmUnXCJ9fSxxYT17aWQ6e2FsbG93Olwic3RyaW5nXCIsY29udHJvbGxlZEJ5OlwiJyonIHwgJ293bmVycycgfCBzdHJpbmdbXVwiLGNzcDpcInN0cmluZ1wiLGljb25VUkw6XCJzdHJpbmdcIixsYWJlbDpcInN0cmluZ1wiLGxvYWRpbmc6XCInZWFnZXInIHwgJ2xhenknXCIsbG9jYXRpb246XCInbWFpbicgfCAnc2lkZWJhcidcIixuYW1lOlwic3RyaW5nXCIscmVmZXJyZXJQb2xpY3k6XCJzdHJpbmdcIixzYW5kYm94Olwic3RyaW5nXCIsc3JjOlwic3RyaW5nXCIsc3JjZG9jOlwic3RyaW5nXCIsc2hhcmVkOlwic3RyaW5nW10gfCAnb3duZXJzJyB8IGJvb2xlYW5cIn19LHphPXtjdXN0b21JbnRlZ3JhdGlvbnM6e3ZhbGlkYXRlOnZjLGhlbHA6aGMoKX0sY3VzdG9tVHJheUJ1dHRvbnM6e3ZhbGlkYXRlOmZjLGhlbHA6XCJjdXN0b21UcmF5QnV0dG9ucyBzaG91bGQgYmUgYSBkaWN0aW9uYXJ5IG9mIHRoZSB0eXBlIFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeSgkYSkpfSx1cmw6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfSxoZWxwOlwidXJsIHNob3VsZCBiZSBhIHN0cmluZ1wifSxiYXNlVXJsOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0saGVscDpcImJhc2VVcmwgc2hvdWxkIGJlIGEgc3RyaW5nXCJ9LHRva2VuOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0saGVscDpcInRva2VuIHNob3VsZCBiZSBhIHN0cmluZ1wiLHF1ZXJ5U3RyaW5nOlwidFwifSxkYWlseUNvbmZpZzp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIHQudmFsaWRhdGVEYWlseUNvbmZpZyhlKSwhMH1jYXRjaChlKXtjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHZhbGlkYXRlIGRhaWx5Q29uZmlnXCIsZSl9cmV0dXJuITF9LGhlbHA6XCJVbnN1cHBvcnRlZCBkYWlseUNvbmZpZy4gQ2hlY2sgZXJyb3IgbG9ncyBmb3IgZGV0YWlsZWQgaW5mby5cIn0scmVhY3ROYXRpdmVDb25maWc6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBnYyhlLEphKX0saGVscDpcInJlYWN0TmF0aXZlQ29uZmlnIHNob3VsZCBsb29rIGxpa2UgXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KEphKSxcIiwgYWxsIGZpZWxkcyBvcHRpb25hbFwiKX0sbGFuZzp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuW1wiZGFcIixcImRlXCIsXCJlbi11c1wiLFwiZW5cIixcImVzXCIsXCJmaVwiLFwiZnJcIixcIml0XCIsXCJqcFwiLFwia2FcIixcIm5sXCIsXCJub1wiLFwicGxcIixcInB0XCIsXCJwdC1CUlwiLFwicnVcIixcInN2XCIsXCJ0clwiLFwidXNlclwiXS5pbmNsdWRlcyhlKX0saGVscDpcImxhbmd1YWdlIG5vdCBzdXBwb3J0ZWQuIE9wdGlvbnMgYXJlOiBkYSwgZGUsIGVuLXVzLCBlbiwgZXMsIGZpLCBmciwgaXQsIGpwLCBrYSwgbmwsIG5vLCBwbCwgcHQsIHB0LUJSLCBydSwgc3YsIHRyLCB1c2VyXCJ9LHVzZXJOYW1lOiEwLHVzZXJEYXRhOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXt0cnl7cmV0dXJuIGljKGUpLCEwfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKGUpLCExfX0saGVscDpcImludmFsaWQgdXNlckRhdGEgdHlwZSBwcm92aWRlZFwifSxzdGFydFZpZGVvT2ZmOiEwLHN0YXJ0QXVkaW9PZmY6ITAsYWxsb3dMb2NhbFZpZGVvOiEwLGFsbG93TG9jYWxBdWRpbzohMCxhY3RpdmVTcGVha2VyTW9kZTohMCxzaG93TGVhdmVCdXR0b246ITAsc2hvd0xvY2FsVmlkZW86ITAsc2hvd1BhcnRpY2lwYW50c0JhcjohMCxzaG93RnVsbHNjcmVlbkJ1dHRvbjohMCxzaG93VXNlck5hbWVDaGFuZ2VVSTohMCxpZnJhbWVTdHlsZTohMCxjdXN0b21MYXlvdXQ6ITAsY3NzRmlsZTohMCxjc3NUZXh0OiEwLGJvZHlDbGFzczohMCx2aWRlb1NvdXJjZTp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIHQuX3ByZWxvYWRDYWNoZS5hbGxvd0xvY2FsVmlkZW89ZSwhMDt2YXIgbjtpZihlIGluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayl0Ll9zaGFyZWRUcmFja3MudmlkZW9UcmFjaz1lLG49e2N1c3RvbVRyYWNrOlFvfTtlbHNle2lmKGRlbGV0ZSB0Ll9zaGFyZWRUcmFja3MudmlkZW9UcmFjayxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gY29uc29sZS5lcnJvcihcInZpZGVvU291cmNlIG11c3QgYmUgYSBNZWRpYVN0cmVhbVRyYWNrLCBib29sZWFuLCBvciBhIHN0cmluZ1wiKSwhMTtuPXtkZXZpY2VJZDplfX1yZXR1cm4gdC5fdXBkYXRlUHJlbG9hZENhY2hlSW5wdXRTZXR0aW5ncyh7dmlkZW86e3NldHRpbmdzOm59fSwhMSksITB9fSxhdWRpb1NvdXJjZTp7dmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGUpcmV0dXJuIHQuX3ByZWxvYWRDYWNoZS5hbGxvd0xvY2FsQXVkaW89ZSwhMDt2YXIgbjtpZihlIGluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayl0Ll9zaGFyZWRUcmFja3MuYXVkaW9UcmFjaz1lLG49e2N1c3RvbVRyYWNrOlFvfTtlbHNle2lmKGRlbGV0ZSB0Ll9zaGFyZWRUcmFja3MuYXVkaW9UcmFjayxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gY29uc29sZS5lcnJvcihcImF1ZGlvU291cmNlIG11c3QgYmUgYSBNZWRpYVN0cmVhbVRyYWNrLCBib29sZWFuLCBvciBhIHN0cmluZ1wiKSwhMTtuPXtkZXZpY2VJZDplfX1yZXR1cm4gdC5fdXBkYXRlUHJlbG9hZENhY2hlSW5wdXRTZXR0aW5ncyh7YXVkaW86e3NldHRpbmdzOm59fSwhMSksITB9fSxzdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHk6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3ByZWxvYWRDYWNoZS5zdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHk9ZSwhMH19LHRoZW1lOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1bXCJhY2NlbnRcIixcImFjY2VudFRleHRcIixcImJhY2tncm91bmRcIixcImJhY2tncm91bmRBY2NlbnRcIixcImJhc2VUZXh0XCIsXCJib3JkZXJcIixcIm1haW5BcmVhQmdcIixcIm1haW5BcmVhQmdBY2NlbnRcIixcIm1haW5BcmVhVGV4dFwiLFwic3VwcG9ydGl2ZVRleHRcIl0scj1mdW5jdGlvbihlKXtmb3IodmFyIG49MCxyPU9iamVjdC5rZXlzKGUpO248ci5sZW5ndGg7bisrKXt2YXIgaT1yW25dO2lmKCF0LmluY2x1ZGVzKGkpKXJldHVybiBjb25zb2xlLmVycm9yKCd1bnN1cHBvcnRlZCBjb2xvciBcIicuY29uY2F0KGksJ1wiLiBWYWxpZCBjb2xvcnM6ICcpLmNvbmNhdCh0LmpvaW4oXCIsIFwiKSkpLCExO2lmKCFlW2ldLm1hdGNoKC9eI1swLTlhLWZdezZ9fCNbMC05YS1mXXszfSQvaSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJcIi5jb25jYXQoaSwnIHRoZW1lIGNvbG9yIHNob3VsZCBiZSBwcm92aWRlZCBpbiB2YWxpZCBoZXggY29sb3IgZm9ybWF0LiBSZWNlaXZlZDogXCInKS5jb25jYXQoZVtpXSwnXCInKSksITF9cmV0dXJuITB9O3JldHVyblwib2JqZWN0XCI9PT1uKGUpJiYoXCJsaWdodFwiaW4gZSYmXCJkYXJrXCJpbiBlfHxcImNvbG9yc1wiaW4gZSk/XCJsaWdodFwiaW4gZSYmXCJkYXJrXCJpbiBlP1wiY29sb3JzXCJpbiBlLmxpZ2h0P1wiY29sb3JzXCJpbiBlLmRhcms/cihlLmxpZ2h0LmNvbG9ycykmJnIoZS5kYXJrLmNvbG9ycyk6KGNvbnNvbGUuZXJyb3IoJ0RhcmsgdGhlbWUgaXMgbWlzc2luZyBcImNvbG9yc1wiIHByb3BlcnR5LicsZSksITEpOihjb25zb2xlLmVycm9yKCdMaWdodCB0aGVtZSBpcyBtaXNzaW5nIFwiY29sb3JzXCIgcHJvcGVydHkuJyxlKSwhMSk6cihlLmNvbG9ycyk6KGNvbnNvbGUuZXJyb3IoJ1RoZW1lIG11c3QgY29udGFpbiBlaXRoZXIgYm90aCBcImxpZ2h0XCIgYW5kIFwiZGFya1wiIHByb3BlcnRpZXMsIG9yIFwiY29sb3JzXCIuJyxlKSwhMSl9LGhlbHA6XCJ1bnN1cHBvcnRlZCB0aGVtZSBjb25maWd1cmF0aW9uLiBDaGVjayBlcnJvciBsb2dzIGZvciBkZXRhaWxlZCBpbmZvLlwifSxsYXlvdXRDb25maWc6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe2lmKFwiZ3JpZFwiaW4gZSl7dmFyIHQ9ZS5ncmlkO2lmKFwibWF4VGlsZXNQZXJQYWdlXCJpbiB0KXtpZighTnVtYmVyLmlzSW50ZWdlcih0Lm1heFRpbGVzUGVyUGFnZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJncmlkLm1heFRpbGVzUGVyUGFnZSBzaG91bGQgYmUgYW4gaW50ZWdlci4gWW91IHBhc3NlZCBcIi5jb25jYXQodC5tYXhUaWxlc1BlclBhZ2UsXCIuXCIpKSwhMTtpZih0Lm1heFRpbGVzUGVyUGFnZT40OSlyZXR1cm4gY29uc29sZS5lcnJvcihcImdyaWQubWF4VGlsZXNQZXJQYWdlIGNhbid0IGJlIGxhcmdlciB0aGFuIDQ5IHdpdGhvdXQgc2FjcmlmaWNpbmcgYnJvd3NlciBwZXJmb3JtYW5jZS4gUGxlYXNlIGNvbnRhY3QgdXMgYXQgaHR0cHM6Ly93d3cuZGFpbHkuY28vY29udGFjdCB0byB0YWxrIGFib3V0IHlvdXIgdXNlIGNhc2UuXCIpLCExfWlmKFwibWluVGlsZXNQZXJQYWdlXCJpbiB0KXtpZighTnVtYmVyLmlzSW50ZWdlcih0Lm1pblRpbGVzUGVyUGFnZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJncmlkLm1pblRpbGVzUGVyUGFnZSBzaG91bGQgYmUgYW4gaW50ZWdlci4gWW91IHBhc3NlZCBcIi5jb25jYXQodC5taW5UaWxlc1BlclBhZ2UsXCIuXCIpKSwhMTtpZih0Lm1pblRpbGVzUGVyUGFnZTwxKXJldHVybiBjb25zb2xlLmVycm9yKFwiZ3JpZC5taW5UaWxlc1BlclBhZ2UgY2FuJ3QgYmUgbG93ZXIgdGhhbiAxLlwiKSwhMTtpZihcIm1heFRpbGVzUGVyUGFnZVwiaW4gdCYmdC5taW5UaWxlc1BlclBhZ2U+dC5tYXhUaWxlc1BlclBhZ2UpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJncmlkLm1pblRpbGVzUGVyUGFnZSBjYW4ndCBiZSBoaWdoZXIgdGhhbiBncmlkLm1heFRpbGVzUGVyUGFnZS5cIiksITF9fXJldHVybiEwfSxoZWxwOlwidW5zdXBwb3J0ZWQgbGF5b3V0Q29uZmlnLiBDaGVjayBlcnJvciBsb2dzIGZvciBkZXRhaWxlZCBpbmZvLlwifSxyZWNlaXZlU2V0dGluZ3M6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBvYyhlLHthbGxvd0FsbFBhcnRpY2lwYW50c0tleTohMX0pfSxoZWxwOnBjKHthbGxvd0FsbFBhcnRpY2lwYW50c0tleTohMX0pfSxzZW5kU2V0dGluZ3M6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFmdW5jdGlvbihlLHQpe3RyeXtyZXR1cm4gdC52YWxpZGF0ZVVwZGF0ZVNlbmRTZXR0aW5ncyhlKSwhMH1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB2YWxpZGF0ZSBzZW5kIHNldHRpbmdzXCIsZSksITF9fShlLHQpJiYodC5fcHJlbG9hZENhY2hlLnNlbmRTZXR0aW5ncz1lLCEwKX0saGVscDpcIkludmFsaWQgc2VuZFNldHRpbmdzIHByb3ZpZGVkLiBDaGVjayBlcnJvciBsb2dzIGZvciBkZXRhaWxlZCBpbmZvLlwifSxpbnB1dFNldHRpbmdzOnt2YWxpZGF0ZTpmdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiEhc2MoZSkmJih0Ll9pbnB1dFNldHRpbmdzfHwodC5faW5wdXRTZXR0aW5ncz17fSksYWMoZSxudWxsPT09KG49dC5wcm9wZXJ0aWVzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5kYWlseUNvbmZpZyx0Ll9zaGFyZWRUcmFja3MpLHQuX3VwZGF0ZVByZWxvYWRDYWNoZUlucHV0U2V0dGluZ3MoZSwhMCksITApfSxoZWxwOmRjKCl9LGxheW91dDp7dmFsaWRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJjdXN0b20tdjFcIj09PWV8fFwiYnJvd3NlclwiPT09ZXx8XCJub25lXCI9PT1lfSxoZWxwOidsYXlvdXQgbWF5IG9ubHkgYmUgc2V0IHRvIFwiY3VzdG9tLXYxXCInLHF1ZXJ5U3RyaW5nOlwibGF5b3V0XCJ9LGVtYjp7cXVlcnlTdHJpbmc6XCJlbWJcIn0sZW1iSHJlZjp7cXVlcnlTdHJpbmc6XCJlbWJIcmVmXCJ9LGRhaWx5SnNWZXJzaW9uOntxdWVyeVN0cmluZzpcImRhaWx5SnNWZXJzaW9uXCJ9LHByb3h5OntxdWVyeVN0cmluZzpcInByb3h5XCJ9LHN0cmljdE1vZGU6ITAsYWxsb3dNdWx0aXBsZUNhbGxJbnN0YW5jZXM6ITB9LFdhPXtzdHlsZXM6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWlmKFwiY2FtXCIhPT10JiZcInNjcmVlblwiIT09dClyZXR1cm4hMTtpZihlLmNhbSlmb3IodmFyIG4gaW4gZS5jYW0paWYoXCJkaXZcIiE9PW4mJlwidmlkZW9cIiE9PW4pcmV0dXJuITE7aWYoZS5zY3JlZW4pZm9yKHZhciByIGluIGUuc2NyZWVuKWlmKFwiZGl2XCIhPT1yJiZcInZpZGVvXCIhPT1yKXJldHVybiExO3JldHVybiEwfSxoZWxwOlwic3R5bGVzIGZvcm1hdCBzaG91bGQgYmUgYSBzdWJzZXQgb2Y6IHsgY2FtOiB7ZGl2OiB7fSwgdmlkZW86IHt9fSwgc2NyZWVuOiB7ZGl2OiB7fSwgdmlkZW86IHt9fSB9XCJ9LHNldFN1YnNjcmliZWRUcmFja3M6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUsdCl7aWYodC5fcHJlbG9hZENhY2hlLnN1YnNjcmliZVRvVHJhY2tzQXV0b21hdGljYWxseSlyZXR1cm4hMTt2YXIgbj1bITAsITEsXCJzdGFnZWRcIl07aWYobi5pbmNsdWRlcyhlKXx8IWlzKCkmJlwiYXZhdGFyXCI9PT1lKXJldHVybiEwO3ZhciByPVtcImF1ZGlvXCIsXCJ2aWRlb1wiLFwic2NyZWVuQXVkaW9cIixcInNjcmVlblZpZGVvXCIsXCJybXBBdWRpb1wiLFwicm1wVmlkZW9cIl0saT1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdO2Zvcih2YXIgbyBpbiBlKWlmKFwiY3VzdG9tXCI9PT1vKXtpZighbi5pbmNsdWRlcyhlW29dKSYmIWkoZVtvXSwhMCkpcmV0dXJuITF9ZWxzZXt2YXIgcz0hdCYmIXIuaW5jbHVkZXMobyksYT0hbi5pbmNsdWRlcyhlW29dKTtpZihzfHxhKXJldHVybiExfXJldHVybiEwfTtyZXR1cm4gaShlKX0saGVscDpcInNldFN1YnNjcmliZWRUcmFja3MgY2Fubm90IGJlIHVzZWQgd2hlbiBzZXRTdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHkgaXMgZW5hYmxlZCwgYW5kIHNob3VsZCBiZSBvZiB0aGUgZm9ybTogXCIrXCJ0cnVlXCIuY29uY2F0KGlzKCk/XCJcIjpcIiB8ICdhdmF0YXInXCIsXCIgfCBmYWxzZSB8ICdzdGFnZWQnIHwgeyBbYXVkaW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbdmlkZW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbc2NyZWVuQXVkaW86IHRydWV8ZmFsc2V8J3N0YWdlZCddLCBbc2NyZWVuVmlkZW86IHRydWV8ZmFsc2V8J3N0YWdlZCddIH1cIil9LHNldEF1ZGlvOiEwLHNldFZpZGVvOiEwLHNldFNjcmVlblNoYXJlOnt2YWxpZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4hMT09PWV9LGhlbHA6XCJzZXRTY3JlZW5TaGFyZSBtdXN0IGJlIGZhbHNlLCBhcyBpdCdzIG9ubHkgbWVhbnQgZm9yIHN0b3BwaW5nIHJlbW90ZSBwYXJ0aWNpcGFudHMnIHNjcmVlbiBzaGFyZXNcIn0sZWplY3Q6ITAsdXBkYXRlUGVybWlzc2lvbnM6e3ZhbGlkYXRlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49T2JqZWN0LmVudHJpZXMoZSk7dDxuLmxlbmd0aDt0Kyspe3ZhciByPWYoblt0XSwyKSxpPXJbMF0sbz1yWzFdO3N3aXRjaChpKXtjYXNlXCJoYXNQcmVzZW5jZVwiOmlmKFwiYm9vbGVhblwiIT10eXBlb2YgbylyZXR1cm4hMTticmVhaztjYXNlXCJjYW5TZW5kXCI6aWYobyBpbnN0YW5jZW9mIFNldHx8byBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KG8pKXt2YXIgcyxhPVtcInZpZGVvXCIsXCJhdWRpb1wiLFwic2NyZWVuVmlkZW9cIixcInNjcmVlbkF1ZGlvXCIsXCJjdXN0b21WaWRlb1wiLFwiY3VzdG9tQXVkaW9cIl0sYz1JYShvKTt0cnl7Zm9yKGMucygpOyEocz1jLm4oKSkuZG9uZTspe3ZhciBsPXMudmFsdWU7aWYoIWEuaW5jbHVkZXMobCkpcmV0dXJuITF9fWNhdGNoKGUpe2MuZShlKX1maW5hbGx5e2MuZigpfX1lbHNlIGlmKFwiYm9vbGVhblwiIT10eXBlb2YgbylyZXR1cm4hMTsobyBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KG8pKSYmKGUuY2FuU2VuZD1uZXcgU2V0KG8pKTticmVhaztjYXNlXCJjYW5SZWNlaXZlXCI6dmFyIHU9ZihDYS52YWxpZGF0ZUpTT05PYmplY3QobyksMiksZD11WzBdLHA9dVsxXTtpZighZClyZXR1cm4gY29uc29sZS5lcnJvcihwKSwhMTticmVhaztjYXNlXCJjYW5BZG1pblwiOmlmKG8gaW5zdGFuY2VvZiBTZXR8fG8gaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShvKSl7dmFyIGgsdj1bXCJwYXJ0aWNpcGFudHNcIixcInN0cmVhbWluZ1wiLFwidHJhbnNjcmlwdGlvblwiXSxnPUlhKG8pO3RyeXtmb3IoZy5zKCk7IShoPWcubigpKS5kb25lOyl7dmFyIG09aC52YWx1ZTtpZighdi5pbmNsdWRlcyhtKSlyZXR1cm4hMX19Y2F0Y2goZSl7Zy5lKGUpfWZpbmFsbHl7Zy5mKCl9fWVsc2UgaWYoXCJib29sZWFuXCIhPXR5cGVvZiBvKXJldHVybiExOyhvIGluc3RhbmNlb2YgQXJyYXl8fEFycmF5LmlzQXJyYXkobykpJiYoZS5jYW5BZG1pbj1uZXcgU2V0KG8pKTticmVhaztkZWZhdWx0OnJldHVybiExfX1yZXR1cm4hMH0saGVscDpcInVwZGF0ZVBlcm1pc3Npb25zIGNhbiB0YWtlIGhhc1ByZXNlbmNlLCBjYW5TZW5kLCBjYW5SZWNlaXZlLCBhbmQgY2FuQWRtaW4gcGVybWlzc2lvbnMuIGhhc1ByZXNlbmNlIG11c3QgYmUgYSBib29sZWFuLiBjYW5TZW5kIGNhbiBiZSBhIGJvb2xlYW4gb3IgYW4gQXJyYXkgb3IgU2V0IG9mIG1lZGlhIHR5cGVzICh2aWRlbywgYXVkaW8sIHNjcmVlblZpZGVvLCBzY3JlZW5BdWRpbywgY3VzdG9tVmlkZW8sIGN1c3RvbUF1ZGlvKS4gY2FuUmVjZWl2ZSBtdXN0IGJlIGFuIG9iamVjdCBzcGVjaWZ5aW5nIGJhc2UsIGJ5VXNlcklkLCBhbmQvb3IgYnlQYXJ0aWNpcGFudElkIGZpZWxkcyAoc2VlIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgZGV0YWlscykuIGNhbkFkbWluIGNhbiBiZSBhIGJvb2xlYW4gb3IgYW4gQXJyYXkgb3IgU2V0IG9mIGFkbWluIHR5cGVzIChwYXJ0aWNpcGFudHMsIHN0cmVhbWluZywgdHJhbnNjcmlwdGlvbikuXCJ9fTtQcm9taXNlLmFueXx8KFByb21pc2UuYW55PWZ1bmN0aW9uKCl7dmFyIGU9cCgoZnVuY3Rpb24qKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXt2YXIgcj1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGkpe3JldHVybiBQcm9taXNlLnJlc29sdmUoaSkudGhlbigoZnVuY3Rpb24oZSl7dChlKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7ci5wdXNoKHQpLHIubGVuZ3RoPT09ZS5sZW5ndGgmJm4ocil9KSl9KSl9KSl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkpO3ZhciBIYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSl7dmFyIG4saSxvLGMsbCxkLGg9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKHQodGhpcyxyKSxvPXRoaXMsYz1hKGM9ciksdShpPXMobyxqYSgpP1JlZmxlY3QuY29uc3RydWN0KGMsbHx8W10sYShvKS5jb25zdHJ1Y3Rvcik6Yy5hcHBseShvLGwpKSxcInN0YXJ0TGlzdGVuaW5nRm9yRGV2aWNlQ2hhbmdlc1wiLChmdW5jdGlvbigpe2RhKGkuaGFuZGxlRGV2aWNlQ2hhbmdlKX0pKSx1KGksXCJzdG9wTGlzdGVuaW5nRm9yRGV2aWNlQ2hhbmdlc1wiLChmdW5jdGlvbigpe3BhKGkuaGFuZGxlRGV2aWNlQ2hhbmdlKX0pKSx1KGksXCJoYW5kbGVEZXZpY2VDaGFuZ2VcIiwoZnVuY3Rpb24oZSl7ZT1lLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfSkpLGkuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOlwiYXZhaWxhYmxlLWRldmljZXMtdXBkYXRlZFwiLGF2YWlsYWJsZURldmljZXM6ZX0pfSkpLHUoaSxcImhhbmRsZU5hdGl2ZUFwcFN0YXRlQ2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgZT1wKChmdW5jdGlvbiooZSl7aWYoXCJkZXN0cm95ZWRcIj09PWUpcmV0dXJuIGNvbnNvbGUud2FybihcIkFwcCBoYXMgYmVlbiBkZXN0cm95ZWQgYmVmb3JlIGxlYXZpbmcgdGhlIG1lZXRpbmcuIENsZWFuaW5nIHVwIGFsbCB0aGUgcmVzb3VyY2VzIVwiKSx2b2lkKHlpZWxkIGkuZGVzdHJveSgpKTt2YXIgdD1cImFjdGl2ZVwiPT09ZTtpLmRpc2FibGVSZWFjdE5hdGl2ZUF1dG9EZXZpY2VNYW5hZ2VtZW50KFwidmlkZW9cIil8fCh0P2kuY2FtVW5tdXRlZEJlZm9yZUxvc2luZ05hdGl2ZUFjdGl2ZVN0YXRlJiZpLnNldExvY2FsVmlkZW8oITApOihpLmNhbVVubXV0ZWRCZWZvcmVMb3NpbmdOYXRpdmVBY3RpdmVTdGF0ZT1pLmxvY2FsVmlkZW8oKSxpLmNhbVVubXV0ZWRCZWZvcmVMb3NpbmdOYXRpdmVBY3RpdmVTdGF0ZSYmaS5zZXRMb2NhbFZpZGVvKCExKSkpfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpKSx1KGksXCJoYW5kbGVOYXRpdmVBdWRpb0ZvY3VzQ2hhbmdlXCIsKGZ1bmN0aW9uKGUpe2kuZGlzYWJsZVJlYWN0TmF0aXZlQXV0b0RldmljZU1hbmFnZW1lbnQoXCJhdWRpb1wiKXx8KGkuX2hhc05hdGl2ZUF1ZGlvRm9jdXM9ZSxpLnRvZ2dsZVBhcnRpY2lwYW50QXVkaW9CYXNlZE9uTmF0aXZlQXVkaW9Gb2N1cygpLGkuX2hhc05hdGl2ZUF1ZGlvRm9jdXM/aS5taWNVbm11dGVkQmVmb3JlTG9zaW5nTmF0aXZlQXVkaW9Gb2N1cyYmaS5zZXRMb2NhbEF1ZGlvKCEwKTooaS5taWNVbm11dGVkQmVmb3JlTG9zaW5nTmF0aXZlQXVkaW9Gb2N1cz1pLmxvY2FsQXVkaW8oKSxpLnNldExvY2FsQXVkaW8oITEpKSl9KSksdShpLFwiaGFuZGxlTmF0aXZlU3lzdGVtU2NyZWVuQ2FwdHVyZVN0b3BcIiwoZnVuY3Rpb24oKXtpLnN0b3BTY3JlZW5TaGFyZSgpfSkpLGkuc3RyaWN0TW9kZT12b2lkIDA9PT1oLnN0cmljdE1vZGV8fGguc3RyaWN0TW9kZSxpLmFsbG93TXVsdGlwbGVDYWxsSW5zdGFuY2VzPW51bGwhPT0obj1oLmFsbG93TXVsdGlwbGVDYWxsSW5zdGFuY2VzKSYmdm9pZCAwIT09biYmbixPYmplY3Qua2V5cyhMYSkubGVuZ3RoJiYoaS5fbG9nRHVwbGljYXRlSW5zdGFuY2VBdHRlbXB0KCksIWkuYWxsb3dNdWx0aXBsZUNhbGxJbnN0YW5jZXMpKXtpZihpLnN0cmljdE1vZGUpdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIERhaWx5SWZyYW1lIGluc3RhbmNlcyBhcmUgbm90IGFsbG93ZWRcIik7Y29uc29sZS53YXJuKFwiVXNpbmcgc3RyaWN0TW9kZTogZmFsc2UgdG8gYWxsb3cgbXVsdGlwbGUgY2FsbCBpbnN0YW5jZXMgaXMgbm93IGRlcHJlY2F0ZWQuIFNldCBgYWxsb3dNdWx0aXBsZUNhbGxJbnN0YW5jZXM6IHRydWVgXCIpfWlmKHdpbmRvdy5fZGFpbHl8fCh3aW5kb3cuX2RhaWx5PXtwZW5kaW5nczpbXSxpbnN0YW5jZXM6e319KSxpLmNhbGxDbGllbnRJZD1OKCksTGFbKGQ9aSkuY2FsbENsaWVudElkXT1kLHdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW2kuY2FsbENsaWVudElkXT17fSxpLl9zaGFyZWRUcmFja3M9e30sd2luZG93Ll9kYWlseS5pbnN0YW5jZXNbaS5jYWxsQ2xpZW50SWRdLnRyYWNrcz1pLl9zaGFyZWRUcmFja3MsaC5kYWlseUpzVmVyc2lvbj1yLnZlcnNpb24oKSxpLl9pZnJhbWU9ZSxpLl9jYWxsT2JqZWN0TW9kZT1cIm5vbmVcIj09PWgubGF5b3V0JiYhaS5faWZyYW1lLGkuX3ByZWxvYWRDYWNoZT17c3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5OiEwLG91dHB1dERldmljZUlkOm51bGwsaW5wdXRTZXR0aW5nczpudWxsLHNlbmRTZXR0aW5nczpudWxsLHZpZGVvVHJhY2tGb3JOZXR3b3JrQ29ubmVjdGl2aXR5VGVzdDpudWxsLHZpZGVvVHJhY2tGb3JDb25uZWN0aW9uUXVhbGl0eVRlc3Q6bnVsbH0sdm9pZCAwIT09aC5zaG93TG9jYWxWaWRlbz9pLl9jYWxsT2JqZWN0TW9kZT9jb25zb2xlLmVycm9yKFwic2hvd0xvY2FsVmlkZW8gaXMgbm90IGF2YWlsYWJsZSBpbiBjYWxsIG9iamVjdCBtb2RlXCIpOmkuX3Nob3dMb2NhbFZpZGVvPSEhaC5zaG93TG9jYWxWaWRlbzppLl9zaG93TG9jYWxWaWRlbz0hMCx2b2lkIDAhPT1oLnNob3dQYXJ0aWNpcGFudHNCYXI/aS5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dQYXJ0aWNpcGFudHNCYXIgaXMgbm90IGF2YWlsYWJsZSBpbiBjYWxsIG9iamVjdCBtb2RlXCIpOmkuX3Nob3dQYXJ0aWNpcGFudHNCYXI9ISFoLnNob3dQYXJ0aWNpcGFudHNCYXI6aS5fc2hvd1BhcnRpY2lwYW50c0Jhcj0hMCx2b2lkIDAhPT1oLmN1c3RvbUludGVncmF0aW9ucz9pLl9jYWxsT2JqZWN0TW9kZT9jb25zb2xlLmVycm9yKFwiY3VzdG9tSW50ZWdyYXRpb25zIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTppLl9jdXN0b21JbnRlZ3JhdGlvbnM9aC5jdXN0b21JbnRlZ3JhdGlvbnM6aS5fY3VzdG9tSW50ZWdyYXRpb25zPXt9LHZvaWQgMCE9PWguY3VzdG9tVHJheUJ1dHRvbnM/aS5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcImN1c3RvbVRyYXlCdXR0b25zIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTppLl9jdXN0b21UcmF5QnV0dG9ucz1oLmN1c3RvbVRyYXlCdXR0b25zOmkuX2N1c3RvbVRyYXlCdXR0b25zPXt9LHZvaWQgMCE9PWguYWN0aXZlU3BlYWtlck1vZGU/aS5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcImFjdGl2ZVNwZWFrZXJNb2RlIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTppLl9hY3RpdmVTcGVha2VyTW9kZT0hIWguYWN0aXZlU3BlYWtlck1vZGU6aS5fYWN0aXZlU3BlYWtlck1vZGU9ITEsaC5yZWNlaXZlU2V0dGluZ3M/aS5fY2FsbE9iamVjdE1vZGU/aS5fcmVjZWl2ZVNldHRpbmdzPWgucmVjZWl2ZVNldHRpbmdzOmNvbnNvbGUuZXJyb3IoXCJyZWNlaXZlU2V0dGluZ3MgaXMgb25seSBhdmFpbGFibGUgaW4gY2FsbCBvYmplY3QgbW9kZVwiKTppLl9yZWNlaXZlU2V0dGluZ3M9e30saS52YWxpZGF0ZVByb3BlcnRpZXMoaCksaS5wcm9wZXJ0aWVzPUFhKHt9LGgpLGkuX2lucHV0U2V0dGluZ3N8fChpLl9pbnB1dFNldHRpbmdzPXt9KSxpLl9jYWxsT2JqZWN0TG9hZGVyPWkuX2NhbGxPYmplY3RNb2RlP25ldyBVcyhpLmNhbGxDbGllbnRJZCk6bnVsbCxpLl9jYWxsU3RhdGU9dGksaS5faXNQcmVwYXJpbmdUb0pvaW49ITEsaS5fYWNjZXNzU3RhdGU9e2FjY2VzczpmaX0saS5fbWVldGluZ1Nlc3Npb25TdW1tYXJ5PXt9LGkuX2ZpbmFsU3VtbWFyeU9mUHJldlNlc3Npb249e30saS5fbWVldGluZ1Nlc3Npb25TdGF0ZT1fYyhSYSxpLl9jYWxsT2JqZWN0TW9kZSksaS5fbmF0aXZlSW5DYWxsQXVkaW9Nb2RlPURhLGkuX3BhcnRpY2lwYW50cz17fSxpLl9pc1NjcmVlblNoYXJpbmc9ITEsaS5fcGFydGljaXBhbnRDb3VudHM9RmEsaS5fcm1wUGxheWVyU3RhdGU9e30saS5fd2FpdGluZ1BhcnRpY2lwYW50cz17fSxpLl9uZXR3b3JrPXt0aHJlc2hvbGQ6XCJnb29kXCIscXVhbGl0eToxMDAsbmV0d29ya1N0YXRlOlwidW5rbm93blwiLHN0YXRzOnt9fSxpLl9hY3RpdmVTcGVha2VyPXt9LGkuX2xvY2FsQXVkaW9MZXZlbD0wLGkuX2lzTG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nPSExLGkuX3JlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWw9e30saS5faXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nPSExLGkuX21heEFwcE1lc3NhZ2VTaXplPSRvLGkuX21lc3NhZ2VDaGFubmVsPWlzKCk/bmV3IGpzOm5ldyBPcyxpLl9pZnJhbWUmJihpLl9pZnJhbWUucmVxdWVzdEZ1bGxzY3JlZW4/aS5faWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJmdWxsc2NyZWVuY2hhbmdlXCIsKGZ1bmN0aW9uKCl7ZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQ9PT1pLl9pZnJhbWU/KGkuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOklvfSksaS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpJb30pKTooaS5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246eG99KSxpLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOnhvfSkpfSkpOmkuX2lmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiYmaS5faWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsKGZ1bmN0aW9uKCl7ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ9PT1pLl9pZnJhbWU/KGkuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOklvfSksaS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpJb30pKTooaS5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246eG99KSxpLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOnhvfSkpfSkpKSxpcygpKXt2YXIgZj1pLm5hdGl2ZVV0aWxzKCk7Zi5hZGRBdWRpb0ZvY3VzQ2hhbmdlTGlzdGVuZXImJmYucmVtb3ZlQXVkaW9Gb2N1c0NoYW5nZUxpc3RlbmVyJiZmLmFkZEFwcFN0YXRlQ2hhbmdlTGlzdGVuZXImJmYucmVtb3ZlQXBwU3RhdGVDaGFuZ2VMaXN0ZW5lciYmZi5hZGRTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcExpc3RlbmVyJiZmLnJlbW92ZVN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wTGlzdGVuZXJ8fGNvbnNvbGUud2FybihcImV4cGVjdGVkIChhZGR8cmVtb3ZlKShBdWRpb0ZvY3VzQ2hhbmdlfEFwcEFjdGl2ZVN0YXRlQ2hhbmdlfFN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wKUxpc3RlbmVyIHRvIGJlIGF2YWlsYWJsZSBpbiBSZWFjdCBOYXRpdmVcIiksaS5faGFzTmF0aXZlQXVkaW9Gb2N1cz0hMCxmLmFkZEF1ZGlvRm9jdXNDaGFuZ2VMaXN0ZW5lcihpLmhhbmRsZU5hdGl2ZUF1ZGlvRm9jdXNDaGFuZ2UpLGYuYWRkQXBwU3RhdGVDaGFuZ2VMaXN0ZW5lcihpLmhhbmRsZU5hdGl2ZUFwcFN0YXRlQ2hhbmdlKSxmLmFkZFN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wTGlzdGVuZXIoaS5oYW5kbGVOYXRpdmVTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcCl9cmV0dXJuIGkuX2NhbGxPYmplY3RNb2RlJiZpLnN0YXJ0TGlzdGVuaW5nRm9yRGV2aWNlQ2hhbmdlcygpLGkuX21lc3NhZ2VDaGFubmVsLmFkZExpc3RlbmVyRm9yTWVzc2FnZXNGcm9tQ2FsbE1hY2hpbmUoaS5oYW5kbGVNZXNzYWdlRnJvbUNhbGxNYWNoaW5lLGkuY2FsbENsaWVudElkLGkpLGl9cmV0dXJuIGwocixiKSxvKHIsW3trZXk6XCJkZXN0cm95XCIsdmFsdWU6KGVlPXAoKGZ1bmN0aW9uKigpe3ZhciBlO3RyeXt5aWVsZCB0aGlzLmxlYXZlKCl9Y2F0Y2goZSl7fXZhciB0PXRoaXMuX2lmcmFtZTtpZih0KXt2YXIgbj10LnBhcmVudEVsZW1lbnQ7biYmbi5yZW1vdmVDaGlsZCh0KX1pZih0aGlzLl9tZXNzYWdlQ2hhbm5lbC5yZW1vdmVMaXN0ZW5lcih0aGlzLmhhbmRsZU1lc3NhZ2VGcm9tQ2FsbE1hY2hpbmUpLGlzKCkpe3ZhciByPXRoaXMubmF0aXZlVXRpbHMoKTtyLnJlbW92ZUF1ZGlvRm9jdXNDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZU5hdGl2ZUF1ZGlvRm9jdXNDaGFuZ2UpLHIucmVtb3ZlQXBwU3RhdGVDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZU5hdGl2ZUFwcFN0YXRlQ2hhbmdlKSxyLnJlbW92ZVN5c3RlbVNjcmVlbkNhcHR1cmVTdG9wTGlzdGVuZXIodGhpcy5oYW5kbGVOYXRpdmVTeXN0ZW1TY3JlZW5DYXB0dXJlU3RvcCl9dGhpcy5fY2FsbE9iamVjdE1vZGUmJnRoaXMuc3RvcExpc3RlbmluZ0ZvckRldmljZUNoYW5nZXMoKSx0aGlzLnJlc2V0TWVldGluZ0RlcGVuZGVudFZhcnMoKSx0aGlzLl9kZXN0cm95ZWQ9ITAsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246XCJjYWxsLWluc3RhbmNlLWRlc3Ryb3llZFwifSksZGVsZXRlIExhW3RoaXMuY2FsbENsaWVudElkXSwobnVsbD09PShlPXdpbmRvdyl8fHZvaWQgMD09PWV8fG51bGw9PT0oZT1lLl9kYWlseSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaW5zdGFuY2VzKSYmZGVsZXRlIHdpbmRvdy5fZGFpbHkuaW5zdGFuY2VzW3RoaXMuY2FsbENsaWVudElkXSx0aGlzLnN0cmljdE1vZGUmJih0aGlzLmNhbGxDbGllbnRJZD12b2lkIDApfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiaXNEZXN0cm95ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZGVzdHJveWVkfX0se2tleTpcImxvYWRDc3NcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHlDbGFzcyxuPWUuY3NzRmlsZSxyPWUuY3NzVGV4dDtyZXR1cm4gbmMoKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibG9hZC1jc3NcIixjc3NGaWxlOnRoaXMuYWJzb2x1dGVVcmwobiksYm9keUNsYXNzOnQsY3NzVGV4dDpyfSksdGhpc319LHtrZXk6XCJpZnJhbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuYygpLHRoaXMuX2lmcmFtZX19LHtrZXk6XCJtZWV0aW5nU3RhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWxsU3RhdGV9fSx7a2V5OlwiYWNjZXNzU3RhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBlYyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcImFjY2Vzc1N0YXRlKClcIiksdGhpcy5fYWNjZXNzU3RhdGV9fSx7a2V5OlwicGFydGljaXBhbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljaXBhbnRzfX0se2tleTpcInBhcnRpY2lwYW50Q291bnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljaXBhbnRDb3VudHN9fSx7a2V5Olwid2FpdGluZ1BhcnRpY2lwYW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGVjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwid2FpdGluZ1BhcnRpY2lwYW50cygpXCIpLHRoaXMuX3dhaXRpbmdQYXJ0aWNpcGFudHN9fSx7a2V5OlwidmFsaWRhdGVQYXJ0aWNpcGFudFByb3BlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXtpZighV2Fbbl0pdGhyb3cgbmV3IEVycm9yKFwidW5yZWNvZ25pemVkIHVwZGF0ZVBhcnRpY2lwYW50IHByb3BlcnR5IFwiLmNvbmNhdChuKSk7aWYoV2Fbbl0udmFsaWRhdGUmJiFXYVtuXS52YWxpZGF0ZSh0W25dLHRoaXMsdGhpcy5fcGFydGljaXBhbnRzW2VdKSl0aHJvdyBuZXcgRXJyb3IoV2Fbbl0uaGVscCl9fX0se2tleTpcInVwZGF0ZVBhcnRpY2lwYW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFydGljaXBhbnRzLmxvY2FsJiZ0aGlzLl9wYXJ0aWNpcGFudHMubG9jYWwuc2Vzc2lvbl9pZD09PWUmJihlPVwibG9jYWxcIiksZSYmdCYmKHRoaXMudmFsaWRhdGVQYXJ0aWNpcGFudFByb3BlcnRpZXMoZSx0KSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidXBkYXRlLXBhcnRpY2lwYW50XCIsaWQ6ZSxwcm9wZXJ0aWVzOnR9KSksdGhpc319LHtrZXk6XCJ1cGRhdGVQYXJ0aWNpcGFudHNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9wYXJ0aWNpcGFudHMubG9jYWwmJnRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbC5zZXNzaW9uX2lkO2Zvcih2YXIgbiBpbiBlKW49PT10JiYobj1cImxvY2FsXCIpLG4mJmVbbl0mJnRoaXMudmFsaWRhdGVQYXJ0aWNpcGFudFByb3BlcnRpZXMobixlW25dKTtyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInVwZGF0ZS1wYXJ0aWNpcGFudHNcIixwYXJ0aWNpcGFudHM6ZX0pLHRoaXN9fSx7a2V5OlwidXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50XCIsdmFsdWU6KFo9cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLHI9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKGVjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwidXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50KClcIiksUWEodGhpcy5fY2FsbFN0YXRlLFwidXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50KClcIiksXCJzdHJpbmdcIiE9dHlwZW9mIHR8fFwib2JqZWN0XCIhPT1uKHIpKXRocm93IG5ldyBFcnJvcihcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudCgpIG11c3QgdGFrZSBhbiBpZCBzdHJpbmcgYW5kIGEgdXBkYXRlcyBvYmplY3RcIik7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLGkpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJkYWlseS1tZXRob2QtdXBkYXRlLXdhaXRpbmctcGFydGljaXBhbnRcIixpZDp0LHVwZGF0ZXM6cn0sKGZ1bmN0aW9uKGUpe2UuZXJyb3ImJmkoZS5lcnJvciksZS5pZHx8aShuZXcgRXJyb3IoXCJ1bmtub3duIGVycm9yIGluIHVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudCgpXCIpKSxuKHtpZDplLmlkfSl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gWi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudHNcIix2YWx1ZTooWD1wKChmdW5jdGlvbiooKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKGVjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwidXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50cygpXCIpLFFhKHRoaXMuX2NhbGxTdGF0ZSxcInVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudHMoKVwiKSxcIm9iamVjdFwiIT09bih0KSl0aHJvdyBuZXcgRXJyb3IoXCJ1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRzKCkgbXVzdCB0YWtlIGEgbWFwcGluZyBiZXR3ZWVuIGlkcyBhbmQgdXBkYXRlIG9iamVjdHNcIik7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJkYWlseS1tZXRob2QtdXBkYXRlLXdhaXRpbmctcGFydGljaXBhbnRzXCIsdXBkYXRlc0J5SWQ6dH0sKGZ1bmN0aW9uKGUpe2UuZXJyb3ImJnIoZS5lcnJvciksZS5pZHN8fHIobmV3IEVycm9yKFwidW5rbm93biBlcnJvciBpbiB1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRzKClcIikpLG4oe2lkczplLmlkc30pfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIFguYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJyZXF1ZXN0QWNjZXNzXCIsdmFsdWU6KFk9cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQuYWNjZXNzLHI9dm9pZCAwPT09bj97bGV2ZWw6dml9Om4saT10Lm5hbWUsbz12b2lkIDA9PT1pP1wiXCI6aTtyZXR1cm4gZWModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJyZXF1ZXN0QWNjZXNzKClcIiksUWEodGhpcy5fY2FsbFN0YXRlLFwicmVxdWVzdEFjY2VzcygpXCIpLG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJkYWlseS1tZXRob2QtcmVxdWVzdC1hY2Nlc3NcIixhY2Nlc3M6cixuYW1lOm99LChmdW5jdGlvbihlKXtlLmVycm9yJiZuKGUuZXJyb3IpLGUuYWNjZXNzfHxuKG5ldyBFcnJvcihcInVua25vd24gZXJyb3IgaW4gcmVxdWVzdEFjY2VzcygpXCIpKSx0KHthY2Nlc3M6ZS5hY2Nlc3MsZ3JhbnRlZDplLmdyYW50ZWR9KX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBZLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwibG9jYWxBdWRpb1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbD8hW1wiYmxvY2tlZFwiLFwib2ZmXCJdLmluY2x1ZGVzKHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbC50cmFja3MuYXVkaW8uc3RhdGUpOm51bGx9fSx7a2V5OlwibG9jYWxWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbD8hW1wiYmxvY2tlZFwiLFwib2ZmXCJdLmluY2x1ZGVzKHRoaXMuX3BhcnRpY2lwYW50cy5sb2NhbC50cmFja3MudmlkZW8uc3RhdGUpOm51bGx9fSx7a2V5Olwic2V0TG9jYWxBdWRpb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm5cImZvcmNlRGlzY2FyZFRyYWNrXCJpbiB0JiYoaXMoKT8oY29uc29sZS53YXJuKFwiZm9yY2VEaXNjYXJkVHJhY2sgb3B0aW9uIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlOyBpZ25vcmluZ1wiKSx0PXt9KTplJiYoY29uc29sZS53YXJuKFwiZm9yY2VEaXNjYXJkVHJhY2sgb3B0aW9uIG9ubHkgc3VwcG9ydGVkIHdoZW4gY2FsbGluZyBzZXRMb2NhbEF1ZGlvKGZhbHNlKTsgaWdub3JpbmdcIiksdD17fSkpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJsb2NhbC1hdWRpb1wiLHN0YXRlOmUsb3B0aW9uczp0fSksdGhpc319LHtrZXk6XCJsb2NhbFNjcmVlbkF1ZGlvXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljaXBhbnRzLmxvY2FsPyFbXCJibG9ja2VkXCIsXCJvZmZcIl0uaW5jbHVkZXModGhpcy5fcGFydGljaXBhbnRzLmxvY2FsLnRyYWNrcy5zY3JlZW5BdWRpby5zdGF0ZSk6bnVsbH19LHtrZXk6XCJsb2NhbFNjcmVlblZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljaXBhbnRzLmxvY2FsPyFbXCJibG9ja2VkXCIsXCJvZmZcIl0uaW5jbHVkZXModGhpcy5fcGFydGljaXBhbnRzLmxvY2FsLnRyYWNrcy5zY3JlZW5WaWRlby5zdGF0ZSk6bnVsbH19LHtrZXk6XCJ1cGRhdGVTY3JlZW5TaGFyZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzU2NyZWVuU2hhcmluZylyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImxvY2FsLXNjcmVlbi11cGRhdGVcIixvcHRpb25zOmV9KSx0aGlzO2NvbnNvbGUud2FybihcIlRoZXJlIGlzIG5vIHNjcmVlbiBzaGFyZSBpbiBwcm9ncmVzcy4gVHJ5IGNhbGxpbmcgc3RhcnRTY3JlZW5TaGFyZSBmaXJzdC5cIil9fSx7a2V5Olwic2V0TG9jYWxWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibG9jYWwtdmlkZW9cIixzdGF0ZTplfSksdGhpc319LHtrZXk6XCJfc2V0QWxsb3dMb2NhbEF1ZGlvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fcHJlbG9hZENhY2hlLmFsbG93TG9jYWxBdWRpbz1lLHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtYWxsb3ctbG9jYWwtYXVkaW9cIixzdGF0ZTplfSksdGhpc319LHtrZXk6XCJfc2V0QWxsb3dMb2NhbFZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5fcHJlbG9hZENhY2hlLmFsbG93TG9jYWxWaWRlbz1lLHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtYWxsb3ctbG9jYWwtdmlkZW9cIixzdGF0ZTplfSksdGhpc319LHtrZXk6XCJnZXRSZWNlaXZlU2V0dGluZ3NcIix2YWx1ZTooSz1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcyxyPShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30pLnNob3dJbmhlcml0ZWRWYWx1ZXMsaT12b2lkIDAhPT1yJiZyO2lmKGVjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwiZ2V0UmVjZWl2ZVNldHRpbmdzKClcIiksIXRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMuX3JlY2VpdmVTZXR0aW5ncztzd2l0Y2gobihlKSl7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LXNpbmdsZS1wYXJ0aWNpcGFudC1yZWNlaXZlLXNldHRpbmdzXCIsaWQ6ZSxzaG93SW5oZXJpdGVkVmFsdWVzOml9LChmdW5jdGlvbihlKXtuKGUucmVjZWl2ZVNldHRpbmdzKX0pKX0pKTtjYXNlXCJ1bmRlZmluZWRcIjpyZXR1cm4gdGhpcy5fcmVjZWl2ZVNldHRpbmdzO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdmaXJzdCBhcmd1bWVudCB0byBnZXRSZWNlaXZlU2V0dGluZ3MoKSBtdXN0IGJlIGEgcGFydGljaXBhbnQgaWQgKG9yIFwiYmFzZVwiKSwgb3IgdGhlcmUgc2hvdWxkIGJlIG5vIGFyZ3VtZW50cycpfX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gSy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInVwZGF0ZVJlY2VpdmVTZXR0aW5nc1wiLHZhbHVlOihRPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO2lmKGVjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwidXBkYXRlUmVjZWl2ZVNldHRpbmdzKClcIiksIW9jKGUse2FsbG93QWxsUGFydGljaXBhbnRzS2V5OiEwfSkpdGhyb3cgbmV3IEVycm9yKHBjKHthbGxvd0FsbFBhcnRpY2lwYW50c0tleTohMH0pKTtyZXR1cm4gUWEodGhpcy5fY2FsbFN0YXRlLFwidXBkYXRlUmVjZWl2ZVNldHRpbmdzKClcIixcIlRvIHNwZWNpZnkgcmVjZWl2ZSBzZXR0aW5ncyBlYXJsaWVyLCB1c2UgdGhlIHJlY2VpdmVTZXR0aW5ncyBjb25maWcgcHJvcGVydHkuXCIpLG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidXBkYXRlLXJlY2VpdmUtc2V0dGluZ3NcIixyZWNlaXZlU2V0dGluZ3M6ZX0sKGZ1bmN0aW9uKGUpe24oe3JlY2VpdmVTZXR0aW5nczplLnJlY2VpdmVTZXR0aW5nc30pfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBRLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiX3ByZXBJbnB1dFNldHRpbmdzRm9yU2hhcmluZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoZSl7dmFyIG49e307aWYoZS5hdWRpbyl7dmFyIHIsaSxvO2UuYXVkaW8uc2V0dGluZ3MmJighT2JqZWN0LmtleXMoZS5hdWRpby5zZXR0aW5ncykubGVuZ3RoJiZ0fHwobi5hdWRpbz17c2V0dGluZ3M6QWEoe30sZS5hdWRpby5zZXR0aW5ncyl9KSksdCYmbnVsbCE9PShyPW4uYXVkaW8pJiZ2b2lkIDAhPT1yJiZudWxsIT09KHI9ci5zZXR0aW5ncykmJnZvaWQgMCE9PXImJnIuY3VzdG9tVHJhY2smJihuLmF1ZGlvLnNldHRpbmdzPXtjdXN0b21UcmFjazp0aGlzLl9zaGFyZWRUcmFja3MuYXVkaW9UcmFja30pO3ZhciBzPVwibm9uZVwiPT09KG51bGw9PT0oaT1lLmF1ZGlvLnByb2Nlc3Nvcil8fHZvaWQgMD09PWk/dm9pZCAwOmkudHlwZSkmJihudWxsPT09KG89ZS5hdWRpby5wcm9jZXNzb3IpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLl9pc0RlZmF1bHRXaGVuTm9uZSk7aWYoZS5hdWRpby5wcm9jZXNzb3ImJiFzKXt2YXIgYT1BYSh7fSxlLmF1ZGlvLnByb2Nlc3Nvcik7ZGVsZXRlIGEuX2lzRGVmYXVsdFdoZW5Ob25lLG4uYXVkaW89QWEoQWEoe30sbi5hdWRpbykse30se3Byb2Nlc3NvcjphfSl9fWlmKGUudmlkZW8pe3ZhciBjLGwsdTtlLnZpZGVvLnNldHRpbmdzJiYoIU9iamVjdC5rZXlzKGUudmlkZW8uc2V0dGluZ3MpLmxlbmd0aCYmdHx8KG4udmlkZW89e3NldHRpbmdzOkFhKHt9LGUudmlkZW8uc2V0dGluZ3MpfSkpLHQmJm51bGwhPT0oYz1uLnZpZGVvKSYmdm9pZCAwIT09YyYmbnVsbCE9PShjPWMuc2V0dGluZ3MpJiZ2b2lkIDAhPT1jJiZjLmN1c3RvbVRyYWNrJiYobi52aWRlby5zZXR0aW5ncz17Y3VzdG9tVHJhY2s6dGhpcy5fc2hhcmVkVHJhY2tzLnZpZGVvVHJhY2t9KTt2YXIgZD1cIm5vbmVcIj09PShudWxsPT09KGw9ZS52aWRlby5wcm9jZXNzb3IpfHx2b2lkIDA9PT1sP3ZvaWQgMDpsLnR5cGUpJiYobnVsbD09PSh1PWUudmlkZW8ucHJvY2Vzc29yKXx8dm9pZCAwPT09dT92b2lkIDA6dS5faXNEZWZhdWx0V2hlbk5vbmUpO2lmKGUudmlkZW8ucHJvY2Vzc29yJiYhZCl7dmFyIHA9QWEoe30sZS52aWRlby5wcm9jZXNzb3IpO2RlbGV0ZSBwLl9pc0RlZmF1bHRXaGVuTm9uZSxuLnZpZGVvPUFhKEFhKHt9LG4udmlkZW8pLHt9LHtwcm9jZXNzb3I6cH0pfX1yZXR1cm4gbn19fSx7a2V5OlwiZ2V0SW5wdXRTZXR0aW5nc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmMoKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7dChlLl9nZXRJbnB1dFNldHRpbmdzKCkpfSkpfX0se2tleTpcIl9nZXRJbnB1dFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8scz17cHJvY2Vzc29yOnt0eXBlOlwibm9uZVwiLF9pc0RlZmF1bHRXaGVuTm9uZTohMH19O3RoaXMuX2lucHV0U2V0dGluZ3M/KGU9KG51bGw9PT0obj10aGlzLl9pbnB1dFNldHRpbmdzKXx8dm9pZCAwPT09bj92b2lkIDA6bi52aWRlbyl8fHMsdD0obnVsbD09PShyPXRoaXMuX2lucHV0U2V0dGluZ3MpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmF1ZGlvKXx8cyk6KGU9KG51bGw9PT0oaT10aGlzLl9wcmVsb2FkQ2FjaGUpfHx2b2lkIDA9PT1pfHxudWxsPT09KGk9aS5pbnB1dFNldHRpbmdzKXx8dm9pZCAwPT09aT92b2lkIDA6aS52aWRlbyl8fHMsdD0obnVsbD09PShvPXRoaXMuX3ByZWxvYWRDYWNoZSl8fHZvaWQgMD09PW98fG51bGw9PT0obz1vLmlucHV0U2V0dGluZ3MpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmF1ZGlvKXx8cyk7dmFyIGE9e2F1ZGlvOnQsdmlkZW86ZX07cmV0dXJuIHRoaXMuX3ByZXBJbnB1dFNldHRpbmdzRm9yU2hhcmluZyhhLCEwKX19LHtrZXk6XCJfdXBkYXRlUHJlbG9hZENhY2hlSW5wdXRTZXR0aW5nc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5faW5wdXRTZXR0aW5nc3x8e30scj17fTtpZihlLnZpZGVvKXt2YXIgaSxvLHM7aWYoci52aWRlbz17fSxlLnZpZGVvLnNldHRpbmdzKXIudmlkZW8uc2V0dGluZ3M9e30sdHx8ZS52aWRlby5zZXR0aW5ncy5jdXN0b21UcmFja3x8bnVsbD09PShzPW4udmlkZW8pfHx2b2lkIDA9PT1zfHwhcy5zZXR0aW5ncz9yLnZpZGVvLnNldHRpbmdzPWUudmlkZW8uc2V0dGluZ3M6ci52aWRlby5zZXR0aW5ncz1BYShBYSh7fSxuLnZpZGVvLnNldHRpbmdzKSxlLnZpZGVvLnNldHRpbmdzKSxPYmplY3Qua2V5cyhyLnZpZGVvLnNldHRpbmdzKS5sZW5ndGh8fGRlbGV0ZSByLnZpZGVvLnNldHRpbmdzO2Vsc2UgbnVsbCE9PShpPW4udmlkZW8pJiZ2b2lkIDAhPT1pJiZpLnNldHRpbmdzJiYoci52aWRlby5zZXR0aW5ncz1uLnZpZGVvLnNldHRpbmdzKTtlLnZpZGVvLnByb2Nlc3Nvcj9yLnZpZGVvLnByb2Nlc3Nvcj1lLnZpZGVvLnByb2Nlc3NvcjpudWxsIT09KG89bi52aWRlbykmJnZvaWQgMCE9PW8mJm8ucHJvY2Vzc29yJiYoci52aWRlby5wcm9jZXNzb3I9bi52aWRlby5wcm9jZXNzb3IpfWVsc2Ugbi52aWRlbyYmKHIudmlkZW89bi52aWRlbyk7aWYoZS5hdWRpbyl7dmFyIGEsYyxsO2lmKHIuYXVkaW89e30sZS5hdWRpby5zZXR0aW5ncylyLmF1ZGlvLnNldHRpbmdzPXt9LHR8fGUuYXVkaW8uc2V0dGluZ3MuY3VzdG9tVHJhY2t8fG51bGw9PT0obD1uLmF1ZGlvKXx8dm9pZCAwPT09bHx8IWwuc2V0dGluZ3M/ci5hdWRpby5zZXR0aW5ncz1lLmF1ZGlvLnNldHRpbmdzOnIuYXVkaW8uc2V0dGluZ3M9QWEoQWEoe30sbi5hdWRpby5zZXR0aW5ncyksZS5hdWRpby5zZXR0aW5ncyksT2JqZWN0LmtleXMoci5hdWRpby5zZXR0aW5ncykubGVuZ3RofHxkZWxldGUgci5hdWRpby5zZXR0aW5ncztlbHNlIG51bGwhPT0oYT1uLmF1ZGlvKSYmdm9pZCAwIT09YSYmYS5zZXR0aW5ncyYmKHIuYXVkaW8uc2V0dGluZ3M9bi5hdWRpby5zZXR0aW5ncyk7ZS5hdWRpby5wcm9jZXNzb3I/ci5hdWRpby5wcm9jZXNzb3I9ZS5hdWRpby5wcm9jZXNzb3I6bnVsbCE9PShjPW4uYXVkaW8pJiZ2b2lkIDAhPT1jJiZjLnByb2Nlc3NvciYmKHIuYXVkaW8ucHJvY2Vzc29yPW4uYXVkaW8ucHJvY2Vzc29yKX1lbHNlIG4uYXVkaW8mJihyLmF1ZGlvPW4uYXVkaW8pO3RoaXMuX21heWJlVXBkYXRlSW5wdXRTZXR0aW5ncyhyKX19LHtrZXk6XCJfZGV2aWNlc0Zyb21JbnB1dFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPShudWxsPT1lfHxudWxsPT09KHQ9ZS52aWRlbyl8fHZvaWQgMD09PXR8fG51bGw9PT0odD10LnNldHRpbmdzKXx8dm9pZCAwPT09dD92b2lkIDA6dC5kZXZpY2VJZCl8fG51bGwsaT0obnVsbD09ZXx8bnVsbD09PShuPWUuYXVkaW8pfHx2b2lkIDA9PT1ufHxudWxsPT09KG49bi5zZXR0aW5ncyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZGV2aWNlSWQpfHxudWxsLG89dGhpcy5fcHJlbG9hZENhY2hlLm91dHB1dERldmljZUlkfHxudWxsO3JldHVybntjYW1lcmE6cj97ZGV2aWNlSWQ6cn06e30sbWljOmk/e2RldmljZUlkOml9Ont9LHNwZWFrZXI6bz97ZGV2aWNlSWQ6b306e319fX0se2tleTpcInVwZGF0ZUlucHV0U2V0dGluZ3NcIix2YWx1ZTooRz1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmMoKSxzYyhlKT9lLnZpZGVvfHxlLmF1ZGlvPyhhYyhlLHRoaXMucHJvcGVydGllcy5kYWlseUNvbmZpZyx0aGlzLl9zaGFyZWRUcmFja3MpLHRoaXMuX2NhbGxPYmplY3RNb2RlJiYhdGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZD8odGhpcy5fdXBkYXRlUHJlbG9hZENhY2hlSW5wdXRTZXR0aW5ncyhlLCEwKSx0aGlzLl9nZXRJbnB1dFNldHRpbmdzKCkpOm5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ1cGRhdGUtaW5wdXQtc2V0dGluZ3NcIixpbnB1dFNldHRpbmdzOmV9LChmdW5jdGlvbihpKXtpZihpLmVycm9yKXIoaS5lcnJvcik7ZWxzZXtpZihpLnJldHVyblByZWxvYWRDYWNoZSlyZXR1cm4gdC5fdXBkYXRlUHJlbG9hZENhY2hlSW5wdXRTZXR0aW5ncyhlLCEwKSx2b2lkIG4odC5fZ2V0SW5wdXRTZXR0aW5ncygpKTt0Ll9tYXliZVVwZGF0ZUlucHV0U2V0dGluZ3MoaS5pbnB1dFNldHRpbmdzKSxuKHQuX3ByZXBJbnB1dFNldHRpbmdzRm9yU2hhcmluZyhpLmlucHV0U2V0dGluZ3MsITApKX19KSl9KSkpOnRoaXMuX2dldElucHV0U2V0dGluZ3MoKTooY29uc29sZS5lcnJvcihkYygpKSxQcm9taXNlLnJlamVjdChkYygpKSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIEcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZXRCYW5kd2lkdGhcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmticyxuPWUudHJhY2tDb25zdHJhaW50cztpZihuYygpLHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtYmFuZHdpZHRoXCIsa2JzOnQsdHJhY2tDb25zdHJhaW50czpufSksdGhpc319LHtrZXk6XCJnZXREYWlseUxhbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYobmMoKSx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkKXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImdldC1kYWlseS1sYW5nXCJ9LChmdW5jdGlvbihlKXtkZWxldGUgZS5hY3Rpb24sZGVsZXRlIGUuY2FsbGJhY2tTdGFtcCx0KGUpfSkpfSkpfX0se2tleTpcInNldERhaWx5TGFuZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuYygpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtZGFpbHktbGFuZ1wiLGxhbmc6ZX0pLHRoaXN9fSx7a2V5Olwic2V0UHJveHlVcmxcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1wcm94eS11cmxcIixwcm94eVVybDplfSksdGhpc319LHtrZXk6XCJzZXRJY2VDb25maWdcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1pY2UtY29uZmlnXCIsaWNlQ29uZmlnOmV9KSx0aGlzfX0se2tleTpcIm1lZXRpbmdTZXNzaW9uU3VtbWFyeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW3NpLGFpXS5pbmNsdWRlcyh0aGlzLl9jYWxsU3RhdGUpP3RoaXMuX2ZpbmFsU3VtbWFyeU9mUHJldlNlc3Npb246dGhpcy5fbWVldGluZ1Nlc3Npb25TdW1tYXJ5fX0se2tleTpcImdldE1lZXRpbmdTZXNzaW9uXCIsdmFsdWU6KEg9cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcztyZXR1cm4gY29uc29sZS53YXJuKFwiZ2V0TWVldGluZ1Nlc3Npb24oKSBpcyBkZXByZWNhdGVkOiB1c2UgbWVldGluZ1Nlc3Npb25TdW1tYXJ5KCksIHdoaWNoIHdpbGwgcmV0dXJuIGltbWVkaWF0ZWx5XCIpLFFhKHRoaXMuX2NhbGxTdGF0ZSxcImdldE1lZXRpbmdTZXNzaW9uKClcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtbWVldGluZy1zZXNzaW9uXCJ9LChmdW5jdGlvbihlKXtkZWxldGUgZS5hY3Rpb24sZGVsZXRlIGUuY2FsbGJhY2tTdGFtcCx0KGUpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEguYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJtZWV0aW5nU2Vzc2lvblN0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gUWEodGhpcy5fY2FsbFN0YXRlLFwibWVldGluZ1Nlc3Npb25TdGF0ZVwiKSx0aGlzLl9tZWV0aW5nU2Vzc2lvblN0YXRlfX0se2tleTpcInNldE1lZXRpbmdTZXNzaW9uRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcInJlcGxhY2VcIjtlYyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInNldE1lZXRpbmdTZXNzaW9uRGF0YSgpXCIpLFFhKHRoaXMuX2NhbGxTdGF0ZSxcInNldE1lZXRpbmdTZXNzaW9uRGF0YVwiKTt0cnl7IWZ1bmN0aW9uKGUsdCl7bmV3IERzKHtkYXRhOmUsbWVyZ2VTdHJhdGVneTp0fSl9KGUsdCl9Y2F0Y2goZSl7dGhyb3cgY29uc29sZS5lcnJvcihlKSxlfXRyeXt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXNlc3Npb24tZGF0YVwiLGRhdGE6ZSxtZXJnZVN0cmF0ZWd5OnR9KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzZXR0aW5nIG1lZXRpbmcgc2Vzc2lvbiBkYXRhOiBcIi5jb25jYXQoZSkpfX19LHtrZXk6XCJzZXRVc2VyTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLnVzZXJOYW1lPWUsbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIpe24uc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtdXNlci1uYW1lXCIsbmFtZTpudWxsIT1lP2U6XCJcIix0aGlzTWVldGluZ09ubHk6aXMoKXx8ISF0JiYhIXQudGhpc01lZXRpbmdPbmx5fSwoZnVuY3Rpb24oZSl7ZGVsZXRlIGUuYWN0aW9uLGRlbGV0ZSBlLmNhbGxiYWNrU3RhbXAscihlKX0pKX0pKX19LHtrZXk6XCJzZXRVc2VyRGF0YVwiLHZhbHVlOihXPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO3RyeXtpYyhlKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKGUpLGV9aWYodGhpcy5wcm9wZXJ0aWVzLnVzZXJEYXRhPWUsdGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZClyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3RyeXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXVzZXItZGF0YVwiLHVzZXJEYXRhOmV9LChmdW5jdGlvbihlKXtkZWxldGUgZS5hY3Rpb24sZGVsZXRlIGUuY2FsbGJhY2tTdGFtcCxuKGUpfSkpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcIkVycm9yIHNldHRpbmcgdXNlciBkYXRhOiBcIi5jb25jYXQoZSkpfX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gVy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInZhbGlkYXRlQXVkaW9MZXZlbEludGVydmFsXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZSYmKGU8MTAwfHxcIm51bWJlclwiIT10eXBlb2YgZSkpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGludGVydmFsIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDEwMCBtaWxsaXNlY29uZHMuXCIpfX0se2tleTpcInN0YXJ0TG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBBdWRpb1dvcmtsZXROb2RlJiYhaXMoKSl0aHJvdyBuZXcgRXJyb3IoXCJzdGFydExvY2FsQXVkaW9MZXZlbE9ic2VydmVyKCkgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGJyb3dzZXJcIik7aWYodGhpcy52YWxpZGF0ZUF1ZGlvTGV2ZWxJbnRlcnZhbChlKSx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkKXJldHVybiB0aGlzLl9pc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RhcnQtbG9jYWwtYXVkaW8tbGV2ZWwtb2JzZXJ2ZXJcIixpbnRlcnZhbDplfSwoZnVuY3Rpb24oZSl7dC5faXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9IWUuZXJyb3IsZS5lcnJvcj9yKHtlcnJvcjplLmVycm9yfSk6bigpfSkpfSkpO3RoaXMuX3ByZWxvYWRDYWNoZS5sb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlcj17ZW5hYmxlZDohMCxpbnRlcnZhbDplfX19LHtrZXk6XCJpc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTG9jYWxBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nfX0se2tleTpcInN0b3BMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcHJlbG9hZENhY2hlLmxvY2FsQXVkaW9MZXZlbE9ic2VydmVyPW51bGwsdGhpcy5fbG9jYWxBdWRpb0xldmVsPTAsdGhpcy5faXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9ITEsdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtbG9jYWwtYXVkaW8tbGV2ZWwtb2JzZXJ2ZXJcIn0pfX0se2tleTpcInN0YXJ0UmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLnZhbGlkYXRlQXVkaW9MZXZlbEludGVydmFsKGUpLHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RhcnQtcmVtb3RlLXBhcnRpY2lwYW50cy1hdWRpby1sZXZlbC1vYnNlcnZlclwiLGludGVydmFsOmV9LChmdW5jdGlvbihlKXt0Ll9pc1JlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmc9IWUuZXJyb3IsZS5lcnJvcj9yKHtlcnJvcjplLmVycm9yfSk6bigpfSkpfSkpO3RoaXMuX3ByZWxvYWRDYWNoZS5yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXI9e2VuYWJsZWQ6ITAsaW50ZXJ2YWw6ZX19fSx7a2V5OlwiaXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nfX0se2tleTpcInN0b3BSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3ByZWxvYWRDYWNoZS5yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXI9bnVsbCx0aGlzLl9yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsPXt9LHRoaXMuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RvcC1yZW1vdGUtcGFydGljaXBhbnRzLWF1ZGlvLWxldmVsLW9ic2VydmVyXCJ9KX19LHtrZXk6XCJzdGFydENhbWVyYVwiLHZhbHVlOih6PXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307aWYoZWModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzdGFydENhbWVyYSgpXCIpLFlhKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbixcInN0YXJ0Q2FtZXJhKClcIixcIkRpZCB5b3UgbWVhbiB0byB1c2Ugc2V0TG9jYWxBdWRpbygpIGFuZC9vciBzZXRMb2NhbFZpZGVvKCkgaW5zdGVhZD9cIiksdGhpcy5uZWVkc0xvYWQoKSl0cnl7eWllbGQgdGhpcy5sb2FkKHQpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX1lbHNle2lmKHRoaXMuX2RpZFByZUF1dGgpe2lmKHQudXJsJiZ0LnVybCE9PXRoaXMucHJvcGVydGllcy51cmwpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1cmwgaW4gc3RhcnRDYW1lcmEoKSBpcyBkaWZmZXJlbnQgdGhhbiB0aGUgb25lIHVzZWQgaW4gcHJlQXV0aCgpXCIpLFByb21pc2UucmVqZWN0KCk7aWYodC50b2tlbiYmdC50b2tlbiE9PXRoaXMucHJvcGVydGllcy50b2tlbilyZXR1cm4gY29uc29sZS5lcnJvcihcInRva2VuIGluIHN0YXJ0Q2FtZXJhKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSxQcm9taXNlLnJlamVjdCgpfXRoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKHQpLHRoaXMucHJvcGVydGllcz1BYShBYSh7fSx0aGlzLnByb3BlcnRpZXMpLHQpfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5fcHJlbG9hZENhY2hlLmlucHV0U2V0dGluZ3M9ZS5fcHJlcElucHV0U2V0dGluZ3NGb3JTaGFyaW5nKGUuX2lucHV0U2V0dGluZ3MsITEpLGUuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzdGFydC1jYW1lcmFcIixwcm9wZXJ0aWVzOkdhKGUucHJvcGVydGllcyxlLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOkdhKGUuX3ByZWxvYWRDYWNoZSxlLmNhbGxDbGllbnRJZCl9LChmdW5jdGlvbihlKXt0KHtjYW1lcmE6ZS5jYW1lcmEsbWljOmUubWljLHNwZWFrZXI6ZS5zcGVha2VyfSl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gei5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInZhbGlkYXRlQ3VzdG9tVHJhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7aWYobiYmbi5sZW5ndGg+NTApdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tIHRyYWNrIGB0cmFja05hbWVgIG11c3Qgbm90IGJlIG1vcmUgdGhhbiA1MCBjaGFyYWN0ZXJzXCIpO2lmKHQmJlwibXVzaWNcIiE9PXQmJlwic3BlZWNoXCIhPT10JiYhKHQgaW5zdGFuY2VvZiBPYmplY3QpKXRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0cmFjayBgbW9kZWAgbXVzdCBiZSBlaXRoZXIgYG11c2ljYCB8IGBzcGVlY2hgIHwgYERhaWx5TWljQXVkaW9Nb2RlU2V0dGluZ3NgIG9yIGB1bmRlZmluZWRgXCIpO2lmKCEhbiYmW1wiY2FtLWF1ZGlvXCIsXCJjYW0tdmlkZW9cIixcInNjcmVlbi12aWRlb1wiLFwic2NyZWVuLWF1ZGlvXCIsXCJybXBBdWRpb1wiLFwicm1wVmlkZW9cIixcImN1c3RvbVZpZGVvRGVmYXVsdHNcIl0uaW5jbHVkZXMobikpdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tIHRyYWNrIGB0cmFja05hbWVgIG11c3Qgbm90IG1hdGNoIGEgdHJhY2sgbmFtZSBhbHJlYWR5IHVzZWQgYnkgZGFpbHk6IGNhbS1hdWRpbywgY2FtLXZpZGVvLCBjdXN0b21WaWRlb0RlZmF1bHRzLCBzY3JlZW4tdmlkZW8sIHNjcmVlbi1hdWRpbywgcm1wQXVkaW8sIHJtcFZpZGVvXCIpO2lmKCEoZSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2spKXRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0cmFja3MgcHJvdmlkZWQgbXVzdCBiZSBpbnN0YW5jZXMgb2YgTWVkaWFTdHJlYW1UcmFja1wiKX19LHtrZXk6XCJzdGFydEN1c3RvbVRyYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt0cmFjazp0cmFjayxtb2RlOm1vZGUsdHJhY2tOYW1lOnRyYWNrTmFtZSxpZ25vcmVBdWRpb0xldmVsOmlnbm9yZUF1ZGlvTGV2ZWx9O3JldHVybiBuYygpLFFhKHRoaXMuX2NhbGxTdGF0ZSxcInN0YXJ0Q3VzdG9tVHJhY2soKVwiKSx0aGlzLnZhbGlkYXRlQ3VzdG9tVHJhY2sodC50cmFjayx0Lm1vZGUsdC50cmFja05hbWUpLG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe2UuX3NoYXJlZFRyYWNrcy5jdXN0b21UcmFjaz10LnRyYWNrLHQudHJhY2s9UW8sZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0YXJ0LWN1c3RvbS10cmFja1wiLHByb3BlcnRpZXM6dH0sKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cih7ZXJyb3I6ZS5lcnJvcn0pOm4oZS5tZWRpYVRhZyl9KSl9KSl9fSx7a2V5Olwic3RvcEN1c3RvbVRyYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmMoKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wQ3VzdG9tVHJhY2soKVwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtY3VzdG9tLXRyYWNrXCIsbWVkaWFUYWc6ZX0sKGZ1bmN0aW9uKGUpe24oZS5tZWRpYVRhZyl9KSl9KSl9fSx7a2V5Olwic2V0Q2FtZXJhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gcmMoKSxYYSh0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkLFwic2V0Q2FtZXJhKClcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtY2FtZXJhXCIsY2FtZXJhRGV2aWNlSWQ6ZX0sKGZ1bmN0aW9uKGUpe24oe2RldmljZTplLmRldmljZX0pfSkpfSkpfX0se2tleTpcInNldEF1ZGlvRGV2aWNlXCIsdmFsdWU6KHE9cCgoZnVuY3Rpb24qKGUpe3JldHVybiByYygpLHRoaXMubmF0aXZlVXRpbHMoKS5zZXRBdWRpb0RldmljZShlKSx7ZGV2aWNlSWQ6eWllbGQgdGhpcy5uYXRpdmVVdGlscygpLmdldEF1ZGlvRGV2aWNlKCl9fSkpLGZ1bmN0aW9uKGUpe3JldHVybiBxLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiY3ljbGVDYW1lcmFcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiY3ljbGUtY2FtZXJhXCIscHJvcGVydGllczp0fSwoZnVuY3Rpb24oZSl7bih7ZGV2aWNlOmUuZGV2aWNlfSl9KSl9KSl9fSx7a2V5OlwiY3ljbGVNaWNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5jKCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJjeWNsZS1taWNcIn0sKGZ1bmN0aW9uKGUpe3Qoe2RldmljZTplLmRldmljZX0pfSkpfSkpfX0se2tleTpcImdldENhbWVyYUZhY2luZ01vZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHJjKCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtY2FtZXJhLWZhY2luZy1tb2RlXCJ9LChmdW5jdGlvbihlKXt0KGUuZmFjaW5nTW9kZSl9KSl9KSl9fSx7a2V5Olwic2V0SW5wdXREZXZpY2VzQXN5bmNcIix2YWx1ZTooJD1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcyxuPWUuYXVkaW9EZXZpY2VJZCxyPWUudmlkZW9EZXZpY2VJZCxpPWUuYXVkaW9Tb3VyY2Usbz1lLnZpZGVvU291cmNlO2lmKG5jKCksdm9pZCAwIT09aSYmKG49aSksdm9pZCAwIT09byYmKHI9byksXCJib29sZWFuXCI9PXR5cGVvZiBuJiYodGhpcy5fc2V0QWxsb3dMb2NhbEF1ZGlvKG4pLG49dm9pZCAwKSxcImJvb2xlYW5cIj09dHlwZW9mIHImJih0aGlzLl9zZXRBbGxvd0xvY2FsVmlkZW8ocikscj12b2lkIDApLCFuJiYhcilyZXR1cm4geWllbGQgdGhpcy5nZXRJbnB1dERldmljZXMoKTt2YXIgcz17fTtyZXR1cm4gbiYmKG4gaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrPyh0aGlzLl9zaGFyZWRUcmFja3MuYXVkaW9UcmFjaz1uLG49UW8scy5hdWRpbz17c2V0dGluZ3M6e2N1c3RvbVRyYWNrOm59fSk6KGRlbGV0ZSB0aGlzLl9zaGFyZWRUcmFja3MuYXVkaW9UcmFjayxzLmF1ZGlvPXtzZXR0aW5nczp7ZGV2aWNlSWQ6bn19KSksciYmKHIgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrPyh0aGlzLl9zaGFyZWRUcmFja3MudmlkZW9UcmFjaz1yLHI9UW8scy52aWRlbz17c2V0dGluZ3M6e2N1c3RvbVRyYWNrOnJ9fSk6KGRlbGV0ZSB0aGlzLl9zaGFyZWRUcmFja3MudmlkZW9UcmFjayxzLnZpZGVvPXtzZXR0aW5nczp7ZGV2aWNlSWQ6cn19KSksdGhpcy5fY2FsbE9iamVjdE1vZGUmJnRoaXMubmVlZHNMb2FkKCk/KHRoaXMuX3VwZGF0ZVByZWxvYWRDYWNoZUlucHV0U2V0dGluZ3MocywhMSksdGhpcy5fZGV2aWNlc0Zyb21JbnB1dFNldHRpbmdzKHRoaXMuX2lucHV0U2V0dGluZ3MpKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1pbnB1dC1kZXZpY2VzXCIsYXVkaW9EZXZpY2VJZDpuLHZpZGVvRGV2aWNlSWQ6cn0sKGZ1bmN0aW9uKG4pe2lmKGRlbGV0ZSBuLmFjdGlvbixkZWxldGUgbi5jYWxsYmFja1N0YW1wLG4ucmV0dXJuUHJlbG9hZENhY2hlKXJldHVybiB0Ll91cGRhdGVQcmVsb2FkQ2FjaGVJbnB1dFNldHRpbmdzKHMsITEpLHZvaWQgZSh0Ll9kZXZpY2VzRnJvbUlucHV0U2V0dGluZ3ModC5faW5wdXRTZXR0aW5ncykpO2Uobil9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuICQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZXRPdXRwdXREZXZpY2VBc3luY1wiLHZhbHVlOihKPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzLG49ZS5vdXRwdXREZXZpY2VJZDtpZihuYygpLCFufHxcInN0cmluZ1wiIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoXCJvdXRwdXREZXZpY2VJZCBtdXN0IGJlIHByb3ZpZGVkIGFuZCBtdXN0IGJlIGEgdmFsaWQgZGV2aWNlIGlkXCIpO3JldHVybiB0aGlzLl9wcmVsb2FkQ2FjaGUub3V0cHV0RGV2aWNlSWQ9bix0aGlzLl9jYWxsT2JqZWN0TW9kZSYmdGhpcy5uZWVkc0xvYWQoKT90aGlzLl9kZXZpY2VzRnJvbUlucHV0U2V0dGluZ3ModGhpcy5faW5wdXRTZXR0aW5ncyk6bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUscil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1vdXRwdXQtZGV2aWNlXCIsb3V0cHV0RGV2aWNlSWQ6bn0sKGZ1bmN0aW9uKG4pe2lmKGRlbGV0ZSBuLmFjdGlvbixkZWxldGUgbi5jYWxsYmFja1N0YW1wLG4uZXJyb3Ipe3ZhciBpPW5ldyBFcnJvcihuLmVycm9yLm1lc3NhZ2UpO3JldHVybiBpLnR5cGU9bi5lcnJvci50eXBlLHZvaWQgcihpKX1uLnJldHVyblByZWxvYWRDYWNoZT9lKHQuX2RldmljZXNGcm9tSW5wdXRTZXR0aW5ncyh0Ll9pbnB1dFNldHRpbmdzKSk6ZShuKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gSi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImdldElucHV0RGV2aWNlc1wiLHZhbHVlOihWPXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2NhbGxPYmplY3RNb2RlJiZ0aGlzLm5lZWRzTG9hZCgpP3RoaXMuX2RldmljZXNGcm9tSW5wdXRTZXR0aW5ncyh0aGlzLl9pbnB1dFNldHRpbmdzKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImdldC1pbnB1dC1kZXZpY2VzXCJ9LChmdW5jdGlvbihuKXtuLnJldHVyblByZWxvYWRDYWNoZT90KGUuX2RldmljZXNGcm9tSW5wdXRTZXR0aW5ncyhlLl9pbnB1dFNldHRpbmdzKSk6dCh7Y2FtZXJhOm4uY2FtZXJhLG1pYzpuLm1pYyxzcGVha2VyOm4uc3BlYWtlcn0pfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIFYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJuYXRpdmVJbkNhbGxBdWRpb01vZGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiByYygpLHRoaXMuX25hdGl2ZUluQ2FsbEF1ZGlvTW9kZX19LHtrZXk6XCJzZXROYXRpdmVJbkNhbGxBdWRpb01vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihyYygpLFtEYSxOYV0uaW5jbHVkZXMoZSkpe2lmKGUhPT10aGlzLl9uYXRpdmVJbkNhbGxBdWRpb01vZGUpcmV0dXJuIHRoaXMuX25hdGl2ZUluQ2FsbEF1ZGlvTW9kZT1lLCF0aGlzLmRpc2FibGVSZWFjdE5hdGl2ZUF1dG9EZXZpY2VNYW5hZ2VtZW50KFwiYXVkaW9cIikmJkthKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbikmJnRoaXMubmF0aXZlVXRpbHMoKS5zZXRBdWRpb01vZGUodGhpcy5fbmF0aXZlSW5DYWxsQXVkaW9Nb2RlKSx0aGlzfWVsc2UgY29uc29sZS5lcnJvcihcImludmFsaWQgaW4tY2FsbCBhdWRpbyBtb2RlIHNwZWNpZmllZDogXCIsZSl9fSx7a2V5OlwicHJlQXV0aFwiLHZhbHVlOihVPXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307aWYoZWModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJwcmVBdXRoKClcIiksWWEodGhpcy5fY2FsbFN0YXRlLHRoaXMuX2lzUHJlcGFyaW5nVG9Kb2luLFwicHJlQXV0aCgpXCIpLHRoaXMubmVlZHNMb2FkKCkmJih5aWVsZCB0aGlzLmxvYWQodCkpLCF0LnVybCl0aHJvdyBuZXcgRXJyb3IoXCJwcmVBdXRoKCkgcmVxdWlyZXMgYXQgbGVhc3QgYSB1cmwgdG8gYmUgcHJvdmlkZWRcIik7cmV0dXJuIHRoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKHQpLHRoaXMucHJvcGVydGllcz1BYShBYSh7fSx0aGlzLnByb3BlcnRpZXMpLHQpLG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2UuX3ByZWxvYWRDYWNoZS5pbnB1dFNldHRpbmdzPWUuX3ByZXBJbnB1dFNldHRpbmdzRm9yU2hhcmluZyhlLl9pbnB1dFNldHRpbmdzLCExKSxlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXByZWF1dGhcIixwcm9wZXJ0aWVzOkdhKGUucHJvcGVydGllcyxlLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOkdhKGUuX3ByZWxvYWRDYWNoZSxlLmNhbGxDbGllbnRJZCl9LChmdW5jdGlvbihyKXtyZXR1cm4gci5lcnJvcj9uKHIuZXJyb3IpOnIuYWNjZXNzPyhlLl9kaWRQcmVBdXRoPSEwLHZvaWQgdCh7YWNjZXNzOnIuYWNjZXNzfSkpOm4obmV3IEVycm9yKFwidW5rbm93biBlcnJvciBpbiBwcmVBdXRoKClcIikpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIFUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJsb2FkXCIsdmFsdWU6KFI9cCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5uZWVkc0xvYWQoKSl7aWYodGhpcy5fZGVzdHJveWVkJiYodGhpcy5fbG9nVXNlQWZ0ZXJEZXN0cm95KCksdGhpcy5zdHJpY3RNb2RlKSl0aHJvdyBuZXcgRXJyb3IoXCJVc2UgYWZ0ZXIgZGVzdHJveVwiKTtpZihlJiYodGhpcy52YWxpZGF0ZVByb3BlcnRpZXMoZSksdGhpcy5wcm9wZXJ0aWVzPUFhKEFhKHt9LHRoaXMucHJvcGVydGllcyksZSkpLCF0aGlzLl9jYWxsT2JqZWN0TW9kZSYmIXRoaXMucHJvcGVydGllcy51cmwpdGhyb3cgbmV3IEVycm9yKFwiY2FuJ3QgbG9hZCBpZnJhbWUgbWVldGluZyBiZWNhdXNlIHVybCBwcm9wZXJ0eSBpc24ndCBzZXRcIik7cmV0dXJuIHRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShuaSksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246Vml9KSx0aGlzLl9jYWxsT2JqZWN0TW9kZT9uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxuKXt0Ll9jYWxsT2JqZWN0TG9hZGVyLmNhbmNlbCgpO3ZhciByPURhdGUubm93KCk7dC5fY2FsbE9iamVjdExvYWRlci5sb2FkKHQucHJvcGVydGllcy5kYWlseUNvbmZpZywoZnVuY3Rpb24obil7dC5fYnVuZGxlTG9hZFRpbWU9bj9cIm5vLW9wXCI6RGF0ZS5ub3coKS1yLHQuX3VwZGF0ZUNhbGxTdGF0ZShyaSksbiYmdC5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246JGl9KSxlKCl9KSwoZnVuY3Rpb24oZSxyKXtpZih0LmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpKaX0pLCFyKXt0Ll91cGRhdGVDYWxsU3RhdGUoYWkpLHQucmVzZXRNZWV0aW5nRGVwZW5kZW50VmFycygpO3ZhciBpPXthY3Rpb246Sm8sZXJyb3JNc2c6ZS5tc2csZXJyb3I6e3R5cGU6XCJjb25uZWN0aW9uLWVycm9yXCIsbXNnOlwiRmFpbGVkIHRvIGxvYWQgY2FsbCBvYmplY3QgYnVuZGxlLlwiLGRldGFpbHM6e29uOlwibG9hZFwiLHNvdXJjZUVycm9yOmUsYnVuZGxlVXJsOkIodC5wcm9wZXJ0aWVzLmRhaWx5Q29uZmlnKX19fTt0Ll9tYXliZVNlbmRUb1NlbnRyeShpKSx0LmVtaXREYWlseUpTRXZlbnQoaSksbihlLm1zZyl9fSkpfSkpOih0aGlzLl9pZnJhbWUuc3JjPUYodGhpcy5hc3NlbWJsZU1lZXRpbmdVcmwoKSx0aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcpLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3QuX2xvYWRlZENhbGxiYWNrPWZ1bmN0aW9uKHIpe3QuX2NhbGxTdGF0ZSE9PWFpPyh0Ll91cGRhdGVDYWxsU3RhdGUocmkpLCh0LnByb3BlcnRpZXMuY3NzRmlsZXx8dC5wcm9wZXJ0aWVzLmNzc1RleHQpJiZ0LmxvYWRDc3ModC5wcm9wZXJ0aWVzKSxlKCkpOm4ocil9fSkpKX19KSksZnVuY3Rpb24oZSl7cmV0dXJuIFIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJqb2luXCIsdmFsdWU6KEw9cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLl90ZXN0Q2FsbEluUHJvZ3Jlc3MmJnRoaXMuc3RvcFRlc3RDYWxsUXVhbGl0eSgpO3ZhciBuPSExO2lmKHRoaXMubmVlZHNMb2FkKCkpe3RoaXMudXBkYXRlSXNQcmVwYXJpbmdUb0pvaW4oITApO3RyeXt5aWVsZCB0aGlzLmxvYWQodCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMudXBkYXRlSXNQcmVwYXJpbmdUb0pvaW4oITEpLFByb21pc2UucmVqZWN0KGUpfX1lbHNle2lmKG49ISghdGhpcy5wcm9wZXJ0aWVzLmNzc0ZpbGUmJiF0aGlzLnByb3BlcnRpZXMuY3NzVGV4dCksdGhpcy5fZGlkUHJlQXV0aCl7aWYodC51cmwmJnQudXJsIT09dGhpcy5wcm9wZXJ0aWVzLnVybClyZXR1cm4gY29uc29sZS5lcnJvcihcInVybCBpbiBqb2luKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpO2lmKHQudG9rZW4mJnQudG9rZW4hPT10aGlzLnByb3BlcnRpZXMudG9rZW4pcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ0b2tlbiBpbiBqb2luKCkgaXMgZGlmZmVyZW50IHRoYW4gdGhlIG9uZSB1c2VkIGluIHByZUF1dGgoKVwiKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpfWlmKHQudXJsJiYhdGhpcy5fY2FsbE9iamVjdE1vZGUmJnQudXJsJiZ0LnVybCE9PXRoaXMucHJvcGVydGllcy51cmwpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJ1cmwgaW4gam9pbigpIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBvbmUgdXNlZCBpbiBsb2FkKCkgKFwiLmNvbmNhdCh0aGlzLnByb3BlcnRpZXMudXJsLFwiIC0+IFwiKS5jb25jYXQodC51cmwsXCIpXCIpKSx0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSxQcm9taXNlLnJlamVjdCgpO3RoaXMudmFsaWRhdGVQcm9wZXJ0aWVzKHQpLHRoaXMucHJvcGVydGllcz1BYShBYSh7fSx0aGlzLnByb3BlcnRpZXMpLHQpfXJldHVybiB2b2lkIDAhPT10LnNob3dMb2NhbFZpZGVvJiYodGhpcy5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dMb2NhbFZpZGVvIGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbE9iamVjdCBtb2RlXCIpOnRoaXMuX3Nob3dMb2NhbFZpZGVvPSEhdC5zaG93TG9jYWxWaWRlbyksdm9pZCAwIT09dC5zaG93UGFydGljaXBhbnRzQmFyJiYodGhpcy5fY2FsbE9iamVjdE1vZGU/Y29uc29sZS5lcnJvcihcInNob3dQYXJ0aWNpcGFudHNCYXIgaXMgbm90IGF2YWlsYWJsZSBpbiBjYWxsT2JqZWN0IG1vZGVcIik6dGhpcy5fc2hvd1BhcnRpY2lwYW50c0Jhcj0hIXQuc2hvd1BhcnRpY2lwYW50c0JhciksdGhpcy5fY2FsbFN0YXRlPT09b2l8fHRoaXMuX2NhbGxTdGF0ZT09PWlpPyhjb25zb2xlLndhcm4oXCJhbHJlYWR5IGpvaW5lZCBtZWV0aW5nLCBjYWxsIGxlYXZlKCkgYmVmb3JlIGpvaW5pbmcgYWdhaW5cIiksdm9pZCB0aGlzLnVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luKCExKSk6KHRoaXMuX3VwZGF0ZUNhbGxTdGF0ZShpaSwhMSksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246V2l9KSx0aGlzLl9wcmVsb2FkQ2FjaGUuaW5wdXRTZXR0aW5ncz10aGlzLl9wcmVwSW5wdXRTZXR0aW5nc0ZvclNoYXJpbmcodGhpcy5faW5wdXRTZXR0aW5nc3x8e30sITEpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJqb2luLW1lZXRpbmdcIixwcm9wZXJ0aWVzOkdhKHRoaXMucHJvcGVydGllcyx0aGlzLmNhbGxDbGllbnRJZCkscHJlbG9hZENhY2hlOkdhKHRoaXMuX3ByZWxvYWRDYWNoZSx0aGlzLmNhbGxDbGllbnRJZCl9KSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxyKXtlLl9qb2luZWRDYWxsYmFjaz1mdW5jdGlvbihpLG8pe2lmKGUuX2NhbGxTdGF0ZSE9PWFpKXtpZihlLl91cGRhdGVDYWxsU3RhdGUob2kpLGkpZm9yKHZhciBzIGluIGkpe2lmKGUuX2NhbGxPYmplY3RNb2RlKXt2YXIgYT1lLl9jYWxsTWFjaGluZSgpLnN0b3JlO1pzKGlbc10sYSksZWEoaVtzXSxhKSxuYShpW3NdLGUuX3BhcnRpY2lwYW50c1tzXSxhKX1lLl9wYXJ0aWNpcGFudHNbc109QWEoe30saVtzXSksZS50b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXMoKX1uJiZlLmxvYWRDc3MoZS5wcm9wZXJ0aWVzKSx0KGkpfWVsc2UgcihvKX19KSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIEwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJsZWF2ZVwiLHZhbHVlOih4PXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3Rlc3RDYWxsSW5Qcm9ncmVzcyYmdGhpcy5zdG9wVGVzdENhbGxRdWFsaXR5KCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2UuX2NhbGxTdGF0ZT09PXNpfHxlLl9jYWxsU3RhdGU9PT1haT90KCk6ZS5fY2FsbE9iamVjdExvYWRlciYmIWUuX2NhbGxPYmplY3RMb2FkZXIubG9hZGVkPyhlLl9jYWxsT2JqZWN0TG9hZGVyLmNhbmNlbCgpLGUuX3VwZGF0ZUNhbGxTdGF0ZShzaSksZS5yZXNldE1lZXRpbmdEZXBlbmRlbnRWYXJzKCksZS5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246c2l9KSx0KCkpOihlLl9yZXNvbHZlTGVhdmU9dCxlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwibGVhdmUtbWVldGluZ1wifSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIHguYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdGFydFNjcmVlblNoYXJlXCIsdmFsdWU6KEk9cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtpZihYYSh0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkLFwic3RhcnRTY3JlZW5TaGFyZSgpXCIpLHQuc2NyZWVuVmlkZW9TZW5kU2V0dGluZ3MmJnRoaXMuX3ZhbGlkYXRlVmlkZW9TZW5kU2V0dGluZ3MoXCJzY3JlZW5WaWRlb1wiLHQuc2NyZWVuVmlkZW9TZW5kU2V0dGluZ3MpLHQubWVkaWFTdHJlYW0mJih0aGlzLl9zaGFyZWRUcmFja3Muc2NyZWVuTWVkaWFTdHJlYW09dC5tZWRpYVN0cmVhbSx0Lm1lZGlhU3RyZWFtPVFvKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgRGFpbHlOYXRpdmVVdGlscyYmdm9pZCAwIT09RGFpbHlOYXRpdmVVdGlscy5pc0lPUyYmRGFpbHlOYXRpdmVVdGlscy5pc0lPUyl7dmFyIG49dGhpcy5uYXRpdmVVdGlscygpO2lmKHlpZWxkIG4uaXNTY3JlZW5CZWluZ0NhcHR1cmVkKCkpcmV0dXJuIHZvaWQgdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246Vm8sdHlwZTpcInNjcmVlbi1zaGFyZS1lcnJvclwiLGVycm9yTXNnOlwiQ291bGQgbm90IHN0YXJ0IHRoZSBzY3JlZW4gc2hhcmluZy4gVGhlIHNjcmVlbiBpcyBhbHJlYWR5IGJlZW4gY2FwdHVyZWQhXCJ9KTtuLnNldFN5c3RlbVNjcmVlbkNhcHR1cmVTdGFydENhbGxiYWNrKChmdW5jdGlvbigpe24uc2V0U3lzdGVtU2NyZWVuQ2FwdHVyZVN0YXJ0Q2FsbGJhY2sobnVsbCksZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpXbyxjYXB0dXJlT3B0aW9uczp0fSl9KSksbi5wcmVzZW50U3lzdGVtU2NyZWVuQ2FwdHVyZVByb21wdCgpfWVsc2UgdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpXbyxjYXB0dXJlT3B0aW9uczp0fSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gSS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInN0b3BTY3JlZW5TaGFyZVwiLHZhbHVlOmZ1bmN0aW9uKCl7WGEodGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZCxcInN0b3BTY3JlZW5TaGFyZSgpXCIpLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJsb2NhbC1zY3JlZW4tc3RvcFwifSl9fSx7a2V5Olwic3RhcnRSZWNvcmRpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSx0PWUudHlwZTtpZih0JiZcImNsb3VkXCIhPT10JiZcInJhdy10cmFja3NcIiE9PXQmJlwibG9jYWxcIiE9PXQpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB0eXBlOiBcIi5jb25jYXQodCxcIiwgYWxsb3dlZCB2YWx1ZXMgJ2Nsb3VkJywgJ3Jhdy10cmFja3MnLCBvciAnbG9jYWwnXCIpKTt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShBYSh7YWN0aW9uOlwibG9jYWwtcmVjb3JkaW5nLXN0YXJ0XCJ9LGUpKX19LHtrZXk6XCJ1cGRhdGVSZWNvcmRpbmdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmxheW91dCxuPXZvaWQgMD09PXQ/e3ByZXNldDpcImRlZmF1bHRcIn06dCxyPWUuaW5zdGFuY2VJZDt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXVwZGF0ZS1yZWNvcmRpbmdcIixsYXlvdXQ6bixpbnN0YW5jZUlkOnJ9KX19LHtrZXk6XCJzdG9wUmVjb3JkaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpcImxvY2FsLXJlY29yZGluZy1zdG9wXCJ9LGUpKX19LHtrZXk6XCJzdGFydExpdmVTdHJlYW1pbmdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShBYSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LWxpdmUtc3RyZWFtaW5nXCJ9LGUpKX19LHtrZXk6XCJ1cGRhdGVMaXZlU3RyZWFtaW5nXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sYXlvdXQsbj12b2lkIDA9PT10P3twcmVzZXQ6XCJkZWZhdWx0XCJ9OnQscj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtbGl2ZS1zdHJlYW1pbmdcIixsYXlvdXQ6bixpbnN0YW5jZUlkOnJ9KX19LHtrZXk6XCJhZGRMaXZlU3RyZWFtaW5nRW5kcG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmRwb2ludHMsbj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpIbyxlbmRwb2ludHNPcDplcyxlbmRwb2ludHM6dCxpbnN0YW5jZUlkOm59KX19LHtrZXk6XCJyZW1vdmVMaXZlU3RyZWFtaW5nRW5kcG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmRwb2ludHMsbj1lLmluc3RhbmNlSWQ7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpIbyxlbmRwb2ludHNPcDp0cyxlbmRwb2ludHM6dCxpbnN0YW5jZUlkOm59KX19LHtrZXk6XCJzdG9wTGl2ZVN0cmVhbWluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKEFhKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc3RvcC1saXZlLXN0cmVhbWluZ1wifSxlKSl9fSx7a2V5OlwidmFsaWRhdGVEYWlseUNvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY2FtU2ltdWxjYXN0RW5jb2RpbmdzJiYoY29uc29sZS53YXJuKFwiY2FtU2ltdWxjYXN0RW5jb2RpbmdzIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZW5kU2V0dGluZ3MsIGZvdW5kIGluIERhaWx5Q2FsbE9wdGlvbnMsIHRvIHByb3ZpZGUgY2FtZXJhIHNpbXVsY2FzdCBzZXR0aW5ncy5cIiksdGhpcy52YWxpZGF0ZVNpbXVsY2FzdEVuY29kaW5ncyhlLmNhbVNpbXVsY2FzdEVuY29kaW5ncykpLGUuc2NyZWVuU2ltdWxjYXN0RW5jb2RpbmdzJiZjb25zb2xlLndhcm4oXCJzY3JlZW5TaW11bGNhc3RFbmNvZGluZ3MgaXMgZGVwcmVjYXRlZC4gVXNlIHNlbmRTZXR0aW5ncywgZm91bmQgaW4gRGFpbHlDYWxsT3B0aW9ucywgdG8gcHJvdmlkZSBzY3JlZW4gc2ltdWxjYXN0IHNldHRpbmdzLlwiKSx2cygpJiZlLm5vQXV0b0RlZmF1bHREZXZpY2VDaGFuZ2UmJmNvbnNvbGUud2FybihcIm5vQXV0b0RlZmF1bHREZXZpY2VDaGFuZ2UgaXMgbm90IHN1cHBvcnRlZCBvbiBBbmRyb2lkLCBhbmQgd2lsbCBiZSBpZ25vcmVkLlwiKX19LHtrZXk6XCJ2YWxpZGF0ZVNpbXVsY2FzdEVuY29kaW5nc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTtpZihlKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IEVycm9yKFwiZW5jb2RpbmdzIG11c3QgYmUgYW4gQXJyYXlcIik7aWYoIWJjKGUubGVuZ3RoLDEsMykpdGhyb3cgbmV3IEVycm9yKFwiZW5jb2RpbmdzIG11c3QgYmUgYW4gQXJyYXkgd2l0aCBiZXR3ZWVuIDEgdG8gXCIuY29uY2F0KDMsXCIgbGF5ZXJzXCIpKTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXTtmb3IodmFyIG8gaW4gdGhpcy5fdmFsaWRhdGVFbmNvZGluZ0xheWVySGFzVmFsaWRQcm9wZXJ0aWVzKGkpLGkpaWYoVWEuaW5jbHVkZXMobykpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBpW29dKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdChvLFwiIG11c3QgYmUgYSBudW1iZXJcIikpO2lmKHQpe3ZhciBzPXRbb10sYT1zLm1pbixjPXMubWF4O2lmKCFiYyhpW29dLGEsYykpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KG8sXCIgdmFsdWUgbm90IGluIHJhbmdlLiB2YWxpZCByYW5nZTogXCIpLmNvbmNhdChhLFwiIHRvIFwiKS5jb25jYXQoYykpfX1lbHNlIGlmKCFbXCJhY3RpdmVcIixcInNjYWxhYmlsaXR5TW9kZVwiXS5pbmNsdWRlcyhvKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGtleSBcIi5jb25jYXQobyxcIiwgdmFsaWQga2V5cyBhcmU6XCIpK09iamVjdC52YWx1ZXMoVWEpKTtpZihuJiYhaS5oYXNPd25Qcm9wZXJ0eShcIm1heEJpdHJhdGVcIikpdGhyb3cgbmV3IEVycm9yKFwibWF4Qml0cmF0ZSBpcyBub3Qgc3BlY2lmaWVkXCIpfX19fSx7a2V5Olwic3RhcnRSZW1vdGVNZWRpYVBsYXllclwiLHZhbHVlOihqPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzLG49ZS51cmwscj1lLnNldHRpbmdzLGk9dm9pZCAwPT09cj97c3RhdGU6WG8uUExBWX06cjt0cnl7IWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcigndXJsIHBhcmFtZXRlciBtdXN0IGJlIFwic3RyaW5nXCIgdHlwZScpfShuKSx5YyhpKSxmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZighVmEuaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBrZXkgXCIuY29uY2F0KHQsXCIsIHZhbGlkIGtleXMgYXJlOiBcIikuY29uY2F0KFZhKSk7ZS5zaW11bGNhc3RFbmNvZGluZ3MmJnRoaXMudmFsaWRhdGVTaW11bGNhc3RFbmNvZGluZ3MoZS5zaW11bGNhc3RFbmNvZGluZ3MsQmEsITApfShpKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKFwiaW52YWxpZCBhcmd1bWVudCBFcnJvcjogXCIuY29uY2F0KGUpKSxjb25zb2xlLmVycm9yKCdzdGFydFJlbW90ZU1lZGlhUGxheWVyIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHRoZSBmb3JtOlxcbiAgeyB1cmw6IFwicGxheWJhY2sgdXJsXCIsXFxuICBzZXR0aW5ncz86XFxuICB7c3RhdGU6IFwicGxheVwifFwicGF1c2VcIiwgc2ltdWxjYXN0RW5jb2RpbmdzPzogW3t9XSB9IH0nKSxlfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSxyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LXJlbW90ZS1tZWRpYS1wbGF5ZXJcIix1cmw6bixzZXR0aW5nczppfSwoZnVuY3Rpb24odCl7dC5lcnJvcj9yKHtlcnJvcjp0LmVycm9yLGVycm9yTXNnOnQuZXJyb3JNc2d9KTplKHtzZXNzaW9uX2lkOnQuc2Vzc2lvbl9pZCxyZW1vdGVNZWRpYVBsYXllclN0YXRlOntzdGF0ZTp0LnN0YXRlLHNldHRpbmdzOnQuc2V0dGluZ3N9fSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIGouYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdG9wUmVtb3RlTWVkaWFQbGF5ZXJcIix2YWx1ZTooQT1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCIgcmVtb3RlUGxheWVySUQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wiKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC1zdG9wLXJlbW90ZS1tZWRpYS1wbGF5ZXJcIixzZXNzaW9uX2lkOmV9LChmdW5jdGlvbihlKXtlLmVycm9yP3Ioe2Vycm9yOmUuZXJyb3IsZXJyb3JNc2c6ZS5lcnJvck1zZ30pOm4oKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gQS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInVwZGF0ZVJlbW90ZU1lZGlhUGxheWVyXCIsdmFsdWU6KFA9cCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXMsbj1lLnNlc3Npb25faWQscj1lLnNldHRpbmdzO3RyeXt5YyhyKX1jYXRjaChlKXt0aHJvdyBjb25zb2xlLmVycm9yKFwiaW52YWxpZCBhcmd1bWVudCBFcnJvcjogXCIuY29uY2F0KGUpKSxjb25zb2xlLmVycm9yKCd1cGRhdGVSZW1vdGVNZWRpYVBsYXllciBhcmd1bWVudHMgbXVzdCBiZSBvZiB0aGUgZm9ybTpcXG4gIHNlc3Npb25faWQ6IFwicGFydGljaXBhbnQgc2Vzc2lvblwiLFxcbiAgeyBzZXR0aW5ncz86IHtzdGF0ZTogXCJwbGF5XCJ8XCJwYXVzZVwifSB9JyksZX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsaSl7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtcmVtb3RlLW1lZGlhLXBsYXllclwiLHNlc3Npb25faWQ6bixzZXR0aW5nczpyfSwoZnVuY3Rpb24odCl7dC5lcnJvcj9pKHtlcnJvcjp0LmVycm9yLGVycm9yTXNnOnQuZXJyb3JNc2d9KTplKHtzZXNzaW9uX2lkOnQuc2Vzc2lvbl9pZCxyZW1vdGVNZWRpYVBsYXllclN0YXRlOntzdGF0ZTp0LnN0YXRlLHNldHRpbmdzOnQuc2V0dGluZ3N9fSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIFAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdGFydFRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdGFydFRyYW5zY3JpcHRpb24oKVwiKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShBYSh7YWN0aW9uOlwiZGFpbHktbWV0aG9kLXN0YXJ0LXRyYW5zY3JpcHRpb25cIn0sZSkpfX0se2tleTpcInVwZGF0ZVRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihRYSh0aGlzLl9jYWxsU3RhdGUsXCJ1cGRhdGVUcmFuc2NyaXB0aW9uKClcIiksIWUpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogb3B0aW9ucyBpcyBtYW5kYXRvcnlcIik7aWYoXCJvYmplY3RcIiE9PW4oZSkpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogb3B0aW9ucyBtdXN0IGJlIG9iamVjdCB0eXBlXCIpO2lmKGUucGFydGljaXBhbnRzJiYhQXJyYXkuaXNBcnJheShlLnBhcnRpY2lwYW50cykpdGhyb3cgbmV3IEVycm9yKFwidXBkYXRlVHJhbnNjcmlwdGlvbiBFcnJvcjogcGFydGljaXBhbnRzIG11c3QgYmUgYW4gYXJyYXlcIik7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpcImRhaWx5LW1ldGhvZC11cGRhdGUtdHJhbnNjcmlwdGlvblwifSxlKSl9fSx7a2V5Olwic3RvcFRyYW5zY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZihRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wVHJhbnNjcmlwdGlvbigpXCIpLGUmJlwib2JqZWN0XCIhPT1uKGUpKXRocm93IG5ldyBFcnJvcihcInN0b3BUcmFuc2NyaXB0aW9uIEVycm9yOiBvcHRpb25zIG11c3QgYmUgb2JqZWN0IHR5cGVcIik7aWYoZSYmIWUuaW5zdGFuY2VJZCl0aHJvdyBuZXcgRXJyb3IoJ1wiaW5zdGFuY2VJZFwiIG5vdCBwcm92aWRlZCcpO3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKEFhKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc3RvcC10cmFuc2NyaXB0aW9uXCJ9LGUpKX19LHtrZXk6XCJzdGFydERpYWxPdXRcIix2YWx1ZTooTz1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdGFydERpYWxPdXQoKVwiKTt2YXIgbj1mdW5jdGlvbihlKXtpZihlKXtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgbXVzdCBiZSBhbiBhcnJheVwiKTtpZihlLmxlbmd0aDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgYXJyYXkgc3BlY2lmaWVkIGJ1dCBlbXB0eVwiKTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBhdWRpbyBjb2RlYyBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKFwiT1BVU1wiIT09ZSYmXCJQQ01VXCIhPT1lJiZcIlBDTUFcIiE9PWUmJlwiRzcyMlwiIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogYXVkaW8gY29kZWMgbXVzdCBiZSBvbmUgb2YgT1BVUywgUENNVSwgUENNQSwgRzcyMlwiKX0pKX19O2lmKCFlLnNpcFVyaSYmIWUucGhvbmVOdW1iZXIpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGVpdGhlciBhIHNpcCB1cmkgb3IgcGhvbmUgbnVtYmVyIG11c3QgYmUgcHJvdmlkZWRcIik7aWYoZS5zaXBVcmkmJmUucGhvbmVOdW1iZXIpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IG9ubHkgb25lIG9mIHNpcCB1cmkgb3IgcGhvbmUgbnVtYmVyIG11c3QgYmUgcHJvdmlkZWRcIik7aWYoZS5zaXBVcmkpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLnNpcFVyaSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogc2lwVXJpIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoIWUuc2lwVXJpLnN0YXJ0c1dpdGgoXCJzaXA6XCIpKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBJbnZhbGlkIFNJUCBVUkksIG11c3Qgc3RhcnQgd2l0aCAnc2lwOidcIik7aWYoZS52aWRlbyYmXCJib29sZWFuXCIhPXR5cGVvZiBlLnZpZGVvKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBtdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZVwiKTshZnVuY3Rpb24oZSl7aWYoZSYmKG4oZS5hdWRpbyksZS52aWRlbykpe2lmKCFBcnJheS5pc0FycmF5KGUudmlkZW8pKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBjb2RlYyBtdXN0IGJlIGFuIGFycmF5XCIpO2lmKGUudmlkZW8ubGVuZ3RoPD0wKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB2aWRlbyBjb2RlYyBhcnJheSBzcGVjaWZpZWQgYnV0IGVtcHR5XCIpO2UudmlkZW8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IHZpZGVvIGNvZGVjIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoXCJIMjY0XCIhPT1lJiZcIlZQOFwiIT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogdmlkZW8gY29kZWMgbXVzdCBiZSBIMjY0IG9yIFZQOFwiKX0pKX19KGUuY29kZWNzKX1pZihlLnBob25lTnVtYmVyKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZS5waG9uZU51bWJlcil0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogcGhvbmVOdW1iZXIgbXVzdCBiZSBhIHN0cmluZ1wiKTtpZighL15cXCtcXGR7MSx9JC8udGVzdChlLnBob25lTnVtYmVyKSl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogSW52YWxpZCBwaG9uZSBudW1iZXIsIG11c3QgYmUgdmFsaWQgcGhvbmUgbnVtYmVyIGFzIHBlciBFLjE2NFwiKTtlLmNvZGVjcyYmbihlLmNvZGVjcy5hdWRpbyl9aWYoZS5jYWxsZXJJZCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUuY2FsbGVySWQpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGNhbGxlcklkIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoZS5zaXBVcmkpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGNhbGxlcklkIG5vdCBhbGxvd2VkIHdpdGggc2lwVXJpXCIpfWlmKGUuZGlzcGxheU5hbWUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLmRpc3BsYXlOYW1lKXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiBkaXNwbGF5TmFtZSBtdXN0IGJlIGEgc3RyaW5nXCIpO2lmKGUuZGlzcGxheU5hbWUubGVuZ3RoPj0yMDApdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZGlhbCBvdXQ6IGRpc3BsYXlOYW1lIGxlbmd0aCBtdXN0IGJlIGxlc3MgdGhhbiAyMDBcIil9aWYoZS51c2VySWQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlLnVzZXJJZCl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBzdGFydGluZyBkaWFsIG91dDogdXNlcklkIG11c3QgYmUgYSBzdHJpbmdcIik7aWYoZS51c2VySWQubGVuZ3RoPjM2KXRocm93IG5ldyBFcnJvcihcIkVycm9yIHN0YXJ0aW5nIGRpYWwgb3V0OiB1c2VySWQgbGVuZ3RoIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDM2XCIpfWlmKGUucGVybWlzc2lvbnMmJmUucGVybWlzc2lvbnMuY2FuUmVjZWl2ZSl7dmFyIHI9ZihDYS52YWxpZGF0ZUpTT05PYmplY3QoZS5wZXJtaXNzaW9ucy5jYW5SZWNlaXZlKSwyKSxpPXJbMF0sbz1yWzFdO2lmKCFpKXRocm93IG5ldyBFcnJvcihvKX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpcImRpYWxvdXQtc3RhcnRcIn0sZSksKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cihlLmVycm9yKTpuKGUpfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBPLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic3RvcERpYWxPdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wRGlhbE91dCgpXCIpLG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKEFhKHthY3Rpb246XCJkaWFsb3V0LXN0b3BcIn0sZSksKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cihlLmVycm9yKTpuKGUpfSkpfSkpfX0se2tleTpcInNpcENhbGxUcmFuc2ZlclwiLHZhbHVlOihUPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO2lmKFFhKHRoaXMuX2NhbGxTdGF0ZSxcInNpcENhbGxUcmFuc2ZlcigpXCIpLCFlKXRocm93IG5ldyBFcnJvcihcInNpcENhbGxUcmFuc2ZlcigpIHJlcXVpcmVzIGEgc2Vzc2lvbklkIGFuZCB0b0VuZFBvaW50XCIpO3JldHVybiBlLnVzZVNpcFJlZmVyPSExLG1jKGUsXCJzaXBDYWxsVHJhbnNmZXJcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpuc30sZSksKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cihlLmVycm9yKTpuKGUpfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBULmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2lwUmVmZXJcIix2YWx1ZTooRT1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztpZihRYSh0aGlzLl9jYWxsU3RhdGUsXCJzaXBSZWZlcigpXCIpLCFlKXRocm93IG5ldyBFcnJvcihcInNlc3Npb25JZCBhbmQgdG9FbmRQb2ludCBhcmUgbWFuZGF0b3J5IHBhcmFtZXRlclwiKTtyZXR1cm4gZS51c2VTaXBSZWZlcj0hMCxtYyhlLFwic2lwUmVmZXJcIiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpuc30sZSksKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cihlLmVycm9yKTpuKGUpfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBFLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5Olwic2VuZERUTUZcIix2YWx1ZTooQz1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztyZXR1cm4gUWEodGhpcy5fY2FsbFN0YXRlLFwic2VuZERUTUYoKVwiKSxmdW5jdGlvbihlKXt2YXIgdD1lLnNlc3Npb25JZCxuPWUudG9uZXM7aWYoIXR8fCFuKXRocm93IG5ldyBFcnJvcihcInNlc3Npb25JZCBhbmQgdG9uZXMgYXJlIG1hbmRhdG9yeSBwYXJhbWV0ZXJcIik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fFwic3RyaW5nXCIhPXR5cGVvZiBuKXRocm93IG5ldyBFcnJvcihcInNlc3Npb25JZCBhbmQgdG9uZXMgc2hvdWxkIGJlIG9mIHN0cmluZyB0eXBlXCIpO2lmKG4ubGVuZ3RoPjIwKXRocm93IG5ldyBFcnJvcihcInRvbmVzIHN0cmluZyBtdXN0IGJlIHVwdG8gMjAgY2hhcmFjdGVyc1wiKTt2YXIgcj0vW14wLTlBLUQqI10vZyxpPW4ubWF0Y2gocik7aWYoaSYmaVswXSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQoaVswXSxcIiBpcyBub3QgdmFsaWQgRFRNRiB0b25lXCIpKX0oZSksbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4scil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpcInNlbmQtZHRtZlwifSxlKSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9yKGUuZXJyb3IpOm4oZSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIEMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJnZXROZXR3b3JrU3RhdHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYodGhpcy5fY2FsbFN0YXRlIT09b2kpe3JldHVybiBQcm9taXNlLnJlc29sdmUoQWEoe3N0YXRzOntsYXRlc3Q6e319fSx0aGlzLl9uZXR3b3JrKSl9cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LWNhbGMtc3RhdHNcIn0sKGZ1bmN0aW9uKG4pe3QoQWEoQWEoe30sZS5fbmV0d29yaykse30se3N0YXRzOm4uc3RhdHN9KSl9KSl9KSl9fSx7a2V5OlwidGVzdFdlYnNvY2tldENvbm5lY3Rpdml0eVwiLHZhbHVlOihNPXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXM7aWYoWmEodGhpcy5fdGVzdENhbGxJblByb2dyZXNzLFwidGVzdFdlYnNvY2tldENvbm5lY3Rpdml0eSgpXCIpLHRoaXMubmVlZHNMb2FkKCkpdHJ5e3lpZWxkIHRoaXMubG9hZCgpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7ZS5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInRlc3Qtd2Vic29ja2V0LWNvbm5lY3Rpdml0eVwifSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9uKGUuZXJyb3IpOnQoZS5yZXN1bHRzKX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBNLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiYWJvcnRUZXN0V2Vic29ja2V0Q29ubmVjdGl2aXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiYWJvcnQtdGVzdC13ZWJzb2NrZXQtY29ubmVjdGl2aXR5XCJ9KX19LHtrZXk6XCJfdmFsaWRhdGVWaWRlb1RyYWNrRm9yTmV0d29ya1Rlc3RzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2s/ISF2YShlLHtpc0xvY2FsU2NyZWVuVmlkZW86ITF9KXx8KGNvbnNvbGUuZXJyb3IoXCJWaWRlbyB0cmFjayBpcyBub3QgcGxheWFibGUuIFRoaXMgdGVzdCBuZWVkcyBhIGxpdmUgdmlkZW8gdHJhY2suXCIpLCExKTooY29uc29sZS5lcnJvcihcIlZpZGVvIHRyYWNrIG5lZWRzIHRvIGJlIG9mIHR5cGUgYE1lZGlhU3RyZWFtVHJhY2tgLlwiKSwhMSk6KGNvbnNvbGUuZXJyb3IoXCJNaXNzaW5nIHZpZGVvIHRyYWNrLiBZb3UgbXVzdCBwcm92aWRlIGEgdmlkZW8gdHJhY2sgaW4gb3JkZXIgdG8gcnVuIHRoaXMgdGVzdC5cIiksITEpfX0se2tleTpcInRlc3RDYWxsUXVhbGl0eVwiLHZhbHVlOihrPXAoKGZ1bmN0aW9uKigpe3ZhciB0PXRoaXM7bmMoKSxlYyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInRlc3RDYWxsUXVhbGl0eSgpXCIpLFhhKHRoaXMuX2NhbGxNYWNoaW5lSW5pdGlhbGl6ZWQsXCJ0ZXN0Q2FsbFF1YWxpdHkoKVwiLG51bGwsITApLFlhKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbixcInRlc3RDYWxsUXVhbGl0eSgpXCIpO3ZhciBuPXRoaXMuX3Rlc3RDYWxsQWxyZWFkeUluUHJvZ3Jlc3Mscj1mdW5jdGlvbihlKXtufHwodC5fdGVzdENhbGxJblByb2dyZXNzPWUpfTtpZihyKCEwKSx0aGlzLm5lZWRzTG9hZCgpKXRyeXt2YXIgaT10aGlzLl9jYWxsU3RhdGU7eWllbGQgdGhpcy5sb2FkKCksdGhpcy5fY2FsbFN0YXRlPWl9Y2F0Y2goZSl7cmV0dXJuIHIoITEpLFByb21pc2UucmVqZWN0KGUpfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7dC5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInRlc3QtY2FsbC1xdWFsaXR5XCIsZGFpbHlKc1ZlcnNpb246dC5wcm9wZXJ0aWVzLmRhaWx5SnNWZXJzaW9ufSwoZnVuY3Rpb24oaSl7dmFyIG89aS5yZXN1bHRzLHM9by5yZXN1bHQsYT1lKG8sVGEpO2lmKFwiZmFpbGVkXCI9PT1zKXt2YXIgYyxsPUFhKHt9LGEpO251bGwhPT0oYz1hLmVycm9yKSYmdm9pZCAwIT09YyYmYy5kZXRhaWxzPyhhLmVycm9yLmRldGFpbHM9SlNPTi5wYXJzZShhLmVycm9yLmRldGFpbHMpLGwuZXJyb3I9QWEoQWEoe30sbC5lcnJvcikse30se2RldGFpbHM6QWEoe30sbC5lcnJvci5kZXRhaWxzKX0pLGwuZXJyb3IuZGV0YWlscy5kdXJpbmdUZXN0PVwidGVzdENhbGxRdWFsaXR5XCIpOihsLmVycm9yPWwuZXJyb3I/QWEoe30sbC5lcnJvcik6e30sbC5lcnJvci5kZXRhaWxzPXtkdXJpbmdUZXN0OlwidGVzdENhbGxRdWFsaXR5XCJ9KSx0Ll9tYXliZVNlbmRUb1NlbnRyeShsKX1yKCExKSxuKEFhKHtyZXN1bHQ6c30sYSkpfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGsuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzdG9wVGVzdENhbGxRdWFsaXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RvcC10ZXN0LWNhbGwtcXVhbGl0eVwifSl9fSx7a2V5OlwidGVzdENvbm5lY3Rpb25RdWFsaXR5XCIsdmFsdWU6KHc9cCgoZnVuY3Rpb24qKGUpe3ZhciB0O2lzKCk/KGNvbnNvbGUud2FybihcInRlc3RDb25uZWN0aW9uUXVhbGl0eSgpIGlzIGRlcHJlY2F0ZWQ6IHVzZSB0ZXN0UGVlclRvUGVlckNhbGxRdWFsaXR5KCkgaW5zdGVhZFwiKSx0PXlpZWxkIHRoaXMudGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eShlKSk6KGNvbnNvbGUud2FybihcInRlc3RDb25uZWN0aW9uUXVhbGl0eSgpIGlzIGRlcHJlY2F0ZWQ6IHVzZSB0ZXN0Q2FsbFF1YWxpdHkoKSBpbnN0ZWFkXCIpLHQ9eWllbGQgdGhpcy50ZXN0Q2FsbFF1YWxpdHkoKSk7dmFyIG49e3Jlc3VsdDp0LnJlc3VsdCxzZWNvbmRzRWxhcHNlZDp0LnNlY29uZHNFbGFwc2VkfTtyZXR1cm4gdC5kYXRhJiYobi5kYXRhPXttYXhSVFQ6dC5kYXRhLm1heFJvdW5kVHJpcFRpbWUscGFja2V0TG9zczp0LmRhdGEuYXZnUmVjdlBhY2tldExvc3N9KSxufSkpLGZ1bmN0aW9uKGUpe3JldHVybiB3LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwidGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eVwiLHZhbHVlOihfPXAoKGZ1bmN0aW9uKihlKXt2YXIgdD10aGlzO2lmKFphKHRoaXMuX3Rlc3RDYWxsSW5Qcm9ncmVzcyxcInRlc3RQZWVyVG9QZWVyQ2FsbFF1YWxpdHkoKVwiKSx0aGlzLm5lZWRzTG9hZCgpKXRyeXt5aWVsZCB0aGlzLmxvYWQoKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9dmFyIG49ZS52aWRlb1RyYWNrLHI9ZS5kdXJhdGlvbjtpZighdGhpcy5fdmFsaWRhdGVWaWRlb1RyYWNrRm9yTmV0d29ya1Rlc3RzKG4pKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIHRyYWNrIGVycm9yXCIpO3JldHVybiB0aGlzLl9zaGFyZWRUcmFja3MudmlkZW9UcmFja0ZvckNvbm5lY3Rpb25RdWFsaXR5VGVzdD1uLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ0ZXN0LXAycC1jYWxsLXF1YWxpdHlcIixkdXJhdGlvbjpyfSwoZnVuY3Rpb24odCl7dC5lcnJvcj9uKHQuZXJyb3IpOmUodC5yZXN1bHRzKX0pKX0pKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gXy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInN0b3BUZXN0Q29ubmVjdGlvblF1YWxpdHlcIix2YWx1ZTpmdW5jdGlvbigpe2lzKCk/KGNvbnNvbGUud2FybihcInN0b3BUZXN0Q29ubmVjdGlvblF1YWxpdHkoKSBpcyBkZXByZWNhdGVkOiB1c2UgdGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eSgpIGFuZCBzdG9wVGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eSgpIGluc3RlYWRcIiksdGhpcy5zdG9wVGVzdFBlZXJUb1BlZXJDYWxsUXVhbGl0eSgpKTooY29uc29sZS53YXJuKFwic3RvcFRlc3RDb25uZWN0aW9uUXVhbGl0eSgpIGlzIGRlcHJlY2F0ZWQ6IHVzZSB0ZXN0Q2FsbFF1YWxpdHkoKSBhbmQgc3RvcFRlc3RDYWxsUXVhbGl0eSgpIGluc3RlYWRcIiksdGhpcy5zdG9wVGVzdENhbGxRdWFsaXR5KCkpfX0se2tleTpcInN0b3BUZXN0UGVlclRvUGVlckNhbGxRdWFsaXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RvcC10ZXN0LXAycC1jYWxsLXF1YWxpdHlcIn0pfX0se2tleTpcInRlc3ROZXR3b3JrQ29ubmVjdGl2aXR5XCIsdmFsdWU6KHk9cCgoZnVuY3Rpb24qKGUpe3ZhciB0PXRoaXM7aWYoWmEodGhpcy5fdGVzdENhbGxJblByb2dyZXNzLFwidGVzdE5ldHdvcmtDb25uZWN0aXZpdHkoKVwiKSx0aGlzLm5lZWRzTG9hZCgpKXRyeXt5aWVsZCB0aGlzLmxvYWQoKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9aWYoIXRoaXMuX3ZhbGlkYXRlVmlkZW9UcmFja0Zvck5ldHdvcmtUZXN0cyhlKSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyB0cmFjayBlcnJvclwiKTtyZXR1cm4gdGhpcy5fc2hhcmVkVHJhY2tzLnZpZGVvVHJhY2tGb3JOZXR3b3JrQ29ubmVjdGl2aXR5VGVzdD1lLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3Quc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJ0ZXN0LW5ldHdvcmstY29ubmVjdGl2aXR5XCJ9LChmdW5jdGlvbih0KXt0LmVycm9yP24odC5lcnJvcik6ZSh0LnJlc3VsdHMpfSkpfSkpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiB5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiYWJvcnRUZXN0TmV0d29ya0Nvbm5lY3Rpdml0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImFib3J0LXRlc3QtbmV0d29yay1jb25uZWN0aXZpdHlcIn0pfX0se2tleTpcImdldENwdUxvYWRTdGF0c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2lmKGUuX2NhbGxTdGF0ZT09PW9pKXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZ2V0LWNwdS1sb2FkLXN0YXRzXCJ9LChmdW5jdGlvbihlKXt0KGUuY3B1U3RhdHMpfSkpfWVsc2UgdCh7Y3B1TG9hZFN0YXRlOnZvaWQgMCxjcHVMb2FkU3RhdGVSZWFzb246dm9pZCAwLHN0YXRzOnt9fSl9KSl9fSx7a2V5OlwiX3ZhbGlkYXRlRW5jb2RpbmdMYXllckhhc1ZhbGlkUHJvcGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKCEoKG51bGw9PT0odD1PYmplY3Qua2V5cyhlKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGVuZ3RoKT4wKSl0aHJvdyBuZXcgRXJyb3IoXCJFbXB0eSBlbmNvZGluZyBpcyBub3QgYWxsb3dlZC4gQXQgbGVhc3Qgb25lIG9mIHRoZXNlIHZhbGlkIGtleXMgc2hvdWxkIGJlIHNwZWNpZmllZDpcIitPYmplY3QudmFsdWVzKFVhKSl9fSx7a2V5OlwiX3ZhbGlkYXRlVmlkZW9TZW5kU2V0dGluZ3NcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPVwic2NyZWVuVmlkZW9cIj09PWU/W1wiZGVmYXVsdC1zY3JlZW4tdmlkZW9cIixcImRldGFpbC1vcHRpbWl6ZWRcIixcIm1vdGlvbi1vcHRpbWl6ZWRcIixcIm1vdGlvbi1hbmQtZGV0YWlsLWJhbGFuY2VkXCJdOltcImRlZmF1bHQtdmlkZW9cIixcImJhbmR3aWR0aC1vcHRpbWl6ZWRcIixcImJhbmR3aWR0aC1hbmQtcXVhbGl0eS1iYWxhbmNlZFwiLFwicXVhbGl0eS1vcHRpbWl6ZWRcIixcImFkYXB0aXZlLTItbGF5ZXJzXCIsXCJhZGFwdGl2ZS0zLWxheWVyc1wiXSxpPVwiVmlkZW8gc2VuZCBzZXR0aW5ncyBzaG91bGQgYmUgZWl0aGVyIGFuIG9iamVjdCBvciBvbmUgb2YgdGhlIHN1cHBvcnRlZCBwcmVzZXRzOiBcIi5jb25jYXQoci5qb2luKCkpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtpZighci5pbmNsdWRlcyh0KSl0aHJvdyBuZXcgRXJyb3IoaSl9ZWxzZXtpZihcIm9iamVjdFwiIT09bih0KSl0aHJvdyBuZXcgRXJyb3IoaSk7aWYoIXQubWF4UXVhbGl0eSYmIXQuZW5jb2RpbmdzJiZ2b2lkIDA9PT10LmFsbG93QWRhcHRpdmVMYXllcnMpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gc2VuZCBzZXR0aW5ncyBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgbWF4UXVhbGl0eSwgYWxsb3dBZGFwdGl2ZUxheWVycyBvciBlbmNvZGluZ3MgYXR0cmlidXRlXCIpO2lmKHQubWF4UXVhbGl0eSYmLTE9PT1bXCJsb3dcIixcIm1lZGl1bVwiLFwiaGlnaFwiXS5pbmRleE9mKHQubWF4UXVhbGl0eSkpdGhyb3cgbmV3IEVycm9yKFwibWF4UXVhbGl0eSBtdXN0IGJlIGVpdGhlciBsb3csIG1lZGl1bSBvciBoaWdoXCIpO2lmKHQuZW5jb2RpbmdzKXt2YXIgbz0hMTtzd2l0Y2goT2JqZWN0LmtleXModC5lbmNvZGluZ3MpLmxlbmd0aCl7Y2FzZSAxOm89IXQuZW5jb2RpbmdzLmxvdzticmVhaztjYXNlIDI6bz0hdC5lbmNvZGluZ3MubG93fHwhdC5lbmNvZGluZ3MubWVkaXVtO2JyZWFrO2Nhc2UgMzpvPSF0LmVuY29kaW5ncy5sb3d8fCF0LmVuY29kaW5ncy5tZWRpdW18fCF0LmVuY29kaW5ncy5oaWdoO2JyZWFrO2RlZmF1bHQ6bz0hMH1pZihvKXRocm93IG5ldyBFcnJvcihcIkVuY29kaW5ncyBtdXN0IGJlIGRlZmluZWQgYXM6IGxvdywgbG93IGFuZCBtZWRpdW0sIG9yIGxvdywgbWVkaXVtIGFuZCBoaWdoLlwiKTt0LmVuY29kaW5ncy5sb3cmJnRoaXMuX3ZhbGlkYXRlRW5jb2RpbmdMYXllckhhc1ZhbGlkUHJvcGVydGllcyh0LmVuY29kaW5ncy5sb3cpLHQuZW5jb2RpbmdzLm1lZGl1bSYmdGhpcy5fdmFsaWRhdGVFbmNvZGluZ0xheWVySGFzVmFsaWRQcm9wZXJ0aWVzKHQuZW5jb2RpbmdzLm1lZGl1bSksdC5lbmNvZGluZ3MuaGlnaCYmdGhpcy5fdmFsaWRhdGVFbmNvZGluZ0xheWVySGFzVmFsaWRQcm9wZXJ0aWVzKHQuZW5jb2RpbmdzLmhpZ2gpfX19fSx7a2V5OlwidmFsaWRhdGVVcGRhdGVTZW5kU2V0dGluZ3NcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlfHwwPT09T2JqZWN0LmtleXMoZSkubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlNlbmQgc2V0dGluZ3MgbXVzdCBjb250YWluIGF0IGxlYXN0IGluZm9ybWF0aW9uIGZvciBvbmUgdHJhY2shXCIpO09iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWYoZSwyKSxyPW5bMF0saT1uWzFdO3QuX3ZhbGlkYXRlVmlkZW9TZW5kU2V0dGluZ3MocixpKX0pKX19LHtrZXk6XCJ1cGRhdGVTZW5kU2V0dGluZ3NcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLnZhbGlkYXRlVXBkYXRlU2VuZFNldHRpbmdzKGUpLHRoaXMubmVlZHNMb2FkKCk/KHRoaXMuX3ByZWxvYWRDYWNoZS5zZW5kU2V0dGluZ3M9ZSx7c2VuZFNldHRpbmdzOnRoaXMuX3ByZWxvYWRDYWNoZS5zZW5kU2V0dGluZ3N9KTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidXBkYXRlLXNlbmQtc2V0dGluZ3NcIixzZW5kU2V0dGluZ3M6ZX0sKGZ1bmN0aW9uKGUpe2UuZXJyb3I/cihlLmVycm9yKTpuKGUuc2VuZFNldHRpbmdzKX0pKX0pKX19LHtrZXk6XCJnZXRTZW5kU2V0dGluZ3NcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZW5kU2V0dGluZ3N8fHRoaXMuX3ByZWxvYWRDYWNoZS5zZW5kU2V0dGluZ3N9fSx7a2V5OlwiZ2V0TG9jYWxBdWRpb0xldmVsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxBdWRpb0xldmVsfX0se2tleTpcImdldFJlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsfX0se2tleTpcImdldEFjdGl2ZVNwZWFrZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuYygpLHRoaXMuX2FjdGl2ZVNwZWFrZXJ9fSx7a2V5Olwic2V0QWN0aXZlU3BlYWtlck1vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmMoKSx0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LWFjdGl2ZS1zcGVha2VyLW1vZGVcIixlbmFibGVkOmV9KSx0aGlzfX0se2tleTpcImFjdGl2ZVNwZWFrZXJNb2RlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmMoKSx0aGlzLl9hY3RpdmVTcGVha2VyTW9kZX19LHtrZXk6XCJzdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcmVsb2FkQ2FjaGUuc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5fX0se2tleTpcInNldFN1YnNjcmliZVRvVHJhY2tzQXV0b21hdGljYWxseVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBRYSh0aGlzLl9jYWxsU3RhdGUsXCJzZXRTdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHkoKVwiLFwiVXNlIHRoZSBzdWJzY3JpYmVUb1RyYWNrc0F1dG9tYXRpY2FsbHkgY29uZmlndXJhdGlvbiBwcm9wZXJ0eS5cIiksdGhpcy5fcHJlbG9hZENhY2hlLnN1YnNjcmliZVRvVHJhY2tzQXV0b21hdGljYWxseT1lLHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc3Vic2NyaWJlLXRvLXRyYWNrcy1hdXRvbWF0aWNhbGx5XCIsZW5hYmxlZDplfSksdGhpc319LHtrZXk6XCJlbnVtZXJhdGVEZXZpY2VzXCIsdmFsdWU6KG09cCgoZnVuY3Rpb24qKCl7dmFyIGU9dGhpcztpZih0aGlzLl9jYWxsT2JqZWN0TW9kZSl7dmFyIHQ9eWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7cmV0dXJuXCJGaXJlZm94XCI9PT1tcygpJiZ5cygpLm1ham9yPjExNSYmeXMoKS5tYWpvcjwxMjMmJih0PXQuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvb3V0cHV0XCIhPT1lLmtpbmR9KSkpLHtkZXZpY2VzOnQubWFwKChmdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtpZighaXMoKSYmXCJ2aWRlb2lucHV0XCI9PT1lLmtpbmQmJmUuZ2V0Q2FwYWJpbGl0aWVzKXt2YXIgbixyPWUuZ2V0Q2FwYWJpbGl0aWVzKCk7dC5mYWNpbmc9KG51bGw9PXJ8fG51bGw9PT0obj1yLmZhY2luZ01vZGUpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmxlbmd0aCk+PTE/ci5mYWNpbmdNb2RlWzBdOnZvaWQgMH1yZXR1cm4gdH0pKX19cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwiZW51bWVyYXRlLWRldmljZXNcIn0sKGZ1bmN0aW9uKGUpe3Qoe2RldmljZXM6ZS5kZXZpY2VzfSl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInNlbmRBcHBNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiKlwiO2lmKFFhKHRoaXMuX2NhbGxTdGF0ZSxcInNlbmRBcHBNZXNzYWdlKClcIiksSlNPTi5zdHJpbmdpZnkoZSkubGVuZ3RoPnRoaXMuX21heEFwcE1lc3NhZ2VTaXplKXRocm93IG5ldyBFcnJvcihcIk1lc3NhZ2UgZGF0YSB0b28gbGFyZ2UuIE1heCBzaXplIGlzIFwiK3RoaXMuX21heEFwcE1lc3NhZ2VTaXplKTtyZXR1cm4gdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcImFwcC1tc2dcIixkYXRhOmUsdG86dH0pLHRoaXN9fSx7a2V5OlwiYWRkRmFrZVBhcnRpY2lwYW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5jKCksUWEodGhpcy5fY2FsbFN0YXRlLFwiYWRkRmFrZVBhcnRpY2lwYW50KClcIiksdGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpcImFkZC1mYWtlLXBhcnRpY2lwYW50XCJ9LGUpKSx0aGlzfX0se2tleTpcInNldFNob3dOYW1lc01vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRTaG93TmFtZXNNb2RlKClcIiksbmMoKSxlJiZcImFsd2F5c1wiIT09ZSYmXCJuZXZlclwiIT09ZT8oY29uc29sZS5lcnJvcignc2V0U2hvd05hbWVzTW9kZSBhcmd1bWVudCBzaG91bGQgYmUgXCJhbHdheXNcIiwgXCJuZXZlclwiLCBvciBmYWxzZScpLHRoaXMpOih0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXNob3ctbmFtZXNcIixtb2RlOmV9KSx0aGlzKX19LHtrZXk6XCJzZXRTaG93TG9jYWxWaWRlb1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTtyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRTaG93TG9jYWxWaWRlbygpXCIpLG5jKCksUWEodGhpcy5fY2FsbFN0YXRlLFwic2V0U2hvd0xvY2FsVmlkZW8oKVwiKSxcImJvb2xlYW5cIiE9dHlwZW9mIGU/KGNvbnNvbGUuZXJyb3IoXCJzZXRTaG93TG9jYWxWaWRlbyBvbmx5IGFjY2VwdHMgYSBib29sZWFuIHZhbHVlXCIpLHRoaXMpOih0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXNob3ctbG9jYWwtdmlkZW9cIixzaG93OmV9KSx0aGlzLl9zaG93TG9jYWxWaWRlbz1lLHRoaXMpfX0se2tleTpcInNob3dMb2NhbFZpZGVvXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzaG93TG9jYWxWaWRlbygpXCIpLG5jKCksdGhpcy5fc2hvd0xvY2FsVmlkZW99fSx7a2V5Olwic2V0U2hvd1BhcnRpY2lwYW50c0JhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTtyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRTaG93UGFydGljaXBhbnRzQmFyKClcIiksbmMoKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzZXRTaG93UGFydGljaXBhbnRzQmFyKClcIiksXCJib29sZWFuXCIhPXR5cGVvZiBlPyhjb25zb2xlLmVycm9yKFwic2V0U2hvd1BhcnRpY2lwYW50c0JhciBvbmx5IGFjY2VwdHMgYSBib29sZWFuIHZhbHVlXCIpLHRoaXMpOih0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXNob3ctcGFydGljaXBhbnRzLWJhclwiLHNob3c6ZX0pLHRoaXMuX3Nob3dQYXJ0aWNpcGFudHNCYXI9ZSx0aGlzKX19LHtrZXk6XCJzaG93UGFydGljaXBhbnRzQmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzaG93UGFydGljaXBhbnRzQmFyKClcIiksbmMoKSx0aGlzLl9zaG93UGFydGljaXBhbnRzQmFyfX0se2tleTpcImN1c3RvbUludGVncmF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5jKCksdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJjdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSx0aGlzLl9jdXN0b21JbnRlZ3JhdGlvbnN9fSx7a2V5Olwic2V0Q3VzdG9tSW50ZWdyYXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5jKCksdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRDdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzZXRDdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSx2YyhlKT8odGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInNldC1jdXN0b20taW50ZWdyYXRpb25zXCIsaW50ZWdyYXRpb25zOmV9KSx0aGlzLl9jdXN0b21JbnRlZ3JhdGlvbnM9ZSx0aGlzKTp0aGlzfX0se2tleTpcInN0YXJ0Q3VzdG9tSW50ZWdyYXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihuYygpLHRjKHRoaXMuX2NhbGxPYmplY3RNb2RlLFwic3RhcnRDdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdGFydEN1c3RvbUludGVncmF0aW9ucygpXCIpLEFycmF5LmlzQXJyYXkoZSkmJmUuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV9KSl8fCFBcnJheS5pc0FycmF5KGUpJiZcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gY29uc29sZS5lcnJvcihcInN0YXJ0Q3VzdG9tSW50ZWdyYXRpb25zKCkgb25seSBhY2NlcHRzIHN0cmluZyB8IHN0cmluZ1tdXCIpLHRoaXM7dmFyIG49XCJzdHJpbmdcIj09dHlwZW9mIGU/W2VdOmUscj1uLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIShlIGluIHQuX2N1c3RvbUludGVncmF0aW9ucyl9KSk7cmV0dXJuIHIubGVuZ3RoPyhjb25zb2xlLmVycm9yKFwiQ2FuJ3QgZmluZCBjdXN0b20gaW50ZWdyYXRpb24ocyk6IFxcXCJcIi5jb25jYXQoci5qb2luKFwiLCBcIiksJ1wiJykpLHRoaXMpOih0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic3RhcnQtY3VzdG9tLWludGVncmF0aW9uc1wiLGlkczpufSksdGhpcyl9fSx7a2V5Olwic3RvcEN1c3RvbUludGVncmF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYobmMoKSx0Yyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInN0b3BDdXN0b21JbnRlZ3JhdGlvbnMoKVwiKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzdG9wQ3VzdG9tSW50ZWdyYXRpb25zKClcIiksQXJyYXkuaXNBcnJheShlKSYmZS5zb21lKChmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZX0pKXx8IUFycmF5LmlzQXJyYXkoZSkmJlwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBjb25zb2xlLmVycm9yKFwic3RvcEN1c3RvbUludGVncmF0aW9ucygpIG9ubHkgYWNjZXB0cyBzdHJpbmcgfCBzdHJpbmdbXVwiKSx0aGlzO3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBlP1tlXTplLHI9bi5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEoZSBpbiB0Ll9jdXN0b21JbnRlZ3JhdGlvbnMpfSkpO3JldHVybiByLmxlbmd0aD8oY29uc29sZS5lcnJvcihcIkNhbid0IGZpbmQgY3VzdG9tIGludGVncmF0aW9uKHMpOiBcXFwiXCIuY29uY2F0KHIuam9pbihcIiwgXCIpLCdcIicpKSx0aGlzKToodGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoe2FjdGlvbjpcInN0b3AtY3VzdG9tLWludGVncmF0aW9uc1wiLGlkczpufSksdGhpcyl9fSx7a2V5OlwiY3VzdG9tVHJheUJ1dHRvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0Yyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcImN1c3RvbVRyYXlCdXR0b25zKClcIiksbmMoKSx0aGlzLl9jdXN0b21UcmF5QnV0dG9uc319LHtrZXk6XCJ1cGRhdGVDdXN0b21UcmF5QnV0dG9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0Yyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInVwZGF0ZUN1c3RvbVRyYXlCdXR0b25zKClcIiksbmMoKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJ1cGRhdGVDdXN0b21UcmF5QnV0dG9ucygpXCIpLGZjKGUpPyh0aGlzLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwidXBkYXRlLWN1c3RvbS10cmF5LWJ1dHRvbnNcIixidG5zOmV9KSx0aGlzLl9jdXN0b21UcmF5QnV0dG9ucz1lLHRoaXMpOihjb25zb2xlLmVycm9yKFwidXBkYXRlQ3VzdG9tVHJheUJ1dHRvbnMgb25seSBhY2NlcHRzIGEgZGljdGlvbmFyeSBvZiB0aGUgdHlwZSBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoJGEpKSksdGhpcyl9fSx7a2V5OlwidGhlbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0Yyh0aGlzLl9jYWxsT2JqZWN0TW9kZSxcInRoZW1lKClcIiksdGhpcy5wcm9wZXJ0aWVzLnRoZW1lfX0se2tleTpcInNldFRoZW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGModGhpcy5fY2FsbE9iamVjdE1vZGUsXCJzZXRUaGVtZSgpXCIpLG5ldyBQcm9taXNlKChmdW5jdGlvbihuLHIpe3RyeXt0LnZhbGlkYXRlUHJvcGVydGllcyh7dGhlbWU6ZX0pLHQucHJvcGVydGllcy50aGVtZT1BYSh7fSxlKSx0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LXRoZW1lXCIsdGhlbWU6dC5wcm9wZXJ0aWVzLnRoZW1lfSk7dHJ5e3QuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOlVpLHRoZW1lOnQucHJvcGVydGllcy50aGVtZX0pfWNhdGNoKGUpe2NvbnNvbGUubG9nKFwiY291bGQgbm90IGVtaXQgJ3RoZW1lLXVwZGF0ZWQnXCIsZSl9bih0LnByb3BlcnRpZXMudGhlbWUpfWNhdGNoKGUpe3IoZSl9fSkpfX0se2tleTpcInJlcXVlc3RGdWxsc2NyZWVuXCIsdmFsdWU6KGc9cCgoZnVuY3Rpb24qKCl7aWYobmMoKSx0aGlzLl9pZnJhbWUmJiFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCYmYXMoKSl0cnl7KHlpZWxkIHRoaXMuX2lmcmFtZS5yZXF1ZXN0RnVsbHNjcmVlbik/dGhpcy5faWZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuKCk6dGhpcy5faWZyYW1lLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCl9Y2F0Y2goZSl7Y29uc29sZS5sb2coXCJjb3VsZCBub3QgbWFrZSB2aWRlbyBjYWxsIGZ1bGxzY3JlZW5cIixlKX19KSksZnVuY3Rpb24oKXtyZXR1cm4gZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcImV4aXRGdWxsc2NyZWVuXCIsdmFsdWU6ZnVuY3Rpb24oKXtuYygpLGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50P2RvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk6ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQmJmRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCl9fSx7a2V5OlwiZ2V0U2lkZWJhclZpZXdcIix2YWx1ZToodj1wKChmdW5jdGlvbiooKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9jYWxsT2JqZWN0TW9kZT8oY29uc29sZS5lcnJvcihcImdldFNpZGViYXJWaWV3IGlzIG5vdCBhdmFpbGFibGUgaW4gY2FsbE9iamVjdCBtb2RlXCIpLFByb21pc2UucmVzb2x2ZShudWxsKSk6bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtc2lkZWJhci12aWV3XCJ9LChmdW5jdGlvbihlKXt0KGUudmlldyl9KSl9KSl9KSksZnVuY3Rpb24oKXtyZXR1cm4gdi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KX0se2tleTpcInNldFNpZGViYXJWaWV3XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NhbGxPYmplY3RNb2RlPyhjb25zb2xlLmVycm9yKFwic2V0U2lkZWJhclZpZXcgaXMgbm90IGF2YWlsYWJsZSBpbiBjYWxsT2JqZWN0IG1vZGVcIiksdGhpcyk6KHRoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJzZXQtc2lkZWJhci12aWV3XCIsdmlldzplfSksdGhpcyl9fSx7a2V5Olwicm9vbVwiLHZhbHVlOihoPXAoKGZ1bmN0aW9uKigpe3ZhciBlPXRoaXMsdD0oYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9KS5pbmNsdWRlUm9vbUNvbmZpZ0RlZmF1bHRzLG49dm9pZCAwPT09dHx8dDtyZXR1cm4gdGhpcy5fYWNjZXNzU3RhdGUuYWNjZXNzPT09Zml8fHRoaXMubmVlZHNMb2FkKCk/dGhpcy5wcm9wZXJ0aWVzLnVybD97cm9vbVVybFBlbmRpbmdKb2luOnRoaXMucHJvcGVydGllcy51cmx9Om51bGw6bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2Uuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJsaWItcm9vbS1pbmZvXCIsaW5jbHVkZVJvb21Db25maWdEZWZhdWx0czpufSwoZnVuY3Rpb24oZSl7ZGVsZXRlIGUuYWN0aW9uLGRlbGV0ZSBlLmNhbGxiYWNrU3RhbXAsdChlKX0pKX0pKX0pKSxmdW5jdGlvbigpe3JldHVybiBoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSx7a2V5OlwiZ2VvXCIsdmFsdWU6KGQ9cCgoZnVuY3Rpb24qKCl7dHJ5e3ZhciBlPXlpZWxkIGZldGNoKFwiaHR0cHM6Ly9ncy5kYWlseS5jby9fa3NfL3gtc3dzbC86XCIpO3JldHVybntjdXJyZW50Oih5aWVsZCBlLmpzb24oKSkuZ2VvfX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImdlbyBsb29rdXAgZmFpbGVkXCIsZSkse2N1cnJlbnQ6XCJcIn19fSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZXROZXR3b3JrVG9wb2xvZ3lcIix2YWx1ZTooYz1wKChmdW5jdGlvbiooZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmMoKSxRYSh0aGlzLl9jYWxsU3RhdGUsXCJzZXROZXR3b3JrVG9wb2xvZ3koKVwiKSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24obixyKXt0LnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOlwic2V0LW5ldHdvcmstdG9wb2xvZ3lcIixvcHRzOmV9LChmdW5jdGlvbihlKXtlLmVycm9yP3Ioe2Vycm9yOmUuZXJyb3J9KTpuKHt3b3JrZXJJZDplLndvcmtlcklkfSl9KSl9KSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIGMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJnZXROZXR3b3JrVG9wb2xvZ3lcIix2YWx1ZTooaT1wKChmdW5jdGlvbiooKXt2YXIgZT10aGlzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtlLm5lZWRzTG9hZCgpJiZ0KHt0b3BvbG9neTpcIm5vbmVcIn0pLGUuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJnZXQtbmV0d29yay10b3BvbG9neVwifSwoZnVuY3Rpb24oZSl7ZS5lcnJvcj9uKHtlcnJvcjplLmVycm9yfSk6dCh7dG9wb2xvZ3k6ZS50b3BvbG9neX0pfSkpfSkpfSkpLGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9LHtrZXk6XCJzZXRQbGF5TmV3UGFydGljaXBhbnRTb3VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKG5jKCksXCJudW1iZXJcIiE9dHlwZW9mIGUmJiEwIT09ZSYmITEhPT1lKXRocm93IG5ldyBFcnJvcihcImFyZ3VtZW50IHRvIHNldFNob3VsZFBsYXlOZXdQYXJ0aWNpcGFudFNvdW5kIHNob3VsZCBiZSB0cnVlLCBmYWxzZSwgb3IgYSBudW1iZXIsIGJ1dCBpcyBcIi5jb25jYXQoZSkpO3RoaXMuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKHthY3Rpb246XCJkYWlseS1tZXRob2Qtc2V0LXBsYXktZGluZ1wiLGFyZzplfSl9fSx7a2V5Olwib25cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBiLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsZSx0KX19LHtrZXk6XCJvbmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYi5wcm90b3R5cGUub25jZS5jYWxsKHRoaXMsZSx0KX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBiLnByb3RvdHlwZS5vZmYuY2FsbCh0aGlzLGUsdCl9fSx7a2V5OlwidmFsaWRhdGVQcm9wZXJ0aWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZihudWxsIT1lJiZudWxsIT09KHQ9ZS5kYWlseUNvbmZpZykmJnZvaWQgMCE9PXQmJnQudXNlck1lZGlhQXVkaW9Db25zdHJhaW50cyl7dmFyIHIsaTtpcygpfHxjb25zb2xlLndhcm4oXCJ1c2VyTWVkaWFBdWRpb0NvbnN0cmFpbnRzIGlzIGRlcHJlY2F0ZWQuIFlvdSBjYW4gb3ZlcnJpZGUgY29uc3RyYWludHMgd2l0aCBpbnB1dFNldHRpbmdzLmF1ZGlvLnNldHRpbmdzLCBmb3VuZCBpbiBEYWlseUNhbGxPcHRpb25zLlwiKTt2YXIgbz1lLmlucHV0U2V0dGluZ3N8fHt9O28uYXVkaW89KG51bGw9PT0ocj1lLmlucHV0U2V0dGluZ3MpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmF1ZGlvKXx8e30sby5hdWRpby5zZXR0aW5ncz0obnVsbD09PShpPWUuaW5wdXRTZXR0aW5ncyl8fHZvaWQgMD09PWl8fG51bGw9PT0oaT1pLmF1ZGlvKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zZXR0aW5ncyl8fHt9LG8uYXVkaW8uc2V0dGluZ3M9QWEoQWEoe30sby5hdWRpby5zZXR0aW5ncyksZS5kYWlseUNvbmZpZy51c2VyTWVkaWFBdWRpb0NvbnN0cmFpbnRzKSxlLmlucHV0U2V0dGluZ3M9byxkZWxldGUgZS5kYWlseUNvbmZpZy51c2VyTWVkaWFBdWRpb0NvbnN0cmFpbnRzfWlmKG51bGwhPWUmJm51bGwhPT0obj1lLmRhaWx5Q29uZmlnKSYmdm9pZCAwIT09biYmbi51c2VyTWVkaWFWaWRlb0NvbnN0cmFpbnRzKXt2YXIgcyxhO2lzKCl8fGNvbnNvbGUud2FybihcInVzZXJNZWRpYVZpZGVvQ29uc3RyYWludHMgaXMgZGVwcmVjYXRlZC4gWW91IGNhbiBvdmVycmlkZSBjb25zdHJhaW50cyB3aXRoIGlucHV0U2V0dGluZ3MudmlkZW8uc2V0dGluZ3MsIGZvdW5kIGluIERhaWx5Q2FsbE9wdGlvbnMuXCIpO3ZhciBjPWUuaW5wdXRTZXR0aW5nc3x8e307Yy52aWRlbz0obnVsbD09PShzPWUuaW5wdXRTZXR0aW5ncyl8fHZvaWQgMD09PXM/dm9pZCAwOnMudmlkZW8pfHx7fSxjLnZpZGVvLnNldHRpbmdzPShudWxsPT09KGE9ZS5pbnB1dFNldHRpbmdzKXx8dm9pZCAwPT09YXx8bnVsbD09PShhPWEudmlkZW8pfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnNldHRpbmdzKXx8e30sYy52aWRlby5zZXR0aW5ncz1BYShBYSh7fSxjLnZpZGVvLnNldHRpbmdzKSxlLmRhaWx5Q29uZmlnLnVzZXJNZWRpYVZpZGVvQ29uc3RyYWludHMpLGUuaW5wdXRTZXR0aW5ncz1jLGRlbGV0ZSBlLmRhaWx5Q29uZmlnLnVzZXJNZWRpYVZpZGVvQ29uc3RyYWludHN9Zm9yKHZhciBsIGluIGUpe2lmKCF6YVtsXSl0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlY29nbml6ZWQgcHJvcGVydHkgJ1wiLmNvbmNhdChsLFwiJ1wiKSk7aWYoemFbbF0udmFsaWRhdGUmJiF6YVtsXS52YWxpZGF0ZShlW2xdLHRoaXMpKXRocm93IG5ldyBFcnJvcihcInByb3BlcnR5ICdcIi5jb25jYXQobCxcIic6IFwiKS5jb25jYXQoemFbbF0uaGVscCkpfX19LHtrZXk6XCJhc3NlbWJsZU1lZXRpbmdVcmxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQsbj1BYShBYSh7fSx0aGlzLnByb3BlcnRpZXMpLHt9LHtlbWI6dGhpcy5jYWxsQ2xpZW50SWQsZW1iSHJlZjplbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpLHByb3h5Om51bGwhPT0oZT10aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcpJiZ2b2lkIDAhPT1lJiZlLnByb3h5VXJsP2VuY29kZVVSSUNvbXBvbmVudChudWxsPT09KHQ9dGhpcy5wcm9wZXJ0aWVzLmRhaWx5Q29uZmlnKXx8dm9pZCAwPT09dD92b2lkIDA6dC5wcm94eVVybCk6dm9pZCAwfSkscj1uLnVybC5tYXRjaCgvXFw/Lyk/XCImXCI6XCI/XCI7cmV0dXJuIG4udXJsK3IrT2JqZWN0LmtleXMoemEpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHphW2VdLnF1ZXJ5U3RyaW5nJiZ2b2lkIDAhPT1uW2VdfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuXCJcIi5jb25jYXQoemFbZV0ucXVlcnlTdHJpbmcsXCI9XCIpLmNvbmNhdChuW2VdKX0pKS5qb2luKFwiJlwiKX19LHtrZXk6XCJuZWVkc0xvYWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblt0aSxuaSxzaSxhaV0uaW5jbHVkZXModGhpcy5fY2FsbFN0YXRlKX19LHtrZXk6XCJzZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMuX2Rlc3Ryb3llZCYmKHRoaXMuX2xvZ1VzZUFmdGVyRGVzdHJveSgpLHRoaXMuc3RyaWN0TW9kZSkpdGhyb3cgbmV3IEVycm9yKFwiVXNlIGFmdGVyIGRlc3Ryb3lcIik7dGhpcy5fbWVzc2FnZUNoYW5uZWwuc2VuZE1lc3NhZ2VUb0NhbGxNYWNoaW5lKGUsdCx0aGlzLmNhbGxDbGllbnRJZCx0aGlzLl9pZnJhbWUpfX0se2tleTpcImZvcndhcmRQYWNrYWdlZE1lc3NhZ2VUb0NhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUNoYW5uZWwuZm9yd2FyZFBhY2thZ2VkTWVzc2FnZVRvQ2FsbE1hY2hpbmUoZSx0aGlzLl9pZnJhbWUsdGhpcy5jYWxsQ2xpZW50SWQpfX0se2tleTpcImFkZExpc3RlbmVyRm9yUGFja2FnZWRNZXNzYWdlc0Zyb21DYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tZXNzYWdlQ2hhbm5lbC5hZGRMaXN0ZW5lckZvclBhY2thZ2VkTWVzc2FnZXNGcm9tQ2FsbE1hY2hpbmUoZSx0aGlzLmNhbGxDbGllbnRJZCl9fSx7a2V5OlwicmVtb3ZlTGlzdGVuZXJGb3JQYWNrYWdlZE1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUNoYW5uZWwucmVtb3ZlTGlzdGVuZXJGb3JQYWNrYWdlZE1lc3NhZ2VzRnJvbUNhbGxNYWNoaW5lKGUpfX0se2tleTpcImhhbmRsZU1lc3NhZ2VGcm9tQ2FsbE1hY2hpbmVcIix2YWx1ZTpmdW5jdGlvbih0KXtzd2l0Y2godC5hY3Rpb24pe2Nhc2UgRmk6dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUoQWEoe2FjdGlvbjpCaX0sdGhpcy5wcm9wZXJ0aWVzKSk7YnJlYWs7Y2FzZVwiY2FsbC1tYWNoaW5lLWluaXRpYWxpemVkXCI6dGhpcy5fY2FsbE1hY2hpbmVJbml0aWFsaXplZD0hMDt2YXIgbj17YWN0aW9uOkdvLGxldmVsOlwibG9nXCIsY29kZToxMDExLHN0YXRzOntldmVudDpcImJ1bmRsZSBsb2FkXCIsdGltZTpcIm5vLW9wXCI9PT10aGlzLl9idW5kbGVMb2FkVGltZT8wOnRoaXMuX2J1bmRsZUxvYWRUaW1lLHByZUxvYWRlZDpcIm5vLW9wXCI9PT10aGlzLl9idW5kbGVMb2FkVGltZSx1cmw6Qih0aGlzLnByb3BlcnRpZXMuZGFpbHlDb25maWcpfX07dGhpcy5zZW5kTWVzc2FnZVRvQ2FsbE1hY2hpbmUobiksdGhpcy5fZGVsYXlEdXBsaWNhdGVJbnN0YW5jZUxvZyYmdGhpcy5fbG9nRHVwbGljYXRlSW5zdGFuY2VBdHRlbXB0KCk7YnJlYWs7Y2FzZSAkaTp0aGlzLl9sb2FkZWRDYWxsYmFjayYmKHRoaXMuX2xvYWRlZENhbGxiYWNrKCksdGhpcy5fbG9hZGVkQ2FsbGJhY2s9bnVsbCksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgSGk6dmFyIHIsaT1BYSh7fSx0KTtkZWxldGUgaS5pbnRlcm5hbCx0aGlzLl9tYXhBcHBNZXNzYWdlU2l6ZT0obnVsbD09PShyPXQuaW50ZXJuYWwpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLl9tYXhBcHBNZXNzYWdlU2l6ZSl8fCRvLHRoaXMuX2pvaW5lZENhbGxiYWNrJiYodGhpcy5fam9pbmVkQ2FsbGJhY2sodC5wYXJ0aWNpcGFudHMpLHRoaXMuX2pvaW5lZENhbGxiYWNrPW51bGwpLHRoaXMuZW1pdERhaWx5SlNFdmVudChpKTticmVhaztjYXNlIFFpOmNhc2UgS2k6aWYodGhpcy5fY2FsbFN0YXRlPT09c2kpcmV0dXJuO2lmKHQucGFydGljaXBhbnQmJnQucGFydGljaXBhbnQuc2Vzc2lvbl9pZCl7dmFyIG89dC5wYXJ0aWNpcGFudC5sb2NhbD9cImxvY2FsXCI6dC5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkO2lmKHRoaXMuX2NhbGxPYmplY3RNb2RlKXt2YXIgcz10aGlzLl9jYWxsTWFjaGluZSgpLnN0b3JlO1pzKHQucGFydGljaXBhbnQscyksZWEodC5wYXJ0aWNpcGFudCxzKSxuYSh0LnBhcnRpY2lwYW50LHRoaXMuX3BhcnRpY2lwYW50c1tvXSxzKX10cnl7dGhpcy5tYXliZVBhcnRpY2lwYW50VHJhY2tzU3RvcHBlZCh0aGlzLl9wYXJ0aWNpcGFudHNbb10sdC5wYXJ0aWNpcGFudCksdGhpcy5tYXliZVBhcnRpY2lwYW50VHJhY2tzU3RhcnRlZCh0aGlzLl9wYXJ0aWNpcGFudHNbb10sdC5wYXJ0aWNpcGFudCksdGhpcy5tYXliZUV2ZW50UmVjb3JkaW5nU3RvcHBlZCh0aGlzLl9wYXJ0aWNpcGFudHNbb10sdC5wYXJ0aWNpcGFudCksdGhpcy5tYXliZUV2ZW50UmVjb3JkaW5nU3RhcnRlZCh0aGlzLl9wYXJ0aWNpcGFudHNbb10sdC5wYXJ0aWNpcGFudCl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihcInRyYWNrIGV2ZW50cyBlcnJvclwiLGUpfXRoaXMuY29tcGFyZUVxdWFsRm9yUGFydGljaXBhbnRVcGRhdGVFdmVudCh0LnBhcnRpY2lwYW50LHRoaXMuX3BhcnRpY2lwYW50c1tvXSl8fCh0aGlzLl9wYXJ0aWNpcGFudHNbb109QWEoe30sdC5wYXJ0aWNpcGFudCksdGhpcy50b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXMoKSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCkpfWJyZWFrO2Nhc2UgWWk6aWYodC5wYXJ0aWNpcGFudCYmdC5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKXt2YXIgYT10aGlzLl9wYXJ0aWNpcGFudHNbdC5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkXTthJiZ0aGlzLm1heWJlUGFydGljaXBhbnRUcmFja3NTdG9wcGVkKGEsbnVsbCksZGVsZXRlIHRoaXMuX3BhcnRpY2lwYW50c1t0LnBhcnRpY2lwYW50LnNlc3Npb25faWRdLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KX1icmVhaztjYXNlIFhpOlModGhpcy5fcGFydGljaXBhbnRDb3VudHMsdC5wYXJ0aWNpcGFudENvdW50cyl8fCh0aGlzLl9wYXJ0aWNpcGFudENvdW50cz10LnBhcnRpY2lwYW50Q291bnRzLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KSk7YnJlYWs7Y2FzZSBaaTp2YXIgYz17YWNjZXNzOnQuYWNjZXNzfTt0LmF3YWl0aW5nQWNjZXNzJiYoYy5hd2FpdGluZ0FjY2Vzcz10LmF3YWl0aW5nQWNjZXNzKSxTKHRoaXMuX2FjY2Vzc1N0YXRlLGMpfHwodGhpcy5fYWNjZXNzU3RhdGU9Yyx0aGlzLmVtaXREYWlseUpTRXZlbnQodCkpO2JyZWFrO2Nhc2UgZW86aWYodC5tZWV0aW5nU2Vzc2lvbil7dGhpcy5fbWVldGluZ1Nlc3Npb25TdW1tYXJ5PXQubWVldGluZ1Nlc3Npb24sdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO3ZhciBsPUFhKEFhKHt9LHQpLHt9LHthY3Rpb246XCJtZWV0aW5nLXNlc3Npb24tdXBkYXRlZFwifSk7dGhpcy5lbWl0RGFpbHlKU0V2ZW50KGwpfWJyZWFrO2Nhc2UgSm86dmFyIHU7dGhpcy5faWZyYW1lJiYhdC5wcmVzZXJ2ZUlmcmFtZSYmKHRoaXMuX2lmcmFtZS5zcmM9XCJcIiksdGhpcy5fdXBkYXRlQ2FsbFN0YXRlKGFpKSx0aGlzLnJlc2V0TWVldGluZ0RlcGVuZGVudFZhcnMoKSx0aGlzLl9sb2FkZWRDYWxsYmFjayYmKHRoaXMuX2xvYWRlZENhbGxiYWNrKHQuZXJyb3JNc2cpLHRoaXMuX2xvYWRlZENhbGxiYWNrPW51bGwpLHQucHJlc2VydmVJZnJhbWU7dmFyIGQ9ZSh0LE9hKTtudWxsIT1kJiZudWxsIT09KHU9ZC5lcnJvcikmJnZvaWQgMCE9PXUmJnUuZGV0YWlscyYmKGQuZXJyb3IuZGV0YWlscz1KU09OLnBhcnNlKGQuZXJyb3IuZGV0YWlscykpLHRoaXMuX21heWJlU2VuZFRvU2VudHJ5KHQpLHRoaXMuX2pvaW5lZENhbGxiYWNrJiYodGhpcy5fam9pbmVkQ2FsbGJhY2sobnVsbCxkKSx0aGlzLl9qb2luZWRDYWxsYmFjaz1udWxsKSx0aGlzLmVtaXREYWlseUpTRXZlbnQoZCk7YnJlYWs7Y2FzZSBHaTp0aGlzLl9jYWxsU3RhdGUhPT1haSYmdGhpcy5fdXBkYXRlQ2FsbFN0YXRlKHNpKSx0aGlzLnJlc2V0TWVldGluZ0RlcGVuZGVudFZhcnMoKSx0aGlzLl9yZXNvbHZlTGVhdmUmJih0aGlzLl9yZXNvbHZlTGVhdmUoKSx0aGlzLl9yZXNvbHZlTGVhdmU9bnVsbCksdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2VcInNlbGVjdGVkLWRldmljZXMtdXBkYXRlZFwiOnQuZGV2aWNlcyYmdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgT286dmFyIHA9dC5zdGF0ZSxoPXQudGhyZXNob2xkLGY9dC5xdWFsaXR5LHY9cC5zdGF0ZSxnPXAucmVhc29uczt2PT09dGhpcy5fbmV0d29yay5uZXR3b3JrU3RhdGUmJlMoZyx0aGlzLl9uZXR3b3JrLm5ldHdvcmtTdGF0ZVJlYXNvbnMpJiZoPT09dGhpcy5fbmV0d29yay50aHJlc2hvbGQmJmY9PT10aGlzLl9uZXR3b3JrLnF1YWxpdHl8fCh0aGlzLl9uZXR3b3JrLm5ldHdvcmtTdGF0ZT12LHRoaXMuX25ldHdvcmsubmV0d29ya1N0YXRlUmVhc29ucz1nLHRoaXMuX25ldHdvcmsucXVhbGl0eT1mLHRoaXMuX25ldHdvcmsudGhyZXNob2xkPWgsdC5uZXR3b3JrU3RhdGU9dixnLmxlbmd0aCYmKHQubmV0d29ya1N0YXRlUmVhc29ucz1nKSxkZWxldGUgdC5zdGF0ZSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCkpO2JyZWFrO2Nhc2UgQW86dCYmdC5jcHVMb2FkU3RhdGUmJnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIGpvOnQmJnZvaWQgMCE9PXQuZmFjZUNvdW50cyYmdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgRW86dmFyIG09dC5hY3RpdmVTcGVha2VyO3RoaXMuX2FjdGl2ZVNwZWFrZXIucGVlcklkIT09bS5wZWVySWQmJih0aGlzLl9hY3RpdmVTcGVha2VyLnBlZXJJZD1tLnBlZXJJZCx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp0LmFjdGlvbixhY3RpdmVTcGVha2VyOnRoaXMuX2FjdGl2ZVNwZWFrZXJ9KSk7YnJlYWs7Y2FzZVwic2hvdy1sb2NhbC12aWRlby1jaGFuZ2VkXCI6aWYodGhpcy5fY2FsbE9iamVjdE1vZGUpcmV0dXJuO3ZhciB5PXQuc2hvdzt0aGlzLl9zaG93TG9jYWxWaWRlbz15LHRoaXMuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOnQuYWN0aW9uLHNob3c6eX0pO2JyZWFrO2Nhc2UgVG86dmFyIGI9dC5lbmFibGVkO3RoaXMuX2FjdGl2ZVNwZWFrZXJNb2RlIT09YiYmKHRoaXMuX2FjdGl2ZVNwZWFrZXJNb2RlPWIsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246dC5hY3Rpb24sZW5hYmxlZDp0aGlzLl9hY3RpdmVTcGVha2VyTW9kZX0pKTticmVhaztjYXNlIHJvOmNhc2UgaW86Y2FzZSBvbzp0aGlzLl93YWl0aW5nUGFydGljaXBhbnRzPXQuYWxsV2FpdGluZ1BhcnRpY2lwYW50cyx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp0LmFjdGlvbixwYXJ0aWNpcGFudDp0LnBhcnRpY2lwYW50fSk7YnJlYWs7Y2FzZSBCbzpTKHRoaXMuX3JlY2VpdmVTZXR0aW5ncyx0LnJlY2VpdmVTZXR0aW5ncyl8fCh0aGlzLl9yZWNlaXZlU2V0dGluZ3M9dC5yZWNlaXZlU2V0dGluZ3MsdGhpcy5lbWl0RGFpbHlKU0V2ZW50KHthY3Rpb246dC5hY3Rpb24scmVjZWl2ZVNldHRpbmdzOnQucmVjZWl2ZVNldHRpbmdzfSkpO2JyZWFrO2Nhc2UgVW86dGhpcy5fbWF5YmVVcGRhdGVJbnB1dFNldHRpbmdzKHQuaW5wdXRTZXR0aW5ncyk7YnJlYWs7Y2FzZVwic2VuZC1zZXR0aW5ncy11cGRhdGVkXCI6Uyh0aGlzLl9zZW5kU2V0dGluZ3MsdC5zZW5kU2V0dGluZ3MpfHwodGhpcy5fc2VuZFNldHRpbmdzPXQuc2VuZFNldHRpbmdzLHRoaXMuX3ByZWxvYWRDYWNoZS5zZW5kU2V0dGluZ3M9bnVsbCx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjp0LmFjdGlvbixzZW5kU2V0dGluZ3M6dC5zZW5kU2V0dGluZ3N9KSk7YnJlYWs7Y2FzZVwibG9jYWwtYXVkaW8tbGV2ZWxcIjp0aGlzLl9sb2NhbEF1ZGlvTGV2ZWw9dC5hdWRpb0xldmVsLHRoaXMuX3ByZWxvYWRDYWNoZS5sb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlcj1udWxsLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlXCJyZW1vdGUtcGFydGljaXBhbnRzLWF1ZGlvLWxldmVsXCI6dGhpcy5fcmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbD10LnBhcnRpY2lwYW50c0F1ZGlvTGV2ZWwsdGhpcy5fcHJlbG9hZENhY2hlLnJlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlcj1udWxsLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIF9vOnZhciBfPXQuc2Vzc2lvbl9pZDt0aGlzLl9ybXBQbGF5ZXJTdGF0ZVtfXT10LnBsYXllclN0YXRlLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIFNvOmRlbGV0ZSB0aGlzLl9ybXBQbGF5ZXJTdGF0ZVt0LnNlc3Npb25faWRdLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIHdvOnZhciB3PXQuc2Vzc2lvbl9pZCxrPXRoaXMuX3JtcFBsYXllclN0YXRlW3ddO2smJnRoaXMuY29tcGFyZUVxdWFsRm9yUk1QVXBkYXRlRXZlbnQoayx0LnJlbW90ZU1lZGlhUGxheWVyU3RhdGUpfHwodGhpcy5fcm1wUGxheWVyU3RhdGVbd109dC5yZW1vdGVNZWRpYVBsYXllclN0YXRlLHRoaXMuZW1pdERhaWx5SlNFdmVudCh0KSk7YnJlYWs7Y2FzZVwiY3VzdG9tLWJ1dHRvbi1jbGlja1wiOmNhc2VcInNpZGViYXItdmlldy1jaGFuZ2VkXCI6dGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2UgdG86dmFyIE09dGhpcy5fbWVldGluZ1Nlc3Npb25TdGF0ZS50b3BvbG9neSE9PSh0Lm1lZXRpbmdTZXNzaW9uU3RhdGUmJnQubWVldGluZ1Nlc3Npb25TdGF0ZS50b3BvbG9neSk7dGhpcy5fbWVldGluZ1Nlc3Npb25TdGF0ZT1fYyh0Lm1lZXRpbmdTZXNzaW9uU3RhdGUsdGhpcy5fY2FsbE9iamVjdE1vZGUpLCh0aGlzLl9jYWxsT2JqZWN0TW9kZXx8TSkmJnRoaXMuZW1pdERhaWx5SlNFdmVudCh0KTticmVhaztjYXNlIGtvOnRoaXMuX2lzU2NyZWVuU2hhcmluZz0hMCx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSBNbzpjYXNlIENvOnRoaXMuX2lzU2NyZWVuU2hhcmluZz0hMSx0aGlzLmVtaXREYWlseUpTRXZlbnQodCk7YnJlYWs7Y2FzZSBwbzpjYXNlIGhvOmNhc2UgZm86Y2FzZSB2bzpjYXNlIGdvOmNhc2UgY286Y2FzZSBsbzpjYXNlIHVvOmNhc2UgcWk6Y2FzZSB6aTpjYXNlIHlvOmNhc2UgYm86Y2FzZVwidGVzdC1jb21wbGV0ZWRcIjpjYXNlIFBvOmNhc2UgbW86Y2FzZSBMbzpjYXNlIERvOmNhc2UgTm86Y2FzZSBSbzpjYXNlIFZvOmNhc2UgRm86Y2FzZVwiZGlhbGluLXJlYWR5XCI6Y2FzZVwiZGlhbGluLWNvbm5lY3RlZFwiOmNhc2VcImRpYWxpbi1lcnJvclwiOmNhc2VcImRpYWxpbi1zdG9wcGVkXCI6Y2FzZVwiZGlhbGluLXdhcm5pbmdcIjpjYXNlXCJkaWFsb3V0LWNvbm5lY3RlZFwiOmNhc2VcImRpYWxvdXQtYW5zd2VyZWRcIjpjYXNlXCJkaWFsb3V0LWVycm9yXCI6Y2FzZVwiZGlhbG91dC1zdG9wcGVkXCI6Y2FzZVwiZGlhbG91dC13YXJuaW5nXCI6dGhpcy5lbWl0RGFpbHlKU0V2ZW50KHQpO2JyZWFrO2Nhc2VcInJlcXVlc3QtZnVsbHNjcmVlblwiOnRoaXMucmVxdWVzdEZ1bGxzY3JlZW4oKTticmVhaztjYXNlXCJyZXF1ZXN0LWV4aXQtZnVsbHNjcmVlblwiOnRoaXMuZXhpdEZ1bGxzY3JlZW4oKX19fSx7a2V5OlwibWF5YmVFdmVudFJlY29yZGluZ1N0b3BwZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPVwicmVjb3JkXCI7ZSYmKHQubG9jYWx8fCExIT09dFtuXXx8ZVtuXT09PXRbbl18fHRoaXMuZW1pdERhaWx5SlNFdmVudCh7YWN0aW9uOmhvfSkpfX0se2tleTpcIm1heWJlRXZlbnRSZWNvcmRpbmdTdGFydGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cInJlY29yZFwiO2UmJih0LmxvY2FsfHwhMCE9PXRbbl18fGVbbl09PT10W25dfHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpwb30pKX19LHtrZXk6XCJfdHJhY2tTdGF0ZVBsYXlhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISghZXx8ZS5zdGF0ZSE9PWhpKX19LHtrZXk6XCJfdHJhY2tDaGFuZ2VkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKChudWxsPT1lP3ZvaWQgMDplLmlkKT09PShudWxsPT10P3ZvaWQgMDp0LmlkKSl9fSx7a2V5OlwibWF5YmVFdmVudFRyYWNrU3RvcHBlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89bnVsbCE9PShyPW51bGw9PXQ/dm9pZCAwOnQudHJhY2tzW2VdKSYmdm9pZCAwIT09cj9yOm51bGwscz1udWxsIT09KGk9bnVsbD09bj92b2lkIDA6bi50cmFja3NbZV0pJiZ2b2lkIDAhPT1pP2k6bnVsbCxhPW51bGw9PW8/dm9pZCAwOm8udHJhY2s7aWYoYSl7dmFyIGM9dGhpcy5fdHJhY2tTdGF0ZVBsYXlhYmxlKG8pLGw9dGhpcy5fdHJhY2tTdGF0ZVBsYXlhYmxlKHMpLHU9dGhpcy5fdHJhY2tDaGFuZ2VkKGEsbnVsbD09cz92b2lkIDA6cy50cmFjayk7YyYmKGwmJiF1fHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjphbyx0cmFjazphLHBhcnRpY2lwYW50Om51bGwhPW4/bjp0LHR5cGU6ZX0pKX19fSx7a2V5OlwibWF5YmVFdmVudFRyYWNrU3RhcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89bnVsbCE9PShyPW51bGw9PXQ/dm9pZCAwOnQudHJhY2tzW2VdKSYmdm9pZCAwIT09cj9yOm51bGwscz1udWxsIT09KGk9bnVsbD09bj92b2lkIDA6bi50cmFja3NbZV0pJiZ2b2lkIDAhPT1pP2k6bnVsbCxhPW51bGw9PXM/dm9pZCAwOnMudHJhY2s7aWYoYSl7dmFyIGM9dGhpcy5fdHJhY2tTdGF0ZVBsYXlhYmxlKG8pLGw9dGhpcy5fdHJhY2tTdGF0ZVBsYXlhYmxlKHMpLHU9dGhpcy5fdHJhY2tDaGFuZ2VkKG51bGw9PW8/dm9pZCAwOm8udHJhY2ssYSk7bCYmKGMmJiF1fHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpzbyx0cmFjazphLHBhcnRpY2lwYW50Om4sdHlwZTplfSkpfX19LHtrZXk6XCJtYXliZVBhcnRpY2lwYW50VHJhY2tzU3RvcHBlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoZSlmb3IodmFyIG4gaW4gZS50cmFja3MpdGhpcy5tYXliZUV2ZW50VHJhY2tTdG9wcGVkKG4sZSx0KX19LHtrZXk6XCJtYXliZVBhcnRpY2lwYW50VHJhY2tzU3RhcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodClmb3IodmFyIG4gaW4gdC50cmFja3MpdGhpcy5tYXliZUV2ZW50VHJhY2tTdGFydGVkKG4sZSx0KX19LHtrZXk6XCJjb21wYXJlRXF1YWxGb3JSTVBVcGRhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scjtyZXR1cm4gZS5zdGF0ZT09PXQuc3RhdGUmJihudWxsPT09KG49ZS5zZXR0aW5ncyl8fHZvaWQgMD09PW4/dm9pZCAwOm4udm9sdW1lKT09PShudWxsPT09KHI9dC5zZXR0aW5ncyl8fHZvaWQgMD09PXI/dm9pZCAwOnIudm9sdW1lKX19LHtrZXk6XCJlbWl0RGFpbHlKU0V2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dHJ5e2UuY2FsbENsaWVudElkPXRoaXMuY2FsbENsaWVudElkLHRoaXMuZW1pdChlLmFjdGlvbixlKX1jYXRjaCh0KXtjb25zb2xlLmxvZyhcImNvdWxkIG5vdCBlbWl0XCIsZSx0KX19fSx7a2V5OlwiY29tcGFyZUVxdWFsRm9yUGFydGljaXBhbnRVcGRhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFTKGUsdCkmJigoIWUudmlkZW9UcmFja3x8IXQudmlkZW9UcmFja3x8ZS52aWRlb1RyYWNrLmlkPT09dC52aWRlb1RyYWNrLmlkJiZlLnZpZGVvVHJhY2subXV0ZWQ9PT10LnZpZGVvVHJhY2subXV0ZWQmJmUudmlkZW9UcmFjay5lbmFibGVkPT09dC52aWRlb1RyYWNrLmVuYWJsZWQpJiYoIWUuYXVkaW9UcmFja3x8IXQuYXVkaW9UcmFja3x8ZS5hdWRpb1RyYWNrLmlkPT09dC5hdWRpb1RyYWNrLmlkJiZlLmF1ZGlvVHJhY2subXV0ZWQ9PT10LmF1ZGlvVHJhY2subXV0ZWQmJmUuYXVkaW9UcmFjay5lbmFibGVkPT09dC5hdWRpb1RyYWNrLmVuYWJsZWQpKX19LHtrZXk6XCJuYXRpdmVVdGlsc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGlzKCk/XCJ1bmRlZmluZWRcIj09dHlwZW9mIERhaWx5TmF0aXZlVXRpbHM/KGNvbnNvbGUud2FybihcImluIFJlYWN0IE5hdGl2ZSwgRGFpbHlOYXRpdmVVdGlscyBpcyBleHBlY3RlZCB0byBiZSBhdmFpbGFibGVcIiksbnVsbCk6RGFpbHlOYXRpdmVVdGlsczpudWxsfX0se2tleTpcInVwZGF0ZUlzUHJlcGFyaW5nVG9Kb2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlQ2FsbFN0YXRlKHRoaXMuX2NhbGxTdGF0ZSxlKX19LHtrZXk6XCJfdXBkYXRlQ2FsbFN0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuX2lzUHJlcGFyaW5nVG9Kb2luO2lmKGUhPT10aGlzLl9jYWxsU3RhdGV8fHQhPT10aGlzLl9pc1ByZXBhcmluZ1RvSm9pbil7dmFyIG49dGhpcy5fY2FsbFN0YXRlLHI9dGhpcy5faXNQcmVwYXJpbmdUb0pvaW47dGhpcy5fY2FsbFN0YXRlPWUsdGhpcy5faXNQcmVwYXJpbmdUb0pvaW49dDt2YXIgaT10aGlzLl9jYWxsU3RhdGU9PT1vaTt0aGlzLnVwZGF0ZVNob3dBbmRyb2lkT25nb2luZ01lZXRpbmdOb3RpZmljYXRpb24oaSk7dmFyIG89S2EobixyKSxzPUthKHRoaXMuX2NhbGxTdGF0ZSx0aGlzLl9pc1ByZXBhcmluZ1RvSm9pbik7byE9PXMmJih0aGlzLnVwZGF0ZUtlZXBEZXZpY2VBd2FrZShzKSx0aGlzLnVwZGF0ZURldmljZUF1ZGlvTW9kZShzKSx0aGlzLnVwZGF0ZU5vT3BSZWNvcmRpbmdFbnN1cmluZ0JhY2tncm91bmRDb250aW51aXR5KHMpKX19fSx7a2V5OlwicmVzZXRNZWV0aW5nRGVwZW5kZW50VmFyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcGFydGljaXBhbnRzPXt9LHRoaXMuX3BhcnRpY2lwYW50Q291bnRzPUZhLHRoaXMuX3dhaXRpbmdQYXJ0aWNpcGFudHM9e30sdGhpcy5fYWN0aXZlU3BlYWtlcj17fSx0aGlzLl9hY3RpdmVTcGVha2VyTW9kZT0hMSx0aGlzLl9kaWRQcmVBdXRoPSExLHRoaXMuX2FjY2Vzc1N0YXRlPXthY2Nlc3M6Zml9LHRoaXMuX2ZpbmFsU3VtbWFyeU9mUHJldlNlc3Npb249dGhpcy5fbWVldGluZ1Nlc3Npb25TdW1tYXJ5LHRoaXMuX21lZXRpbmdTZXNzaW9uU3VtbWFyeT17fSx0aGlzLl9tZWV0aW5nU2Vzc2lvblN0YXRlPV9jKFJhLHRoaXMuX2NhbGxPYmplY3RNb2RlKSx0aGlzLl9pc1NjcmVlblNoYXJpbmc9ITEsdGhpcy5fcmVjZWl2ZVNldHRpbmdzPXt9LHRoaXMuX2lucHV0U2V0dGluZ3M9dm9pZCAwLHRoaXMuX3NlbmRTZXR0aW5ncz17fSx0aGlzLl9sb2NhbEF1ZGlvTGV2ZWw9MCx0aGlzLl9pc0xvY2FsQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSx0aGlzLl9yZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsPXt9LHRoaXMuX2lzUmVtb3RlUGFydGljaXBhbnRzQXVkaW9MZXZlbE9ic2VydmVyUnVubmluZz0hMSx0aGlzLl9tYXhBcHBNZXNzYWdlU2l6ZT0kbyx0aGlzLl9jYWxsTWFjaGluZUluaXRpYWxpemVkPSExLHRoaXMuX2J1bmRsZUxvYWRUaW1lPXZvaWQgMCx0aGlzLl9wcmVsb2FkQ2FjaGV9fSx7a2V5OlwidXBkYXRlS2VlcERldmljZUF3YWtlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aXMoKSYmdGhpcy5uYXRpdmVVdGlscygpLnNldEtlZXBEZXZpY2VBd2FrZShlLHRoaXMuY2FsbENsaWVudElkKX19LHtrZXk6XCJ1cGRhdGVEZXZpY2VBdWRpb01vZGVcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihpcygpJiYhdGhpcy5kaXNhYmxlUmVhY3ROYXRpdmVBdXRvRGV2aWNlTWFuYWdlbWVudChcImF1ZGlvXCIpKXt2YXIgdD1lP3RoaXMuX25hdGl2ZUluQ2FsbEF1ZGlvTW9kZTpcImlkbGVcIjt0aGlzLm5hdGl2ZVV0aWxzKCkuc2V0QXVkaW9Nb2RlKHQpfX19LHtrZXk6XCJ1cGRhdGVTaG93QW5kcm9pZE9uZ29pbmdNZWV0aW5nTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoaXMoKSYmdGhpcy5uYXRpdmVVdGlscygpLnNldFNob3dPbmdvaW5nTWVldGluZ05vdGlmaWNhdGlvbil7dmFyIHQsbixyLGk7aWYodGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnJiZ0aGlzLnByb3BlcnRpZXMucmVhY3ROYXRpdmVDb25maWcuYW5kcm9pZEluQ2FsbE5vdGlmaWNhdGlvbil7dmFyIG89dGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnLmFuZHJvaWRJbkNhbGxOb3RpZmljYXRpb247dD1vLnRpdGxlLG49by5zdWJ0aXRsZSxyPW8uaWNvbk5hbWUsaT1vLmRpc2FibGVGb3JDdXN0b21PdmVycmlkZX1pJiYoZT0hMSksdGhpcy5uYXRpdmVVdGlscygpLnNldFNob3dPbmdvaW5nTWVldGluZ05vdGlmaWNhdGlvbihlLHQsbixyLHRoaXMuY2FsbENsaWVudElkKX19fSx7a2V5OlwidXBkYXRlTm9PcFJlY29yZGluZ0Vuc3VyaW5nQmFja2dyb3VuZENvbnRpbnVpdHlcIix2YWx1ZTpmdW5jdGlvbihlKXtpcygpJiZ0aGlzLm5hdGl2ZVV0aWxzKCkuZW5hYmxlTm9PcFJlY29yZGluZ0Vuc3VyaW5nQmFja2dyb3VuZENvbnRpbnVpdHkmJnRoaXMubmF0aXZlVXRpbHMoKS5lbmFibGVOb09wUmVjb3JkaW5nRW5zdXJpbmdCYWNrZ3JvdW5kQ29udGludWl0eShlKX19LHtrZXk6XCJ0b2dnbGVQYXJ0aWNpcGFudEF1ZGlvQmFzZWRPbk5hdGl2ZUF1ZGlvRm9jdXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO2lmKGlzKCkpe3ZhciB0PW51bGw9PT0oZT10aGlzLl9jYWxsTWFjaGluZSgpKXx8dm9pZCAwPT09ZXx8bnVsbD09PShlPWUuc3RvcmUpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldFN0YXRlKCk7Zm9yKHZhciBuIGluIG51bGw9PXQ/dm9pZCAwOnQuc3RyZWFtcyl7dmFyIHI9dC5zdHJlYW1zW25dO3ImJnIucGVuZGluZ1RyYWNrJiZcImF1ZGlvXCI9PT1yLnBlbmRpbmdUcmFjay5raW5kJiYoci5wZW5kaW5nVHJhY2suZW5hYmxlZD10aGlzLl9oYXNOYXRpdmVBdWRpb0ZvY3VzKX19fX0se2tleTpcImRpc2FibGVSZWFjdE5hdGl2ZUF1dG9EZXZpY2VNYW5hZ2VtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHJvcGVydGllcy5yZWFjdE5hdGl2ZUNvbmZpZyYmdGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnLmRpc2FibGVBdXRvRGV2aWNlTWFuYWdlbWVudCYmdGhpcy5wcm9wZXJ0aWVzLnJlYWN0TmF0aXZlQ29uZmlnLmRpc2FibGVBdXRvRGV2aWNlTWFuYWdlbWVudFtlXX19LHtrZXk6XCJhYnNvbHV0ZVVybFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiB0LmhyZWY9ZSx0LmhyZWZ9fX0se2tleTpcInNheUhlbGxvXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1cImhlbGxvLCB3b3JsZC5cIjtyZXR1cm4gY29uc29sZS5sb2coZSksZX19LHtrZXk6XCJfbG9nVXNlQWZ0ZXJEZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QudmFsdWVzKExhKVswXTtpZih0aGlzLm5lZWRzTG9hZCgpKXtpZihlJiYhZS5uZWVkc0xvYWQoKSl7dmFyIHQ9e2FjdGlvbjpHbyxsZXZlbDpcImVycm9yXCIsY29kZTp0aGlzLnN0cmljdE1vZGU/OTk5NTo5OTk3fTtlLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh0KX1lbHNlIGlmKCF0aGlzLnN0cmljdE1vZGUpe2NvbnNvbGUuZXJyb3IoXCJZb3UgYXJlIGFyZSBhdHRlbXB0aW5nIHRvIHVzZSBhIGNhbGwgaW5zdGFuY2UgdGhhdCB3YXMgcHJldmlvdXNseSBkZXN0cm95ZWQsIHdoaWNoIGlzIHVuc3VwcG9ydGVkLiBQbGVhc2UgcmVtb3ZlIGBzdHJpY3RNb2RlOiBmYWxzZWAgZnJvbSB5b3VyIGNvbnN0cnVjdG9yIHByb3BlcnRpZXMgdG8gZW5hYmxlIHN0cmljdCBtb2RlIHRvIHRyYWNrIGRvd24gYW5kIGZpeCB0aGlzIHVuc3VwcG9ydGVkIHVzYWdlLlwiKX19ZWxzZXt2YXIgbj17YWN0aW9uOkdvLGxldmVsOlwiZXJyb3JcIixjb2RlOnRoaXMuc3RyaWN0TW9kZT85OTk1Ojk5OTd9O3RoaXMuX21lc3NhZ2VDaGFubmVsLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZShuLG51bGwsdGhpcy5jYWxsQ2xpZW50SWQsdGhpcy5faWZyYW1lKX19fSx7a2V5OlwiX2xvZ0R1cGxpY2F0ZUluc3RhbmNlQXR0ZW1wdFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1PYmplY3QudmFsdWVzKExhKTtlPHQubGVuZ3RoO2UrKyl7dmFyIG49dFtlXTtuLl9jYWxsTWFjaGluZUluaXRpYWxpemVkPyhuLnNlbmRNZXNzYWdlVG9DYWxsTWFjaGluZSh7YWN0aW9uOkdvLGxldmVsOlwid2FyblwiLGNvZGU6dGhpcy5hbGxvd011bHRpcGxlQ2FsbEluc3RhbmNlcz85OTkzOjk5OTJ9KSxuLl9kZWxheUR1cGxpY2F0ZUluc3RhbmNlTG9nPSExKTpuLl9kZWxheUR1cGxpY2F0ZUluc3RhbmNlTG9nPSEwfX19LHtrZXk6XCJfbWF5YmVTZW5kVG9TZW50cnlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuLGksbztpZihudWxsIT09KHQ9ZS5lcnJvcikmJnZvaWQgMCE9PXQmJnQudHlwZSl7aWYoIVtQaSxUaSxDaV0uaW5jbHVkZXMoZS5lcnJvci50eXBlKSlyZXR1cm47aWYoZS5lcnJvci50eXBlPT09Q2kmJmUuZXJyb3IubXNnLmluY2x1ZGVzKFwiZGVsZXRlZFwiKSlyZXR1cm59dmFyIHM9bnVsbCE9PShuPXRoaXMucHJvcGVydGllcykmJnZvaWQgMCE9PW4mJm4udXJsP25ldyBVUkwodGhpcy5wcm9wZXJ0aWVzLnVybCk6dm9pZCAwLGE9XCJwcm9kdWN0aW9uXCI7cyYmcy5ob3N0LmluY2x1ZGVzKFwiLnN0YWdpbmcuZGFpbHlcIikmJihhPVwic3RhZ2luZ1wiKTt2YXIgYyxsLHUsZCxwLGg9ZnVuY3Rpb24oZSl7Y29uc3QgdD1bTG4oKSxJbigpLHFyKCksSnIoKSxLcigpLGVpKCksJG4oKSxacigpXTtyZXR1cm4hMSE9PWUuYXV0b1Nlc3Npb25UcmFja2luZyYmdC5wdXNoKFFyKCkpLHR9KHt9KS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFbXCJCcm93c2VyQXBpRXJyb3JzXCIsXCJCcmVhZGNydW1ic1wiLFwiR2xvYmFsSGFuZGxlcnNcIl0uaW5jbHVkZXMoZS5uYW1lKX0pKSxmPW5ldyBtcih7ZHNuOlwiaHR0cHM6Ly9mMTBmMWM4MWU1ZDQ0YTQwOTg0MTZjMDg2N2E4Yjc0MEBvNzc5MDYuaW5nZXN0LnNlbnRyeS5pby8xNjg4NDRcIix0cmFuc3BvcnQ6SXIsc3RhY2tQYXJzZXI6QnIsaW50ZWdyYXRpb25zOmgsZW52aXJvbm1lbnQ6YX0pLHY9bmV3IHV0O2lmKHYuc2V0Q2xpZW50KGYpLGYuaW5pdCgpLHRoaXMuc2Vzc2lvbl9pZCYmdi5zZXRFeHRyYShcInNlc3Npb25JZFwiLHRoaXMuc2Vzc2lvbl9pZCksdGhpcy5wcm9wZXJ0aWVzKXt2YXIgZz1BYSh7fSx0aGlzLnByb3BlcnRpZXMpO2cudXNlck5hbWU9Zy51c2VyTmFtZT9cIltGaWx0ZXJlZF1cIjp2b2lkIDAsZy51c2VyRGF0YT1nLnVzZXJEYXRhP1wiW0ZpbHRlcmVkXVwiOnZvaWQgMCxnLnRva2VuPWcudG9rZW4/XCJbRmlsdGVyZWRdXCI6dm9pZCAwLHYuc2V0RXh0cmEoXCJwcm9wZXJ0aWVzXCIsZyl9aWYocyl7dmFyIG09cy5zZWFyY2hQYXJhbXMuZ2V0KFwiZG9tYWluXCIpO2lmKCFtKXt2YXIgeT1zLmhvc3QubWF0Y2goLyguKj8pXFwuLyk7bT15JiZ5WzFdfHxcIlwifW0mJnYuc2V0VGFnKFwiZG9tYWluXCIsbSl9ZS5lcnJvciYmKHYuc2V0VGFnKFwiZmF0YWxFcnJvclR5cGVcIixlLmVycm9yLnR5cGUpLHYuc2V0RXh0cmEoXCJlcnJvckRldGFpbHNcIixlLmVycm9yLmRldGFpbHMpLChudWxsPT09KGM9ZS5lcnJvci5kZXRhaWxzKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy51cmkpJiZ2LnNldFRhZyhcInNlcnZlckFkZHJlc3NcIixlLmVycm9yLmRldGFpbHMudXJpKSwobnVsbD09PShsPWUuZXJyb3IuZGV0YWlscyl8fHZvaWQgMD09PWw/dm9pZCAwOmwud29ya2VyR3JvdXApJiZ2LnNldFRhZyhcIndvcmtlckdyb3VwXCIsZS5lcnJvci5kZXRhaWxzLndvcmtlckdyb3VwKSwobnVsbD09PSh1PWUuZXJyb3IuZGV0YWlscyl8fHZvaWQgMD09PXU/dm9pZCAwOnUuZ2VvR3JvdXApJiZ2LnNldFRhZyhcImdlb0dyb3VwXCIsZS5lcnJvci5kZXRhaWxzLmdlb0dyb3VwKSwobnVsbD09PShkPWUuZXJyb3IuZGV0YWlscyl8fHZvaWQgMD09PWQ/dm9pZCAwOmQub24pJiZ2LnNldFRhZyhcImNvbm5lY3Rpb25BdHRlbXB0XCIsZS5lcnJvci5kZXRhaWxzLm9uKSxudWxsIT09KHA9ZS5lcnJvci5kZXRhaWxzKSYmdm9pZCAwIT09cCYmcC5idW5kbGVVcmwmJih2LnNldFRhZyhcImJ1bmRsZVVybFwiLGUuZXJyb3IuZGV0YWlscy5idW5kbGVVcmwpLHYuc2V0VGFnKFwiYnVuZGxlRXJyb3JcIixlLmVycm9yLmRldGFpbHMuc291cmNlRXJyb3IudHlwZSkpKTt2LnNldFRhZ3Moe2NhbGxNb2RlOnRoaXMuX2NhbGxPYmplY3RNb2RlP2lzKCk/XCJyZWFjdE5hdGl2ZVwiOm51bGwhPT0oaT10aGlzLnByb3BlcnRpZXMpJiZ2b2lkIDAhPT1pJiZudWxsIT09KGk9aS5kYWlseUNvbmZpZykmJnZvaWQgMCE9PWkmJm51bGwhPT0oaT1pLmNhbGxNb2RlKSYmdm9pZCAwIT09aSYmaS5pbmNsdWRlcyhcInByZWJ1aWx0XCIpP3RoaXMucHJvcGVydGllcy5kYWlseUNvbmZpZy5jYWxsTW9kZTpcImN1c3RvbVwiOlwicHJlYnVpbHQtZnJhbWVcIix2ZXJzaW9uOnIudmVyc2lvbigpfSk7dmFyIGI9KG51bGw9PT0obz1lLmVycm9yKXx8dm9pZCAwPT09bz92b2lkIDA6by5tc2cpfHxlLmVycm9yTXNnO3YuY2FwdHVyZUV4Y2VwdGlvbihuZXcgRXJyb3IoYikpfX0se2tleTpcIl9jYWxsTWFjaGluZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT13aW5kb3cuX2RhaWx5KXx8dm9pZCAwPT09ZXx8bnVsbD09PShlPWUuaW5zdGFuY2VzKXx8dm9pZCAwPT09ZXx8bnVsbD09PShlPWVbdGhpcy5jYWxsQ2xpZW50SWRdKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsTWFjaGluZX19LHtrZXk6XCJfbWF5YmVVcGRhdGVJbnB1dFNldHRpbmdzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIVModGhpcy5faW5wdXRTZXR0aW5ncyxlKSl7dmFyIHQ9dGhpcy5fZ2V0SW5wdXRTZXR0aW5ncygpO3RoaXMuX2lucHV0U2V0dGluZ3M9ZTt2YXIgbj10aGlzLl9nZXRJbnB1dFNldHRpbmdzKCk7Uyh0LG4pfHx0aGlzLmVtaXREYWlseUpTRXZlbnQoe2FjdGlvbjpVbyxpbnB1dFNldHRpbmdzOm59KX19fV0sW3trZXk6XCJzdXBwb3J0ZWRCcm93c2VyXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihpcygpKXJldHVybntzdXBwb3J0ZWQ6ITAsbW9iaWxlOiEwLG5hbWU6XCJSZWFjdCBOYXRpdmVcIix2ZXJzaW9uOm51bGwsc3VwcG9ydHNTY3JlZW5TaGFyZTohMCxzdXBwb3J0c1NmdTohMCxzdXBwb3J0c1ZpZGVvUHJvY2Vzc2luZzohMSxzdXBwb3J0c0F1ZGlvUHJvY2Vzc2luZzohMX07dmFyIGU9RC5nZXRQYXJzZXIocnMoKSk7cmV0dXJue3N1cHBvcnRlZDohIWZzKCksbW9iaWxlOlwibW9iaWxlXCI9PT1lLmdldFBsYXRmb3JtVHlwZSgpLG5hbWU6ZS5nZXRCcm93c2VyTmFtZSgpLHZlcnNpb246ZS5nZXRCcm93c2VyVmVyc2lvbigpLHN1cHBvcnRzRnVsbHNjcmVlbjohIWFzKCksc3VwcG9ydHNTY3JlZW5TaGFyZTohIXNzKCksc3VwcG9ydHNTZnU6ISFmcygpLHN1cHBvcnRzVmlkZW9Qcm9jZXNzaW5nOnBzKCksc3VwcG9ydHNBdWRpb1Byb2Nlc3Npbmc6aHMoKX19fSx7a2V5OlwidmVyc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCIwLjgzLjFcIn19LHtrZXk6XCJjcmVhdGVDYWxsT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIGUubGF5b3V0PVwibm9uZVwiLG5ldyByKG51bGwsZSl9fSx7a2V5Olwid3JhcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihuYygpLCFlfHwhZS5jb250ZW50V2luZG93fHxcInN0cmluZ1wiIT10eXBlb2YgZS5zcmMpdGhyb3cgbmV3IEVycm9yKFwiRGFpbHlJZnJhbWU6OldyYXAgbmVlZHMgYW4gaWZyYW1lLWxpa2UgZmlyc3QgYXJndW1lbnRcIik7cmV0dXJuIHQubGF5b3V0fHwodC5jdXN0b21MYXlvdXQ/dC5sYXlvdXQ9XCJjdXN0b20tdjFcIjp0LmxheW91dD1cImJyb3dzZXJcIiksbmV3IHIoZSx0KX19LHtrZXk6XCJjcmVhdGVGcmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtuYygpLGUmJnQ/KG49ZSxpPXQpOmUmJmUuYXBwZW5kPyhuPWUsaT17fSk6KG49ZG9jdW1lbnQuYm9keSxpPWV8fHt9KTt2YXIgbz1pLmlmcmFtZVN0eWxlO298fChvPW49PT1kb2N1bWVudC5ib2R5P3twb3NpdGlvbjpcImZpeGVkXCIsYm9yZGVyOlwiMXB4IHNvbGlkIGJsYWNrXCIsYmFja2dyb3VuZENvbG9yOlwid2hpdGVcIix3aWR0aDpcIjM3NXB4XCIsaGVpZ2h0OlwiNDUwcHhcIixyaWdodDpcIjFlbVwiLGJvdHRvbTpcIjFlbVwifTp7Ym9yZGVyOjAsd2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSk7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTt3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvNjFcXC4vKT9zLmFsbG93PVwibWljcm9waG9uZSwgY2FtZXJhXCI6cy5hbGxvdz1cIm1pY3JvcGhvbmU7IGNhbWVyYTsgYXV0b3BsYXk7IGRpc3BsYXktY2FwdHVyZTsgc2NyZWVuLXdha2UtbG9ja1wiLHMuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLG4uYXBwZW5kQ2hpbGQocykscy5zdHlsZS52aXNpYmlsaXR5PW51bGwsT2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIHMuc3R5bGVbZV09b1tlXX0pKSxpLmxheW91dHx8KGkuY3VzdG9tTGF5b3V0P2kubGF5b3V0PVwiY3VzdG9tLXYxXCI6aS5sYXlvdXQ9XCJicm93c2VyXCIpO3RyeXtyZXR1cm4gbmV3IHIocyxpKX1jYXRjaChlKXt0aHJvdyBuLnJlbW92ZUNoaWxkKHMpLGV9fX0se2tleTpcImNyZWF0ZVRyYW5zcGFyZW50RnJhbWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtuYygpO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7cmV0dXJuIHQuYWxsb3c9XCJtaWNyb3Bob25lOyBjYW1lcmE7IGF1dG9wbGF5XCIsdC5zdHlsZS5jc3NUZXh0PVwiXFxuICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgIHRvcDogMDtcXG4gICAgICBsZWZ0OiAwO1xcbiAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICAgIGhlaWdodDogMTAwJTtcXG4gICAgICBib3JkZXI6IDA7XFxuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICAgIFwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksZS5sYXlvdXR8fChlLmxheW91dD1cImN1c3RvbS12MVwiKSxyLndyYXAodCxlKX19LHtrZXk6XCJnZXRDYWxsSW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp2b2lkIDA7cmV0dXJuIGU/TGFbZV06T2JqZWN0LnZhbHVlcyhMYSlbMF19fV0pO3ZhciBpLGMsZCxoLHYsZyxtLHksXyx3LGssTSxDLEUsVCxPLFAsQSxqLEkseCxMLFIsVSxWLEosJCxxLHosVyxILEcsUSxLLFksWCxaLGVlfSgpO2Z1bmN0aW9uIEdhKGUsdCl7dmFyIG49e307Zm9yKHZhciByIGluIGUpaWYoZVtyXWluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjayljb25zb2xlLndhcm4oXCJNZWRpYVN0cmVhbVRyYWNrIGZvdW5kIGluIHByb3BzIG9yIGNhY2hlLlwiLHIpLG5bcl09UW87ZWxzZSBpZihcImRhaWx5Q29uZmlnXCI9PT1yKXtpZihlW3JdLm1vZGlmeUxvY2FsU2RwSG9vayl7dmFyIGk9d2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdF0uY3VzdG9tQ2FsbGJhY2tzfHx7fTtpLm1vZGlmeUxvY2FsU2RwSG9vaz1lW3JdLm1vZGlmeUxvY2FsU2RwSG9vayx3aW5kb3cuX2RhaWx5Lmluc3RhbmNlc1t0XS5jdXN0b21DYWxsYmFja3M9aSxkZWxldGUgZVtyXS5tb2RpZnlMb2NhbFNkcEhvb2t9aWYoZVtyXS5tb2RpZnlSZW1vdGVTZHBIb29rKXt2YXIgbz13aW5kb3cuX2RhaWx5Lmluc3RhbmNlc1t0XS5jdXN0b21DYWxsYmFja3N8fHt9O28ubW9kaWZ5UmVtb3RlU2RwSG9vaz1lW3JdLm1vZGlmeVJlbW90ZVNkcEhvb2ssd2luZG93Ll9kYWlseS5pbnN0YW5jZXNbdF0uY3VzdG9tQ2FsbGJhY2tzPW8sZGVsZXRlIGVbcl0ubW9kaWZ5UmVtb3RlU2RwSG9va31uW3JdPWVbcl19ZWxzZSBuW3JdPWVbcl07cmV0dXJuIG59ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDA7aWYoZSE9PW9pKXt2YXIgbj1cIlwiLmNvbmNhdChhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJUaGlzIGRhaWx5LWpzIG1ldGhvZFwiLFwiIG9ubHkgc3VwcG9ydGVkIGFmdGVyIGpvaW4uXCIpO3Rocm93IHQmJihuKz1cIiBcIi5jb25jYXQodCkpLGNvbnNvbGUuZXJyb3IobiksbmV3IEVycm9yKG4pfX1mdW5jdGlvbiBLYShlLHQpe3JldHVybltpaSxvaV0uaW5jbHVkZXMoZSl8fHR9ZnVuY3Rpb24gWWEoZSx0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06XCJUaGlzIGRhaWx5LWpzIG1ldGhvZFwiLHI9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTp2b2lkIDA7aWYoS2EoZSx0KSl7dmFyIGk9XCJcIi5jb25jYXQobixcIiBub3Qgc3VwcG9ydGVkIGFmdGVyIGpvaW5pbmcgYSBtZWV0aW5nLlwiKTt0aHJvdyByJiYoaSs9XCIgXCIuY29uY2F0KHIpKSxjb25zb2xlLmVycm9yKGkpLG5ldyBFcnJvcihpKX19ZnVuY3Rpb24gWGEoZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiVGhpcyBkYWlseS1qcyBtZXRob2RcIixuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwO2lmKCFlKXt2YXIgcj1cIlwiLmNvbmNhdCh0LGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM10/XCIgcmVxdWlyZXMgcHJlQXV0aCgpIG9yIHN0YXJ0Q2FtZXJhKCkgdG8gaW5pdGlhbGl6ZSBjYWxsIHN0YXRlLlwiOlwiIHJlcXVpcmVzIHByZUF1dGgoKSwgc3RhcnRDYW1lcmEoKSwgb3Igam9pbigpIHRvIGluaXRpYWxpemUgY2FsbCBzdGF0ZS5cIik7dGhyb3cgbiYmKHIrPVwiIFwiLmNvbmNhdChuKSksY29uc29sZS5lcnJvcihyKSxuZXcgRXJyb3Iocil9fWZ1bmN0aW9uIFphKGUpe2lmKGUpe3ZhciB0PVwiQSBwcmUtY2FsbCBxdWFsaXR5IHRlc3QgaXMgaW4gcHJvZ3Jlc3MuIFBsZWFzZSB0cnkgXCIuY29uY2F0KGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlRoaXMgZGFpbHktanMgbWV0aG9kXCIsXCIgYWdhaW4gb25jZSB0ZXN0aW5nIGhhcyBjb21wbGV0ZWQuIFVzZSBzdG9wVGVzdENhbGxRdWFsaXR5KCkgdG8gZW5kIGl0IGVhcmx5LlwiKTt0aHJvdyBjb25zb2xlLmVycm9yKHQpLG5ldyBFcnJvcih0KX19ZnVuY3Rpb24gZWMoZSl7aWYoIWUpe3ZhciB0PVwiXCIuY29uY2F0KGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlRoaXMgZGFpbHktanMgbWV0aG9kXCIsXCIgaXMgb25seSBzdXBwb3J0ZWQgb24gY3VzdG9tIGNhbGxPYmplY3QgaW5zdGFuY2VzXCIpO3Rocm93IGNvbnNvbGUuZXJyb3IodCksbmV3IEVycm9yKHQpfX1mdW5jdGlvbiB0YyhlKXtpZihlKXt2YXIgdD1cIlwiLmNvbmNhdChhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJUaGlzIGRhaWx5LWpzIG1ldGhvZFwiLFwiIGlzIG9ubHkgc3VwcG9ydGVkIGFzIHBhcnQgb2YgRGFpbHkncyBQcmVidWlsdFwiKTt0aHJvdyBjb25zb2xlLmVycm9yKHQpLG5ldyBFcnJvcih0KX19ZnVuY3Rpb24gbmMoKXtpZihpcygpKXRocm93IG5ldyBFcnJvcihcIlRoaXMgZGFpbHktanMgbWV0aG9kIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZVwiKX1mdW5jdGlvbiByYygpe2lmKCFpcygpKXRocm93IG5ldyBFcnJvcihcIlRoaXMgZGFpbHktanMgbWV0aG9kIGlzIG9ubHkgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZVwiKX1mdW5jdGlvbiBpYyhlKXtpZih2b2lkIDA9PT1lKXJldHVybiEwO3ZhciB0O2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXQ9ZTtlbHNlIHRyeXt0PUpTT04uc3RyaW5naWZ5KGUpLFMoSlNPTi5wYXJzZSh0KSxlKXx8Y29uc29sZS53YXJuKFwiVGhlIHVzZXJEYXRhIHByb3ZpZGVkIHdpbGwgYmUgbW9kaWZpZWQgd2hlbiBzZXJpYWxpemVkLlwiKX1jYXRjaChlKXt0aHJvdyBFcnJvcihcInVzZXJEYXRhIG11c3QgYmUgc2VyaWFsaXphYmxlIHRvIEpTT046IFwiLmNvbmNhdChlKSl9aWYodC5sZW5ndGg+NDA5Nil0aHJvdyBFcnJvcihcInVzZXJEYXRhIGlzIHRvbyBsYXJnZSAoXCIuY29uY2F0KHQubGVuZ3RoLFwiIGNoYXJhY3RlcnMpLiBNYXhpbXVtIHNpemUgc3VwcHBvcnRlZCBpcyBcIikuY29uY2F0KDQwOTYsXCIuXCIpKTtyZXR1cm4hMH1mdW5jdGlvbiBvYyhlLHQpe2Zvcih2YXIgbj10LmFsbG93QWxsUGFydGljaXBhbnRzS2V5LHI9ZnVuY3Rpb24oZSl7dmFyIHQ9W1wibG9jYWxcIl07cmV0dXJuIG58fHQucHVzaChcIipcIiksZSYmIXQuaW5jbHVkZXMoZSl9LGk9ZnVuY3Rpb24oZSl7cmV0dXJuISEodm9pZCAwPT09ZS5sYXllcnx8TnVtYmVyLmlzSW50ZWdlcihlLmxheWVyKSYmZS5sYXllcj49MHx8XCJpbmhlcml0XCI9PT1lLmxheWVyKX0sbz1mdW5jdGlvbihlKXtyZXR1cm4hIWUmJighKGUudmlkZW8mJiFpKGUudmlkZW8pKSYmIShlLnNjcmVlblZpZGVvJiYhaShlLnNjcmVlblZpZGVvKSkpfSxzPTAsYT1PYmplY3QuZW50cmllcyhlKTtzPGEubGVuZ3RoO3MrKyl7dmFyIGM9ZihhW3NdLDIpLGw9Y1swXSx1PWNbMV07aWYoIXIobCl8fCFvKHUpKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHNjKGUpe2lmKFwib2JqZWN0XCIhPT1uKGUpKXJldHVybiExO2Zvcih2YXIgdD0wLHI9T2JqZWN0LmVudHJpZXMoZSk7dDxyLmxlbmd0aDt0Kyspe3ZhciBpPWYoclt0XSwyKSxvPWlbMF0scz1pWzFdO3N3aXRjaChvKXtjYXNlXCJ2aWRlb1wiOmlmKFwib2JqZWN0XCIhPT1uKHMpKXJldHVybiExO2Zvcih2YXIgYT0wLGM9T2JqZWN0LmVudHJpZXMocyk7YTxjLmxlbmd0aDthKyspe3ZhciBsPWYoY1thXSwyKSx1PWxbMF0sZD1sWzFdO3N3aXRjaCh1KXtjYXNlXCJwcm9jZXNzb3JcIjppZighbGMoZCkpcmV0dXJuITE7YnJlYWs7Y2FzZVwic2V0dGluZ3NcIjppZighdWMoZCkpcmV0dXJuITE7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMX19YnJlYWs7Y2FzZVwiYXVkaW9cIjppZihcIm9iamVjdFwiIT09bihzKSlyZXR1cm4hMTtmb3IodmFyIHA9MCxoPU9iamVjdC5lbnRyaWVzKHMpO3A8aC5sZW5ndGg7cCsrKXt2YXIgdj1mKGhbcF0sMiksZz12WzBdLG09dlsxXTtzd2l0Y2goZyl7Y2FzZVwicHJvY2Vzc29yXCI6aWYoIWNjKG0pKXJldHVybiExO2JyZWFrO2Nhc2VcInNldHRpbmdzXCI6aWYoIXVjKG0pKXJldHVybiExO2JyZWFrO2RlZmF1bHQ6cmV0dXJuITF9fWJyZWFrO2RlZmF1bHQ6cmV0dXJuITF9fXJldHVybiEwfWZ1bmN0aW9uIGFjKGUsdCxuKXt2YXIgcixpPVtdO2UudmlkZW8mJmUudmlkZW8ucHJvY2Vzc29yJiYocHMobnVsbCE9PShyPW51bGw9PXQ/dm9pZCAwOnQudXNlTGVnYWN5VmlkZW9Qcm9jZXNzb3IpJiZ2b2lkIDAhPT1yJiZyKXx8KGUudmlkZW8uc2V0dGluZ3M/ZGVsZXRlIGUudmlkZW8ucHJvY2Vzc29yOmRlbGV0ZSBlLnZpZGVvLGkucHVzaChcInZpZGVvXCIpKSk7ZS5hdWRpbyYmZS5hdWRpby5wcm9jZXNzb3ImJihocygpfHwoZS5hdWRpby5zZXR0aW5ncz9kZWxldGUgZS5hdWRpby5wcm9jZXNzb3I6ZGVsZXRlIGUuYXVkaW8saS5wdXNoKFwiYXVkaW9cIikpKSxpLmxlbmd0aD4wJiZjb25zb2xlLmVycm9yKFwiSWdub3Jpbmcgc2V0dGluZ3MgZm9yIGJyb3dzZXItIG9yIHBsYXRmb3JtLXVuc3VwcG9ydGVkIGlucHV0IHByb2Nlc3NvcihzKTogXCIuY29uY2F0KGkuam9pbihcIiwgXCIpKSksZS5hdWRpbyYmZS5hdWRpby5zZXR0aW5ncyYmKGUuYXVkaW8uc2V0dGluZ3MuY3VzdG9tVHJhY2s/KG4uYXVkaW9UcmFjaz1lLmF1ZGlvLnNldHRpbmdzLmN1c3RvbVRyYWNrLGUuYXVkaW8uc2V0dGluZ3M9e2N1c3RvbVRyYWNrOlFvfSk6ZGVsZXRlIG4uYXVkaW9UcmFjayksZS52aWRlbyYmZS52aWRlby5zZXR0aW5ncyYmKGUudmlkZW8uc2V0dGluZ3MuY3VzdG9tVHJhY2s/KG4udmlkZW9UcmFjaz1lLnZpZGVvLnNldHRpbmdzLmN1c3RvbVRyYWNrLGUudmlkZW8uc2V0dGluZ3M9e2N1c3RvbVRyYWNrOlFvfSk6ZGVsZXRlIG4udmlkZW9UcmFjayl9ZnVuY3Rpb24gY2MoZSl7aWYoaXMoKSlyZXR1cm4gY29uc29sZS53YXJuKFwiVmlkZW8gcHJvY2Vzc2luZyBpcyBub3QgeWV0IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcIiksITE7dmFyIHQ9W1widHlwZVwiXTtyZXR1cm4hIWUmJihcIm9iamVjdFwiPT09bihlKSYmKE9iamVjdC5rZXlzKGUpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIXQuaW5jbHVkZXMoZSl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiaW52YWxpZCBrZXkgaW5wdXRTZXR0aW5ncyAtPiBhdWRpbyAtPiBwcm9jZXNzb3IgOiBcIi5jb25jYXQodCkpLGRlbGV0ZSBlW3RdfSkpLCEhZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuITE7aWYoIU9iamVjdC52YWx1ZXMoWW8pLmluY2x1ZGVzKGUpKXJldHVybiBjb25zb2xlLmVycm9yKFwiaW5wdXRTZXR0aW5ncyBhdWRpbyBwcm9jZXNzb3IgdHlwZSBpbnZhbGlkXCIpLCExO3JldHVybiEwfShlLnR5cGUpKSl9ZnVuY3Rpb24gbGMoZSl7aWYoaXMoKSlyZXR1cm4gY29uc29sZS53YXJuKFwiVmlkZW8gcHJvY2Vzc2luZyBpcyBub3QgeWV0IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcIiksITE7dmFyIHQ9W1widHlwZVwiLFwiY29uZmlnXCJdO2lmKCFlKXJldHVybiExO2lmKFwib2JqZWN0XCIhPT1uKGUpKXJldHVybiExO2lmKCFmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4hMTtpZighT2JqZWN0LnZhbHVlcyhLbykuaW5jbHVkZXMoZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJpbnB1dFNldHRpbmdzIHZpZGVvIHByb2Nlc3NvciB0eXBlIGludmFsaWRcIiksITE7cmV0dXJuITB9KGUudHlwZSkpcmV0dXJuITE7aWYoZS5jb25maWcpe2lmKFwib2JqZWN0XCIhPT1uKGUuY29uZmlnKSlyZXR1cm4hMTtpZighZnVuY3Rpb24oZSx0KXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZigwPT09bi5sZW5ndGgpcmV0dXJuITA7dmFyIHI9XCJpbnZhbGlkIG9iamVjdCBpbiBpbnB1dFNldHRpbmdzIC0+IHZpZGVvIC0+IHByb2Nlc3NvciAtPiBjb25maWdcIjtzd2l0Y2goZSl7Y2FzZSBLby5CR0JMVVI6cmV0dXJuIG4ubGVuZ3RoPjF8fFwic3RyZW5ndGhcIiE9PW5bMF0/KGNvbnNvbGUuZXJyb3IociksITEpOiEoXCJudW1iZXJcIiE9dHlwZW9mIHQuc3RyZW5ndGh8fHQuc3RyZW5ndGg8PTB8fHQuc3RyZW5ndGg+MXx8aXNOYU4odC5zdHJlbmd0aCkpfHwoY29uc29sZS5lcnJvcihcIlwiLmNvbmNhdChyLFwiOyBleHBlY3RlZDogezAgPCBzdHJlbmd0aCA8PSAxfSwgZ290OiBcIikuY29uY2F0KHQuc3RyZW5ndGgpKSwhMSk7Y2FzZSBLby5CR0lNQUdFOnJldHVybiEodm9pZCAwIT09dC5zb3VyY2UmJiFmdW5jdGlvbihlKXtpZihcImRlZmF1bHRcIj09PWUuc291cmNlKXJldHVybiBlLnR5cGU9XCJkZWZhdWx0XCIsITA7aWYoZS5zb3VyY2UgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4hMDtpZihVKGUuc291cmNlKSlyZXR1cm4gZS50eXBlPVwidXJsXCIsISFmdW5jdGlvbihlKXt2YXIgdD1uZXcgVVJMKGUpLG49dC5wYXRobmFtZTtpZihcImRhdGE6XCI9PT10LnByb3RvY29sKXRyeXt2YXIgcj1uLnN1YnN0cmluZyhuLmluZGV4T2YoXCI6XCIpKzEsbi5pbmRleE9mKFwiO1wiKSkuc3BsaXQoXCIvXCIpWzFdO3JldHVybiBaby5pbmNsdWRlcyhyKX1jYXRjaChlKXtyZXR1cm4gY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBkZWR1Y2UgYmxvYiBjb250ZW50IHR5cGVcIixlKSwhMX12YXIgaT1uLnNwbGl0KFwiLlwiKS5hdCgtMSkudG9Mb3dlckNhc2UoKS50cmltKCk7cmV0dXJuIFpvLmluY2x1ZGVzKGkpfShlLnNvdXJjZSl8fChjb25zb2xlLmVycm9yKFwiaW52YWxpZCBpbWFnZSB0eXBlOyBzdXBwb3J0ZWQgdHlwZXM6IFtcIi5jb25jYXQoWm8uam9pbihcIiwgXCIpLFwiXVwiKSksITEpO3JldHVybiB0PWUuc291cmNlLG49TnVtYmVyKHQpLGlzTmFOKG4pfHwhTnVtYmVyLmlzSW50ZWdlcihuKXx8bjw9MHx8bj4xMD8oY29uc29sZS5lcnJvcihcImludmFsaWQgaW1hZ2Ugc2VsZWN0aW9uOyBtdXN0IGJlIGFuIGludCwgPiAwLCA8PSBcIi5jb25jYXQoMTApKSwhMSk6KGUudHlwZT1cImRhaWx5LXByZXNlbGVjdFwiLCEwKTt2YXIgdCxufSh0KSk7ZGVmYXVsdDpyZXR1cm4hMH19KGUudHlwZSxlLmNvbmZpZykpcmV0dXJuITF9cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIXQuaW5jbHVkZXMoZSl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc29sZS53YXJuKFwiaW52YWxpZCBrZXkgaW5wdXRTZXR0aW5ncyAtPiB2aWRlbyAtPiBwcm9jZXNzb3IgOiBcIi5jb25jYXQodCkpLGRlbGV0ZSBlW3RdfSkpLCEwfWZ1bmN0aW9uIHVjKGUpe3JldHVyblwib2JqZWN0XCI9PT1uKGUpJiYoIWUuY3VzdG9tVHJhY2t8fGUuY3VzdG9tVHJhY2sgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrKX1mdW5jdGlvbiBkYygpe3ZhciBlPU9iamVjdC52YWx1ZXMoS28pLmpvaW4oXCIgfCBcIiksdD1PYmplY3QudmFsdWVzKFlvKS5qb2luKFwiIHwgXCIpO3JldHVyblwiaW5wdXRTZXR0aW5ncyBtdXN0IGJlIG9mIHRoZSBmb3JtOiB7IHZpZGVvPzogeyBwcm9jZXNzb3I/OiB7IHR5cGU6IFsgXCIuY29uY2F0KGUsXCIgXSwgY29uZmlnPzoge30gfSB9LCBhdWRpbz86IHsgcHJvY2Vzc29yOiB7dHlwZTogWyBcIikuY29uY2F0KHQsXCIgXSB9IH0gfVwiKX1mdW5jdGlvbiBwYyhlKXt2YXIgdD1lLmFsbG93QWxsUGFydGljaXBhbnRzS2V5O3JldHVyblwicmVjZWl2ZVNldHRpbmdzIG11c3QgYmUgb2YgdGhlIGZvcm0geyBbPHJlbW90ZSBwYXJ0aWNpcGFudCBpZD4gfCBcIi5jb25jYXQoeWkpLmNvbmNhdCh0PycgfCBcIicuY29uY2F0KFwiKlwiLCdcIicpOlwiXCIsXCJdOiBcIikrJ3sgW3ZpZGVvOiBbeyBsYXllcjogWzxub24tbmVnYXRpdmUgaW50ZWdlcj4gfCBcImluaGVyaXRcIl0gfSB8IFwiaW5oZXJpdFwiXV0sIFtzY3JlZW5WaWRlbzogW3sgbGF5ZXI6IFs8bm9uLW5lZ2F0aXZlIGludGVnZXI+IHwgXCJpbmhlcml0XCJdIH0gfCBcImluaGVyaXRcIl1dIH19fSd9ZnVuY3Rpb24gaGMoKXtyZXR1cm5cImN1c3RvbUludGVncmF0aW9ucyBzaG91bGQgYmUgYW4gb2JqZWN0IG9mIHR5cGUgXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHFhKSxcIi5cIil9ZnVuY3Rpb24gZmMoZSl7aWYoZSYmXCJvYmplY3RcIiE9PW4oZSl8fEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21UcmF5QnV0dG9ucyBzaG91bGQgYmUgYW4gT2JqZWN0IG9mIHRoZSB0eXBlIFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeSgkYSksXCIuXCIpKSwhMTtpZihlKWZvcih2YXIgdD0wLHI9T2JqZWN0LmVudHJpZXMoZSk7dDxyLmxlbmd0aDt0KyspZm9yKHZhciBpPWYoclt0XSwxKVswXSxvPTAscz1PYmplY3QuZW50cmllcyhlW2ldKTtvPHMubGVuZ3RoO28rKyl7dmFyIGE9ZihzW29dLDIpLGM9YVswXSxsPWFbMV0sdT0kYS5pZFtjXTtpZighdSlyZXR1cm4gY29uc29sZS5lcnJvcihcImN1c3RvbVRyYXlCdXR0b24gZG9lcyBub3Qgc3VwcG9ydCBrZXkgXCIuY29uY2F0KGMpKSwhMTtzd2l0Y2goYyl7Y2FzZVwiaWNvblBhdGhcIjpjYXNlXCJpY29uUGF0aERhcmtNb2RlXCI6aWYoIVUobCkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21UcmF5QnV0dG9uIFwiLmNvbmNhdChjLFwiIHNob3VsZCBiZSBhIHVybC5cIikpLCExO2JyZWFrO2Nhc2VcInZpc3VhbFN0YXRlXCI6aWYoIVtcImRlZmF1bHRcIixcInNpZGViYXItb3BlblwiLFwiYWN0aXZlXCJdLmluY2x1ZGVzKGwpKXJldHVybiBjb25zb2xlLmVycm9yKFwiY3VzdG9tVHJheUJ1dHRvbiBcIi5jb25jYXQoYyxcIiBzaG91bGQgYmUgXCIpLmNvbmNhdCh1LFwiLiBHb3Q6IFwiKS5jb25jYXQobCkpLCExO2JyZWFrO2RlZmF1bHQ6aWYobihsKSE9PXUpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21UcmF5QnV0dG9uIFwiLmNvbmNhdChjLFwiIHNob3VsZCBiZSBhIFwiKS5jb25jYXQodSxcIi5cIikpLCExfX1yZXR1cm4hMH1mdW5jdGlvbiB2YyhlKXtpZighZXx8ZSYmXCJvYmplY3RcIiE9PW4oZSl8fEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGNvbnNvbGUuZXJyb3IoaGMoKSksITE7Zm9yKHZhciB0PWZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KGUsXCIgc2hvdWxkIGJlIFwiKS5jb25jYXQocWEuaWRbZV0pfSxyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjdXN0b21JbnRlZ3JhdGlvbiBcIi5jb25jYXQoZSxcIjogXCIpLmNvbmNhdCh0KSl9LGk9MCxvPU9iamVjdC5lbnRyaWVzKGUpO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1mKG9baV0sMSlbMF07aWYoIShcImxhYmVsXCJpbiBlW3NdKSlyZXR1cm4gcihzLFwibGFiZWwgaXMgcmVxdWlyZWRcIiksITE7aWYoIShcImxvY2F0aW9uXCJpbiBlW3NdKSlyZXR1cm4gcihzLFwibG9jYXRpb24gaXMgcmVxdWlyZWRcIiksITE7aWYoIShcInNyY1wiaW4gZVtzXSkmJiEoXCJzcmNkb2NcImluIGVbc10pKXJldHVybiByKHMsXCJzcmMgb3Igc3JjZG9jIGlzIHJlcXVpcmVkXCIpLCExO2Zvcih2YXIgYT0wLGM9T2JqZWN0LmVudHJpZXMoZVtzXSk7YTxjLmxlbmd0aDthKyspe3ZhciBsPWYoY1thXSwyKSx1PWxbMF0sZD1sWzFdO3N3aXRjaCh1KXtjYXNlXCJhbGxvd1wiOmNhc2VcImNzcFwiOmNhc2VcIm5hbWVcIjpjYXNlXCJyZWZlcnJlclBvbGljeVwiOmNhc2VcInNhbmRib3hcIjppZihcInN0cmluZ1wiIT10eXBlb2YgZClyZXR1cm4gcihzLHQodSkpLCExO2JyZWFrO2Nhc2VcImljb25VUkxcIjppZighVShkKSlyZXR1cm4gcihzLFwiXCIuY29uY2F0KHUsXCIgc2hvdWxkIGJlIGEgdXJsXCIpKSwhMTticmVhaztjYXNlXCJzcmNcIjppZihcInNyY2RvY1wiaW4gZVtzXSlyZXR1cm4gcihzLFwiY2Fubm90IGhhdmUgYm90aCBzcmMgYW5kIHNyY2RvY1wiKSwhMTtpZighVShkKSlyZXR1cm4gcihzLCdzcmMgXCInLmNvbmNhdChkLCdcIiBpcyBub3QgYSB2YWxpZCBVUkwnKSksITE7YnJlYWs7Y2FzZVwic3JjZG9jXCI6aWYoXCJzcmNcImluIGVbc10pcmV0dXJuIHIocyxcImNhbm5vdCBoYXZlIGJvdGggc3JjIGFuZCBzcmNkb2NcIiksITE7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGQpcmV0dXJuIHIocyx0KHUpKSwhMTticmVhaztjYXNlXCJsb2NhdGlvblwiOmlmKCFbXCJtYWluXCIsXCJzaWRlYmFyXCJdLmluY2x1ZGVzKGQpKXJldHVybiByKHMsdCh1KSksITE7YnJlYWs7Y2FzZVwiY29udHJvbGxlZEJ5XCI6aWYoXCIqXCIhPT1kJiZcIm93bmVyc1wiIT09ZCYmKCFBcnJheS5pc0FycmF5KGQpfHxkLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBlfSkpKSlyZXR1cm4gcihzLHQodSkpLCExO2JyZWFrO2Nhc2VcInNoYXJlZFwiOmlmKCghQXJyYXkuaXNBcnJheShkKXx8ZC5zb21lKChmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZX0pKSkmJlwib3duZXJzXCIhPT1kJiZcImJvb2xlYW5cIiE9dHlwZW9mIGQpcmV0dXJuIHIocyx0KHUpKSwhMTticmVhaztkZWZhdWx0OmlmKCFxYS5pZFt1XSlyZXR1cm4gY29uc29sZS5lcnJvcihcImN1c3RvbUludGVncmF0aW9uIGRvZXMgbm90IHN1cHBvcnQga2V5IFwiLmNvbmNhdCh1KSksITF9fX1yZXR1cm4hMH1mdW5jdGlvbiBnYyhlLHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuITE7c3dpdGNoKG4odCkpe2Nhc2VcInN0cmluZ1wiOnJldHVybiBuKGUpPT09dDtjYXNlXCJvYmplY3RcIjppZihcIm9iamVjdFwiIT09bihlKSlyZXR1cm4hMTtmb3IodmFyIHIgaW4gZSlpZighZ2MoZVtyXSx0W3JdKSlyZXR1cm4hMTtyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX1mdW5jdGlvbiBtYyhlLHQpe3ZhciBuPWUuc2Vzc2lvbklkLHI9ZS50b0VuZFBvaW50LGk9ZS5jYWxsZXJJZCxvPWUudXNlU2lwUmVmZXI7aWYoIW58fCFyKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0LFwiKCkgcmVxdWlyZXMgYSBzZXNzaW9uSWQgYW5kIHRvRW5kUG9pbnRcIikpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBufHxcInN0cmluZ1wiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtYXRlcjogc2Vzc2lvbklkIGFuZCB0b0VuZFBvaW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmdcIik7aWYobyYmIXIuc3RhcnRzV2l0aChcInNpcDpcIikpdGhyb3cgbmV3IEVycm9yKCdcInRvRW5kUG9pbnRcIiBtdXN0IGJlIGEgXCJzaXBcIiBhZGRyZXNzJyk7aWYoIXIuc3RhcnRzV2l0aChcInNpcDpcIikmJiFyLnN0YXJ0c1dpdGgoXCIrXCIpKXRocm93IG5ldyBFcnJvcihcInRvRW5kUG9pbnQ6IFwiLmNvbmNhdChyLCcgbXVzdCBzdGFydHMgd2l0aCBlaXRoZXIgXCJzaXA6XCIgb3IgXCIrXCInKSk7aWYoaSYmXCJzdHJpbmdcIiE9dHlwZW9mIGkpdGhyb3cgbmV3IEVycm9yKFwiY2FsbGVySWQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZ1wiKTtpZihpJiYhci5zdGFydHNXaXRoKFwiK1wiKSl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsZXJJZCBpcyBvbmx5IHZhbGlkIHdoZW4gdHJhbnNmZXJyaW5nIHRvIGEgUFNUTiBudW1iZXJcIil9ZnVuY3Rpb24geWMoZSl7aWYoXCJvYmplY3RcIiE9PW4oZSkpdGhyb3cgbmV3IEVycm9yKCdSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzOiBtdXN0IGJlIFwib2JqZWN0XCIgdHlwZScpO2lmKGUuc3RhdGUmJiFPYmplY3QudmFsdWVzKFhvKS5pbmNsdWRlcyhlLnN0YXRlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzLnN0YXRlLCB2YWxpZCB2YWx1ZXMgYXJlOiBcIitKU09OLnN0cmluZ2lmeShYbykpO2lmKGUudm9sdW1lKXtpZihcIm51bWJlclwiIT10eXBlb2YgZS52b2x1bWUpdGhyb3cgbmV3IEVycm9yKCdSZW1vdGVNZWRpYVBsYXllclNldHRpbmdzLnZvbHVtZTogbXVzdCBiZSBcIm51bWJlclwiIHR5cGUnKTtpZihlLnZvbHVtZTwwfHxlLnZvbHVtZT4yKXRocm93IG5ldyBFcnJvcihcIlJlbW90ZU1lZGlhUGxheWVyU2V0dGluZ3Mudm9sdW1lOiBtdXN0IGJlIGJldHdlZW4gMC4wIC0gMi4wXCIpfX1mdW5jdGlvbiBiYyhlLHQsbil7cmV0dXJuIShcIm51bWJlclwiIT10eXBlb2YgZXx8ZTx0fHxlPm4pfWZ1bmN0aW9uIF9jKGUsdCl7cmV0dXJuIGUmJiF0JiZkZWxldGUgZS5kYXRhLGV9ZXhwb3J0e3ZpIGFzIERBSUxZX0FDQ0VTU19MRVZFTF9GVUxMLGdpIGFzIERBSUxZX0FDQ0VTU19MRVZFTF9MT0JCWSxtaSBhcyBEQUlMWV9BQ0NFU1NfTEVWRUxfTk9ORSxmaSBhcyBEQUlMWV9BQ0NFU1NfVU5LTk9XTixJaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfQ0FNX0FORF9NSUNfSU5fVVNFLEFpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9DQU1fSU5fVVNFLE5pIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9DT05TVFJBSU5UUyxqaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfTUlDX0lOX1VTRSxEaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfTk9UX0ZPVU5ELHhpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9QRVJNSVNTSU9OUyxMaSBhcyBEQUlMWV9DQU1FUkFfRVJST1JfVU5ERUZfTUVESUFERVZJQ0VTLFJpIGFzIERBSUxZX0NBTUVSQV9FUlJPUl9VTktOT1dOLFppIGFzIERBSUxZX0VWRU5UX0FDQ0VTU19TVEFURV9VUERBVEVELEVvIGFzIERBSUxZX0VWRU5UX0FDVElWRV9TUEVBS0VSX0NIQU5HRSxUbyBhcyBEQUlMWV9FVkVOVF9BQ1RJVkVfU1BFQUtFUl9NT0RFX0NIQU5HRSx5byBhcyBEQUlMWV9FVkVOVF9BUFBfTVNHLHppIGFzIERBSUxZX0VWRU5UX0NBTUVSQV9FUlJPUixBbyBhcyBEQUlMWV9FVkVOVF9DUFVfTE9BRF9DSEFOR0UsSm8gYXMgREFJTFlfRVZFTlRfRVJST1IseG8gYXMgREFJTFlfRVZFTlRfRVhJVF9GVUxMU0NSRUVOLGpvIGFzIERBSUxZX0VWRU5UX0ZBQ0VfQ09VTlRTX1VQREFURUQsSW8gYXMgREFJTFlfRVZFTlRfRlVMTFNDUkVFTixCaSBhcyBEQUlMWV9FVkVOVF9JRlJBTUVfTEFVTkNIX0NPTkZJRyxGaSBhcyBEQUlMWV9FVkVOVF9JRlJBTUVfUkVBRFlfRk9SX0xBVU5DSF9DT05GSUcsVW8gYXMgREFJTFlfRVZFTlRfSU5QVVRfU0VUVElOR1NfVVBEQVRFRCxIaSBhcyBEQUlMWV9FVkVOVF9KT0lORURfTUVFVElORyxXaSBhcyBEQUlMWV9FVkVOVF9KT0lOSU5HX01FRVRJTkcsRm8gYXMgREFJTFlfRVZFTlRfTEFOR19VUERBVEVELEdpIGFzIERBSUxZX0VWRU5UX0xFRlRfTUVFVElORyxSbyBhcyBEQUlMWV9FVkVOVF9MSVZFX1NUUkVBTUlOR19FUlJPUixMbyBhcyBEQUlMWV9FVkVOVF9MSVZFX1NUUkVBTUlOR19TVEFSVEVELE5vIGFzIERBSUxZX0VWRU5UX0xJVkVfU1RSRUFNSU5HX1NUT1BQRUQsRG8gYXMgREFJTFlfRVZFTlRfTElWRV9TVFJFQU1JTkdfVVBEQVRFRCwkaSBhcyBEQUlMWV9FVkVOVF9MT0FERUQsVmkgYXMgREFJTFlfRVZFTlRfTE9BRElORyxKaSBhcyBEQUlMWV9FVkVOVF9MT0FEX0FUVEVNUFRfRkFJTEVELENvIGFzIERBSUxZX0VWRU5UX0xPQ0FMX1NDUkVFTl9TSEFSRV9DQU5DRUxFRCxrbyBhcyBEQUlMWV9FVkVOVF9MT0NBTF9TQ1JFRU5fU0hBUkVfU1RBUlRFRCxNbyBhcyBEQUlMWV9FVkVOVF9MT0NBTF9TQ1JFRU5fU0hBUkVfU1RPUFBFRCxubyBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fREFUQV9FUlJPUix0byBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fU1RBVEVfVVBEQVRFRCxlbyBhcyBEQUlMWV9FVkVOVF9NRUVUSU5HX1NFU1NJT05fU1VNTUFSWV9VUERBVEVELFBvIGFzIERBSUxZX0VWRU5UX05FVFdPUktfQ09OTkVDVElPTixPbyBhcyBEQUlMWV9FVkVOVF9ORVRXT1JLX1FVQUxJVFlfQ0hBTkdFLFZvIGFzIERBSUxZX0VWRU5UX05PTkZBVEFMX0VSUk9SLFhpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX0NPVU5UU19VUERBVEVELFFpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX0pPSU5FRCxZaSBhcyBEQUlMWV9FVkVOVF9QQVJUSUNJUEFOVF9MRUZULEtpIGFzIERBSUxZX0VWRU5UX1BBUlRJQ0lQQU5UX1VQREFURUQsQm8gYXMgREFJTFlfRVZFTlRfUkVDRUlWRV9TRVRUSU5HU19VUERBVEVELG1vIGFzIERBSUxZX0VWRU5UX1JFQ09SRElOR19EQVRBLHZvIGFzIERBSUxZX0VWRU5UX1JFQ09SRElOR19FUlJPUixwbyBhcyBEQUlMWV9FVkVOVF9SRUNPUkRJTkdfU1RBUlRFRCxmbyBhcyBEQUlMWV9FVkVOVF9SRUNPUkRJTkdfU1RBVFMsaG8gYXMgREFJTFlfRVZFTlRfUkVDT1JESU5HX1NUT1BQRUQsZ28gYXMgREFJTFlfRVZFTlRfUkVDT1JESU5HX1VQTE9BRF9DT01QTEVURUQsX28gYXMgREFJTFlfRVZFTlRfUkVNT1RFX01FRElBX1BMQVlFUl9TVEFSVEVELFNvIGFzIERBSUxZX0VWRU5UX1JFTU9URV9NRURJQV9QTEFZRVJfU1RPUFBFRCx3byBhcyBEQUlMWV9FVkVOVF9SRU1PVEVfTUVESUFfUExBWUVSX1VQREFURUQscWkgYXMgREFJTFlfRVZFTlRfU1RBUlRFRF9DQU1FUkEsVWkgYXMgREFJTFlfRVZFTlRfVEhFTUVfVVBEQVRFRCxzbyBhcyBEQUlMWV9FVkVOVF9UUkFDS19TVEFSVEVELGFvIGFzIERBSUxZX0VWRU5UX1RSQUNLX1NUT1BQRUQsdW8gYXMgREFJTFlfRVZFTlRfVFJBTlNDUklQVElPTl9FUlJPUixibyBhcyBEQUlMWV9FVkVOVF9UUkFOU0NSSVBUSU9OX01TRyxjbyBhcyBEQUlMWV9FVkVOVF9UUkFOU0NSSVBUSU9OX1NUQVJURUQsbG8gYXMgREFJTFlfRVZFTlRfVFJBTlNDUklQVElPTl9TVE9QUEVELHJvIGFzIERBSUxZX0VWRU5UX1dBSVRJTkdfUEFSVElDSVBBTlRfQURERUQsb28gYXMgREFJTFlfRVZFTlRfV0FJVElOR19QQVJUSUNJUEFOVF9SRU1PVkVELGlvIGFzIERBSUxZX0VWRU5UX1dBSVRJTkdfUEFSVElDSVBBTlRfVVBEQVRFRCxQaSBhcyBEQUlMWV9GQVRBTF9FUlJPUl9DT05ORUNUSU9OLF9pIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VKRUNURUQsVGkgYXMgREFJTFlfRkFUQUxfRVJST1JfRU9MLGtpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VYUF9ST09NLE1pIGFzIERBSUxZX0ZBVEFMX0VSUk9SX0VYUF9UT0tFTixFaSBhcyBEQUlMWV9GQVRBTF9FUlJPUl9NRUVUSU5HX0ZVTEwsd2kgYXMgREFJTFlfRkFUQUxfRVJST1JfTkJGX1JPT00sU2kgYXMgREFJTFlfRkFUQUxfRVJST1JfTkJGX1RPS0VOLE9pIGFzIERBSUxZX0ZBVEFMX0VSUk9SX05PVF9BTExPV0VELENpIGFzIERBSUxZX0ZBVEFMX0VSUk9SX05PX1JPT00sYmkgYXMgREFJTFlfUkVDRUlWRV9TRVRUSU5HU19BTExfUEFSVElDSVBBTlRTX0tFWSx5aSBhcyBEQUlMWV9SRUNFSVZFX1NFVFRJTkdTX0JBU0VfS0VZLGFpIGFzIERBSUxZX1NUQVRFX0VSUk9SLG9pIGFzIERBSUxZX1NUQVRFX0pPSU5FRCxpaSBhcyBEQUlMWV9TVEFURV9KT0lOSU5HLHNpIGFzIERBSUxZX1NUQVRFX0xFRlQsdGkgYXMgREFJTFlfU1RBVEVfTkVXLGNpIGFzIERBSUxZX1RSQUNLX1NUQVRFX0JMT0NLRUQscGkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfSU5URVJSVVBURUQsZGkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfTE9BRElORyxsaSBhcyBEQUlMWV9UUkFDS19TVEFURV9PRkYsaGkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfUExBWUFCTEUsdWkgYXMgREFJTFlfVFJBQ0tfU1RBVEVfU0VOREFCTEUsSGEgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@daily-co/daily-js/dist/daily-esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@daily-co/daily-react/dist/index.esm.js":
/*!**************************************************************!*\
  !*** ./node_modules/@daily-co/daily-react/dist/index.esm.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DailyAudio: () => (/* binding */ DailyAudio),\n/* harmony export */   DailyAudioTrack: () => (/* binding */ DailyAudioTrack),\n/* harmony export */   DailyProvider: () => (/* binding */ DailyProvider),\n/* harmony export */   DailyVideo: () => (/* binding */ DailyVideo),\n/* harmony export */   useActiveParticipant: () => (/* binding */ useActiveParticipant),\n/* harmony export */   useActiveSpeakerId: () => (/* binding */ useActiveSpeakerId),\n/* harmony export */   useAppMessage: () => (/* binding */ useAppMessage),\n/* harmony export */   useAudioLevel: () => (/* binding */ useAudioLevel),\n/* harmony export */   useAudioLevelObserver: () => (/* binding */ useAudioLevelObserver),\n/* harmony export */   useAudioTrack: () => (/* binding */ useAudioTrack),\n/* harmony export */   useCPULoad: () => (/* binding */ useCPULoad),\n/* harmony export */   useCallFrame: () => (/* binding */ useCallFrame),\n/* harmony export */   useCallObject: () => (/* binding */ useCallObject),\n/* harmony export */   useDaily: () => (/* binding */ useDaily),\n/* harmony export */   useDailyError: () => (/* binding */ useDailyError),\n/* harmony export */   useDailyEvent: () => (/* binding */ useDailyEvent),\n/* harmony export */   useDevices: () => (/* binding */ useDevices),\n/* harmony export */   useInputSettings: () => (/* binding */ useInputSettings),\n/* harmony export */   useLiveStreaming: () => (/* binding */ useLiveStreaming),\n/* harmony export */   useLocalParticipant: () => (/* binding */ useLocalParticipant),\n/* harmony export */   useLocalSessionId: () => (/* binding */ useLocalSessionId),\n/* harmony export */   useMediaTrack: () => (/* binding */ useMediaTrack),\n/* harmony export */   useMeetingSessionState: () => (/* binding */ useMeetingSessionState),\n/* harmony export */   useMeetingState: () => (/* binding */ useMeetingState),\n/* harmony export */   useNetwork: () => (/* binding */ useNetwork),\n/* harmony export */   useParticipant: () => (/* binding */ useParticipant),\n/* harmony export */   useParticipantCounts: () => (/* binding */ useParticipantCounts),\n/* harmony export */   useParticipantIds: () => (/* binding */ useParticipantIds),\n/* harmony export */   useParticipantProperty: () => (/* binding */ useParticipantProperty),\n/* harmony export */   usePermissions: () => (/* binding */ usePermissions),\n/* harmony export */   useReceiveSettings: () => (/* binding */ useReceiveSettings),\n/* harmony export */   useRecording: () => (/* binding */ useRecording),\n/* harmony export */   useRoom: () => (/* binding */ useRoom),\n/* harmony export */   useRoomExp: () => (/* binding */ useRoomExp),\n/* harmony export */   useScreenAudioTrack: () => (/* binding */ useScreenAudioTrack),\n/* harmony export */   useScreenShare: () => (/* binding */ useScreenShare),\n/* harmony export */   useScreenVideoTrack: () => (/* binding */ useScreenVideoTrack),\n/* harmony export */   useSendSettings: () => (/* binding */ useSendSettings),\n/* harmony export */   useThrottledDailyEvent: () => (/* binding */ useThrottledDailyEvent),\n/* harmony export */   useTranscription: () => (/* binding */ useTranscription),\n/* harmony export */   useVideoTrack: () => (/* binding */ useVideoTrack),\n/* harmony export */   useWaitingParticipants: () => (/* binding */ useWaitingParticipants)\n/* harmony export */ });\n/* harmony import */ var jotai_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jotai/utils */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla/utils.mjs\");\n/* harmony import */ var jotai_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jotai/utils */ \"(app-pages-browser)/./node_modules/jotai/esm/react/utils.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jotai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs\");\n/* harmony import */ var jotai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jotai */ \"(app-pages-browser)/./node_modules/jotai/esm/react.mjs\");\n/* harmony import */ var _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @daily-co/daily-js */ \"(app-pages-browser)/./node_modules/@daily-co/daily-js/dist/daily-esm.js\");\n\n\n\n\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return _assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function sent() {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nvar DailyContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null);\n\n/**\n * Returns callObject instance passed to or created by closest <DailyProvider>.\n */\nvar useDaily = function useDaily() {\n  var daily = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyContext);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(daily);\n  return daily;\n};\n\nvar DailyEventContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  on: function on() {},\n  off: function off() {}\n});\n\nvar priorityCounter = -1;\nvar getPriorityUnique = function getPriorityUnique() {\n  return priorityCounter--;\n};\nvar uniqueCounter = 1;\nvar getUnique = function getUnique() {\n  return uniqueCounter++;\n};\n/**\n * Sets up a daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\n *\n * Warning: callback has to be a memoized reference (e.g. via [useCallback](https://reactjs.org/docs/hooks-reference.html#usecallback)).\n * Otherwise a console error might be thrown indicating a re-render loop issue.\n *\n * @param ev The DailyEvent to register.\n * @param callback A memoized callback reference to run when the event is emitted.\n */\nvar useDailyEvent = function useDailyEvent(ev, callback, INTERNAL_priority) {\n  if (INTERNAL_priority === void 0) {\n    INTERNAL_priority = false;\n  }\n  var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyEventContext),\n    off = _a.off,\n    on = _a.on;\n  var _b = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false), 2),\n    isBlocked = _b[0],\n    setIsBlocked = _b[1];\n  var reassignCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  var eventId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return INTERNAL_priority ? getPriorityUnique() : getUnique();\n  }, [INTERNAL_priority]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ev || isBlocked) return;\n    /**\n     * Check if callback has been reassigned often enough without hitting the 50ms timeout.\n     */\n    if (reassignCount.current > 100000) {\n      console.error(\"useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.\\n        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.\\n        Passed callback for '\".concat(ev, \"' event is NOT registered.\"), callback);\n      setIsBlocked(true);\n      return;\n    }\n    reassignCount.current++;\n    var timeout = setTimeout(function () {\n      reassignCount.current = 0;\n    }, 50);\n    on(ev, callback, eventId);\n    return function () {\n      clearTimeout(timeout);\n      off(ev, eventId);\n    };\n  }, [callback, ev, eventId, isBlocked, off, on]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)({\n    event: ev,\n    eventId: eventId,\n    isBlocked: isBlocked,\n    callback: callback\n  });\n};\n\n/**\n * Compares two variables for deep equality.\n * Gracefully handles equality checks on MediaStreamTracks by comparing their ids.\n */\nfunction customDeepEqual(a, b) {\n  var e_1, _a;\n  if (a === b) return true;\n  // Handle arrays separately\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) return false;\n    for (var i = 0; i < a.length; i++) {\n      if (!customDeepEqual(a[i], b[i])) return false;\n    }\n    return true;\n  }\n  // Handle specific cases like MediaStream, MediaStreamTrack, Date, etc.\n  if (MediaStream) {\n    if (a instanceof MediaStream && b instanceof MediaStream) {\n      return a.id === b.id && a.active === b.active && a.getTracks().length === b.getTracks().length && a.getTracks().every(function (track, idx) {\n        return customDeepEqual(track, b.getTracks()[idx]);\n      });\n    }\n  }\n  // Handle special case for MediaStreamTrack\n  if (MediaStreamTrack) {\n    if (a instanceof MediaStreamTrack && b instanceof MediaStreamTrack) {\n      return a.id === b.id && a.kind === b.kind && a.readyState === b.readyState;\n    }\n  }\n  // Handle special case for Date\n  if (a instanceof Date && b instanceof Date) {\n    return a.getTime() === b.getTime();\n  }\n  // Handle special case for RegExp\n  if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source === b.source && a.flags === b.flags;\n  }\n  // Handle Set comparisons\n  if (a instanceof Set && b instanceof Set) {\n    if (a.size !== b.size) return false;\n    var arrA = Array.from(a).sort();\n    var arrB_1 = Array.from(b).sort();\n    return arrA.every(function (val, idx) {\n      return customDeepEqual(val, arrB_1[idx]);\n    });\n  }\n  // Handle Map comparisons\n  if (a instanceof Map && b instanceof Map) {\n    if (a.size !== b.size) return false;\n    try {\n      for (var _b = __values(a.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = __read(_c.value, 2),\n          key = _d[0],\n          value = _d[1];\n        if (!b.has(key) || !customDeepEqual(value, b.get(key))) return false;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return true;\n  }\n  // Primitive types and null checks\n  if (_typeof(a) !== 'object' || a === null || _typeof(b) !== 'object' || b === null) {\n    return false;\n  }\n  // Generic object handling\n  var keysA = Object.keys(a);\n  var keysB = Object.keys(b);\n  if (keysA.length !== keysB.length) return false;\n  for (var i = 0; i < keysA.length; i++) {\n    var key = keysA[i];\n    if (!Object.prototype.hasOwnProperty.call(b, key) || !customDeepEqual(a[key], b[key])) {\n      return false;\n    }\n  }\n  // All keys and values match -> the objects are deeply equal\n  return true;\n}\n/**\n * Comparison function optimized for comparing arrays.\n */\nfunction arraysDeepEqual(a, b) {\n  // Check for reference equality\n  if (a === b) return true;\n  // Check if both arrays are of the same length\n  if (a.length !== b.length) return false;\n  // Compare each element in the array\n  for (var i = 0; i < a.length; i++) {\n    var valueA = a[i];\n    var valueB = b[i];\n    var isComplexTypeA = valueA !== null && _typeof(valueA) === 'object';\n    var isComplexTypeB = valueB !== null && _typeof(valueB) === 'object';\n    // Use customDeepEqual only if either value is a complex type\n    if (isComplexTypeA || isComplexTypeB) {\n      if (!customDeepEqual(valueA, valueB)) return false;\n    } else if (valueA !== valueB) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction jotaiDebugLabel(label) {\n  return 'daily-react-' + label;\n}\nfunction equalAtomFamily(options) {\n  var atomCache = new Map();\n  var priorValues = new Map();\n  return function (param) {\n    if (!atomCache.has(param)) {\n      var baseAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(function (get) {\n        var derivedValue = options.get(param)(get);\n        var prior = priorValues.get(param);\n        if (prior != null && options.equals(derivedValue, prior)) {\n          return prior;\n        }\n        priorValues.set(param, derivedValue);\n        return derivedValue;\n      });\n      atomCache.set(param, baseAtom);\n    }\n    return atomCache.get(param);\n  };\n}\n\nvar DELIM = '::';\nvar PATHS_DELIM = ';';\nvar getPropertyParam = function getPropertyParam(id, property) {\n  return id + DELIM + property;\n};\nvar getPropertiesParam = function getPropertiesParam(id, properties) {\n  return id + DELIM + properties.join(PATHS_DELIM);\n};\nvar getParticipantPropertyAtom = function getParticipantPropertyAtom(id, property) {\n  return participantPropertyState(getPropertyParam(id, property));\n};\n/**\n * Stores all property paths for a given participant.\n */\nvar participantPropertyPathsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_3__.atomFamily)(function (id) {\n  var participantPropertyPathsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\n  participantPropertyPathsAtom.debugLabel = jotaiDebugLabel(\"participant-property-paths-\".concat(id));\n  return participantPropertyPathsAtom;\n});\n/**\n * Stores resolved values for each participant and property path.\n */\nvar participantPropertyState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_3__.atomFamily)(function (param) {\n  var participantPropertyAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\n  participantPropertyAtom.debugLabel = jotaiDebugLabel(\"participant-property-\".concat(param));\n  return participantPropertyAtom;\n});\n/**\n * Stores resolved values for each participant and property path.\n */\nvar participantPropertiesState = equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get(param) {\n    return function (get) {\n      var _a = __read(param.split(DELIM), 2),\n        id = _a[0],\n        paths = _a[1];\n      var properties = paths.split(PATHS_DELIM);\n      return properties.map(function (path) {\n        return get(getParticipantPropertyAtom(id, path));\n      });\n    };\n  }\n});\n/**\n * Returns a participant's property that you subscribe to.\n * @param participantId The participant's session_id.\n * @param propertyPaths the array of participant property that you want to subscribe to.\n */\nvar useParticipantProperty = function useParticipantProperty(participantId, propertyPaths) {\n  var _a;\n  var properties = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(Array.isArray(propertyPaths) ? participantPropertiesState(getPropertiesParam(participantId, propertyPaths)) : participantPropertyState(getPropertyParam(participantId, propertyPaths)));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(Array.isArray(propertyPaths) ? propertyPaths.reduce(function (o, path, i) {\n    o[path] = properties[i];\n    return o;\n  }, {}) : (_a = {}, _a[propertyPaths] = properties, _a));\n  return properties;\n};\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar lodash_throttle;\nvar hasRequiredLodash_throttle;\nfunction requireLodash_throttle() {\n  if (hasRequiredLodash_throttle) return lodash_throttle;\n  hasRequiredLodash_throttle = 1;\n  /** Used as the `TypeError` message for \"Functions\" methods. */\n  var FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used as references for various `Number` constants. */\n  var NAN = 0 / 0;\n\n  /** `Object#toString` result references. */\n  var symbolTag = '[object Symbol]';\n\n  /** Used to match leading and trailing whitespace. */\n  var reTrim = /^\\s+|\\s+$/g;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = _typeof(commonjsGlobal) == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n  /** Detect free variable `self`. */\n  var freeSelf = (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Used for built-in method references. */\n  var objectProto = Object.prototype;\n\n  /**\n   * Used to resolve the\n   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n  var objectToString = objectProto.toString;\n\n  /* Built-in method references for those with the same name as other `lodash` methods. */\n  var nativeMax = Math.max,\n    nativeMin = Math.min;\n\n  /**\n   * Gets the timestamp of the number of milliseconds that have elapsed since\n   * the Unix epoch (1 January 1970 00:00:00 UTC).\n   *\n   * @static\n   * @memberOf _\n   * @since 2.4.0\n   * @category Date\n   * @returns {number} Returns the timestamp.\n   * @example\n   *\n   * _.defer(function(stamp) {\n   *   console.log(_.now() - stamp);\n   * }, _.now());\n   * // => Logs the number of milliseconds it took for the deferred invocation.\n   */\n  var now = function now() {\n    return root.Date.now();\n  };\n\n  /**\n   * Creates a debounced function that delays invoking `func` until after `wait`\n   * milliseconds have elapsed since the last time the debounced function was\n   * invoked. The debounced function comes with a `cancel` method to cancel\n   * delayed `func` invocations and a `flush` method to immediately invoke them.\n   * Provide `options` to indicate whether `func` should be invoked on the\n   * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n   * with the last arguments provided to the debounced function. Subsequent\n   * calls to the debounced function return the result of the last `func`\n   * invocation.\n   *\n   * **Note:** If `leading` and `trailing` options are `true`, `func` is\n   * invoked on the trailing edge of the timeout only if the debounced function\n   * is invoked more than once during the `wait` timeout.\n   *\n   * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n   * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n   *\n   * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n   * for details over the differences between `_.debounce` and `_.throttle`.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Function\n   * @param {Function} func The function to debounce.\n   * @param {number} [wait=0] The number of milliseconds to delay.\n   * @param {Object} [options={}] The options object.\n   * @param {boolean} [options.leading=false]\n   *  Specify invoking on the leading edge of the timeout.\n   * @param {number} [options.maxWait]\n   *  The maximum time `func` is allowed to be delayed before it's invoked.\n   * @param {boolean} [options.trailing=true]\n   *  Specify invoking on the trailing edge of the timeout.\n   * @returns {Function} Returns the new debounced function.\n   * @example\n   *\n   * // Avoid costly calculations while the window size is in flux.\n   * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n   *\n   * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n   * jQuery(element).on('click', _.debounce(sendMail, 300, {\n   *   'leading': true,\n   *   'trailing': false\n   * }));\n   *\n   * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n   * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n   * var source = new EventSource('/stream');\n   * jQuery(source).on('message', debounced);\n   *\n   * // Cancel the trailing debounced invocation.\n   * jQuery(window).on('popstate', debounced.cancel);\n   */\n  function debounce(func, wait, options) {\n    var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n    if (typeof func != 'function') {\n      throw new TypeError(FUNC_ERROR_TEXT);\n    }\n    wait = toNumber(wait) || 0;\n    if (isObject(options)) {\n      leading = !!options.leading;\n      maxing = 'maxWait' in options;\n      maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n      trailing = 'trailing' in options ? !!options.trailing : trailing;\n    }\n    function invokeFunc(time) {\n      var args = lastArgs,\n        thisArg = lastThis;\n      lastArgs = lastThis = undefined;\n      lastInvokeTime = time;\n      result = func.apply(thisArg, args);\n      return result;\n    }\n    function leadingEdge(time) {\n      // Reset any `maxWait` timer.\n      lastInvokeTime = time;\n      // Start the timer for the trailing edge.\n      timerId = setTimeout(timerExpired, wait);\n      // Invoke the leading edge.\n      return leading ? invokeFunc(time) : result;\n    }\n    function remainingWait(time) {\n      var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n      return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n    }\n    function shouldInvoke(time) {\n      var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n      // Either this is the first call, activity has stopped and we're at the\n      // trailing edge, the system time has gone backwards and we're treating\n      // it as the trailing edge, or we've hit the `maxWait` limit.\n      return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n    }\n    function timerExpired() {\n      var time = now();\n      if (shouldInvoke(time)) {\n        return trailingEdge(time);\n      }\n      // Restart the timer.\n      timerId = setTimeout(timerExpired, remainingWait(time));\n    }\n    function trailingEdge(time) {\n      timerId = undefined;\n\n      // Only invoke if we have `lastArgs` which means `func` has been\n      // debounced at least once.\n      if (trailing && lastArgs) {\n        return invokeFunc(time);\n      }\n      lastArgs = lastThis = undefined;\n      return result;\n    }\n    function cancel() {\n      if (timerId !== undefined) {\n        clearTimeout(timerId);\n      }\n      lastInvokeTime = 0;\n      lastArgs = lastCallTime = lastThis = timerId = undefined;\n    }\n    function flush() {\n      return timerId === undefined ? result : trailingEdge(now());\n    }\n    function debounced() {\n      var time = now(),\n        isInvoking = shouldInvoke(time);\n      lastArgs = arguments;\n      lastThis = this;\n      lastCallTime = time;\n      if (isInvoking) {\n        if (timerId === undefined) {\n          return leadingEdge(lastCallTime);\n        }\n        if (maxing) {\n          // Handle invocations in a tight loop.\n          timerId = setTimeout(timerExpired, wait);\n          return invokeFunc(lastCallTime);\n        }\n      }\n      if (timerId === undefined) {\n        timerId = setTimeout(timerExpired, wait);\n      }\n      return result;\n    }\n    debounced.cancel = cancel;\n    debounced.flush = flush;\n    return debounced;\n  }\n\n  /**\n   * Creates a throttled function that only invokes `func` at most once per\n   * every `wait` milliseconds. The throttled function comes with a `cancel`\n   * method to cancel delayed `func` invocations and a `flush` method to\n   * immediately invoke them. Provide `options` to indicate whether `func`\n   * should be invoked on the leading and/or trailing edge of the `wait`\n   * timeout. The `func` is invoked with the last arguments provided to the\n   * throttled function. Subsequent calls to the throttled function return the\n   * result of the last `func` invocation.\n   *\n   * **Note:** If `leading` and `trailing` options are `true`, `func` is\n   * invoked on the trailing edge of the timeout only if the throttled function\n   * is invoked more than once during the `wait` timeout.\n   *\n   * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n   * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n   *\n   * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n   * for details over the differences between `_.throttle` and `_.debounce`.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Function\n   * @param {Function} func The function to throttle.\n   * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n   * @param {Object} [options={}] The options object.\n   * @param {boolean} [options.leading=true]\n   *  Specify invoking on the leading edge of the timeout.\n   * @param {boolean} [options.trailing=true]\n   *  Specify invoking on the trailing edge of the timeout.\n   * @returns {Function} Returns the new throttled function.\n   * @example\n   *\n   * // Avoid excessively updating the position while scrolling.\n   * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n   *\n   * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n   * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n   * jQuery(element).on('click', throttled);\n   *\n   * // Cancel the trailing throttled invocation.\n   * jQuery(window).on('popstate', throttled.cancel);\n   */\n  function throttle(func, wait, options) {\n    var leading = true,\n      trailing = true;\n    if (typeof func != 'function') {\n      throw new TypeError(FUNC_ERROR_TEXT);\n    }\n    if (isObject(options)) {\n      leading = 'leading' in options ? !!options.leading : leading;\n      trailing = 'trailing' in options ? !!options.trailing : trailing;\n    }\n    return debounce(func, wait, {\n      'leading': leading,\n      'maxWait': wait,\n      'trailing': trailing\n    });\n  }\n\n  /**\n   * Checks if `value` is the\n   * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n   * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n   * @example\n   *\n   * _.isObject({});\n   * // => true\n   *\n   * _.isObject([1, 2, 3]);\n   * // => true\n   *\n   * _.isObject(_.noop);\n   * // => true\n   *\n   * _.isObject(null);\n   * // => false\n   */\n  function isObject(value) {\n    var type = _typeof(value);\n    return !!value && (type == 'object' || type == 'function');\n  }\n\n  /**\n   * Checks if `value` is object-like. A value is object-like if it's not `null`\n   * and has a `typeof` result of \"object\".\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   * @example\n   *\n   * _.isObjectLike({});\n   * // => true\n   *\n   * _.isObjectLike([1, 2, 3]);\n   * // => true\n   *\n   * _.isObjectLike(_.noop);\n   * // => false\n   *\n   * _.isObjectLike(null);\n   * // => false\n   */\n  function isObjectLike(value) {\n    return !!value && _typeof(value) == 'object';\n  }\n\n  /**\n   * Checks if `value` is classified as a `Symbol` primitive or object.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n   * @example\n   *\n   * _.isSymbol(Symbol.iterator);\n   * // => true\n   *\n   * _.isSymbol('abc');\n   * // => false\n   */\n  function isSymbol(value) {\n    return _typeof(value) == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n  }\n\n  /**\n   * Converts `value` to a number.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to process.\n   * @returns {number} Returns the number.\n   * @example\n   *\n   * _.toNumber(3.2);\n   * // => 3.2\n   *\n   * _.toNumber(Number.MIN_VALUE);\n   * // => 5e-324\n   *\n   * _.toNumber(Infinity);\n   * // => Infinity\n   *\n   * _.toNumber('3.2');\n   * // => 3.2\n   */\n  function toNumber(value) {\n    if (typeof value == 'number') {\n      return value;\n    }\n    if (isSymbol(value)) {\n      return NAN;\n    }\n    if (isObject(value)) {\n      var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n      value = isObject(other) ? other + '' : other;\n    }\n    if (typeof value != 'string') {\n      return value === 0 ? value : +value;\n    }\n    value = value.replace(reTrim, '');\n    var isBinary = reIsBinary.test(value);\n    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n  }\n  lodash_throttle = throttle;\n  return lodash_throttle;\n}\n\nvar lodash_throttleExports = requireLodash_throttle();\nvar throttle = /*@__PURE__*/getDefaultExportFromCjs(lodash_throttleExports);\n\n/**\n * Sets up a throttled daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\n *\n * In comparison to useDailyEvent the callback passed here will be called with an array of event objects.\n *\n * You can pass an array of DailyEvents to register multiple daily events with a single callback handler.\n * The events returned in the callback parameter are guaranteed to be in the same order as they were emitted.\n *\n * @param ev The DailyEvent to register or an array of DailyEvent to register.\n * @param callback A memoized callback reference to run when throttled events are emitted.\n * @param throttleTimeout The minimum waiting time until the callback is called again. Default: 500\n */\nvar useThrottledDailyEvent = function useThrottledDailyEvent(ev, callback, throttleTimeout, INTERNAL_priority) {\n  if (throttleTimeout === void 0) {\n    throttleTimeout = 500;\n  }\n  if (INTERNAL_priority === void 0) {\n    INTERNAL_priority = false;\n  }\n  var _a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyEventContext),\n    off = _a.off,\n    on = _a.on;\n  var eventId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    var _a;\n    if (Array.isArray(ev)) return ev.reduce(function (r, e) {\n      r[e] = INTERNAL_priority ? getPriorityUnique() : getUnique();\n      return r;\n    }, {});\n    return _a = {}, _a[ev] = INTERNAL_priority ? getPriorityUnique() : getUnique(), _a;\n  }, [ev, INTERNAL_priority]);\n  var throttledEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  useDailyEvent('call-instance-destroyed', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    throttledEvents.current.length = 0;\n  }, []));\n  var emitEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return throttle(function () {\n      if (throttledEvents.current.length === 0) return;\n      callback(throttledEvents.current);\n      throttledEvents.current.length = 0;\n    }, throttleTimeout, {\n      trailing: true\n    });\n  }, [callback, throttleTimeout]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ev) return;\n    var addEvent = function addEvent(ev) {\n      throttledEvents.current.push(ev);\n      emitEvents();\n    };\n    if (Array.isArray(ev)) {\n      ev.forEach(function (e) {\n        return on(e, addEvent, eventId[e]);\n      });\n    } else {\n      on(ev, addEvent, eventId[ev]);\n    }\n    return function () {\n      if (Array.isArray(ev)) {\n        ev.forEach(function (e) {\n          return off(e, eventId[e]);\n        });\n      } else {\n        off(ev, eventId[ev]);\n      }\n    };\n  }, [emitEvents, ev, eventId, off, on]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)({\n    event: ev,\n    eventId: eventId\n  });\n};\n\n/**\n * Returns all property paths for an object.\n */\nvar _getPaths = function getPaths(o, currentPath, visited) {\n  if (currentPath === void 0) {\n    currentPath = '';\n  }\n  if (visited === void 0) {\n    visited = new Set();\n  }\n  if (_typeof(o) !== 'object' || o === null || visited.has(o)) {\n    return [currentPath];\n  }\n  visited.add(o);\n  var paths = [];\n  for (var key in o) {\n    if (Object.prototype.hasOwnProperty.call(o, key)) {\n      var newPath = currentPath ? \"\".concat(currentPath, \".\").concat(key) : key;\n      paths.push.apply(paths, __spreadArray([newPath], __read(_getPaths(o[key], newPath, visited)), false));\n    }\n  }\n  visited[\"delete\"](o);\n  return paths;\n};\n/**\n * Returns all property paths for a given participant object.\n */\nvar getParticipantPaths = function getParticipantPaths(p) {\n  return _getPaths(p);\n};\n\nvar resolvePath = function resolvePath(participant, path) {\n  return String(path).split('.').filter(function (key) {\n    return key.length;\n  }).reduce(function (p, key) {\n    return p && p[key];\n  }, participant);\n};\nvar resolveParticipantPaths = function resolveParticipantPaths(participant, paths) {\n  return paths.map(function (path) {\n    return resolvePath(participant, path);\n  });\n};\n\n/**\n * Stores the most recent peerId as reported from [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n */\nvar activeIdState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nactiveIdState.debugLabel = jotaiDebugLabel('active-id');\nvar localIdState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('');\nlocalIdState.debugLabel = jotaiDebugLabel('local-id');\nvar localJoinDateState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nlocalJoinDateState.debugLabel = jotaiDebugLabel('local-join-date');\nvar participantIdsState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\nparticipantIdsState.debugLabel = jotaiDebugLabel('participant-ids');\nvar participantState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_3__.atomFamily)(function (id) {\n  var participantAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\n  participantAtom.debugLabel = jotaiDebugLabel(\"participant-\".concat(id));\n  return participantAtom;\n});\nvar waitingParticipantsState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\nwaitingParticipantsState.debugLabel = jotaiDebugLabel('waiting-participants');\nvar waitingParticipantState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_3__.atomFamily)(function (id) {\n  var waitingParticipantAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n    awaitingAccess: {\n      level: 'full'\n    },\n    id: id,\n    name: ''\n  });\n  waitingParticipantAtom.debugLabel = jotaiDebugLabel(\"waiting-participant-\".concat(id));\n  return waitingParticipantAtom;\n});\nvar allWaitingParticipantsSelector = equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get() {\n    return function (get) {\n      var ids = get(waitingParticipantsState);\n      return ids.map(function (id) {\n        return get(waitingParticipantState(id));\n      });\n    };\n  }\n});\nvar DailyParticipants = function DailyParticipants(_a) {\n  var children = _a.children;\n  var daily = useDaily();\n  var _b = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false), 2),\n    initialized = _b[0],\n    setInitialized = _b[1];\n  var initParticipants = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, participants) {\n    set(localIdState, participants.local.session_id);\n    var participantsArray = Object.values(participants);\n    var ids = participantsArray.map(function (p) {\n      return p.session_id;\n    });\n    set(participantIdsState, ids);\n    participantsArray.forEach(function (p) {\n      set(participantState(p.session_id), p);\n      var paths = getParticipantPaths(p);\n      set(participantPropertyPathsState(p.session_id), paths);\n      paths.forEach(function (property) {\n        var _a = __read(resolveParticipantPaths(p, [property]), 1),\n          value = _a[0];\n        set(getParticipantPropertyAtom(p.session_id, property), value);\n      });\n    });\n    setInitialized(true);\n  }, []));\n  /**\n   * Initialize participants state based on daily.participants().\n   * Retries every 100ms to initialize the state, until daily is ready.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || initialized) return;\n    var interval = setInterval(function () {\n      var participants = daily.participants();\n      if (!('local' in participants)) return;\n      initParticipants(participants);\n      clearInterval(interval);\n    }, 100);\n    return function () {\n      clearInterval(interval);\n    };\n  }, [daily, initialized, initParticipants]);\n  var handleInitEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    if (!daily) return;\n    var participants = daily === null || daily === void 0 ? void 0 : daily.participants();\n    if (!participants.local) return;\n    initParticipants(participants);\n  }, [daily, initParticipants]);\n  useDailyEvent('started-camera', handleInitEvent, true);\n  useDailyEvent('access-state-updated', handleInitEvent, true);\n  useDailyEvent('joining-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(localJoinDateState, new Date());\n    handleInitEvent();\n  }, [handleInitEvent])), true);\n  useDailyEvent('joined-meeting', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    initParticipants(ev.participants);\n  }, [initParticipants]), true);\n  /**\n   * Reset stored participants, when meeting has ended.\n   */\n  var handleCleanup = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set) {\n    set(localIdState, '');\n    set(activeIdState, null);\n    var ids = get(participantIdsState);\n    ids.forEach(function (id) {\n      return participantState.remove(id);\n    });\n    set(participantIdsState, []);\n  }, []));\n  useDailyEvent('call-instance-destroyed', handleCleanup, true);\n  useDailyEvent('left-meeting', handleCleanup, true);\n  useThrottledDailyEvent(['active-speaker-change', 'participant-joined', 'participant-updated', 'participant-left'], (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, evts) {\n    if (!evts.length) return;\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'active-speaker-change':\n          {\n            set(activeIdState, ev.activeSpeaker.peerId);\n            set(participantState(ev.activeSpeaker.peerId), function (prev) {\n              if (!prev) return null;\n              return _assign(_assign({}, prev), {\n                last_active: new Date()\n              });\n            });\n            break;\n          }\n        case 'participant-joined':\n          {\n            // Update list of ids\n            set(participantIdsState, function (prevIds) {\n              return prevIds.includes(ev.participant.session_id) ? prevIds : __spreadArray(__spreadArray([], __read(prevIds), false), [ev.participant.session_id], false);\n            });\n            // Store entire object\n            set(participantState(ev.participant.session_id), ev.participant);\n            var paths = getParticipantPaths(ev.participant);\n            // Set list of property paths\n            set(participantPropertyPathsState(ev.participant.session_id), paths);\n            // Set all property path values\n            paths.forEach(function (property) {\n              var _a = __read(resolveParticipantPaths(ev.participant, [property]), 1),\n                value = _a[0];\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), value);\n            });\n            break;\n          }\n        case 'participant-updated':\n          {\n            // Update entire object\n            set(participantState(ev.participant.session_id), ev.participant);\n            // Update local session_id\n            if (ev.participant.local) {\n              set(localIdState, ev.participant.session_id);\n            }\n            var paths = getParticipantPaths(ev.participant);\n            var oldPaths_1 = get(participantPropertyPathsState(ev.participant.session_id));\n            var pathsChanged = paths.length !== oldPaths_1.length || paths.some(function (path) {\n              return !oldPaths_1.includes(path);\n            });\n            // Set list of property paths\n            if (pathsChanged) {\n              set(participantPropertyPathsState(ev.participant.session_id), paths);\n            }\n            // Create a Set of oldPaths for quick lookup\n            var oldPathSet_1 = new Set(oldPaths_1);\n            // Resolve all path values in one call\n            var resolvedValues_1 = resolveParticipantPaths(ev.participant, paths);\n            paths.forEach(function (property, idx) {\n              var value = resolvedValues_1[idx];\n              // Remove property from oldPathSet to mark it as processed\n              oldPathSet_1[\"delete\"](property);\n              // Only update if the new value differs from the current one\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), function (prev) {\n                return customDeepEqual(prev, value) ? prev : value;\n              });\n            });\n            // Set any remaining paths in oldPathSet to null\n            oldPathSet_1.forEach(function (property) {\n              set(getParticipantPropertyAtom(ev.participant.session_id, property), null);\n            });\n            break;\n          }\n        case 'participant-left':\n          {\n            // Remove from list of ids\n            set(participantIdsState, function (prevIds) {\n              return prevIds.includes(ev.participant.session_id) ? prevIds.filter(function (id) {\n                return id !== ev.participant.session_id;\n              }) : prevIds;\n            });\n            // Remove entire object\n            participantState.remove(ev.participant.session_id);\n            var oldPaths = get(participantPropertyPathsState(ev.participant.session_id));\n            // Remove property path values\n            oldPaths.forEach(function (property) {\n              participantPropertyState.remove(getPropertyParam(ev.participant.session_id, property));\n            });\n            // Remove all property paths\n            participantPropertyPathsState.remove(ev.participant.session_id);\n            break;\n          }\n      }\n    });\n  }, [])), 100, true);\n  useThrottledDailyEvent(['waiting-participant-added', 'waiting-participant-updated', 'waiting-participant-removed'], (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, evts) {\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'waiting-participant-added':\n          set(waitingParticipantsState, function (wps) {\n            return wps.includes(ev.participant.id) ? wps : __spreadArray(__spreadArray([], __read(wps), false), [ev.participant.id], false);\n          });\n          set(waitingParticipantState(ev.participant.id), ev.participant);\n          break;\n        case 'waiting-participant-updated':\n          set(waitingParticipantState(ev.participant.id), ev.participant);\n          break;\n        case 'waiting-participant-removed':\n          set(waitingParticipantsState, function (wps) {\n            return wps.filter(function (wp) {\n              return wp !== ev.participant.id;\n            });\n          });\n          waitingParticipantState.remove(ev.participant.id);\n          break;\n      }\n    });\n  }, [])), 100, true);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\n/**\n * Returns the local participant's session_id or empty string '',\n * if the local participant doesn't exist.\n */\nvar useLocalSessionId = function useLocalSessionId() {\n  var localId = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(localIdState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(localId);\n  return localId;\n};\n\nvar noopFilter = function noopFilter() {\n  return true;\n};\n/**\n * Returns the most recent speaker id mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n */\nvar useActiveSpeakerId = function useActiveSpeakerId(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    _c = _b.filter,\n    filter = _c === void 0 ? noopFilter : _c,\n    _d = _b.ignoreLocal,\n    ignoreLocal = _d === void 0 ? false : _d;\n  var localSessionId = useLocalSessionId();\n  var recentActiveId = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(activeIdState);\n  var isIgnoredLocalId = ignoreLocal && recentActiveId === localSessionId;\n  var isFilteredOut = !(filter === null || filter === void 0 ? void 0 : filter(recentActiveId));\n  var isRecentIdRelevant = !isIgnoredLocalId && !isFilteredOut;\n  var _e = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(isRecentIdRelevant ? recentActiveId : null), 2),\n    activeId = _e[0],\n    setActiveId = _e[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (isIgnoredLocalId || isFilteredOut) return;\n    setActiveId(recentActiveId);\n  }, [isFilteredOut, isIgnoredLocalId, recentActiveId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(activeId);\n  return activeId;\n};\n\nvar isTrackOff = function isTrackOff(trackState) {\n  return ['blocked', 'off'].includes(trackState);\n};\n\nvar SERIALIZABLE_DELIM = ';';\nvar getParticipantIdsFilterSortParam = function getParticipantIdsFilterSortParam(filter, sort) {\n  return \"\".concat(filter).concat(SERIALIZABLE_DELIM).concat(sort);\n};\n/**\n * Short-cut state selector for useParticipantIds({ filter: 'local' })\n */\nvar participantIdsFilteredAndSortedState = equalAtomFamily({\n  equals: customDeepEqual,\n  get: function get(param) {\n    return function (get) {\n      var _a = __read(param.split(SERIALIZABLE_DELIM), 2),\n        filter = _a[0],\n        sort = _a[1];\n      var ids = get(participantIdsState);\n      return ids.filter(function (id) {\n        switch (filter) {\n          /**\n           * Simple boolean fields first.\n           */\n          case 'local':\n          case 'owner':\n          case 'record':\n            {\n              return get(getParticipantPropertyAtom(id, filter));\n            }\n          case 'remote':\n            {\n              return !get(getParticipantPropertyAtom(id, 'local'));\n            }\n          case 'screen':\n            {\n              var screenAudioState = get(getParticipantPropertyAtom(id, 'tracks.screenAudio.state'));\n              var screenVideoState = get(getParticipantPropertyAtom(id, 'tracks.screenVideo.state'));\n              return !isTrackOff(screenAudioState) || !isTrackOff(screenVideoState);\n            }\n          default:\n            return true;\n        }\n      }).sort(function (idA, idB) {\n        switch (sort) {\n          case 'joined_at':\n          case 'session_id':\n          case 'user_id':\n          case 'user_name':\n            {\n              var aSort = get(getParticipantPropertyAtom(idA, sort));\n              var bSort = get(getParticipantPropertyAtom(idB, sort));\n              if (aSort !== undefined || bSort !== undefined) {\n                if (aSort === undefined) return -1;\n                if (bSort === undefined) return 1;\n                if (aSort > bSort) return 1;\n                if (aSort < bSort) return -1;\n              }\n              return 0;\n            }\n          default:\n            return 0;\n        }\n      });\n    };\n  }\n});\n/**\n * Returns a list of participant ids (= session_id).\n * The list can optionally be filtered and sorted, using the filter and sort options.\n */\nvar useParticipantIds = function useParticipantIds(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    filter = _b.filter,\n    onActiveSpeakerChange = _b.onActiveSpeakerChange,\n    onParticipantJoined = _b.onParticipantJoined,\n    onParticipantLeft = _b.onParticipantLeft,\n    onParticipantUpdated = _b.onParticipantUpdated,\n    sort = _b.sort;\n  /**\n   * For instances of useParticipantIds with string-based filter and sort,\n   * we can immediately return the correct ids from Jotai's state.\n   */\n  var preFilteredSortedIds = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(participantIdsFilteredAndSortedState(getParticipantIdsFilterSortParam(typeof filter === 'string' ? filter : null, typeof sort === 'string' ? sort : null)));\n  var shouldUseCustomIds = typeof filter === 'function' || typeof sort === 'function';\n  var getCustomFilteredIds = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get) {\n    if (\n    // Ignore if both filter and sort are not functions.\n    typeof filter !== 'function' && typeof sort !== 'function') return [];\n    var participants = preFilteredSortedIds.map(function (id) {\n      return get(participantState(id));\n    });\n    return participants\n    // Make sure we don't accidentally try to filter/sort `null` participants\n    // This can happen when a participant's id is already present in store\n    // but the participant object is not stored, yet.\n    .filter(function (p) {\n      return Boolean(p);\n    })\n    // Run custom filter, if it's a function. Otherwise don't filter any participants.\n    .filter(typeof filter === 'function' ? filter : function () {\n      return true;\n    })\n    // Run custom sort, if it's a function. Otherwise don't sort.\n    .sort(typeof sort === 'function' ? sort : function () {\n      return 0;\n    })\n    // Map back to session_id.\n    .map(function (p) {\n      return p.session_id;\n    })\n    // Filter any potential null/undefined ids.\n    // This shouldn't really happen, but better safe than sorry.\n    .filter(Boolean);\n  }, [filter, preFilteredSortedIds, sort]);\n  var _c = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]), 2),\n    customIds = _c[0],\n    setCustomIds = _c[1];\n  var maybeUpdateCustomIds = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get) {\n    if (!shouldUseCustomIds) return;\n    var newIds = getCustomFilteredIds(get);\n    if (customDeepEqual(newIds, customIds)) return;\n    setCustomIds(newIds);\n  }, [customIds, getCustomFilteredIds, shouldUseCustomIds]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    maybeUpdateCustomIds();\n  }, [maybeUpdateCustomIds]);\n  useThrottledDailyEvent(['participant-joined', 'participant-updated', 'active-speaker-change', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    if (!evts.length) return;\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'participant-joined':\n          onParticipantJoined === null || onParticipantJoined === void 0 ? void 0 : onParticipantJoined(ev);\n          break;\n        case 'participant-updated':\n          onParticipantUpdated === null || onParticipantUpdated === void 0 ? void 0 : onParticipantUpdated(ev);\n          break;\n        case 'active-speaker-change':\n          onActiveSpeakerChange === null || onActiveSpeakerChange === void 0 ? void 0 : onActiveSpeakerChange(ev);\n          break;\n        case 'participant-left':\n          onParticipantLeft === null || onParticipantLeft === void 0 ? void 0 : onParticipantLeft(ev);\n          break;\n      }\n    });\n    maybeUpdateCustomIds();\n  }, [maybeUpdateCustomIds, onActiveSpeakerChange, onParticipantJoined, onParticipantLeft, onParticipantUpdated]));\n  var result = typeof filter === 'function' || typeof sort === 'function' ? customIds : preFilteredSortedIds;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar screenSharesState = equalAtomFamily({\n  equals: arraysDeepEqual,\n  get: function get() {\n    return function (get) {\n      var screenIds = get(participantIdsFilteredAndSortedState(getParticipantIdsFilterSortParam('screen', null)));\n      return screenIds.map(function (id) {\n        return {\n          local: get(getParticipantPropertyAtom(id, 'local')),\n          screenAudio: get(getParticipantPropertyAtom(id, 'tracks.screenAudio')),\n          screenVideo: get(getParticipantPropertyAtom(id, 'tracks.screenVideo')),\n          screenId: \"\".concat(id, \"-screen\"),\n          session_id: id\n        };\n      });\n    };\n  }\n});\n/**\n * Allows access to information about shared screens, and methods to start or stop a local screen share.\n */\nvar useScreenShare = function useScreenShare(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onError = _b.onError,\n    onLocalScreenShareStarted = _b.onLocalScreenShareStarted,\n    onLocalScreenShareStopped = _b.onLocalScreenShareStopped;\n  var daily = useDaily();\n  var startScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    daily === null || daily === void 0 ? void 0 : daily.startScreenShare.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var stopScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    daily === null || daily === void 0 ? void 0 : daily.stopScreenShare.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  useDailyEvent('local-screen-share-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    return onLocalScreenShareStarted === null || onLocalScreenShareStarted === void 0 ? void 0 : onLocalScreenShareStarted();\n  }, [onLocalScreenShareStarted]));\n  useDailyEvent('local-screen-share-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    return onLocalScreenShareStopped === null || onLocalScreenShareStopped === void 0 ? void 0 : onLocalScreenShareStopped();\n  }, [onLocalScreenShareStopped]));\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'screen-share-error') return;\n    onError === null || onError === void 0 ? void 0 : onError(ev);\n  }, [onError]));\n  var screens = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(screenSharesState(undefined));\n  var result = {\n    isSharingScreen: screens.some(function (s) {\n      return s.local;\n    }),\n    screens: screens,\n    startScreenShare: startScreenShare,\n    stopScreenShare: stopScreenShare\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Returns a participant's track and state, based on the given MediaType.\n *\n * Equivalent to daily.participants()[participantId].tracks[type].\n *\n * @param participantId The participant's session_id.\n * @param type The track type. Default: \"video\"\n */\nvar useMediaTrack = function useMediaTrack(participantId, type) {\n  if (type === void 0) {\n    type = 'video';\n  }\n  var trackState = useParticipantProperty(participantId, \"tracks.\".concat(type));\n  var result = trackState ? _assign(_assign({}, trackState), {\n    isOff: isTrackOff(trackState.state)\n  }) : {\n    isOff: true,\n    persistentTrack: undefined,\n    state: 'off',\n    subscribed: false\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nfunction useMergedRef() {\n  var refs = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    refs[_i] = arguments[_i];\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (element) {\n    for (var i = 0; i < refs.length; i++) {\n      var ref = refs[i];\n      if (typeof ref === 'function') ref(element);else if (ref && _typeof(ref) === 'object') ref.current = element;\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  refs);\n}\n\nvar DailyAudioTrack = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function (_a, ref) {\n  var onPlayFailed = _a.onPlayFailed,\n    sessionId = _a.sessionId,\n    _b = _a.type,\n    type = _b === void 0 ? 'audio' : _b,\n    props = __rest(_a, [\"onPlayFailed\", \"sessionId\", \"type\"]);\n  var audioEl = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var audio = useMediaTrack(sessionId, type);\n  var audioRef = useMergedRef(audioEl, ref);\n  var subscribedState = audio === null || audio === void 0 ? void 0 : audio.subscribed;\n  /**\n   * Setup audio tag.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var audioTag = audioEl.current;\n    if (!audioTag || !(audio === null || audio === void 0 ? void 0 : audio.persistentTrack)) return;\n    var handleCanPlay = function handleCanPlay() {\n      audioTag.play()[\"catch\"](function (e) {\n        onPlayFailed === null || onPlayFailed === void 0 ? void 0 : onPlayFailed({\n          sessionId: sessionId,\n          target: audioTag,\n          type: type,\n          message: e.message,\n          name: e.name\n        });\n      });\n    };\n    if (!MediaStream) {\n      console.warn(\"MediaStream API not available. Can't setup \".concat(type, \" for \").concat(sessionId));\n      onPlayFailed === null || onPlayFailed === void 0 ? void 0 : onPlayFailed({\n        sessionId: sessionId,\n        target: audioTag,\n        type: type,\n        message: 'MediaStream API not available',\n        name: 'MediaStream API not available'\n      });\n      return;\n    }\n    audioTag.addEventListener('canplay', handleCanPlay);\n    audioTag.srcObject = new MediaStream([audio === null || audio === void 0 ? void 0 : audio.persistentTrack]);\n    return function () {\n      audioTag === null || audioTag === void 0 ? void 0 : audioTag.removeEventListener('canplay', handleCanPlay);\n    };\n  }, [audio === null || audio === void 0 ? void 0 : audio.persistentTrack, onPlayFailed, sessionId, type]);\n  useDailyEvent('participant-left', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    var audioTag = audioEl.current;\n    if (ev.participant.session_id !== sessionId || !audioTag) return;\n    audioTag.srcObject = null;\n  }, [sessionId]));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"audio\", _assign({\n    autoPlay: true,\n    ref: audioRef\n  }, props, {\n    \"data-session-id\": sessionId,\n    \"data-audio-type\": type,\n    \"data-subscribed\": subscribedState\n  }));\n}));\nDailyAudioTrack.displayName = 'DailyAudioTrack';\n\nvar DailyAudio = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function (_a, ref) {\n  var _b = _a.autoSubscribeActiveSpeaker,\n    autoSubscribeActiveSpeaker = _b === void 0 ? false : _b,\n    _c = _a.maxSpeakers,\n    maxSpeakers = _c === void 0 ? 5 : _c,\n    onPlayFailed = _a.onPlayFailed,\n    _d = _a.playLocalScreenAudio,\n    playLocalScreenAudio = _d === void 0 ? false : _d;\n  var daily = useDaily();\n  var _e = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Array(maxSpeakers).fill('')), 2),\n    speakers = _e[0],\n    setSpeakers = _e[1];\n  var screens = useScreenShare().screens;\n  var localSessionId = useLocalSessionId();\n  var activeSpeakerId = useActiveSpeakerId({\n    ignoreLocal: true\n  });\n  var containerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, function () {\n    return {\n      getActiveSpeakerAudio: function getActiveSpeakerAudio() {\n        var _a, _b;\n        return (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"audio[data-session-id=\\\"\".concat(activeSpeakerId, \"\\\"][data-audio-type=\\\"audio\\\"]\"))) !== null && _b !== void 0 ? _b : null;\n      },\n      getAllAudio: function getAllAudio() {\n        var _a, _b;\n        return Array.from((_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll('audio')) !== null && _b !== void 0 ? _b : []);\n      },\n      getAudioBySessionId: function getAudioBySessionId(id) {\n        var _a, _b;\n        return (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"audio[data-session-id=\\\"\".concat(id, \"\\\"][data-audio-type=\\\"audio\\\"]\"))) !== null && _b !== void 0 ? _b : null;\n      },\n      getRmpAudio: function getRmpAudio() {\n        var _a, _b;\n        return Array.from((_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll('audio[data-audio-type=\"rmpAudio\"]')) !== null && _b !== void 0 ? _b : []);\n      },\n      getScreenAudio: function getScreenAudio() {\n        var _a, _b;\n        return Array.from((_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll('audio[data-audio-type=\"screenAudio\"]')) !== null && _b !== void 0 ? _b : []);\n      },\n      getRmpAudioBySessionId: function getRmpAudioBySessionId(id) {\n        var _a, _b;\n        return (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"audio[data-session-id=\\\"\".concat(id, \"\\\"][data-audio-type=\\\"rmpAudio\\\"]\"))) !== null && _b !== void 0 ? _b : null;\n      },\n      getScreenAudioBySessionId: function getScreenAudioBySessionId(id) {\n        var _a, _b;\n        return (_b = (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\"audio[data-session-id=\\\"\".concat(id, \"\\\"][data-audio-type=\\\"screenAudio\\\"]\"))) !== null && _b !== void 0 ? _b : null;\n      }\n    };\n  }, [activeSpeakerId]);\n  var assignSpeaker = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, _set, sessionId) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var subscribedParticipants, isSubscribed;\n      var _a;\n      return __generator(this, function (_b) {\n        subscribedParticipants = Object.values((_a = daily === null || daily === void 0 ? void 0 : daily.participants()) !== null && _a !== void 0 ? _a : {}).filter(function (p) {\n          return !p.local && Boolean(p.tracks.audio.subscribed);\n        });\n        isSubscribed = function isSubscribed(id) {\n          return subscribedParticipants.some(function (p) {\n            return p.session_id === id;\n          });\n        };\n        if (!isSubscribed(sessionId)) {\n          if (daily && !daily.isDestroyed() && autoSubscribeActiveSpeaker && !daily.subscribeToTracksAutomatically()) {\n            daily.updateParticipant(sessionId, {\n              setSubscribedTracks: {\n                audio: true\n              }\n            });\n          } else {\n            return [2 /*return*/];\n          }\n        }\n\n        setSpeakers(function (prevSpeakers) {\n          var _a;\n          // New speaker is already present\n          if (prevSpeakers.includes(sessionId)) return prevSpeakers;\n          // Try to find a free slot: either unassigned or unsubscribed\n          var freeSlotCheck = function freeSlotCheck(id) {\n            return !id || !isSubscribed(id);\n          };\n          if (prevSpeakers.some(freeSlotCheck)) {\n            var idx = prevSpeakers.findIndex(freeSlotCheck);\n            prevSpeakers[idx] = sessionId;\n            return __spreadArray([], __read(prevSpeakers), false);\n          }\n          // From here on we can assume that all assigned audio tracks are subscribed.\n          // Try to find muted recent speaker\n          var mutedIdx = prevSpeakers.findIndex(function (id) {\n            return subscribedParticipants.some(function (p) {\n              return p.session_id === id && isTrackOff(p.tracks.audio.state);\n            });\n          });\n          if (mutedIdx >= 0) {\n            prevSpeakers[mutedIdx] = sessionId;\n            return __spreadArray([], __read(prevSpeakers), false);\n          }\n          // Find least recent non-active speaker and replace with new speaker\n          var speakerObjects = subscribedParticipants.filter(function (p) {\n            // Only consider participants currently assigned to speaker slots\n            return prevSpeakers.includes(p.session_id) &&\n            // Don't replace current active participant, to avoid audio drop-outs\n            p.session_id !== activeSpeakerId;\n          }).sort(function (a, b) {\n            var _a, _b;\n            var lastActiveA = (_a = get(getParticipantPropertyAtom(a.session_id, 'last_active'))) !== null && _a !== void 0 ? _a : new Date('1970-01-01');\n            var lastActiveB = (_b = get(getParticipantPropertyAtom(b.session_id, 'last_active'))) !== null && _b !== void 0 ? _b : new Date('1970-01-01');\n            if (lastActiveA > lastActiveB) return 1;\n            if (lastActiveA < lastActiveB) return -1;\n            return 0;\n          });\n          // No previous speaker in call anymore. Assign first free slot.\n          if (!speakerObjects.length) {\n            // Don't replace the active speaker. Instead find first non-active speaker slot.\n            var replaceIdx_1 = prevSpeakers.findIndex(function (id) {\n              return id !== activeSpeakerId;\n            });\n            prevSpeakers[replaceIdx_1] = sessionId;\n            return __spreadArray([], __read(prevSpeakers), false);\n          }\n          // Replace least recent speaker with new speaker\n          var replaceIdx = prevSpeakers.indexOf((_a = speakerObjects[0]) === null || _a === void 0 ? void 0 : _a.session_id);\n          prevSpeakers[replaceIdx] = sessionId;\n          return __spreadArray([], __read(prevSpeakers), false);\n        });\n        return [2 /*return*/];\n      });\n    });\n  }, [activeSpeakerId, autoSubscribeActiveSpeaker, daily]));\n  /**\n   * Unassigns speaker from speaker slot, e.g. because participant left the call.\n   */\n  var removeSpeaker = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (sessionId) {\n    setSpeakers(function (prevSpeakers) {\n      if (!prevSpeakers.includes(sessionId)) return prevSpeakers;\n      var newSpeakers = __spreadArray([], __read(prevSpeakers), false);\n      var idx = newSpeakers.indexOf(sessionId);\n      newSpeakers[idx] = '';\n      return newSpeakers;\n    });\n  }, []);\n  useThrottledDailyEvent(['active-speaker-change', 'track-started', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    evts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'active-speaker-change':\n          if (ev.activeSpeaker.peerId === localSessionId) return;\n          assignSpeaker(ev.activeSpeaker.peerId);\n          break;\n        case 'track-started':\n          if (ev.track.kind === 'audio' && ev.participant && !ev.participant.local) {\n            assignSpeaker(ev.participant.session_id);\n          }\n          break;\n        case 'participant-left':\n          removeSpeaker(ev.participant.session_id);\n          break;\n      }\n    });\n  }, [assignSpeaker, localSessionId, removeSpeaker]), 200);\n  var rmpAudioIds = useParticipantIds({\n    filter: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (p) {\n      var _a;\n      return Boolean((_a = p === null || p === void 0 ? void 0 : p.tracks) === null || _a === void 0 ? void 0 : _a.rmpAudio);\n    }, [])\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    ref: containerRef\n  }, speakers.map(function (sessionId, idx) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: \"speaker-slot-\".concat(idx),\n      onPlayFailed: onPlayFailed,\n      sessionId: sessionId,\n      type: \"audio\"\n    });\n  }), screens.filter(function (screen) {\n    return playLocalScreenAudio ? true : !screen.local;\n  }).map(function (screen) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: screen.screenId,\n      onPlayFailed: onPlayFailed,\n      sessionId: screen.session_id,\n      type: \"screenAudio\"\n    });\n  }), rmpAudioIds.map(function (id) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyAudioTrack, {\n      key: \"\".concat(id, \"-rmp\"),\n      onPlayFailed: onPlayFailed,\n      sessionId: id,\n      type: \"rmpAudio\"\n    });\n  }));\n}));\nDailyAudio.displayName = 'DailyAudio';\n\nvar DailyVideo = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function DailyVideo(_a, ref) {\n  var automirror = _a.automirror,\n    _b = _a.fit,\n    fit = _b === void 0 ? 'contain' : _b,\n    mirror = _a.mirror,\n    onResize = _a.onResize,\n    _c = _a.playableStyle,\n    playableStyle = _c === void 0 ? {} : _c,\n    sessionId = _a.sessionId,\n    _d = _a.style,\n    style = _d === void 0 ? {} : _d,\n    _e = _a.type,\n    type = _e === void 0 ? 'video' : _e,\n    props = __rest(_a, [\"automirror\", \"fit\", \"mirror\", \"onResize\", \"playableStyle\", \"sessionId\", \"style\", \"type\"]);\n  var localSessionId = useLocalSessionId();\n  var isLocal = localSessionId === sessionId;\n  var isScreen = type === 'screenVideo';\n  var isLocalCam = isLocal && !isScreen;\n  var videoEl = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var videoRef = useMergedRef(videoEl, ref);\n  var videoState = useMediaTrack(sessionId, type);\n  var videoTrack = videoState.persistentTrack;\n  /**\n   * Considered as playable video:\n   * - local cam feed\n   * - any screen share\n   * - remote cam feed that is subscribed and reported as playable\n   */\n  var isPlayable = isLocalCam || isScreen || !videoState.isOff;\n  var trackState = useParticipantProperty(sessionId, \"tracks.\".concat(type));\n  var subscribedState = trackState === null || trackState === void 0 ? void 0 : trackState.subscribed;\n  /**\n   * Determine if video needs to be mirrored.\n   */\n  var isMirrored = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    if (typeof mirror === 'boolean') return mirror;\n    if (!automirror) return false;\n    if (!videoTrack) return isLocalCam;\n    var videoTrackSettings = videoTrack.getSettings();\n    var isUsersFrontCamera = 'facingMode' in videoTrackSettings ? isLocalCam && videoTrackSettings.facingMode === 'user' : isLocalCam;\n    // only apply mirror effect to user facing camera\n    return isUsersFrontCamera;\n  }, [automirror, isLocalCam, mirror, videoTrack]);\n  /**\n   * Handle canplay & picture-in-picture events.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function setupVideoEvents() {\n    var video = videoEl.current;\n    if (!video) return;\n    var playVideo = function playVideo() {\n      var promise = video.play();\n      if (promise !== undefined) {\n        promise.then(function () {\n          // All good, playback started.\n          video.controls = false;\n        })[\"catch\"](function (error) {\n          // Auto-play was prevented. Show video controls, so user can play video manually.\n          video.controls = true;\n          console.warn('Failed to play video', error);\n        });\n      }\n    };\n    var handleCanPlay = function handleCanPlay() {\n      if (!video.paused) return;\n      playVideo();\n    };\n    var handleEnterPIP = function handleEnterPIP() {\n      video.style.transform = 'scale(1)';\n    };\n    var handleLeavePIP = function handleLeavePIP() {\n      video.style.transform = '';\n      setTimeout(function () {\n        if (video.paused) playVideo();\n      }, 100);\n    };\n    var handleVisibilityChange = function handleVisibilityChange() {\n      if (document.visibilityState === 'hidden') return;\n      if (!video.paused) return;\n      playVideo();\n    };\n    video.addEventListener('canplay', handleCanPlay);\n    video.addEventListener('enterpictureinpicture', handleEnterPIP);\n    video.addEventListener('leavepictureinpicture', handleLeavePIP);\n    // Videos can be paused if media was played in another app on iOS.\n    // Resuming here, when returning back to Daily call.\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return function () {\n      video.removeEventListener('canplay', handleCanPlay);\n      video.removeEventListener('enterpictureinpicture', handleEnterPIP);\n      video.removeEventListener('leavepictureinpicture', handleLeavePIP);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, []);\n  /**\n   * Update srcObject.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function updateSrcObject() {\n    var video = videoEl.current;\n    if (!video || !videoTrack) return;\n    if (!MediaStream) {\n      console.warn(\"MediaStream API not available. Can't setup \".concat(type, \" for \").concat(sessionId));\n      return;\n    }\n    video.srcObject = new MediaStream([videoTrack]);\n    video.load();\n    return function () {\n      // clean up when unmounted\n      video.srcObject = null;\n      video.load();\n    };\n  }, [sessionId, type, videoTrack, videoTrack === null || videoTrack === void 0 ? void 0 : videoTrack.id]);\n  /**\n   * Add optional event listener for resize event so the parent component\n   * can know the video's native aspect ratio.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function reportVideoDimensions() {\n    var video = videoEl.current;\n    if (!onResize || !video) return;\n    var frame;\n    function handleResize() {\n      if (frame) cancelAnimationFrame(frame);\n      frame = requestAnimationFrame(function () {\n        var video = videoEl.current;\n        if (!video || document.hidden) return;\n        var videoWidth = video.videoWidth;\n        var videoHeight = video.videoHeight;\n        if (videoWidth && videoHeight) {\n          onResize === null || onResize === void 0 ? void 0 : onResize({\n            aspectRatio: videoWidth / videoHeight,\n            height: videoHeight,\n            width: videoWidth\n          });\n        }\n      });\n    }\n    handleResize();\n    video.addEventListener('loadedmetadata', handleResize);\n    video.addEventListener('resize', handleResize);\n    return function () {\n      if (frame) cancelAnimationFrame(frame);\n      video.removeEventListener('loadedmetadata', handleResize);\n      video.removeEventListener('resize', handleResize);\n    };\n  }, [onResize]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"video\", _assign({\n    autoPlay: true,\n    muted: true,\n    playsInline: true,\n    ref: videoRef,\n    \"data-local\": isLocal,\n    \"data-mirrored\": isMirrored || undefined,\n    \"data-playable\": isPlayable || undefined,\n    \"data-session-id\": sessionId,\n    \"data-subscribed\": subscribedState,\n    \"data-video-type\": type,\n    style: _assign(_assign({\n      objectFit: fit,\n      transform: isMirrored ? 'scale(-1, 1)' : ''\n    }, style), isPlayable ? playableStyle : {})\n  }, props));\n});\nDailyVideo.displayName = 'DailyVideo';\n\nvar DailyDevicesContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({\n  refreshDevices: function refreshDevices() {\n    return Promise.resolve();\n  }\n});\n\nvar generalCameraState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('idle');\ngeneralCameraState.debugLabel = jotaiDebugLabel('camera-state');\nvar generalMicrophoneState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('idle');\ngeneralMicrophoneState.debugLabel = jotaiDebugLabel('microphone-state');\nvar cameraDevicesState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\ncameraDevicesState.debugLabel = jotaiDebugLabel('camera-devices');\nvar microphoneDevicesState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\nmicrophoneDevicesState.debugLabel = jotaiDebugLabel('microphone-devices');\nvar speakerDevicesState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\nspeakerDevicesState.debugLabel = jotaiDebugLabel('speaker-devices');\nvar lastCameraErrorState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nlastCameraErrorState.debugLabel = jotaiDebugLabel('last-camera-error');\nvar DailyDevices = function DailyDevices(_a) {\n  var children = _a.children;\n  var daily = useDaily();\n  /**\n   * Refreshes list of available devices using enumerateDevices.\n   * Previous device states are kept in place, otherwise states are initialized as 'granted'.\n   */\n  var refreshDevices = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var devices, cams_1, mics_1, speakers_1, _a, camera_1, mic_1, speaker_1, mapDevice_1, sortDeviceByLabel_1;\n      var _b, _c;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            /**\n             * Check for legacy browsers.\n             */\n            if (typeof ((_b = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _b === void 0 ? void 0 : _b.getUserMedia) === 'undefined' || typeof ((_c = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _c === void 0 ? void 0 : _c.enumerateDevices) === 'undefined') {\n              set(generalCameraState, 'not-supported');\n              set(generalMicrophoneState, 'not-supported');\n              return [2 /*return*/];\n            }\n\n            if (!daily) return [2 /*return*/];\n            _d.label = 1;\n          case 1:\n            _d.trys.push([1, 4,, 5]);\n            return [4 /*yield*/, daily.enumerateDevices()];\n          case 2:\n            devices = _d.sent().devices;\n            cams_1 = devices.filter(function (d) {\n              return d.kind === 'videoinput' && d.deviceId !== '';\n            });\n            mics_1 = devices.filter(function (d) {\n              return d.kind === 'audioinput' && d.deviceId !== '';\n            });\n            speakers_1 = devices.filter(function (d) {\n              return d.kind === 'audiooutput' && d.deviceId !== '';\n            });\n            return [4 /*yield*/, daily.getInputDevices()];\n          case 3:\n            _a = _d.sent(), camera_1 = _a.camera, mic_1 = _a.mic, speaker_1 = _a.speaker;\n            mapDevice_1 = function mapDevice_1(device, d, prevDevices) {\n              var _a, _b;\n              return {\n                device: d,\n                selected: 'deviceId' in device && d.deviceId === device.deviceId,\n                state: (_b = (_a = prevDevices.find(function (p) {\n                  return p.device.deviceId === d.deviceId;\n                })) === null || _a === void 0 ? void 0 : _a.state) !== null && _b !== void 0 ? _b : 'granted'\n              };\n            };\n            sortDeviceByLabel_1 = function sortDeviceByLabel_1(a, b) {\n              if (a.device.deviceId === 'default') return -1;\n              if (b.device.deviceId === 'default') return 1;\n              if (a.device.label < b.device.label) return -1;\n              if (a.device.label > b.device.label) return 1;\n              return 0;\n            };\n            set(cameraDevicesState, function (prevCams) {\n              return cams_1.filter(Boolean).map(function (d) {\n                return mapDevice_1(camera_1, d, prevCams);\n              }).sort(sortDeviceByLabel_1);\n            });\n            set(microphoneDevicesState, function (prevMics) {\n              return mics_1.filter(Boolean).map(function (d) {\n                return mapDevice_1(mic_1, d, prevMics);\n              }).sort(sortDeviceByLabel_1);\n            });\n            set(speakerDevicesState, function (prevSpeakers) {\n              return speakers_1.filter(Boolean).map(function (d) {\n                return mapDevice_1(speaker_1, d, prevSpeakers);\n              }).sort(sortDeviceByLabel_1);\n            });\n            return [3 /*break*/, 5];\n          case 4:\n            _d.sent();\n            set(generalCameraState, 'not-supported');\n            set(generalMicrophoneState, 'not-supported');\n            return [3 /*break*/, 5];\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily]));\n  /**\n   * Updates general and specific device states, based on blocked status.\n   */\n  var updateDeviceStates = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var currentCamState, currentMicState, participants, tracks, camPermissionState, micPermissionState, camPermission, micPermission, awaitingCamAccess, initialCamOff, awaitingMicAccess, initialMicOff;\n      var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n      return __generator(this, function (_r) {\n        switch (_r.label) {\n          case 0:\n            if (!daily) return [2 /*return*/];\n            currentCamState = get(generalCameraState);\n            currentMicState = get(generalMicrophoneState);\n            participants = daily.participants();\n            // Guard against potentially uninitialized local participant\n            if (!participants.local) return [2 /*return*/];\n            tracks = participants.local.tracks;\n            camPermissionState = 'prompt';\n            micPermissionState = 'prompt';\n            if (!navigator.permissions) return [3 /*break*/, 5];\n            _r.label = 1;\n          case 1:\n            _r.trys.push([1, 4,, 5]);\n            return [4 /*yield*/, navigator.permissions.query({\n              // @ts-ignore\n              name: 'camera'\n            })];\n          case 2:\n            camPermission = _r.sent();\n            camPermissionState = camPermission.state;\n            return [4 /*yield*/, navigator.permissions.query({\n              // @ts-ignore\n              name: 'microphone'\n            })];\n          case 3:\n            micPermission = _r.sent();\n            micPermissionState = micPermission.state;\n            return [3 /*break*/, 5];\n          case 4:\n            _r.sent();\n            return [3 /*break*/, 5];\n          case 5:\n            awaitingCamAccess = camPermissionState === 'prompt' && ['idle', 'pending'].includes(currentCamState) && tracks.video.state === 'interrupted' && !tracks.video.persistentTrack;\n            initialCamOff = ['idle', 'pending'].includes(currentCamState) && !tracks.video.persistentTrack && Boolean((_b = tracks.video.off) === null || _b === void 0 ? void 0 : _b.byUser);\n            awaitingMicAccess = micPermissionState === 'prompt' && ['idle', 'pending'].includes(currentMicState) && tracks.audio.state === 'interrupted' && !tracks.audio.persistentTrack;\n            initialMicOff = ['idle', 'pending'].includes(currentMicState) && !tracks.audio.persistentTrack && Boolean((_c = tracks.audio.off) === null || _c === void 0 ? void 0 : _c.byUser);\n            if ((_e = (_d = tracks.audio) === null || _d === void 0 ? void 0 : _d.blocked) === null || _e === void 0 ? void 0 : _e.byDeviceInUse) {\n              set(generalMicrophoneState, 'in-use');\n              set(microphoneDevicesState, function (mics) {\n                return mics.map(function (m) {\n                  return m.selected ? _assign(_assign({}, m), {\n                    state: 'in-use'\n                  }) : m;\n                });\n              });\n            } else if ((_g = (_f = tracks.audio) === null || _f === void 0 ? void 0 : _f.blocked) === null || _g === void 0 ? void 0 : _g.byDeviceMissing) {\n              set(generalMicrophoneState, 'not-found');\n            } else if (((_j = (_h = tracks.audio) === null || _h === void 0 ? void 0 : _h.blocked) === null || _j === void 0 ? void 0 : _j.byPermissions) || micPermissionState === 'denied') {\n              set(generalMicrophoneState, 'blocked');\n            } else if (awaitingMicAccess) {\n              set(generalMicrophoneState, 'pending');\n            } else if (initialMicOff) {\n              set(generalMicrophoneState, 'idle');\n            } else {\n              set(generalMicrophoneState, 'granted');\n              set(microphoneDevicesState, function (mics) {\n                return mics.map(function (m) {\n                  return m.selected ? _assign(_assign({}, m), {\n                    state: 'granted'\n                  }) : m;\n                });\n              });\n            }\n            if ((_l = (_k = tracks.video) === null || _k === void 0 ? void 0 : _k.blocked) === null || _l === void 0 ? void 0 : _l.byDeviceInUse) {\n              set(generalCameraState, 'in-use');\n              set(cameraDevicesState, function (cams) {\n                return cams.map(function (m) {\n                  return m.selected ? _assign(_assign({}, m), {\n                    state: 'in-use'\n                  }) : m;\n                });\n              });\n            } else if ((_o = (_m = tracks.video) === null || _m === void 0 ? void 0 : _m.blocked) === null || _o === void 0 ? void 0 : _o.byDeviceMissing) {\n              set(generalCameraState, 'not-found');\n            } else if (((_q = (_p = tracks.video) === null || _p === void 0 ? void 0 : _p.blocked) === null || _q === void 0 ? void 0 : _q.byPermissions) || camPermissionState === 'denied') {\n              set(generalCameraState, 'blocked');\n            } else if (awaitingCamAccess) {\n              set(generalCameraState, 'pending');\n            } else if (initialCamOff) {\n              set(generalCameraState, 'idle');\n            } else {\n              set(generalCameraState, 'granted');\n              set(cameraDevicesState, function (cams) {\n                return cams.map(function (m) {\n                  return m.selected ? _assign(_assign({}, m), {\n                    state: 'granted'\n                  }) : m;\n                });\n              });\n            }\n            refreshDevices();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily, refreshDevices]));\n  useDailyEvent('participant-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (!ev.participant.local) return;\n    updateDeviceStates();\n  }, [updateDeviceStates]));\n  useDailyEvent('available-devices-updated', refreshDevices);\n  useDailyEvent('selected-devices-updated', refreshDevices);\n  useDailyEvent('camera-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    set(lastCameraErrorState, ev.error);\n    switch ((_a = ev.error) === null || _a === void 0 ? void 0 : _a.type) {\n      case 'cam-in-use':\n        set(generalCameraState, 'in-use');\n        break;\n      case 'mic-in-use':\n        set(generalMicrophoneState, 'in-use');\n        break;\n      case 'cam-mic-in-use':\n        set(generalCameraState, 'in-use');\n        set(generalMicrophoneState, 'in-use');\n        break;\n      case 'not-found':\n        if ((_b = ev.error) === null || _b === void 0 ? void 0 : _b.missingMedia.includes('video')) set(generalCameraState, 'not-found');\n        if ((_c = ev.error) === null || _c === void 0 ? void 0 : _c.missingMedia.includes('audio')) set(generalMicrophoneState, 'not-found');\n        break;\n      case 'permissions':\n        if ((_d = ev.error) === null || _d === void 0 ? void 0 : _d.blockedMedia.includes('video')) set(generalCameraState, 'blocked');\n        if ((_e = ev.error) === null || _e === void 0 ? void 0 : _e.blockedMedia.includes('audio')) set(generalMicrophoneState, 'blocked');\n        break;\n      case 'constraints':\n        if (((_f = ev.error) === null || _f === void 0 ? void 0 : _f.reason) === 'invalid') {\n          set(generalCameraState, 'constraints-invalid');\n          set(generalMicrophoneState, 'constraints-invalid');\n        } else if (((_g = ev.error) === null || _g === void 0 ? void 0 : _g.reason) === 'none-specified') {\n          set(generalCameraState, 'constraints-none-specified');\n          set(generalMicrophoneState, 'constraints-none-specified');\n        }\n        break;\n      case 'undefined-mediadevices':\n        set(generalCameraState, 'undefined-mediadevices');\n        set(generalMicrophoneState, 'undefined-mediadevices');\n        break;\n      case 'unknown':\n      default:\n        set(generalCameraState, 'unknown');\n        set(generalMicrophoneState, 'unknown');\n        break;\n    }\n  }, [])));\n  /**\n   * Update all device state, when camera is started.\n   */\n  useDailyEvent('started-camera', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(generalCameraState, 'granted');\n    set(generalMicrophoneState, 'granted');\n    updateDeviceStates();\n  }, [updateDeviceStates])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyDevicesContext.Provider, {\n    value: {\n      refreshDevices: refreshDevices\n    }\n  }, children);\n};\n\nvar liveStreamingState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  errorMsg: undefined,\n  isLiveStreaming: false,\n  layout: undefined\n});\nliveStreamingState.debugLabel = jotaiDebugLabel('live-streaming');\nvar DailyLiveStreaming = function DailyLiveStreaming(_a) {\n  var children = _a.children;\n  useDailyEvent('live-streaming-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(liveStreamingState, {\n      isLiveStreaming: true,\n      layout: ev === null || ev === void 0 ? void 0 : ev.layout\n    });\n  }, [])));\n  useDailyEvent('live-streaming-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(liveStreamingState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        isLiveStreaming: false,\n        layout: undefined\n      });\n    });\n  }, [])));\n  useDailyEvent('live-streaming-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(liveStreamingState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        errorMsg: ev.errorMsg\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(liveStreamingState, {\n      errorMsg: undefined,\n      isLiveStreaming: false,\n      layout: undefined\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar meetingStateState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('new');\nmeetingStateState.debugLabel = jotaiDebugLabel('meeting-state');\nvar meetingErrorState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nmeetingErrorState.debugLabel = jotaiDebugLabel('meeting-error');\nvar nonFatalErrorState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nnonFatalErrorState.debugLabel = jotaiDebugLabel('non-fatal-error');\nvar meetingSessionDataState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  data: undefined,\n  topology: 'none'\n});\nmeetingSessionDataState.debugLabel = jotaiDebugLabel('meeting-session-data');\nvar DailyMeeting = function DailyMeeting(_a) {\n  var children = _a.children;\n  var daily = useDaily();\n  /**\n   * Updates meeting state.\n   */\n  var updateMeetingState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    if (!daily) return;\n    var meetingState = daily.meetingState();\n    set(meetingStateState, meetingState);\n    return meetingState;\n  }, [daily]));\n  useDailyEvent('loading', updateMeetingState);\n  useDailyEvent('loaded', updateMeetingState);\n  useDailyEvent('joining-meeting', updateMeetingState);\n  useDailyEvent('joined-meeting', updateMeetingState);\n  useDailyEvent('left-meeting', updateMeetingState);\n  useDailyEvent('error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(meetingErrorState, ev);\n    updateMeetingState();\n  }, [updateMeetingState])));\n  useDailyEvent('nonfatal-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(nonFatalErrorState, ev);\n  }, [])));\n  /**\n   * Updates meeting session state.\n   */\n  var initMeetingSessionState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    if (!daily) return;\n    set(meetingSessionDataState, daily.meetingSessionState());\n  }, [daily]));\n  /**\n   * Initialize state when joined meeting or setting up the hook.\n   */\n  useDailyEvent('joined-meeting', initMeetingSessionState);\n  /**\n   * Update Jotai state whenever meeting session state is updated.\n   */\n  useDailyEvent('meeting-session-state-updated', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(meetingSessionDataState, ev.meetingSessionState);\n  }, [])));\n  /**\n   * Reset Jotai state when meeting ends.\n   */\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(meetingSessionDataState, {\n      data: undefined,\n      topology: 'none'\n    });\n  }, [])));\n  /**\n   * Reset Jotai state when call instance is destroyed.\n   */\n  useDailyEvent('call-instance-destroyed', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(meetingStateState, 'new');\n    set(meetingErrorState, null);\n    set(nonFatalErrorState, null);\n    set(meetingSessionDataState, {\n      data: undefined,\n      topology: 'none'\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar topologyState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('none');\ntopologyState.debugLabel = jotaiDebugLabel('topology');\nvar networkState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('unknown');\nvar networkStateReasons = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)([]);\n// @deprecated\nvar networkQualityState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(100);\nnetworkQualityState.debugLabel = jotaiDebugLabel('network-quality');\n// @deprecated\nvar networkThresholdState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)('good');\nnetworkThresholdState.debugLabel = jotaiDebugLabel('network-threshold');\nvar DailyNetwork = function DailyNetwork(_a) {\n  var children = _a.children;\n  var daily = useDaily();\n  var topology = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(topologyState);\n  var initTopology = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var topology;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!daily) return [2 /*return*/];\n            return [4 /*yield*/, daily.getNetworkTopology()];\n          case 1:\n            topology = _a.sent();\n            if (!topology || (topology === null || topology === void 0 ? void 0 : topology.topology) === 'none') return [2 /*return*/];\n            set(topologyState, topology.topology);\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily]));\n  useDailyEvent('joined-meeting', initTopology);\n  useDailyEvent('network-connection', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    switch (ev.event) {\n      case 'connected':\n        if (ev.type === 'peer-to-peer') set(topologyState, 'peer');\n        if (ev.type === 'sfu') set(topologyState, 'sfu');\n        break;\n    }\n  }, [])));\n  useDailyEvent('network-quality-change', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(networkState, function (prevNetworkState) {\n      return prevNetworkState !== ev.networkState ? ev.networkState : prevNetworkState;\n    });\n    set(networkStateReasons, function (prevReasons) {\n      var _a;\n      var curReasons = (_a = ev.networkStateReasons) !== null && _a !== void 0 ? _a : [];\n      return !arraysDeepEqual(prevReasons, curReasons) ? curReasons : prevReasons;\n    });\n    set(networkQualityState, function (prevQuality) {\n      return prevQuality !== ev.quality ? ev.quality : prevQuality;\n    });\n    set(networkThresholdState, function (prevThreshold) {\n      return prevThreshold !== ev.threshold ? ev.threshold : prevThreshold;\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(topologyState, 'none');\n    set(networkState, 'unknown');\n    set(networkStateReasons, []);\n    set(networkQualityState, 100);\n    set(networkThresholdState, 'good');\n  }, [])));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || topology !== 'none') return;\n    initTopology();\n  }, [daily, initTopology, topology]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar recordingState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  isLocalParticipantRecorded: false,\n  isRecording: false\n});\nrecordingState.debugLabel = jotaiDebugLabel('recording-state');\nvar DailyRecordings = function DailyRecordings(_a) {\n  var children = _a.children;\n  var localSessionId = useLocalSessionId();\n  var recordingParticipantIds = useParticipantIds({\n    filter: 'record'\n  });\n  var maybeUpdateRecordingState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, hasRecordingParticipants, isLocalParticipantRecording) {\n    var oldState = get(recordingState);\n    var s = {\n      isLocalParticipantRecorded: oldState.isLocalParticipantRecorded,\n      isRecording: oldState.isRecording,\n      local: oldState.local,\n      type: oldState.type\n    };\n    var newState = {\n      // In case type is local or not set, determine based on recording participants\n      isLocalParticipantRecorded: (s === null || s === void 0 ? void 0 : s.type) === 'local' || !(s === null || s === void 0 ? void 0 : s.type) ? hasRecordingParticipants : s.isLocalParticipantRecorded,\n      isRecording: (s === null || s === void 0 ? void 0 : s.type) === 'local' || !(s === null || s === void 0 ? void 0 : s.type) ? hasRecordingParticipants : s.isRecording,\n      local: ((s === null || s === void 0 ? void 0 : s.type) === 'local' || !(s === null || s === void 0 ? void 0 : s.type)) && hasRecordingParticipants ? isLocalParticipantRecording : s === null || s === void 0 ? void 0 : s.local,\n      /**\n       * Set type in case recording participants are detected.\n       * We only set `record` on participants, when recording type is 'local'.\n       */\n      type: hasRecordingParticipants ? 'local' : oldState === null || oldState === void 0 ? void 0 : oldState.type\n    };\n    if (customDeepEqual(s, newState)) return;\n    set(recordingState, _assign(_assign({}, s), newState));\n  }, []));\n  /**\n   * Update recording state, whenever amount of recording participants changes.\n   */\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var hasRecordingParticipants = recordingParticipantIds.length > 0;\n    var isLocalParticipantRecording = recordingParticipantIds.includes(localSessionId || 'local');\n    maybeUpdateRecordingState(hasRecordingParticipants, isLocalParticipantRecording);\n  }, [localSessionId, maybeUpdateRecordingState, recordingParticipantIds]);\n  useDailyEvent('recording-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    var _a;\n    var isLocalParticipantRecorded = true;\n    switch (ev.type) {\n      case 'cloud-beta':\n      case 'cloud':\n        {\n          if (localSessionId && ((_a = ev.layout) === null || _a === void 0 ? void 0 : _a.preset) === 'single-participant' && ev.layout.session_id !== localSessionId) {\n            isLocalParticipantRecorded = false;\n          }\n          break;\n        }\n    }\n    set(recordingState, {\n      error: false,\n      isLocalParticipantRecorded: isLocalParticipantRecorded,\n      isRecording: true,\n      layout: ev === null || ev === void 0 ? void 0 : ev.layout,\n      local: ev === null || ev === void 0 ? void 0 : ev.local,\n      recordingId: ev === null || ev === void 0 ? void 0 : ev.recordingId,\n      recordingStartedDate: new Date(),\n      startedBy: ev === null || ev === void 0 ? void 0 : ev.startedBy,\n      type: ev === null || ev === void 0 ? void 0 : ev.type\n    });\n  }, [localSessionId])));\n  useDailyEvent('recording-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        isLocalParticipantRecorded: false,\n        isRecording: false\n      });\n    });\n  }, [])));\n  useDailyEvent('recording-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        error: true,\n        isLocalParticipantRecorded: false,\n        isRecording: false\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(recordingState, {\n      isLocalParticipantRecorded: false,\n      isRecording: false\n    });\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\n/**\n * Returns a meeting's current state.\n */\nvar useMeetingState = function useMeetingState() {\n  var meetingState = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(meetingStateState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(meetingState);\n  return meetingState;\n};\n\nvar roomState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nroomState.debugLabel = jotaiDebugLabel('room-state');\nvar DailyRoom = function DailyRoom(_a) {\n  var children = _a.children;\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateRoom = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var room;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!daily || meetingState === 'left-meeting') return [2 /*return*/];\n            return [4 /*yield*/, daily.room()];\n          case 1:\n            room = _a.sent();\n            if (room && 'id' in room) {\n              set(roomState, room);\n            }\n            return [2 /*return*/, room];\n        }\n      });\n    });\n  }, [daily, meetingState]));\n  useDailyEvent('access-state-updated', updateRoom);\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    return function () {\n      set(roomState, null);\n    };\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar transcriptionState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  isTranscribing: false,\n  model: 'general',\n  language: 'en',\n  transcriptions: []\n});\ntranscriptionState.debugLabel = jotaiDebugLabel('transcription-state');\nvar DailyTranscriptions = function DailyTranscriptions(_a) {\n  var children = _a.children;\n  useDailyEvent('transcription-started', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(transcriptionState, {\n      error: false,\n      transcriptionStartDate: new Date(),\n      isTranscribing: true,\n      transcriptions: [],\n      endpointing: ev.endpointing,\n      extra: ev.extra,\n      includeRawResponse: ev.includeRawResponse,\n      instanceId: ev.instanceId,\n      language: ev.language,\n      model: ev.model,\n      profanity_filter: ev.profanity_filter,\n      punctuate: ev.punctuate,\n      redact: ev.redact,\n      startedBy: ev.startedBy,\n      tier: ev.tier\n    });\n  }, [])));\n  useDailyEvent('transcription-stopped', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    set(transcriptionState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        updatedBy: ev.updatedBy,\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('transcription-error', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(transcriptionState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        error: true,\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('left-meeting', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set) {\n    set(transcriptionState, function (prevState) {\n      return _assign(_assign({}, prevState), {\n        isTranscribing: false\n      });\n    });\n  }, [])));\n  useDailyEvent('app-message', (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, ev) {\n    if ((ev === null || ev === void 0 ? void 0 : ev.fromId) === 'transcription') {\n      set(transcriptionState, function (prevState) {\n        return _assign(_assign({}, prevState), {\n          // setting it to true whenever a new message is received\n          // as the participants who joined after the transcription-started event\n          // won't be knowing if transcription is started or not\n          isTranscribing: true,\n          transcriptions: __spreadArray(__spreadArray([], __read(prevState.transcriptions), false), [ev.data], false)\n        });\n      });\n    }\n  }, [])));\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, children);\n};\n\nvar defaultOptions = {};\nvar defaultShouldCreateInstance = function defaultShouldCreateInstance() {\n  return true;\n};\nvar defaultProps = {\n  options: defaultOptions,\n  shouldCreateInstance: defaultShouldCreateInstance\n};\n/**\n * Helper hook to maintain custom call instances in React codebases.\n */\nvar useCallInstance = function useCallInstance(type, _a) {\n  var _b = _a === void 0 ? defaultProps : _a,\n    parentElRef = _b.parentElRef,\n    _c = _b.options,\n    options = _c === void 0 ? defaultOptions : _c,\n    _d = _b.shouldCreateInstance,\n    shouldCreateInstance = _d === void 0 ? defaultShouldCreateInstance : _d;\n  var _e = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), 2),\n    callInstance = _e[0],\n    setCallInstance = _e[1];\n  /**\n   * Holds last used props when callObject instance was created.\n   */\n  var lastUsedOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    /**\n     * Call frame instances with a defined parentEl likely pass a ref.\n     * Typically a DOM ref is initialized with useRef(null).\n     * We'll want to wait until parentEl is defined, meaning that the ref is\n     * correctly wired up with a DOM element.\n     * Otherwise we'll just check shouldCreateInstance().\n     */\n    if (type === 'callFrame' && (parentElRef === null || parentElRef === void 0 ? void 0 : parentElRef.current) === null || !shouldCreateInstance()) return;\n    function destroyCallInstance(co) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              return [4 /*yield*/, co.destroy()];\n            case 1:\n              _a.sent();\n              return [2 /*return*/];\n          }\n        });\n      });\n    }\n    /**\n     * Once instance is destroyed, nullify callInstance, so a new one can be created.\n     */\n    var handleDestroyedInstance = function handleDestroyedInstance() {\n      /**\n       * Setting a timeout makes sure the destruction and creation\n       * of call instances happen in separate call stacks.\n       * Otherwise there's a risk for duplicate call instances.\n       */\n      setTimeout(function () {\n        return setCallInstance(null);\n      }, 0);\n    };\n    var co = _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCallInstance();\n    /**\n     * In case a call instance exists outside of this hook instance's knowledge,\n     * store it in state.\n     */\n    if (!callInstance && co && !co.isDestroyed()) {\n      co.once('call-instance-destroyed', handleDestroyedInstance);\n      setCallInstance(co);\n      return;\n    }\n    /**\n     * callInstance exists.\n     */\n    if (callInstance) {\n      /**\n       * Props have changed. Destroy current instance, so a new one can be created.\n       */\n      if (!customDeepEqual(lastUsedOptions.current, options)) {\n        destroyCallInstance(callInstance);\n      }\n      /**\n       * Return early.\n       */\n      return;\n    }\n    if (!co || co.isDestroyed()) {\n      /**\n       * callInstance doesn't exist or is destroyed (TODO: Check why getCallInstance() can return a destroyed instance),\n       * but should be created.\n       * Important to spread props, because createCallObject/createFrame alters the passed object (adds layout and dailyJsVersion).\n       */\n      switch (type) {\n        case 'callFrame':\n          co = (parentElRef === null || parentElRef === void 0 ? void 0 : parentElRef.current) ? _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createFrame(parentElRef.current, _assign({}, options)) : _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createFrame(_assign({}, options));\n          break;\n        case 'callObject':\n          co = _daily_co_daily_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].createCallObject(_assign({}, options));\n          break;\n      }\n      lastUsedOptions.current = options;\n    }\n    setCallInstance(co);\n    co.once('call-instance-destroyed', handleDestroyedInstance);\n    /**\n     * No cleanup phase here, because callObject.destroy() returns a Promise.\n     * We can't have asynchronous cleanups in a useEffect.\n     * To avoid infinite render loops we compare the props when creating call object instances.\n     */\n  }, [callInstance, options, parentElRef, shouldCreateInstance, type]);\n  return callInstance;\n};\n\n/**\n * Helper hook to maintain custom callObject instances in React codebases.\n */\nvar useCallObject = function useCallObject(props) {\n  return useCallInstance('callObject', props);\n};\n\nvar DailyProvider = function DailyProvider(_a) {\n  var children = _a.children,\n    jotaiStore = _a.jotaiStore,\n    props = __rest(_a, [\"children\", \"jotaiStore\"]);\n  var eventsMap = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n  /**\n   * Generic event handler to loop through registered event callbacks.\n   */\n  var handleEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    var e_1, _a;\n    var _b, _c;\n    if (!('action' in ev)) return;\n    var event = ev.action;\n    var allHandlers = Array.from((_c = (_b = eventsMap.current) === null || _b === void 0 ? void 0 : _b[event]) !== null && _c !== void 0 ? _c : []);\n    var priorityHandlers = allHandlers.filter(function (_a) {\n      var _b = __read(_a, 1),\n        key = _b[0];\n      return key < 0;\n    });\n    var normalHandlers = allHandlers.filter(function (_a) {\n      var _b = __read(_a, 1),\n        key = _b[0];\n      return key > 0;\n    });\n    var sortedHandlers = __spreadArray(__spreadArray([], __read(priorityHandlers), false), __read(normalHandlers), false);\n    try {\n      for (var sortedHandlers_1 = __values(sortedHandlers), sortedHandlers_1_1 = sortedHandlers_1.next(); !sortedHandlers_1_1.done; sortedHandlers_1_1 = sortedHandlers_1.next()) {\n        var _d = __read(sortedHandlers_1_1.value, 2),\n          cb = _d[1];\n        cb(ev);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (sortedHandlers_1_1 && !sortedHandlers_1_1.done && (_a = sortedHandlers_1[\"return\"])) _a.call(sortedHandlers_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  }, []);\n  /**\n   * In case events are set up via useDailyEvent before a DailyCall instance is available,\n   * we'll register the events whenever daily is set.\n   */\n  var initEventHandlers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (daily) {\n    if (!daily) return;\n    Object.keys(eventsMap.current).forEach(function (event) {\n      daily.off(event, handleEvent);\n      if (!daily.isDestroyed()) {\n        daily.on(event, handleEvent);\n      }\n    });\n  }, [handleEvent]);\n  var externalCallObject = 'callObject' in props ? props.callObject : null;\n  var memoizedOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return 'callObject' in props ? {} : props;\n  }, [props]);\n  var internalCallObject = useCallObject({\n    options: memoizedOptions,\n    shouldCreateInstance: (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n      return !('callObject' in props);\n    }, [props])\n  });\n  var callObject = externalCallObject !== null && externalCallObject !== void 0 ? externalCallObject : internalCallObject;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!callObject) return;\n    initEventHandlers(callObject);\n  }, [callObject, initEventHandlers]);\n  /**\n   * Registers event callback.\n   */\n  var on = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev, cb, key) {\n    var _a, _b;\n    if (!eventsMap.current[ev]) {\n      eventsMap.current[ev] = new Map();\n      if (callObject) {\n        /**\n         * Make sure only 1 event listener is registered at any time for handleEvent.\n         * Otherwise, events sent from daily-js might be handled multiple times.\n         */\n        callObject.off(ev, handleEvent);\n        if (!callObject.isDestroyed()) {\n          callObject.on(ev, handleEvent);\n        }\n      }\n    }\n    if (!((_a = eventsMap.current[ev]) === null || _a === void 0 ? void 0 : _a.has(key))) {\n      (_b = eventsMap.current[ev]) === null || _b === void 0 ? void 0 : _b.set(key, cb);\n    }\n  }, [callObject, handleEvent]);\n  /**\n   * Unregisters event callback.\n   */\n  var off = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev, key) {\n    var _a, _b;\n    (_a = eventsMap.current[ev]) === null || _a === void 0 ? void 0 : _a[\"delete\"](key);\n    if (((_b = eventsMap.current[ev]) === null || _b === void 0 ? void 0 : _b.size) === 0) {\n      callObject === null || callObject === void 0 ? void 0 : callObject.off(ev, handleEvent);\n      delete eventsMap.current[ev];\n    }\n  }, [callObject, handleEvent]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(jotai__WEBPACK_IMPORTED_MODULE_4__.Provider, {\n    store: jotaiStore\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyContext.Provider, {\n    value: callObject\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyEventContext.Provider, {\n    value: {\n      on: on,\n      off: off\n    }\n  }, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyRoom, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyMeeting, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyNetwork, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyParticipants, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyRecordings, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyLiveStreaming, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyTranscriptions, null, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(DailyDevices, null, children)))))))))));\n};\n\n/**\n * Returns the participant identified by the given sessionId.\n * @param sessionId  The participant's session_id or \"local\".\n * @deprecated Use [useParticipantProperty](https://docs.daily.co/reference/daily-react/use-participant-property) instead to only subscribe to required participant properties.\n */\nvar useParticipant = function useParticipant(sessionId, _a) {\n  var _b = _a === void 0 ? {} : _a,\n    onParticipantLeft = _b.onParticipantLeft,\n    onParticipantUpdated = _b.onParticipantUpdated;\n  var participant = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(participantState(sessionId));\n  useThrottledDailyEvent(['participant-updated', 'participant-left'], (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (evts) {\n    var filteredEvts = evts.filter(function (ev) {\n      return ev.participant.session_id === sessionId;\n    });\n    if (!filteredEvts.length) return;\n    filteredEvts.forEach(function (ev) {\n      switch (ev.action) {\n        case 'participant-updated':\n          onParticipantUpdated === null || onParticipantUpdated === void 0 ? void 0 : onParticipantUpdated(ev);\n          break;\n        case 'participant-left':\n          onParticipantLeft === null || onParticipantLeft === void 0 ? void 0 : onParticipantLeft(ev);\n          break;\n      }\n    });\n  }, [onParticipantLeft, onParticipantUpdated, sessionId]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(participant);\n  return participant;\n};\n\n/**\n * Returns the most recent participant mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n * @deprecated Use [useActiveSpeakerId](https://docs.daily.co/reference/daily-react/use-active-speaker-id) instead.\n */\nvar useActiveParticipant = function useActiveParticipant(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    _c = _b.ignoreLocal,\n    ignoreLocal = _c === void 0 ? false : _c,\n    onActiveSpeakerChange = _b.onActiveSpeakerChange;\n  var daily = useDaily();\n  var recentActiveId = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(activeIdState);\n  var _d = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(''), 2),\n    activeId = _d[0],\n    setActiveId = _d[1];\n  var activeParticipant = useParticipant(activeId);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _a;\n    if (!daily) return;\n    var local = (_a = daily === null || daily === void 0 ? void 0 : daily.participants()) === null || _a === void 0 ? void 0 : _a.local;\n    if (ignoreLocal && recentActiveId === (local === null || local === void 0 ? void 0 : local.session_id)) return;\n    // setting activeId as string to avoid passing null to useParticipant hook\n    setActiveId(recentActiveId !== null && recentActiveId !== void 0 ? recentActiveId : '');\n  }, [daily, ignoreLocal, recentActiveId]);\n  useDailyEvent('active-speaker-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onActiveSpeakerChange === null || onActiveSpeakerChange === void 0 ? void 0 : onActiveSpeakerChange(ev);\n  }, [onActiveSpeakerChange]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(activeParticipant);\n  return activeParticipant;\n};\n\n/**\n * React hook to setup [app-message](https://docs.daily.co/reference/daily-js/events/participant-events#app-message) listeners and\n * to send messages via [sendAppMessage](https://docs.daily.co/reference/daily-js/instance-methods/send-app-message).\n */\nvar useAppMessage = function useAppMessage(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onAppMessage = _b.onAppMessage;\n  var daily = useDaily();\n  var sendAppMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (data, to) {\n    if (to === void 0) {\n      to = '*';\n    }\n    if (!daily) return;\n    daily.sendAppMessage(data, to);\n  }, [daily]);\n  var handleAppMessage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onAppMessage === null || onAppMessage === void 0 ? void 0 : onAppMessage(ev, sendAppMessage);\n  }, [onAppMessage, sendAppMessage]);\n  useDailyEvent('app-message', handleAppMessage);\n  return sendAppMessage;\n};\n\nvar audioLevelProcessor = \"\\n    class AudioLevelProcessor extends AudioWorkletProcessor {\\n    volume;\\n    interval;\\n    nextFrame;\\n    \\n    constructor() {\\n      super();\\n      this.volume = 0;\\n      this.interval = 25;\\n      this.nextFrame = this.interval;\\n    }\\n    \\n    get intervalInFrames() {\\n      // sampleRate is globally defined in AudioWorklets.\\n      // See https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletGlobalScope\\n      // eslint-disable-next-line no-undef\\n      return (this.interval / 1000) * sampleRate;\\n    }\\n    \\n    process(inputList) {\\n      const firstInput = inputList[0];\\n    \\n      if (firstInput.length > 0) {\\n        const inputData = firstInput[0];\\n        let total = 0;\\n    \\n        for (let i = 0; i < inputData.length; ++i) {\\n          total += Math.abs(inputData[i]);\\n        }\\n    \\n        const rms = Math.sqrt(total / inputData.length);\\n        this.volume = Math.max(0, Math.min(1, rms));\\n    \\n        this.nextFrame -= inputData.length;\\n        if (this.nextFrame < 0) {\\n          this.nextFrame += this.intervalInFrames;\\n          this.port.postMessage({ volume: this.volume });\\n        }\\n      }\\n    \\n      return true;\\n    }\\n    }\\n    \\n    registerProcessor('audiolevel', AudioLevelProcessor);              \\n\";\nvar inlineAudioWorklet = \"data:application/javascript;charset=utf8,\".concat(encodeURIComponent(audioLevelProcessor));\n\n/**\n * Returns the volume level of a given MediaStreamTrack.\n * @param mediaTrack The MediaStreamTrack to be analysed.\n * @param onVolumeChange The function to execute when the volume changes. Can be used to visualise audio output.\n * @deprecated Use useAudioLevelObserver() instead.\n */\nvar useAudioLevel = function useAudioLevel(mediaTrack, onVolumeChange) {\n  var audioCtx = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function setupStreamAndStartProcessing() {\n    var _this = this;\n    // No mediaTrack. Stop immediately.\n    if (!mediaTrack) return;\n    var AudioCtx = typeof AudioContext !== 'undefined' ? AudioContext : typeof window.webkitAudioContext !== 'undefined' ? window.webkitAudioContext : null;\n    // No AudioContext available in browser. Can't measure audio volume.\n    if (!AudioCtx) return;\n    if (!audioCtx.current) {\n      // No audio context initialized. Initializing now.\n      audioCtx.current = new AudioCtx();\n    }\n    var audioContext = audioCtx.current;\n    // Audio context could not be initialized. Stopping.\n    if (!audioContext) return;\n    // No MediaStream API available (e.g. WebRTC disabled)\n    if (!MediaStream) return;\n    var mediaStreamSource = audioContext.createMediaStreamSource(new MediaStream([mediaTrack]));\n    var node;\n    var gainNode;\n    var startProcessing = function startProcessing() {\n      return __awaiter(_this, void 0, void 0, function () {\n        var e_1;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              _b.trys.push([0, 1,, 6]);\n              node = new AudioWorkletNode(audioContext, 'audiolevel');\n              gainNode = audioContext.createGain();\n              return [3 /*break*/, 6];\n            case 1:\n              _b.sent();\n              _b.label = 2;\n            case 2:\n              _b.trys.push([2, 4,, 5]);\n              return [4 /*yield*/, audioContext.audioWorklet.addModule(inlineAudioWorklet)];\n            case 3:\n              _b.sent();\n              node = new AudioWorkletNode(audioContext, 'audiolevel');\n              gainNode = audioContext.createGain();\n              return [3 /*break*/, 5];\n            case 4:\n              e_1 = _b.sent();\n              console.error(e_1);\n              return [3 /*break*/, 5];\n            case 5:\n              return [3 /*break*/, 6];\n            case 6:\n              if (!(node && gainNode)) return [2 /*return*/];\n              node.port.onmessage = function (event) {\n                var volume = 0;\n                if (event.data.volume) volume = event.data.volume;\n                if (!node) return;\n                onVolumeChange(volume);\n              };\n              gainNode.gain.value = 0;\n              try {\n                mediaStreamSource.connect(node).connect(gainNode).connect(audioContext.destination);\n              } catch (e) {\n                console.warn(e);\n              }\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    startProcessing();\n    return function () {\n      node === null || node === void 0 ? void 0 : node.disconnect();\n      node = null;\n      mediaStreamSource === null || mediaStreamSource === void 0 ? void 0 : mediaStreamSource.disconnect();\n    };\n  }, [onVolumeChange, mediaTrack]);\n};\n\n/**\n * Observes the volume level for a given participant.\n * @param id The session_id of the participant to observe.\n * @param cb The function to execute when the volume changes. Can be used to visualise audio output.\n * @param errorCb Error callback. Called when local audio level observer is not available in browser.\n * @param interval Callbacks will be executed at this freqency. If unspecified, Daily's default frequency is used.\n */\nvar useAudioLevelObserver = function useAudioLevelObserver(id, cb, errorCb, interval) {\n  var daily = useDaily();\n  var localSessionId = useLocalSessionId();\n  var isLocal = id === localSessionId;\n  useDailyEvent('local-audio-level', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (!isLocal) return;\n    cb(ev.audioLevel);\n  }, [cb, isLocal]));\n  useDailyEvent('remote-participants-audio-level', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (isLocal) return;\n    cb(ev.participantsAudioLevel[id]);\n  }, [cb, id, isLocal]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function maybeStartLocalAudioObserver() {\n    if (!daily || daily.isDestroyed() || !isLocal) return;\n    if (daily.isLocalAudioLevelObserverRunning()) return;\n    try {\n      daily.startLocalAudioLevelObserver(interval);\n    } catch (_a) {\n      errorCb === null || errorCb === void 0 ? void 0 : errorCb('Local audio level observer not supported in this browser');\n    }\n  }, [daily, errorCb, interval, isLocal]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function maybeStartRemoteAudioObserver() {\n    if (!daily || daily.isDestroyed() || isLocal) return;\n    if (daily.isRemoteParticipantsAudioLevelObserverRunning()) return;\n    daily.startRemoteParticipantsAudioLevelObserver(interval);\n  }, [daily, interval, isLocal]);\n};\n\n/**\n * Returns a participant's audio track and state.\n * @param participantId The participant's session_id.\n */\nvar useAudioTrack = function useAudioTrack(participantId) {\n  return useMediaTrack(participantId, 'audio');\n};\n\n/**\n * Helper hook to maintain custom callFrame instances in React codebases.\n */\nvar useCallFrame = function useCallFrame(props) {\n  return useCallInstance('callFrame', props);\n};\n\nvar fastDeepEqual;\nvar hasRequiredFastDeepEqual;\nfunction requireFastDeepEqual() {\n  if (hasRequiredFastDeepEqual) return fastDeepEqual;\n  hasRequiredFastDeepEqual = 1;\n\n  // do not edit .js files directly - edit src/index.jst\n\n  fastDeepEqual = function equal(a, b) {\n    if (a === b) return true;\n    if (a && b && _typeof(a) == 'object' && _typeof(b) == 'object') {\n      if (a.constructor !== b.constructor) return false;\n      var length, i, keys;\n      if (Array.isArray(a)) {\n        length = a.length;\n        if (length != b.length) return false;\n        for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n        return true;\n      }\n      if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n      if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n      if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n      keys = Object.keys(a);\n      length = keys.length;\n      if (length !== Object.keys(b).length) return false;\n      for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n      for (i = length; i-- !== 0;) {\n        var key = keys[i];\n        if (!equal(a[key], b[key])) return false;\n      }\n      return true;\n    }\n\n    // true if both NaN, false otherwise\n    return a !== a && b !== b;\n  };\n  return fastDeepEqual;\n}\n\nvar fastDeepEqualExports = requireFastDeepEqual();\nvar deepEqual = /*@__PURE__*/getDefaultExportFromCjs(fastDeepEqualExports);\n\nvar CPULoadState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  state: 'low',\n  reason: 'none'\n});\nCPULoadState.debugLabel = jotaiDebugLabel('cpu-load');\n/**\n * Returns the current CPU load as reported by daily-js [cpu-load-change](https://docs.daily.co/reference/daily-js/events/quality-events#cpu-load-change) events\n * and [getCpuLoadStats](https://docs.daily.co/reference/daily-js/instance-methods/get-cpu-load-stats).\n */\nvar useCPULoad = function useCPULoad(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onCPULoadChange = _b.onCPULoadChange;\n  var cpu = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(CPULoadState);\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateCPULoadState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (get, set, cpu) {\n    var prev = get(CPULoadState); // Get the current CPU load state\n    if (deepEqual(prev, cpu)) return; // Check if the previous state is equal to the current one\n    set(CPULoadState, cpu); // Update the state if different\n  }, []));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var mounted = true;\n    if (!daily || daily.isDestroyed() || meetingState !== 'joined-meeting') return;\n    daily.getCpuLoadStats().then(function (stats) {\n      if (!mounted) return;\n      updateCPULoadState({\n        state: stats.cpuLoadState,\n        reason: stats.cpuLoadStateReason\n      });\n    });\n    return function () {\n      mounted = false;\n    };\n  }, [daily, meetingState, updateCPULoadState]);\n  useDailyEvent('cpu-load-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateCPULoadState({\n      state: ev.cpuLoadState,\n      reason: ev.cpuLoadStateReason\n    });\n    onCPULoadChange === null || onCPULoadChange === void 0 ? void 0 : onCPULoadChange(ev);\n  }, [onCPULoadChange, updateCPULoadState]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(cpu);\n  return cpu;\n};\n\n/**\n * Returns a meeting's last known errors.\n */\nvar useDailyError = function useDailyError() {\n  var meetingError = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(meetingErrorState);\n  var nonFatalError = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(nonFatalErrorState);\n  var result = {\n    meetingError: meetingError,\n    nonFatalError: nonFatalError\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * This hook allows access to information about the user's devices and their state.\n */\nvar useDevices = function useDevices() {\n  var daily = useDaily();\n  var camState = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(generalCameraState);\n  var micState = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(generalMicrophoneState);\n  var camDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(cameraDevicesState);\n  var micDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(microphoneDevicesState);\n  var speakerDevices = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(speakerDevicesState);\n  var cameraError = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(lastCameraErrorState);\n  var refreshDevices = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DailyDevicesContext).refreshDevices;\n  /**\n   * Sets video input device to given deviceId.\n   */\n  var setCamera = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (deviceId) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, daily === null || daily === void 0 ? void 0 : daily.setInputDevicesAsync({\n              audioDeviceId: null,\n              videoDeviceId: deviceId\n            })];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily]);\n  /**\n   * Sets audio input device to given deviceId.\n   */\n  var setMicrophone = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (deviceId) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, daily === null || daily === void 0 ? void 0 : daily.setInputDevicesAsync({\n              audioDeviceId: deviceId,\n              videoDeviceId: null\n            })];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily]);\n  /**\n   * Sets audio output device to given deviceId.\n   */\n  var setSpeaker = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (deviceId) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, daily === null || daily === void 0 ? void 0 : daily.setOutputDeviceAsync({\n              outputDeviceId: deviceId\n            })];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [daily]);\n  var errorStates = ['blocked', 'in-use', 'not-found', 'constraints-invalid', 'constraints-none-specified', 'undefined-mediadevices', 'unknown'];\n  var result = {\n    /**\n     * Most recent error object emitted via [camera-error event](https://docs.daily.co/reference/daily-js/events/meeting-events#camera-error).\n     */\n    cameraError: cameraError,\n    /**\n     * A list of the user's camera (videoinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    cameras: camDevices,\n    /**\n     * The general state for camera access.\n     */\n    camState: camState,\n    /**\n     * Holds the currently selected camera.\n     */\n    currentCam: camDevices.find(function (cam) {\n      return cam.selected;\n    }),\n    /**\n     * Holds the currently selected microphone.\n     */\n    currentMic: micDevices.find(function (mic) {\n      return mic.selected;\n    }),\n    /**\n     * Holds the currently selected speaker.\n     */\n    currentSpeaker: speakerDevices.find(function (speaker) {\n      return speaker.selected;\n    }),\n    /**\n     * Indicates that there's an issue with camera devices.\n     */\n    hasCamError: errorStates.includes(camState),\n    /**\n     * Indicates that there's an issue with microphone devices.\n     */\n    hasMicError: errorStates.includes(micState),\n    /**\n     * A list of the user's microphone (audioinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    microphones: micDevices,\n    /**\n     * The general state for microphone access.\n     */\n    micState: micState,\n    /**\n     * Refreshes the list of devices using [enumerateDevices](https://docs.daily.co/reference/daily-js/instance-methods/enumerate-devices).\n     */\n    refreshDevices: refreshDevices,\n    /**\n     * Allows to switch to the camera with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\n     */\n    setCamera: setCamera,\n    /**\n     * Allows to switch to the microphone with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\n     */\n    setMicrophone: setMicrophone,\n    /**\n     * Allows to switch to the speaker with the specified deviceId. Calls [setOutputDevice](https://docs.daily.co/reference/daily-js/instance-methods/set-output-device) internally.\n     */\n    setSpeaker: setSpeaker,\n    /**\n     * A list of the user's speaker (audiooutput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    speakers: speakerDevices\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar inputSettingsState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\ninputSettingsState.debugLabel = jotaiDebugLabel('input-settings');\nvar useInputSettings = function useInputSettings(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onError = _b.onError,\n    onInputSettingsUpdated = _b.onInputSettingsUpdated;\n  var inputSettings = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(inputSettingsState);\n  var nonFatalError = useDailyError().nonFatalError;\n  var daily = useDaily();\n  var updateInputSettingsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, inputSettings) {\n    set(inputSettingsState, inputSettings);\n  }, []));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily) return;\n    daily.getInputSettings().then(updateInputSettingsState);\n  }, [daily, updateInputSettingsState]);\n  /**\n   * Handle 'input-settings-updated' events.\n   */\n  useDailyEvent('input-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateInputSettingsState(ev.inputSettings);\n    onInputSettingsUpdated === null || onInputSettingsUpdated === void 0 ? void 0 : onInputSettingsUpdated(ev);\n  }, [onInputSettingsUpdated, updateInputSettingsState]));\n  /**\n   * Handle nonfatal errors of type 'input-settings-error'.\n   */\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'input-settings-error') return;\n    onError === null || onError === void 0 ? void 0 : onError(ev);\n  }, [onError]));\n  /**\n   * Calls daily.updateInputSettings internally.\n   */\n  var updateInputSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return daily === null || daily === void 0 ? void 0 : daily.updateInputSettings.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var result = {\n    errorMsg: (nonFatalError === null || nonFatalError === void 0 ? void 0 : nonFatalError.type) === 'input-settings-error' ? nonFatalError.errorMsg : null,\n    inputSettings: inputSettings,\n    updateInputSettings: updateInputSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * This hook allows to setup [live streaming events](https://docs.daily.co/reference/daily-js/events/live-streaming-events),\n * as well as starting, stopping and updating live streams.\n *\n * Returns the current live streaming state, incl. the current layout and potential errorMsg.\n */\nvar useLiveStreaming = function useLiveStreaming(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onLiveStreamingError = _b.onLiveStreamingError,\n    onLiveStreamingStarted = _b.onLiveStreamingStarted,\n    onLiveStreamingStopped = _b.onLiveStreamingStopped,\n    onLiveStreamingUpdated = _b.onLiveStreamingUpdated,\n    onLiveStreamingWarning = _b.onLiveStreamingWarning;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(liveStreamingState);\n  useDailyEvent('live-streaming-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingStarted === null || onLiveStreamingStarted === void 0 ? void 0 : onLiveStreamingStarted(ev);\n  }, [onLiveStreamingStarted]));\n  useDailyEvent('live-streaming-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingStopped === null || onLiveStreamingStopped === void 0 ? void 0 : onLiveStreamingStopped(ev);\n  }, [onLiveStreamingStopped]));\n  useDailyEvent('live-streaming-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingUpdated === null || onLiveStreamingUpdated === void 0 ? void 0 : onLiveStreamingUpdated(ev);\n  }, [onLiveStreamingUpdated]));\n  useDailyEvent('live-streaming-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onLiveStreamingError === null || onLiveStreamingError === void 0 ? void 0 : onLiveStreamingError(ev);\n  }, [onLiveStreamingError]));\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'live-streaming-warning') return;\n    onLiveStreamingWarning === null || onLiveStreamingWarning === void 0 ? void 0 : onLiveStreamingWarning(ev);\n  }, [onLiveStreamingWarning]));\n  var startLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.startLiveStreaming.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var stopLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.stopLiveStreaming.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var updateLiveStreaming = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.updateLiveStreaming.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var result = _assign(_assign({}, state), {\n    startLiveStreaming: startLiveStreaming,\n    stopLiveStreaming: stopLiveStreaming,\n    updateLiveStreaming: updateLiveStreaming\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Returns the [participants() object](https://docs.daily.co/reference/daily-js/instance-methods/participants) for the local user.\n * @deprecated Use [useLocalSessionId](https://docs.daily.co/reference/daily-react/use-local-session-id) instead.\n */\nvar useLocalParticipant = function useLocalParticipant() {\n  var localId = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(localIdState);\n  var localParticipant = useParticipant(localId);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(localParticipant);\n  return localParticipant;\n};\n\n/**\n * Returns a meeting's current session data and topology.\n */\nvar useMeetingSessionState = function useMeetingSessionState(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onError = _b.onError;\n  var meetingSessionState = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(meetingSessionDataState);\n  useDailyEvent('nonfatal-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if (ev.type !== 'meeting-session-data-error') return;\n    onError === null || onError === void 0 ? void 0 : onError(ev);\n  }, [onError]));\n  var result = {\n    data: meetingSessionState === null || meetingSessionState === void 0 ? void 0 : meetingSessionState.data,\n    topology: meetingSessionState === null || meetingSessionState === void 0 ? void 0 : meetingSessionState.topology\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Returns current information about network quality and topology.\n * Allows to setup event listeners for daily's [network events](https://docs.daily.co/reference/daily-js/events/network-events).\n */\nvar useNetwork = function useNetwork(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onNetworkConnection = _b.onNetworkConnection,\n    onNetworkQualityChange = _b.onNetworkQualityChange;\n  var daily = useDaily();\n  var topology = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(topologyState);\n  var networkState$1 = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(networkState);\n  var networkStateReasons$1 = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(networkStateReasons);\n  var quality = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(networkQualityState);\n  var threshold = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(networkThresholdState);\n  useDailyEvent('network-connection', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onNetworkConnection === null || onNetworkConnection === void 0 ? void 0 : onNetworkConnection(ev);\n  }, [onNetworkConnection]));\n  useDailyEvent('network-quality-change', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onNetworkQualityChange === null || onNetworkQualityChange === void 0 ? void 0 : onNetworkQualityChange(ev);\n  }, [onNetworkQualityChange]));\n  var getStats = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var newStats;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, daily === null || daily === void 0 ? void 0 : daily.getNetworkStats()];\n          case 1:\n            newStats = _a.sent();\n            return [2 /*return*/, newStats === null || newStats === void 0 ? void 0 : newStats.stats];\n        }\n      });\n    });\n  }, [daily]);\n  var result = {\n    getStats: getStats,\n    networkState: networkState$1,\n    networkStateReasons: networkStateReasons$1,\n    quality: quality,\n    threshold: threshold,\n    topology: topology\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar participantCountsState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({\n  hidden: 0,\n  present: 0\n});\nparticipantCountsState.debugLabel = jotaiDebugLabel('participant-counts');\n/**\n * Returns participant counts for hidden and present participants.\n */\nvar useParticipantCounts = function useParticipantCounts(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onParticipantCountsUpdated = _b.onParticipantCountsUpdated;\n  var daily = useDaily();\n  var participantCounts = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(participantCountsState);\n  var updateCounts = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, counts) {\n    set(participantCountsState, counts);\n  }, []));\n  useDailyEvent('participant-counts-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateCounts(ev.participantCounts);\n    onParticipantCountsUpdated === null || onParticipantCountsUpdated === void 0 ? void 0 : onParticipantCountsUpdated(ev);\n  }, [onParticipantCountsUpdated, updateCounts]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    updateCounts(daily.participantCounts());\n  }, [daily, updateCounts]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(participantCounts);\n  return participantCounts;\n};\n\n/**\n * Returns parsed permissions for a given participant.\n * In case no `sessionId` is passed, the hook returns permissions for the local participant.\n * @param sessionId The participant's session_id (optional)\n */\nvar usePermissions = function usePermissions(sessionId) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n  var localSessionId = useLocalSessionId();\n  var permissions = useParticipantProperty(sessionId !== null && sessionId !== void 0 ? sessionId : localSessionId, 'permissions');\n  var canSendAudio = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_a = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _a === void 0 ? void 0 : _a.has('audio'));\n  var canSendVideo = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_b = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _b === void 0 ? void 0 : _b.has('video'));\n  var canSendCustomAudio = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_c = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _c === void 0 ? void 0 : _c.has('customAudio'));\n  var canSendCustomVideo = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_d = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _d === void 0 ? void 0 : _d.has('customVideo'));\n  var canSendScreenAudio = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_e = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _e === void 0 ? void 0 : _e.has('screenAudio'));\n  var canSendScreenVideo = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canSend : Boolean((_f = permissions === null || permissions === void 0 ? void 0 : permissions.canSend) === null || _f === void 0 ? void 0 : _f.has('screenVideo'));\n  var canAdminParticipants = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin : Boolean((_g = permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === null || _g === void 0 ? void 0 : _g.has('participants'));\n  var canAdminStreaming = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin : Boolean((_h = permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === null || _h === void 0 ? void 0 : _h.has('streaming'));\n  var canAdminTranscription = typeof (permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === 'boolean' ? permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin : Boolean((_j = permissions === null || permissions === void 0 ? void 0 : permissions.canAdmin) === null || _j === void 0 ? void 0 : _j.has('transcription'));\n  var result = {\n    canAdminParticipants: canAdminParticipants,\n    canAdminStreaming: canAdminStreaming,\n    canAdminTranscription: canAdminTranscription,\n    canSendAudio: canSendAudio,\n    canSendCustomAudio: canSendCustomAudio,\n    canSendCustomVideo: canSendCustomVideo,\n    canSendScreenAudio: canSendScreenAudio,\n    canSendScreenVideo: canSendScreenVideo,\n    canSendVideo: canSendVideo,\n    hasPresence: permissions === null || permissions === void 0 ? void 0 : permissions.hasPresence,\n    permissions: permissions\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar participantReceiveSettingsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_3__.atomFamily)(function (id) {\n  var participantReceiveSettingsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)({}, function (_get, set, newValue) {\n    set(participantReceiveSettingsState(id), newValue);\n  });\n  participantReceiveSettingsAtom.debugLabel = jotaiDebugLabel(\"participant-receive-settings-\".concat(id));\n  return participantReceiveSettingsAtom;\n});\n/**\n * Allows to read and set receiveSettings.\n * In case receiveSettings for participant specified by id are empty, not set or 'inherit',\n * base receiveSettings will be returned.\n * In case meeting is not in joined state, calls to updateReceiveSettings will be silently ignored.\n */\nvar useReceiveSettings = function useReceiveSettings(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    _c = _b.id,\n    id = _c === void 0 ? 'base' : _c,\n    onReceiveSettingsUpdated = _b.onReceiveSettingsUpdated;\n  var _d = __read((0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtom)(participantReceiveSettingsState('base')), 1),\n    baseSettings = _d[0];\n  var _e = __read((0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtom)(participantReceiveSettingsState(id)), 1),\n    receiveSettings = _e[0];\n  var daily = useDaily();\n  var meetingState = useMeetingState();\n  var updateReceiveSettingsState = (0,jotai_utils__WEBPACK_IMPORTED_MODULE_5__.useAtomCallback)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (_get, set, receiveSettings) {\n    var e_1, _a;\n    var ids = __rest(receiveSettings, []);\n    try {\n      for (var _b = __values(Object.entries(ids)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = __read(_c.value, 2),\n          id_1 = _d[0],\n          settings = _d[1];\n        set(participantReceiveSettingsState(id_1), settings);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    if (!(id in ids)) {\n      participantReceiveSettingsState.remove(id);\n    }\n  }, [id] // Dependencies\n  ));\n\n  useDailyEvent('receive-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    updateReceiveSettingsState(ev.receiveSettings);\n    onReceiveSettingsUpdated === null || onReceiveSettingsUpdated === void 0 ? void 0 : onReceiveSettingsUpdated(ev);\n  }, [onReceiveSettingsUpdated, updateReceiveSettingsState]));\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    daily.getReceiveSettings().then(updateReceiveSettingsState);\n  }, [daily, updateReceiveSettingsState]);\n  var updateReceiveSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var _a;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily || meetingState !== 'joined-meeting') return;\n    (_a = daily === null || daily === void 0 ? void 0 : daily.updateReceiveSettings) === null || _a === void 0 ? void 0 : _a.call.apply(_a, __spreadArray([daily], __read(args), false));\n  }, [daily, meetingState]);\n  var result = {\n    receiveSettings: id === 'base' || Object.keys(receiveSettings).length === 0 ? baseSettings : receiveSettings,\n    updateReceiveSettings: updateReceiveSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar useRecording = function useRecording(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onRecordingData = _b.onRecordingData,\n    onRecordingError = _b.onRecordingError,\n    onRecordingStarted = _b.onRecordingStarted,\n    onRecordingStopped = _b.onRecordingStopped;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(recordingState);\n  useDailyEvent('recording-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingStarted === null || onRecordingStarted === void 0 ? void 0 : onRecordingStarted(ev);\n  }, [onRecordingStarted]));\n  useDailyEvent('recording-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingStopped === null || onRecordingStopped === void 0 ? void 0 : onRecordingStopped(ev);\n  }, [onRecordingStopped]));\n  useDailyEvent('recording-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingError === null || onRecordingError === void 0 ? void 0 : onRecordingError(ev);\n  }, [onRecordingError]));\n  useDailyEvent('recording-data', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onRecordingData === null || onRecordingData === void 0 ? void 0 : onRecordingData(ev);\n  }, [onRecordingData]));\n  /**\n   * Starts the recording with the given optional options.\n   */\n  var startRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.startRecording.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  /**\n   * Stops a recording.\n   */\n  var stopRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.stopRecording.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  /**\n   * Updates a running recording's layout configuration.\n   */\n  var updateRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.updateRecording.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var result = _assign(_assign({}, state), {\n    startRecording: startRecording,\n    stopRecording: stopRecording,\n    updateRecording: updateRecording\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Stateful hook to work with room, domain and token configuration for a daily room.\n * Includes room default values.\n */\nvar useRoom = function useRoom() {\n  var room = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(roomState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(room);\n  return room;\n};\n\nvar useRoomExp = function useRoomExp(_a) {\n  var _b, _c, _d, _e, _f, _g;\n  var _h = _a === void 0 ? {} : _a,\n    onCountdown = _h.onCountdown;\n  var localJoinDate = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(localJoinDateState);\n  var room = useRoom();\n  var _j = __read((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), 2),\n    ejectDate = _j[0],\n    setEjectDate = _j[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    var expCandidates = [];\n    var ejectAfterElapsed = (_d = (_b = (_a = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _a === void 0 ? void 0 : _a.eject_after_elapsed) !== null && _b !== void 0 ? _b : (_c = room === null || room === void 0 ? void 0 : room.config) === null || _c === void 0 ? void 0 : _c.eject_after_elapsed) !== null && _d !== void 0 ? _d : 0;\n    if (ejectAfterElapsed && localJoinDate) {\n      expCandidates.push(localJoinDate.getTime() + 1000 * ejectAfterElapsed);\n    }\n    if (((_e = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _e === void 0 ? void 0 : _e.exp) && ((_f = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _f === void 0 ? void 0 : _f.eject_at_token_exp)) {\n      expCandidates.push(room.tokenConfig.exp * 1000);\n    }\n    if (((_g = room === null || room === void 0 ? void 0 : room.config) === null || _g === void 0 ? void 0 : _g.exp) && ((_h = room === null || room === void 0 ? void 0 : room.config) === null || _h === void 0 ? void 0 : _h.eject_at_room_exp)) {\n      expCandidates.push(room.config.exp * 1000);\n    }\n    var newEjectDate = expCandidates.length > 0 ? new Date(Math.min.apply(Math, __spreadArray([], __read(expCandidates), false))) : new Date(0);\n    if (newEjectDate.getTime() === 0) return;\n    setEjectDate(function (oldEjectDate) {\n      return (oldEjectDate === null || oldEjectDate === void 0 ? void 0 : oldEjectDate.getTime()) !== newEjectDate.getTime() ? newEjectDate : oldEjectDate;\n    });\n  }, [localJoinDate, (_b = room === null || room === void 0 ? void 0 : room.config) === null || _b === void 0 ? void 0 : _b.eject_after_elapsed, (_c = room === null || room === void 0 ? void 0 : room.config) === null || _c === void 0 ? void 0 : _c.eject_at_room_exp, (_d = room === null || room === void 0 ? void 0 : room.config) === null || _d === void 0 ? void 0 : _d.exp, (_e = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _e === void 0 ? void 0 : _e.eject_after_elapsed, (_f = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _f === void 0 ? void 0 : _f.eject_at_token_exp, (_g = room === null || room === void 0 ? void 0 : room.tokenConfig) === null || _g === void 0 ? void 0 : _g.exp]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!ejectDate || ejectDate.getTime() === 0) return;\n    var interval = setInterval(function () {\n      var _a;\n      var eject = ((_a = ejectDate === null || ejectDate === void 0 ? void 0 : ejectDate.getTime()) !== null && _a !== void 0 ? _a : 0) / 1000;\n      var now = Date.now() / 1000;\n      var diff = eject - now;\n      if (diff < 0) return;\n      var hours = Math.max(0, Math.floor(diff / 3600));\n      var minutes = Math.max(0, Math.floor(diff % 3600 / 60));\n      var seconds = Math.max(0, Math.floor(diff % 60));\n      onCountdown === null || onCountdown === void 0 ? void 0 : onCountdown({\n        hours: hours,\n        minutes: minutes,\n        seconds: seconds\n      });\n    }, 1000);\n    return function () {\n      clearInterval(interval);\n    };\n  }, [ejectDate, onCountdown]);\n  var result = {\n    ejectDate: ejectDate\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Returns a participant's screenAudio track and state.\n * @param participantId The participant's session_id.\n */\nvar useScreenAudioTrack = function useScreenAudioTrack(participantId) {\n  return useMediaTrack(participantId, 'screenAudio');\n};\n\n/**\n * Returns a participant's screenVideo track and state.\n * @param participantId The participant's session_id.\n */\nvar useScreenVideoTrack = function useScreenVideoTrack(participantId) {\n  return useMediaTrack(participantId, 'screenVideo');\n};\n\nvar sendSettingsState = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null);\nsendSettingsState.debugLabel = jotaiDebugLabel('send-settings');\n/**\n * Returns the current media send settings and an updater function to change the settings.\n */\nvar useSendSettings = function useSendSettings(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onSendSettingsUpdated = _b.onSendSettingsUpdated;\n  var daily = useDaily();\n  var _c = __read((0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtom)(sendSettingsState), 2),\n    sendSettings = _c[0],\n    setSendSettings = _c[1];\n  useDailyEvent('send-settings-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    setSendSettings(ev.sendSettings);\n    onSendSettingsUpdated === null || onSendSettingsUpdated === void 0 ? void 0 : onSendSettingsUpdated(ev);\n  }, [onSendSettingsUpdated, setSendSettings]));\n  var storeSendSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (sendSettings) {\n    setSendSettings(sendSettings);\n  }, [setSendSettings]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!daily || daily.isDestroyed()) return;\n    storeSendSettings(daily.getSendSettings());\n  }, [daily, storeSendSettings]);\n  /**\n   * Updates the local clients send settings.\n   * See https://docs.daily.co/reference/daily-js/instance-methods/update-send-settings for details.\n   */\n  var updateSendSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return __awaiter(void 0, void 0, void 0, function () {\n      var newSendSettings;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, daily === null || daily === void 0 ? void 0 : daily.updateSendSettings.apply(daily, __spreadArray([], __read(args), false))];\n          case 1:\n            newSendSettings = _a.sent();\n            if (!newSendSettings) return [2 /*return*/];\n            storeSendSettings(newSendSettings);\n            return [2 /*return*/, newSendSettings];\n        }\n      });\n    });\n  }, [daily, storeSendSettings]);\n  var result = {\n    sendSettings: sendSettings,\n    updateSendSettings: updateSendSettings\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\nvar useTranscription = function useTranscription(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onTranscriptionAppData = _b.onTranscriptionAppData,\n    onTranscriptionError = _b.onTranscriptionError,\n    onTranscriptionMessage = _b.onTranscriptionMessage,\n    onTranscriptionStarted = _b.onTranscriptionStarted,\n    onTranscriptionStopped = _b.onTranscriptionStopped;\n  var daily = useDaily();\n  var state = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(transcriptionState);\n  useDailyEvent('transcription-started', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionStarted === null || onTranscriptionStarted === void 0 ? void 0 : onTranscriptionStarted(ev);\n  }, [onTranscriptionStarted]));\n  useDailyEvent('transcription-stopped', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionStopped === null || onTranscriptionStopped === void 0 ? void 0 : onTranscriptionStopped(ev);\n  }, [onTranscriptionStopped]));\n  useDailyEvent('transcription-error', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionError === null || onTranscriptionError === void 0 ? void 0 : onTranscriptionError(ev);\n  }, [onTranscriptionError]));\n  useDailyEvent('transcription-message', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onTranscriptionMessage === null || onTranscriptionMessage === void 0 ? void 0 : onTranscriptionMessage(ev);\n  }, [onTranscriptionMessage]));\n  useDailyEvent('app-message', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    if ((ev === null || ev === void 0 ? void 0 : ev.fromId) === 'transcription') {\n      onTranscriptionAppData === null || onTranscriptionAppData === void 0 ? void 0 : onTranscriptionAppData(ev);\n    }\n  }, [onTranscriptionAppData]));\n  /**\n   * Starts the transcription with the given optional options.\n   */\n  var startTranscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.startTranscription.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  /**\n   * Stops a transcription.\n   */\n  var stopTranscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!daily) return;\n    daily.stopTranscription.apply(daily, __spreadArray([], __read(args), false));\n  }, [daily]);\n  var result = _assign(_assign({}, state), {\n    startTranscription: startTranscription,\n    stopTranscription: stopTranscription\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n/**\n * Returns a participant's video track and state.\n * @param participantId The participant's session_id.\n */\nvar useVideoTrack = function useVideoTrack(participantId) {\n  return useMediaTrack(participantId, 'video');\n};\n\n/**\n * Hook to access and manage waiting participants.\n */\nvar useWaitingParticipants = function useWaitingParticipants(_a) {\n  var _b = _a === void 0 ? {} : _a,\n    onWaitingParticipantAdded = _b.onWaitingParticipantAdded,\n    onWaitingParticipantRemoved = _b.onWaitingParticipantRemoved,\n    onWaitingParticipantUpdated = _b.onWaitingParticipantUpdated;\n  var daily = useDaily();\n  var waitingParticipants = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.useAtomValue)(allWaitingParticipantsSelector(undefined));\n  useDailyEvent('waiting-participant-added', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantAdded === null || onWaitingParticipantAdded === void 0 ? void 0 : onWaitingParticipantAdded(ev);\n  }, [onWaitingParticipantAdded]));\n  useDailyEvent('waiting-participant-removed', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantRemoved === null || onWaitingParticipantRemoved === void 0 ? void 0 : onWaitingParticipantRemoved(ev);\n  }, [onWaitingParticipantRemoved]));\n  useDailyEvent('waiting-participant-updated', (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (ev) {\n    onWaitingParticipantUpdated === null || onWaitingParticipantUpdated === void 0 ? void 0 : onWaitingParticipantUpdated(ev);\n  }, [onWaitingParticipantUpdated]));\n  var updateWaitingParticipantAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id, grantRequestedAccess) {\n    if (id === '*') {\n      daily === null || daily === void 0 ? void 0 : daily.updateWaitingParticipants({\n        '*': {\n          grantRequestedAccess: grantRequestedAccess\n        }\n      });\n      return;\n    }\n    daily === null || daily === void 0 ? void 0 : daily.updateWaitingParticipant(id, {\n      grantRequestedAccess: grantRequestedAccess\n    });\n  }, [daily]);\n  var grantAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id) {\n    updateWaitingParticipantAccess(id, true);\n  }, [updateWaitingParticipantAccess]);\n  var denyAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (id) {\n    updateWaitingParticipantAccess(id, false);\n  }, [updateWaitingParticipantAccess]);\n  var result = {\n    waitingParticipants: waitingParticipants,\n    grantAccess: grantAccess,\n    denyAccess: denyAccess\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(result);\n  return result;\n};\n\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZGFpbHktY28vZGFpbHktcmVhY3QvZGlzdC9pbmRleC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUN3RztBQUNwRztBQUN2Qjs7QUFFdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkMsT0FBTztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRIQUE0SCxjQUFjO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpREFBaUQsaUJBQWlCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsU0FBUztBQUN0QjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsbUJBQW1CO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsR0FBRztBQUNoQixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsR0FBRztBQUNoQixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxHQUFHO0FBQ2hCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxHQUFHO0FBQ2hCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LGtEQUFXO0FBQ3JDO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLG9EQUFhO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtREFBWTtBQUN4Qyw2Q0FBNkMsa0RBQVc7QUFDeEQ7QUFDQSxHQUFHO0FBQ0gsK0NBQStDLGtEQUFXO0FBQzFEO0FBQ0EsR0FBRztBQUNILCtDQUErQyxrREFBVztBQUMxRDtBQUNBLEdBQUc7QUFDSCx1Q0FBdUMsa0RBQVc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsb0JBQW9CLGtEQUFXO0FBQy9CO0FBQ0EsR0FBRztBQUNILG1CQUFtQixrREFBVztBQUM5QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxvREFBYTtBQUNmO0FBQ0E7O0FBRWl0QjtBQUNqdEIiLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxub2RlX21vZHVsZXNcXEBkYWlseS1jb1xcZGFpbHktcmVhY3RcXGRpc3RcXGluZGV4LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tRmFtaWx5LCB1c2VBdG9tQ2FsbGJhY2sgfSBmcm9tICdqb3RhaS91dGlscyc7XG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRGVidWdWYWx1ZSwgdXNlU3RhdGUsIHVzZVJlZiwgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgbWVtbywgZm9yd2FyZFJlZiwgdXNlSW1wZXJhdGl2ZUhhbmRsZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGF0b20sIHVzZUF0b21WYWx1ZSwgUHJvdmlkZXIsIHVzZUF0b20gfSBmcm9tICdqb3RhaSc7XG5pbXBvcnQgRGFpbHkgZnJvbSAnQGRhaWx5LWNvL2RhaWx5LWpzJztcblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn1cblxudmFyIF9hc3NpZ24gPSBmdW5jdGlvbiBfX2Fzc2lnbigpIHtcbiAgX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9O1xuICByZXR1cm4gX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbmZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKSBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKSB0W3BbaV1dID0gc1twW2ldXTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkge1xuICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7XG4gICAgfVxuICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XG4gIHZhciBfID0ge1xuICAgICAgbGFiZWw6IDAsXG4gICAgICBzZW50OiBmdW5jdGlvbiBzZW50KCkge1xuICAgICAgICBpZiAodFswXSAmIDEpIHRocm93IHRbMV07XG4gICAgICAgIHJldHVybiB0WzFdO1xuICAgICAgfSxcbiAgICAgIHRyeXM6IFtdLFxuICAgICAgb3BzOiBbXVxuICAgIH0sXG4gICAgZixcbiAgICB5LFxuICAgIHQsXG4gICAgZztcbiAgcmV0dXJuIGcgPSB7XG4gICAgbmV4dDogdmVyYigwKSxcbiAgICBcInRocm93XCI6IHZlcmIoMSksXG4gICAgXCJyZXR1cm5cIjogdmVyYigyKVxuICB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHN0ZXAoW24sIHZdKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdCA9IG9wO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgXy5sYWJlbCsrO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogb3BbMV0sXG4gICAgICAgICAgICBkb25lOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBfLmxhYmVsKys7XG4gICAgICAgICAgeSA9IG9wWzFdO1xuICAgICAgICAgIG9wID0gWzBdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgb3AgPSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICBfLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHtcbiAgICAgICAgICAgIF8gPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgb3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpIHtcbiAgICAgICAgICAgIF8ubGFiZWwgPSBvcFsxXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHtcbiAgICAgICAgICAgIF8ubGFiZWwgPSB0WzFdO1xuICAgICAgICAgICAgdCA9IG9wO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7XG4gICAgICAgICAgICBfLmxhYmVsID0gdFsyXTtcbiAgICAgICAgICAgIF8ub3BzLnB1c2gob3ApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICBfLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBvcCA9IFs2LCBlXTtcbiAgICAgIHkgPSAwO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBmID0gdCA9IDA7XG4gICAgfVxuICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCxcbiAgICAgIGRvbmU6IHRydWVcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XG4gIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvcixcbiAgICBtID0gcyAmJiBvW3NdLFxuICAgIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG8gJiYgb1tpKytdLFxuICAgICAgICBkb25lOiAhb1xuICAgICAgfTtcbiAgICB9XG4gIH07XG4gIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn1cbmZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XG4gIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgaWYgKCFtKSByZXR1cm4gbztcbiAgdmFyIGkgPSBtLmNhbGwobyksXG4gICAgcixcbiAgICBhciA9IFtdLFxuICAgIGU7XG4gIHRyeSB7XG4gICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZSA9IHtcbiAgICAgIGVycm9yOiBlcnJvclxuICAgIH07XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoZSkgdGhyb3cgZS5lcnJvcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyO1xufVxuZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICBhcltpXSA9IGZyb21baV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XG4gIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xufTtcblxudmFyIERhaWx5Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5cbi8qKlxuICogUmV0dXJucyBjYWxsT2JqZWN0IGluc3RhbmNlIHBhc3NlZCB0byBvciBjcmVhdGVkIGJ5IGNsb3Nlc3QgPERhaWx5UHJvdmlkZXI+LlxuICovXG52YXIgdXNlRGFpbHkgPSBmdW5jdGlvbiB1c2VEYWlseSgpIHtcbiAgdmFyIGRhaWx5ID0gdXNlQ29udGV4dChEYWlseUNvbnRleHQpO1xuICB1c2VEZWJ1Z1ZhbHVlKGRhaWx5KTtcbiAgcmV0dXJuIGRhaWx5O1xufTtcblxudmFyIERhaWx5RXZlbnRDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gIG9uOiBmdW5jdGlvbiBvbigpIHt9LFxuICBvZmY6IGZ1bmN0aW9uIG9mZigpIHt9XG59KTtcblxudmFyIHByaW9yaXR5Q291bnRlciA9IC0xO1xudmFyIGdldFByaW9yaXR5VW5pcXVlID0gZnVuY3Rpb24gZ2V0UHJpb3JpdHlVbmlxdWUoKSB7XG4gIHJldHVybiBwcmlvcml0eUNvdW50ZXItLTtcbn07XG52YXIgdW5pcXVlQ291bnRlciA9IDE7XG52YXIgZ2V0VW5pcXVlID0gZnVuY3Rpb24gZ2V0VW5pcXVlKCkge1xuICByZXR1cm4gdW5pcXVlQ291bnRlcisrO1xufTtcbi8qKlxuICogU2V0cyB1cCBhIGRhaWx5IGV2ZW50IGxpc3RlbmVyIHVzaW5nIFtvbl0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL29uKSBtZXRob2QuXG4gKiBXaGVuIHRoaXMgaG9vayBpcyB1bm1vdW50ZWQgdGhlIGV2ZW50IGxpc3RlbmVyIGlzIHVucmVnaXN0ZXJlZCB1c2luZyBbb2ZmXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvb2ZmKS5cbiAqXG4gKiBXYXJuaW5nOiBjYWxsYmFjayBoYXMgdG8gYmUgYSBtZW1vaXplZCByZWZlcmVuY2UgKGUuZy4gdmlhIFt1c2VDYWxsYmFja10oaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2hvb2tzLXJlZmVyZW5jZS5odG1sI3VzZWNhbGxiYWNrKSkuXG4gKiBPdGhlcndpc2UgYSBjb25zb2xlIGVycm9yIG1pZ2h0IGJlIHRocm93biBpbmRpY2F0aW5nIGEgcmUtcmVuZGVyIGxvb3AgaXNzdWUuXG4gKlxuICogQHBhcmFtIGV2IFRoZSBEYWlseUV2ZW50IHRvIHJlZ2lzdGVyLlxuICogQHBhcmFtIGNhbGxiYWNrIEEgbWVtb2l6ZWQgY2FsbGJhY2sgcmVmZXJlbmNlIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLlxuICovXG52YXIgdXNlRGFpbHlFdmVudCA9IGZ1bmN0aW9uIHVzZURhaWx5RXZlbnQoZXYsIGNhbGxiYWNrLCBJTlRFUk5BTF9wcmlvcml0eSkge1xuICBpZiAoSU5URVJOQUxfcHJpb3JpdHkgPT09IHZvaWQgMCkge1xuICAgIElOVEVSTkFMX3ByaW9yaXR5ID0gZmFsc2U7XG4gIH1cbiAgdmFyIF9hID0gdXNlQ29udGV4dChEYWlseUV2ZW50Q29udGV4dCksXG4gICAgb2ZmID0gX2Eub2ZmLFxuICAgIG9uID0gX2Eub247XG4gIHZhciBfYiA9IF9fcmVhZCh1c2VTdGF0ZShmYWxzZSksIDIpLFxuICAgIGlzQmxvY2tlZCA9IF9iWzBdLFxuICAgIHNldElzQmxvY2tlZCA9IF9iWzFdO1xuICB2YXIgcmVhc3NpZ25Db3VudCA9IHVzZVJlZigwKTtcbiAgdmFyIGV2ZW50SWQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gSU5URVJOQUxfcHJpb3JpdHkgPyBnZXRQcmlvcml0eVVuaXF1ZSgpIDogZ2V0VW5pcXVlKCk7XG4gIH0sIFtJTlRFUk5BTF9wcmlvcml0eV0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZXYgfHwgaXNCbG9ja2VkKSByZXR1cm47XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY2FsbGJhY2sgaGFzIGJlZW4gcmVhc3NpZ25lZCBvZnRlbiBlbm91Z2ggd2l0aG91dCBoaXR0aW5nIHRoZSA1MG1zIHRpbWVvdXQuXG4gICAgICovXG4gICAgaWYgKHJlYXNzaWduQ291bnQuY3VycmVudCA+IDEwMDAwMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcInVzZURhaWx5RXZlbnQgY2FsbGVkIHdpdGggcG90ZW50aWFsbHkgbm9uLW1lbW9pemVkIGV2ZW50IGNhbGxiYWNrIG9yIGR1ZSB0byB0b28gbWFueSByZS1yZW5kZXJzLlxcbiAgICAgICAgTWVtb2l6ZSB1c2luZyB1c2VDYWxsYmFjayB0byBhdm9pZCByZS1yZW5kZXIgbG9vcCBvciByZWR1Y2UgdGhlIGFtb3VudCBvZiBzdGF0ZSB0cmFuc2l0aW9ucyB0aGUgY2FsbGJhY2sgZGVwZW5kcyBvbi5cXG4gICAgICAgIFBhc3NlZCBjYWxsYmFjayBmb3IgJ1wiLmNvbmNhdChldiwgXCInIGV2ZW50IGlzIE5PVCByZWdpc3RlcmVkLlwiKSwgY2FsbGJhY2spO1xuICAgICAgc2V0SXNCbG9ja2VkKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWFzc2lnbkNvdW50LmN1cnJlbnQrKztcbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgcmVhc3NpZ25Db3VudC5jdXJyZW50ID0gMDtcbiAgICB9LCA1MCk7XG4gICAgb24oZXYsIGNhbGxiYWNrLCBldmVudElkKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgb2ZmKGV2LCBldmVudElkKTtcbiAgICB9O1xuICB9LCBbY2FsbGJhY2ssIGV2LCBldmVudElkLCBpc0Jsb2NrZWQsIG9mZiwgb25dKTtcbiAgdXNlRGVidWdWYWx1ZSh7XG4gICAgZXZlbnQ6IGV2LFxuICAgIGV2ZW50SWQ6IGV2ZW50SWQsXG4gICAgaXNCbG9ja2VkOiBpc0Jsb2NrZWQsXG4gICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyB0d28gdmFyaWFibGVzIGZvciBkZWVwIGVxdWFsaXR5LlxuICogR3JhY2VmdWxseSBoYW5kbGVzIGVxdWFsaXR5IGNoZWNrcyBvbiBNZWRpYVN0cmVhbVRyYWNrcyBieSBjb21wYXJpbmcgdGhlaXIgaWRzLlxuICovXG5mdW5jdGlvbiBjdXN0b21EZWVwRXF1YWwoYSwgYikge1xuICB2YXIgZV8xLCBfYTtcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICAvLyBIYW5kbGUgYXJyYXlzIHNlcGFyYXRlbHlcbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghY3VzdG9tRGVlcEVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIEhhbmRsZSBzcGVjaWZpYyBjYXNlcyBsaWtlIE1lZGlhU3RyZWFtLCBNZWRpYVN0cmVhbVRyYWNrLCBEYXRlLCBldGMuXG4gIGlmIChNZWRpYVN0cmVhbSkge1xuICAgIGlmIChhIGluc3RhbmNlb2YgTWVkaWFTdHJlYW0gJiYgYiBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKSB7XG4gICAgICByZXR1cm4gYS5pZCA9PT0gYi5pZCAmJiBhLmFjdGl2ZSA9PT0gYi5hY3RpdmUgJiYgYS5nZXRUcmFja3MoKS5sZW5ndGggPT09IGIuZ2V0VHJhY2tzKCkubGVuZ3RoICYmIGEuZ2V0VHJhY2tzKCkuZXZlcnkoZnVuY3Rpb24gKHRyYWNrLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbURlZXBFcXVhbCh0cmFjaywgYi5nZXRUcmFja3MoKVtpZHhdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlIGZvciBNZWRpYVN0cmVhbVRyYWNrXG4gIGlmIChNZWRpYVN0cmVhbVRyYWNrKSB7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrICYmIGIgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbVRyYWNrKSB7XG4gICAgICByZXR1cm4gYS5pZCA9PT0gYi5pZCAmJiBhLmtpbmQgPT09IGIua2luZCAmJiBhLnJlYWR5U3RhdGUgPT09IGIucmVhZHlTdGF0ZTtcbiAgICB9XG4gIH1cbiAgLy8gSGFuZGxlIHNwZWNpYWwgY2FzZSBmb3IgRGF0ZVxuICBpZiAoYSBpbnN0YW5jZW9mIERhdGUgJiYgYiBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICB9XG4gIC8vIEhhbmRsZSBzcGVjaWFsIGNhc2UgZm9yIFJlZ0V4cFxuICBpZiAoYSBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBiIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICB9XG4gIC8vIEhhbmRsZSBTZXQgY29tcGFyaXNvbnNcbiAgaWYgKGEgaW5zdGFuY2VvZiBTZXQgJiYgYiBpbnN0YW5jZW9mIFNldCkge1xuICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBhcnJBID0gQXJyYXkuZnJvbShhKS5zb3J0KCk7XG4gICAgdmFyIGFyckJfMSA9IEFycmF5LmZyb20oYikuc29ydCgpO1xuICAgIHJldHVybiBhcnJBLmV2ZXJ5KGZ1bmN0aW9uICh2YWwsIGlkeCkge1xuICAgICAgcmV0dXJuIGN1c3RvbURlZXBFcXVhbCh2YWwsIGFyckJfMVtpZHhdKTtcbiAgICB9KTtcbiAgfVxuICAvLyBIYW5kbGUgTWFwIGNvbXBhcmlzb25zXG4gIGlmIChhIGluc3RhbmNlb2YgTWFwICYmIGIgaW5zdGFuY2VvZiBNYXApIHtcbiAgICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyhhLmVudHJpZXMoKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcbiAgICAgICAgdmFyIF9kID0gX19yZWFkKF9jLnZhbHVlLCAyKSxcbiAgICAgICAgICBrZXkgPSBfZFswXSxcbiAgICAgICAgICB2YWx1ZSA9IF9kWzFdO1xuICAgICAgICBpZiAoIWIuaGFzKGtleSkgfHwgIWN1c3RvbURlZXBFcXVhbCh2YWx1ZSwgYi5nZXQoa2V5KSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlXzFfMSkge1xuICAgICAgZV8xID0ge1xuICAgICAgICBlcnJvcjogZV8xXzFcbiAgICAgIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYltcInJldHVyblwiXSkpIF9hLmNhbGwoX2IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyBQcmltaXRpdmUgdHlwZXMgYW5kIG51bGwgY2hlY2tzXG4gIGlmIChfdHlwZW9mKGEpICE9PSAnb2JqZWN0JyB8fCBhID09PSBudWxsIHx8IF90eXBlb2YoYikgIT09ICdvYmplY3QnIHx8IGIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gR2VuZXJpYyBvYmplY3QgaGFuZGxpbmdcbiAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMoYSk7XG4gIHZhciBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzQVtpXTtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBrZXkpIHx8ICFjdXN0b21EZWVwRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFsbCBrZXlzIGFuZCB2YWx1ZXMgbWF0Y2ggLT4gdGhlIG9iamVjdHMgYXJlIGRlZXBseSBlcXVhbFxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQ29tcGFyaXNvbiBmdW5jdGlvbiBvcHRpbWl6ZWQgZm9yIGNvbXBhcmluZyBhcnJheXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5c0RlZXBFcXVhbChhLCBiKSB7XG4gIC8vIENoZWNrIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICAvLyBDaGVjayBpZiBib3RoIGFycmF5cyBhcmUgb2YgdGhlIHNhbWUgbGVuZ3RoXG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgLy8gQ29tcGFyZSBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciB2YWx1ZUEgPSBhW2ldO1xuICAgIHZhciB2YWx1ZUIgPSBiW2ldO1xuICAgIHZhciBpc0NvbXBsZXhUeXBlQSA9IHZhbHVlQSAhPT0gbnVsbCAmJiBfdHlwZW9mKHZhbHVlQSkgPT09ICdvYmplY3QnO1xuICAgIHZhciBpc0NvbXBsZXhUeXBlQiA9IHZhbHVlQiAhPT0gbnVsbCAmJiBfdHlwZW9mKHZhbHVlQikgPT09ICdvYmplY3QnO1xuICAgIC8vIFVzZSBjdXN0b21EZWVwRXF1YWwgb25seSBpZiBlaXRoZXIgdmFsdWUgaXMgYSBjb21wbGV4IHR5cGVcbiAgICBpZiAoaXNDb21wbGV4VHlwZUEgfHwgaXNDb21wbGV4VHlwZUIpIHtcbiAgICAgIGlmICghY3VzdG9tRGVlcEVxdWFsKHZhbHVlQSwgdmFsdWVCKSkgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodmFsdWVBICE9PSB2YWx1ZUIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGpvdGFpRGVidWdMYWJlbChsYWJlbCkge1xuICByZXR1cm4gJ2RhaWx5LXJlYWN0LScgKyBsYWJlbDtcbn1cbmZ1bmN0aW9uIGVxdWFsQXRvbUZhbWlseShvcHRpb25zKSB7XG4gIHZhciBhdG9tQ2FjaGUgPSBuZXcgTWFwKCk7XG4gIHZhciBwcmlvclZhbHVlcyA9IG5ldyBNYXAoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbSkge1xuICAgIGlmICghYXRvbUNhY2hlLmhhcyhwYXJhbSkpIHtcbiAgICAgIHZhciBiYXNlQXRvbSA9IGF0b20oZnVuY3Rpb24gKGdldCkge1xuICAgICAgICB2YXIgZGVyaXZlZFZhbHVlID0gb3B0aW9ucy5nZXQocGFyYW0pKGdldCk7XG4gICAgICAgIHZhciBwcmlvciA9IHByaW9yVmFsdWVzLmdldChwYXJhbSk7XG4gICAgICAgIGlmIChwcmlvciAhPSBudWxsICYmIG9wdGlvbnMuZXF1YWxzKGRlcml2ZWRWYWx1ZSwgcHJpb3IpKSB7XG4gICAgICAgICAgcmV0dXJuIHByaW9yO1xuICAgICAgICB9XG4gICAgICAgIHByaW9yVmFsdWVzLnNldChwYXJhbSwgZGVyaXZlZFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGRlcml2ZWRWYWx1ZTtcbiAgICAgIH0pO1xuICAgICAgYXRvbUNhY2hlLnNldChwYXJhbSwgYmFzZUF0b20pO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbUNhY2hlLmdldChwYXJhbSk7XG4gIH07XG59XG5cbnZhciBERUxJTSA9ICc6Oic7XG52YXIgUEFUSFNfREVMSU0gPSAnOyc7XG52YXIgZ2V0UHJvcGVydHlQYXJhbSA9IGZ1bmN0aW9uIGdldFByb3BlcnR5UGFyYW0oaWQsIHByb3BlcnR5KSB7XG4gIHJldHVybiBpZCArIERFTElNICsgcHJvcGVydHk7XG59O1xudmFyIGdldFByb3BlcnRpZXNQYXJhbSA9IGZ1bmN0aW9uIGdldFByb3BlcnRpZXNQYXJhbShpZCwgcHJvcGVydGllcykge1xuICByZXR1cm4gaWQgKyBERUxJTSArIHByb3BlcnRpZXMuam9pbihQQVRIU19ERUxJTSk7XG59O1xudmFyIGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tID0gZnVuY3Rpb24gZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsIHByb3BlcnR5KSB7XG4gIHJldHVybiBwYXJ0aWNpcGFudFByb3BlcnR5U3RhdGUoZ2V0UHJvcGVydHlQYXJhbShpZCwgcHJvcGVydHkpKTtcbn07XG4vKipcbiAqIFN0b3JlcyBhbGwgcHJvcGVydHkgcGF0aHMgZm9yIGEgZ2l2ZW4gcGFydGljaXBhbnQuXG4gKi9cbnZhciBwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZSA9IGF0b21GYW1pbHkoZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNBdG9tID0gYXRvbShbXSk7XG4gIHBhcnRpY2lwYW50UHJvcGVydHlQYXRoc0F0b20uZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbChcInBhcnRpY2lwYW50LXByb3BlcnR5LXBhdGhzLVwiLmNvbmNhdChpZCkpO1xuICByZXR1cm4gcGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzQXRvbTtcbn0pO1xuLyoqXG4gKiBTdG9yZXMgcmVzb2x2ZWQgdmFsdWVzIGZvciBlYWNoIHBhcnRpY2lwYW50IGFuZCBwcm9wZXJ0eSBwYXRoLlxuICovXG52YXIgcGFydGljaXBhbnRQcm9wZXJ0eVN0YXRlID0gYXRvbUZhbWlseShmdW5jdGlvbiAocGFyYW0pIHtcbiAgdmFyIHBhcnRpY2lwYW50UHJvcGVydHlBdG9tID0gYXRvbShudWxsKTtcbiAgcGFydGljaXBhbnRQcm9wZXJ0eUF0b20uZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbChcInBhcnRpY2lwYW50LXByb3BlcnR5LVwiLmNvbmNhdChwYXJhbSkpO1xuICByZXR1cm4gcGFydGljaXBhbnRQcm9wZXJ0eUF0b207XG59KTtcbi8qKlxuICogU3RvcmVzIHJlc29sdmVkIHZhbHVlcyBmb3IgZWFjaCBwYXJ0aWNpcGFudCBhbmQgcHJvcGVydHkgcGF0aC5cbiAqL1xudmFyIHBhcnRpY2lwYW50UHJvcGVydGllc1N0YXRlID0gZXF1YWxBdG9tRmFtaWx5KHtcbiAgZXF1YWxzOiBhcnJheXNEZWVwRXF1YWwsXG4gIGdldDogZnVuY3Rpb24gZ2V0KHBhcmFtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXQpIHtcbiAgICAgIHZhciBfYSA9IF9fcmVhZChwYXJhbS5zcGxpdChERUxJTSksIDIpLFxuICAgICAgICBpZCA9IF9hWzBdLFxuICAgICAgICBwYXRocyA9IF9hWzFdO1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSBwYXRocy5zcGxpdChQQVRIU19ERUxJTSk7XG4gICAgICByZXR1cm4gcHJvcGVydGllcy5tYXAoZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgcGF0aCkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufSk7XG4vKipcbiAqIFJldHVybnMgYSBwYXJ0aWNpcGFudCdzIHByb3BlcnR5IHRoYXQgeW91IHN1YnNjcmliZSB0by5cbiAqIEBwYXJhbSBwYXJ0aWNpcGFudElkIFRoZSBwYXJ0aWNpcGFudCdzIHNlc3Npb25faWQuXG4gKiBAcGFyYW0gcHJvcGVydHlQYXRocyB0aGUgYXJyYXkgb2YgcGFydGljaXBhbnQgcHJvcGVydHkgdGhhdCB5b3Ugd2FudCB0byBzdWJzY3JpYmUgdG8uXG4gKi9cbnZhciB1c2VQYXJ0aWNpcGFudFByb3BlcnR5ID0gZnVuY3Rpb24gdXNlUGFydGljaXBhbnRQcm9wZXJ0eShwYXJ0aWNpcGFudElkLCBwcm9wZXJ0eVBhdGhzKSB7XG4gIHZhciBfYTtcbiAgdmFyIHByb3BlcnRpZXMgPSB1c2VBdG9tVmFsdWUoQXJyYXkuaXNBcnJheShwcm9wZXJ0eVBhdGhzKSA/IHBhcnRpY2lwYW50UHJvcGVydGllc1N0YXRlKGdldFByb3BlcnRpZXNQYXJhbShwYXJ0aWNpcGFudElkLCBwcm9wZXJ0eVBhdGhzKSkgOiBwYXJ0aWNpcGFudFByb3BlcnR5U3RhdGUoZ2V0UHJvcGVydHlQYXJhbShwYXJ0aWNpcGFudElkLCBwcm9wZXJ0eVBhdGhzKSkpO1xuICB1c2VEZWJ1Z1ZhbHVlKEFycmF5LmlzQXJyYXkocHJvcGVydHlQYXRocykgPyBwcm9wZXJ0eVBhdGhzLnJlZHVjZShmdW5jdGlvbiAobywgcGF0aCwgaSkge1xuICAgIG9bcGF0aF0gPSBwcm9wZXJ0aWVzW2ldO1xuICAgIHJldHVybiBvO1xuICB9LCB7fSkgOiAoX2EgPSB7fSwgX2FbcHJvcGVydHlQYXRoc10gPSBwcm9wZXJ0aWVzLCBfYSkpO1xuICByZXR1cm4gcHJvcGVydGllcztcbn07XG5cbnZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RXhwb3J0RnJvbUNqcyAoeCkge1xuXHRyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4O1xufVxuXG52YXIgbG9kYXNoX3Rocm90dGxlO1xudmFyIGhhc1JlcXVpcmVkTG9kYXNoX3Rocm90dGxlO1xuZnVuY3Rpb24gcmVxdWlyZUxvZGFzaF90aHJvdHRsZSgpIHtcbiAgaWYgKGhhc1JlcXVpcmVkTG9kYXNoX3Rocm90dGxlKSByZXR1cm4gbG9kYXNoX3Rocm90dGxlO1xuICBoYXNSZXF1aXJlZExvZGFzaF90aHJvdHRsZSA9IDE7XG4gIC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG4gIHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbiAgLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG4gIHZhciBOQU4gPSAwIC8gMDtcblxuICAvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG4gIHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuICAvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuICB2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbiAgdmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuICAvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG4gIHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuICB2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuICAvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuICB2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbiAgdmFyIGZyZWVHbG9iYWwgPSBfdHlwZW9mKGNvbW1vbmpzR2xvYmFsKSA9PSAnb2JqZWN0JyAmJiBjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBjb21tb25qc0dsb2JhbDtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuICB2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzZWxmKSkgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbiAgLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG4gIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4gIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbiAgdmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuICAvKipcbiAgICogVXNlZCB0byByZXNvbHZlIHRoZVxuICAgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAgICogb2YgdmFsdWVzLlxuICAgKi9cbiAgdmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbiAgLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuICB2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICAgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMi40LjBcbiAgICogQGNhdGVnb3J5IERhdGVcbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gICAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAgICogfSwgXy5ub3coKSk7XG4gICAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gICAqL1xuICB2YXIgbm93ID0gZnVuY3Rpb24gbm93KCkge1xuICAgIHJldHVybiByb290LkRhdGUubm93KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICAgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAgICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICAgKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAgICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gICAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAgICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICAgKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICAgKiBpbnZvY2F0aW9uLlxuICAgKlxuICAgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gICAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gICAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICpcbiAgICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gICAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAgICpcbiAgICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gICAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICAgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAgICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gICAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gICAqXG4gICAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICAgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gICAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICAgKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gICAqIH0pKTtcbiAgICpcbiAgICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAgICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gICAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAgICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICAgKlxuICAgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICAgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAgICovXG4gIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICB9XG4gICAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcbiAgICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuICAgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgICB9XG4gICAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICAgIH1cbiAgICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgIH1cbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuICAgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuICAgICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgICByZXR1cm4gZGVib3VuY2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAgICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAgICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0b1xuICAgKiBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS4gUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2BcbiAgICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YFxuICAgKiB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWQgd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlXG4gICAqIHRocm90dGxlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGVcbiAgICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICAgKlxuICAgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gICAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uXG4gICAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAgICpcbiAgICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gICAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAgICpcbiAgICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gICAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB0aHJvdHRsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPXRydWVdXG4gICAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAgICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogLy8gQXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZy5cbiAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICAgKlxuICAgKiAvLyBJbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlcy5cbiAgICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pO1xuICAgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgdGhyb3R0bGVkKTtcbiAgICpcbiAgICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi5cbiAgICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gICAqL1xuICBmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgfVxuICAgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICB9XG4gICAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHtcbiAgICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAgICdtYXhXYWl0Jzogd2FpdCxcbiAgICAgICd0cmFpbGluZyc6IHRyYWlsaW5nXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gICAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAgICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNPYmplY3Qoe30pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc09iamVjdChudWxsKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgdmFyIHR5cGUgPSBfdHlwZW9mKHZhbHVlKTtcbiAgICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICAgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlICYmIF90eXBlb2YodmFsdWUpID09ICdvYmplY3QnO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSA0LjAuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgICByZXR1cm4gX3R5cGVvZih2YWx1ZSkgPT0gJ3N5bWJvbCcgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgNC4wLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLnRvTnVtYmVyKDMuMik7XG4gICAqIC8vID0+IDMuMlxuICAgKlxuICAgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICAgKiAvLyA9PiA1ZS0zMjRcbiAgICpcbiAgICogXy50b051bWJlcihJbmZpbml0eSk7XG4gICAqIC8vID0+IEluZmluaXR5XG4gICAqXG4gICAqIF8udG9OdW1iZXIoJzMuMicpO1xuICAgKiAvLyA9PiAzLjJcbiAgICovXG4gIGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgICByZXR1cm4gTkFOO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgJycgOiBvdGhlcjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gICAgfVxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICAgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTtcbiAgfVxuICBsb2Rhc2hfdGhyb3R0bGUgPSB0aHJvdHRsZTtcbiAgcmV0dXJuIGxvZGFzaF90aHJvdHRsZTtcbn1cblxudmFyIGxvZGFzaF90aHJvdHRsZUV4cG9ydHMgPSByZXF1aXJlTG9kYXNoX3Rocm90dGxlKCk7XG52YXIgdGhyb3R0bGUgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMobG9kYXNoX3Rocm90dGxlRXhwb3J0cyk7XG5cbi8qKlxuICogU2V0cyB1cCBhIHRocm90dGxlZCBkYWlseSBldmVudCBsaXN0ZW5lciB1c2luZyBbb25dKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy9vbikgbWV0aG9kLlxuICogV2hlbiB0aGlzIGhvb2sgaXMgdW5tb3VudGVkIHRoZSBldmVudCBsaXN0ZW5lciBpcyB1bnJlZ2lzdGVyZWQgdXNpbmcgW29mZl0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL29mZikuXG4gKlxuICogSW4gY29tcGFyaXNvbiB0byB1c2VEYWlseUV2ZW50IHRoZSBjYWxsYmFjayBwYXNzZWQgaGVyZSB3aWxsIGJlIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IG9iamVjdHMuXG4gKlxuICogWW91IGNhbiBwYXNzIGFuIGFycmF5IG9mIERhaWx5RXZlbnRzIHRvIHJlZ2lzdGVyIG11bHRpcGxlIGRhaWx5IGV2ZW50cyB3aXRoIGEgc2luZ2xlIGNhbGxiYWNrIGhhbmRsZXIuXG4gKiBUaGUgZXZlbnRzIHJldHVybmVkIGluIHRoZSBjYWxsYmFjayBwYXJhbWV0ZXIgYXJlIGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhleSB3ZXJlIGVtaXR0ZWQuXG4gKlxuICogQHBhcmFtIGV2IFRoZSBEYWlseUV2ZW50IHRvIHJlZ2lzdGVyIG9yIGFuIGFycmF5IG9mIERhaWx5RXZlbnQgdG8gcmVnaXN0ZXIuXG4gKiBAcGFyYW0gY2FsbGJhY2sgQSBtZW1vaXplZCBjYWxsYmFjayByZWZlcmVuY2UgdG8gcnVuIHdoZW4gdGhyb3R0bGVkIGV2ZW50cyBhcmUgZW1pdHRlZC5cbiAqIEBwYXJhbSB0aHJvdHRsZVRpbWVvdXQgVGhlIG1pbmltdW0gd2FpdGluZyB0aW1lIHVudGlsIHRoZSBjYWxsYmFjayBpcyBjYWxsZWQgYWdhaW4uIERlZmF1bHQ6IDUwMFxuICovXG52YXIgdXNlVGhyb3R0bGVkRGFpbHlFdmVudCA9IGZ1bmN0aW9uIHVzZVRocm90dGxlZERhaWx5RXZlbnQoZXYsIGNhbGxiYWNrLCB0aHJvdHRsZVRpbWVvdXQsIElOVEVSTkFMX3ByaW9yaXR5KSB7XG4gIGlmICh0aHJvdHRsZVRpbWVvdXQgPT09IHZvaWQgMCkge1xuICAgIHRocm90dGxlVGltZW91dCA9IDUwMDtcbiAgfVxuICBpZiAoSU5URVJOQUxfcHJpb3JpdHkgPT09IHZvaWQgMCkge1xuICAgIElOVEVSTkFMX3ByaW9yaXR5ID0gZmFsc2U7XG4gIH1cbiAgdmFyIF9hID0gdXNlQ29udGV4dChEYWlseUV2ZW50Q29udGV4dCksXG4gICAgb2ZmID0gX2Eub2ZmLFxuICAgIG9uID0gX2Eub247XG4gIHZhciBldmVudElkID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGV2KSkgcmV0dXJuIGV2LnJlZHVjZShmdW5jdGlvbiAociwgZSkge1xuICAgICAgcltlXSA9IElOVEVSTkFMX3ByaW9yaXR5ID8gZ2V0UHJpb3JpdHlVbmlxdWUoKSA6IGdldFVuaXF1ZSgpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBfYSA9IHt9LCBfYVtldl0gPSBJTlRFUk5BTF9wcmlvcml0eSA/IGdldFByaW9yaXR5VW5pcXVlKCkgOiBnZXRVbmlxdWUoKSwgX2E7XG4gIH0sIFtldiwgSU5URVJOQUxfcHJpb3JpdHldKTtcbiAgdmFyIHRocm90dGxlZEV2ZW50cyA9IHVzZVJlZihbXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHRocm90dGxlZEV2ZW50cy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gIH0sIFtdKSk7XG4gIHZhciBlbWl0RXZlbnRzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRocm90dGxlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aHJvdHRsZWRFdmVudHMuY3VycmVudC5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIGNhbGxiYWNrKHRocm90dGxlZEV2ZW50cy5jdXJyZW50KTtcbiAgICAgIHRocm90dGxlZEV2ZW50cy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gICAgfSwgdGhyb3R0bGVUaW1lb3V0LCB7XG4gICAgICB0cmFpbGluZzogdHJ1ZVxuICAgIH0pO1xuICB9LCBbY2FsbGJhY2ssIHRocm90dGxlVGltZW91dF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZXYpIHJldHVybjtcbiAgICB2YXIgYWRkRXZlbnQgPSBmdW5jdGlvbiBhZGRFdmVudChldikge1xuICAgICAgdGhyb3R0bGVkRXZlbnRzLmN1cnJlbnQucHVzaChldik7XG4gICAgICBlbWl0RXZlbnRzKCk7XG4gICAgfTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldikpIHtcbiAgICAgIGV2LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIG9uKGUsIGFkZEV2ZW50LCBldmVudElkW2VdKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbihldiwgYWRkRXZlbnQsIGV2ZW50SWRbZXZdKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGV2KSkge1xuICAgICAgICBldi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIG9mZihlLCBldmVudElkW2VdKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvZmYoZXYsIGV2ZW50SWRbZXZdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbZW1pdEV2ZW50cywgZXYsIGV2ZW50SWQsIG9mZiwgb25dKTtcbiAgdXNlRGVidWdWYWx1ZSh7XG4gICAgZXZlbnQ6IGV2LFxuICAgIGV2ZW50SWQ6IGV2ZW50SWRcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYWxsIHByb3BlcnR5IHBhdGhzIGZvciBhbiBvYmplY3QuXG4gKi9cbnZhciBfZ2V0UGF0aHMgPSBmdW5jdGlvbiBnZXRQYXRocyhvLCBjdXJyZW50UGF0aCwgdmlzaXRlZCkge1xuICBpZiAoY3VycmVudFBhdGggPT09IHZvaWQgMCkge1xuICAgIGN1cnJlbnRQYXRoID0gJyc7XG4gIH1cbiAgaWYgKHZpc2l0ZWQgPT09IHZvaWQgMCkge1xuICAgIHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIH1cbiAgaWYgKF90eXBlb2YobykgIT09ICdvYmplY3QnIHx8IG8gPT09IG51bGwgfHwgdmlzaXRlZC5oYXMobykpIHtcbiAgICByZXR1cm4gW2N1cnJlbnRQYXRoXTtcbiAgfVxuICB2aXNpdGVkLmFkZChvKTtcbiAgdmFyIHBhdGhzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrZXkpKSB7XG4gICAgICB2YXIgbmV3UGF0aCA9IGN1cnJlbnRQYXRoID8gXCJcIi5jb25jYXQoY3VycmVudFBhdGgsIFwiLlwiKS5jb25jYXQoa2V5KSA6IGtleTtcbiAgICAgIHBhdGhzLnB1c2guYXBwbHkocGF0aHMsIF9fc3ByZWFkQXJyYXkoW25ld1BhdGhdLCBfX3JlYWQoX2dldFBhdGhzKG9ba2V5XSwgbmV3UGF0aCwgdmlzaXRlZCkpLCBmYWxzZSkpO1xuICAgIH1cbiAgfVxuICB2aXNpdGVkW1wiZGVsZXRlXCJdKG8pO1xuICByZXR1cm4gcGF0aHM7XG59O1xuLyoqXG4gKiBSZXR1cm5zIGFsbCBwcm9wZXJ0eSBwYXRocyBmb3IgYSBnaXZlbiBwYXJ0aWNpcGFudCBvYmplY3QuXG4gKi9cbnZhciBnZXRQYXJ0aWNpcGFudFBhdGhzID0gZnVuY3Rpb24gZ2V0UGFydGljaXBhbnRQYXRocyhwKSB7XG4gIHJldHVybiBfZ2V0UGF0aHMocCk7XG59O1xuXG52YXIgcmVzb2x2ZVBhdGggPSBmdW5jdGlvbiByZXNvbHZlUGF0aChwYXJ0aWNpcGFudCwgcGF0aCkge1xuICByZXR1cm4gU3RyaW5nKHBhdGgpLnNwbGl0KCcuJykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Lmxlbmd0aDtcbiAgfSkucmVkdWNlKGZ1bmN0aW9uIChwLCBrZXkpIHtcbiAgICByZXR1cm4gcCAmJiBwW2tleV07XG4gIH0sIHBhcnRpY2lwYW50KTtcbn07XG52YXIgcmVzb2x2ZVBhcnRpY2lwYW50UGF0aHMgPSBmdW5jdGlvbiByZXNvbHZlUGFydGljaXBhbnRQYXRocyhwYXJ0aWNpcGFudCwgcGF0aHMpIHtcbiAgcmV0dXJuIHBhdGhzLm1hcChmdW5jdGlvbiAocGF0aCkge1xuICAgIHJldHVybiByZXNvbHZlUGF0aChwYXJ0aWNpcGFudCwgcGF0aCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBTdG9yZXMgdGhlIG1vc3QgcmVjZW50IHBlZXJJZCBhcyByZXBvcnRlZCBmcm9tIFthY3RpdmUtc3BlYWtlci1jaGFuZ2VdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL21lZXRpbmctZXZlbnRzI2FjdGl2ZS1zcGVha2VyLWNoYW5nZSkgZXZlbnQuXG4gKi9cbnZhciBhY3RpdmVJZFN0YXRlID0gYXRvbShudWxsKTtcbmFjdGl2ZUlkU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnYWN0aXZlLWlkJyk7XG52YXIgbG9jYWxJZFN0YXRlID0gYXRvbSgnJyk7XG5sb2NhbElkU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnbG9jYWwtaWQnKTtcbnZhciBsb2NhbEpvaW5EYXRlU3RhdGUgPSBhdG9tKG51bGwpO1xubG9jYWxKb2luRGF0ZVN0YXRlLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoJ2xvY2FsLWpvaW4tZGF0ZScpO1xudmFyIHBhcnRpY2lwYW50SWRzU3RhdGUgPSBhdG9tKFtdKTtcbnBhcnRpY2lwYW50SWRzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgncGFydGljaXBhbnQtaWRzJyk7XG52YXIgcGFydGljaXBhbnRTdGF0ZSA9IGF0b21GYW1pbHkoZnVuY3Rpb24gKGlkKSB7XG4gIHZhciBwYXJ0aWNpcGFudEF0b20gPSBhdG9tKG51bGwpO1xuICBwYXJ0aWNpcGFudEF0b20uZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbChcInBhcnRpY2lwYW50LVwiLmNvbmNhdChpZCkpO1xuICByZXR1cm4gcGFydGljaXBhbnRBdG9tO1xufSk7XG52YXIgd2FpdGluZ1BhcnRpY2lwYW50c1N0YXRlID0gYXRvbShbXSk7XG53YWl0aW5nUGFydGljaXBhbnRzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnd2FpdGluZy1wYXJ0aWNpcGFudHMnKTtcbnZhciB3YWl0aW5nUGFydGljaXBhbnRTdGF0ZSA9IGF0b21GYW1pbHkoZnVuY3Rpb24gKGlkKSB7XG4gIHZhciB3YWl0aW5nUGFydGljaXBhbnRBdG9tID0gYXRvbSh7XG4gICAgYXdhaXRpbmdBY2Nlc3M6IHtcbiAgICAgIGxldmVsOiAnZnVsbCdcbiAgICB9LFxuICAgIGlkOiBpZCxcbiAgICBuYW1lOiAnJ1xuICB9KTtcbiAgd2FpdGluZ1BhcnRpY2lwYW50QXRvbS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKFwid2FpdGluZy1wYXJ0aWNpcGFudC1cIi5jb25jYXQoaWQpKTtcbiAgcmV0dXJuIHdhaXRpbmdQYXJ0aWNpcGFudEF0b207XG59KTtcbnZhciBhbGxXYWl0aW5nUGFydGljaXBhbnRzU2VsZWN0b3IgPSBlcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGFycmF5c0RlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXQpIHtcbiAgICAgIHZhciBpZHMgPSBnZXQod2FpdGluZ1BhcnRpY2lwYW50c1N0YXRlKTtcbiAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gZ2V0KHdhaXRpbmdQYXJ0aWNpcGFudFN0YXRlKGlkKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59KTtcbnZhciBEYWlseVBhcnRpY2lwYW50cyA9IGZ1bmN0aW9uIERhaWx5UGFydGljaXBhbnRzKF9hKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgX2IgPSBfX3JlYWQodXNlU3RhdGUoZmFsc2UpLCAyKSxcbiAgICBpbml0aWFsaXplZCA9IF9iWzBdLFxuICAgIHNldEluaXRpYWxpemVkID0gX2JbMV07XG4gIHZhciBpbml0UGFydGljaXBhbnRzID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIHBhcnRpY2lwYW50cykge1xuICAgIHNldChsb2NhbElkU3RhdGUsIHBhcnRpY2lwYW50cy5sb2NhbC5zZXNzaW9uX2lkKTtcbiAgICB2YXIgcGFydGljaXBhbnRzQXJyYXkgPSBPYmplY3QudmFsdWVzKHBhcnRpY2lwYW50cyk7XG4gICAgdmFyIGlkcyA9IHBhcnRpY2lwYW50c0FycmF5Lm1hcChmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHAuc2Vzc2lvbl9pZDtcbiAgICB9KTtcbiAgICBzZXQocGFydGljaXBhbnRJZHNTdGF0ZSwgaWRzKTtcbiAgICBwYXJ0aWNpcGFudHNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICBzZXQocGFydGljaXBhbnRTdGF0ZShwLnNlc3Npb25faWQpLCBwKTtcbiAgICAgIHZhciBwYXRocyA9IGdldFBhcnRpY2lwYW50UGF0aHMocCk7XG4gICAgICBzZXQocGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzU3RhdGUocC5zZXNzaW9uX2lkKSwgcGF0aHMpO1xuICAgICAgcGF0aHMuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgdmFyIF9hID0gX19yZWFkKHJlc29sdmVQYXJ0aWNpcGFudFBhdGhzKHAsIFtwcm9wZXJ0eV0pLCAxKSxcbiAgICAgICAgICB2YWx1ZSA9IF9hWzBdO1xuICAgICAgICBzZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20ocC5zZXNzaW9uX2lkLCBwcm9wZXJ0eSksIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHNldEluaXRpYWxpemVkKHRydWUpO1xuICB9LCBbXSkpO1xuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwYXJ0aWNpcGFudHMgc3RhdGUgYmFzZWQgb24gZGFpbHkucGFydGljaXBhbnRzKCkuXG4gICAqIFJldHJpZXMgZXZlcnkgMTAwbXMgdG8gaW5pdGlhbGl6ZSB0aGUgc3RhdGUsIHVudGlsIGRhaWx5IGlzIHJlYWR5LlxuICAgKi9cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5IHx8IGluaXRpYWxpemVkKSByZXR1cm47XG4gICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcnRpY2lwYW50cyA9IGRhaWx5LnBhcnRpY2lwYW50cygpO1xuICAgICAgaWYgKCEoJ2xvY2FsJyBpbiBwYXJ0aWNpcGFudHMpKSByZXR1cm47XG4gICAgICBpbml0UGFydGljaXBhbnRzKHBhcnRpY2lwYW50cyk7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICB9LCAxMDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICB9O1xuICB9LCBbZGFpbHksIGluaXRpYWxpemVkLCBpbml0UGFydGljaXBhbnRzXSk7XG4gIHZhciBoYW5kbGVJbml0RXZlbnQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIHZhciBwYXJ0aWNpcGFudHMgPSBkYWlseSA9PT0gbnVsbCB8fCBkYWlseSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGFpbHkucGFydGljaXBhbnRzKCk7XG4gICAgaWYgKCFwYXJ0aWNpcGFudHMubG9jYWwpIHJldHVybjtcbiAgICBpbml0UGFydGljaXBhbnRzKHBhcnRpY2lwYW50cyk7XG4gIH0sIFtkYWlseSwgaW5pdFBhcnRpY2lwYW50c10pO1xuICB1c2VEYWlseUV2ZW50KCdzdGFydGVkLWNhbWVyYScsIGhhbmRsZUluaXRFdmVudCwgdHJ1ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FjY2Vzcy1zdGF0ZS11cGRhdGVkJywgaGFuZGxlSW5pdEV2ZW50LCB0cnVlKTtcbiAgdXNlRGFpbHlFdmVudCgnam9pbmluZy1tZWV0aW5nJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBzZXQobG9jYWxKb2luRGF0ZVN0YXRlLCBuZXcgRGF0ZSgpKTtcbiAgICBoYW5kbGVJbml0RXZlbnQoKTtcbiAgfSwgW2hhbmRsZUluaXRFdmVudF0pKSwgdHJ1ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2pvaW5lZC1tZWV0aW5nJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgaW5pdFBhcnRpY2lwYW50cyhldi5wYXJ0aWNpcGFudHMpO1xuICB9LCBbaW5pdFBhcnRpY2lwYW50c10pLCB0cnVlKTtcbiAgLyoqXG4gICAqIFJlc2V0IHN0b3JlZCBwYXJ0aWNpcGFudHMsIHdoZW4gbWVldGluZyBoYXMgZW5kZWQuXG4gICAqL1xuICB2YXIgaGFuZGxlQ2xlYW51cCA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoZ2V0LCBzZXQpIHtcbiAgICBzZXQobG9jYWxJZFN0YXRlLCAnJyk7XG4gICAgc2V0KGFjdGl2ZUlkU3RhdGUsIG51bGwpO1xuICAgIHZhciBpZHMgPSBnZXQocGFydGljaXBhbnRJZHNTdGF0ZSk7XG4gICAgaWRzLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRTdGF0ZS5yZW1vdmUoaWQpO1xuICAgIH0pO1xuICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBbXSk7XG4gIH0sIFtdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgaGFuZGxlQ2xlYW51cCwgdHJ1ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIGhhbmRsZUNsZWFudXAsIHRydWUpO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsnYWN0aXZlLXNwZWFrZXItY2hhbmdlJywgJ3BhcnRpY2lwYW50LWpvaW5lZCcsICdwYXJ0aWNpcGFudC11cGRhdGVkJywgJ3BhcnRpY2lwYW50LWxlZnQnXSwgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQsIHNldCwgZXZ0cykge1xuICAgIGlmICghZXZ0cy5sZW5ndGgpIHJldHVybjtcbiAgICBldnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBzd2l0Y2ggKGV2LmFjdGlvbikge1xuICAgICAgICBjYXNlICdhY3RpdmUtc3BlYWtlci1jaGFuZ2UnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNldChhY3RpdmVJZFN0YXRlLCBldi5hY3RpdmVTcGVha2VyLnBlZXJJZCk7XG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRTdGF0ZShldi5hY3RpdmVTcGVha2VyLnBlZXJJZCksIGZ1bmN0aW9uIChwcmV2KSB7XG4gICAgICAgICAgICAgIGlmICghcHJldikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgIHJldHVybiBfYXNzaWduKF9hc3NpZ24oe30sIHByZXYpLCB7XG4gICAgICAgICAgICAgICAgbGFzdF9hY3RpdmU6IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAncGFydGljaXBhbnQtam9pbmVkJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgbGlzdCBvZiBpZHNcbiAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBmdW5jdGlvbiAocHJldklkcykge1xuICAgICAgICAgICAgICByZXR1cm4gcHJldklkcy5pbmNsdWRlcyhldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSA/IHByZXZJZHMgOiBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChwcmV2SWRzKSwgZmFsc2UpLCBbZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU3RvcmUgZW50aXJlIG9iamVjdFxuICAgICAgICAgICAgc2V0KHBhcnRpY2lwYW50U3RhdGUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCksIGV2LnBhcnRpY2lwYW50KTtcbiAgICAgICAgICAgIHZhciBwYXRocyA9IGdldFBhcnRpY2lwYW50UGF0aHMoZXYucGFydGljaXBhbnQpO1xuICAgICAgICAgICAgLy8gU2V0IGxpc3Qgb2YgcHJvcGVydHkgcGF0aHNcbiAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSwgcGF0aHMpO1xuICAgICAgICAgICAgLy8gU2V0IGFsbCBwcm9wZXJ0eSBwYXRoIHZhbHVlc1xuICAgICAgICAgICAgcGF0aHMuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgdmFyIF9hID0gX19yZWFkKHJlc29sdmVQYXJ0aWNpcGFudFBhdGhzKGV2LnBhcnRpY2lwYW50LCBbcHJvcGVydHldKSwgMSksXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBfYVswXTtcbiAgICAgICAgICAgICAgc2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQsIHByb3BlcnR5KSwgdmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LXVwZGF0ZWQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBlbnRpcmUgb2JqZWN0XG4gICAgICAgICAgICBzZXQocGFydGljaXBhbnRTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSwgZXYucGFydGljaXBhbnQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHNlc3Npb25faWRcbiAgICAgICAgICAgIGlmIChldi5wYXJ0aWNpcGFudC5sb2NhbCkge1xuICAgICAgICAgICAgICBzZXQobG9jYWxJZFN0YXRlLCBldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwYXRocyA9IGdldFBhcnRpY2lwYW50UGF0aHMoZXYucGFydGljaXBhbnQpO1xuICAgICAgICAgICAgdmFyIG9sZFBhdGhzXzEgPSBnZXQocGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzU3RhdGUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCkpO1xuICAgICAgICAgICAgdmFyIHBhdGhzQ2hhbmdlZCA9IHBhdGhzLmxlbmd0aCAhPT0gb2xkUGF0aHNfMS5sZW5ndGggfHwgcGF0aHMuc29tZShmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgICByZXR1cm4gIW9sZFBhdGhzXzEuaW5jbHVkZXMocGF0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldCBsaXN0IG9mIHByb3BlcnR5IHBhdGhzXG4gICAgICAgICAgICBpZiAocGF0aHNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudFByb3BlcnR5UGF0aHNTdGF0ZShldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSwgcGF0aHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgU2V0IG9mIG9sZFBhdGhzIGZvciBxdWljayBsb29rdXBcbiAgICAgICAgICAgIHZhciBvbGRQYXRoU2V0XzEgPSBuZXcgU2V0KG9sZFBhdGhzXzEpO1xuICAgICAgICAgICAgLy8gUmVzb2x2ZSBhbGwgcGF0aCB2YWx1ZXMgaW4gb25lIGNhbGxcbiAgICAgICAgICAgIHZhciByZXNvbHZlZFZhbHVlc18xID0gcmVzb2x2ZVBhcnRpY2lwYW50UGF0aHMoZXYucGFydGljaXBhbnQsIHBhdGhzKTtcbiAgICAgICAgICAgIHBhdGhzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5LCBpZHgpIHtcbiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzb2x2ZWRWYWx1ZXNfMVtpZHhdO1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgcHJvcGVydHkgZnJvbSBvbGRQYXRoU2V0IHRvIG1hcmsgaXQgYXMgcHJvY2Vzc2VkXG4gICAgICAgICAgICAgIG9sZFBhdGhTZXRfMVtcImRlbGV0ZVwiXShwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSBuZXcgdmFsdWUgZGlmZmVycyBmcm9tIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgICAgICBzZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCwgcHJvcGVydHkpLCBmdW5jdGlvbiAocHJldikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21EZWVwRXF1YWwocHJldiwgdmFsdWUpID8gcHJldiA6IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2V0IGFueSByZW1haW5pbmcgcGF0aHMgaW4gb2xkUGF0aFNldCB0byBudWxsXG4gICAgICAgICAgICBvbGRQYXRoU2V0XzEuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgc2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQsIHByb3BlcnR5KSwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAncGFydGljaXBhbnQtbGVmdCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gbGlzdCBvZiBpZHNcbiAgICAgICAgICAgIHNldChwYXJ0aWNpcGFudElkc1N0YXRlLCBmdW5jdGlvbiAocHJldklkcykge1xuICAgICAgICAgICAgICByZXR1cm4gcHJldklkcy5pbmNsdWRlcyhldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkKSA/IHByZXZJZHMuZmlsdGVyKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZCAhPT0gZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZDtcbiAgICAgICAgICAgICAgfSkgOiBwcmV2SWRzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZW50aXJlIG9iamVjdFxuICAgICAgICAgICAgcGFydGljaXBhbnRTdGF0ZS5yZW1vdmUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgICB2YXIgb2xkUGF0aHMgPSBnZXQocGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzU3RhdGUoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCkpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHByb3BlcnR5IHBhdGggdmFsdWVzXG4gICAgICAgICAgICBvbGRQYXRocy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICBwYXJ0aWNpcGFudFByb3BlcnR5U3RhdGUucmVtb3ZlKGdldFByb3BlcnR5UGFyYW0oZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCwgcHJvcGVydHkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBwcm9wZXJ0eSBwYXRoc1xuICAgICAgICAgICAgcGFydGljaXBhbnRQcm9wZXJ0eVBhdGhzU3RhdGUucmVtb3ZlKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSkpLCAxMDAsIHRydWUpO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsnd2FpdGluZy1wYXJ0aWNpcGFudC1hZGRlZCcsICd3YWl0aW5nLXBhcnRpY2lwYW50LXVwZGF0ZWQnLCAnd2FpdGluZy1wYXJ0aWNpcGFudC1yZW1vdmVkJ10sIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldnRzKSB7XG4gICAgZXZ0cy5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgc3dpdGNoIChldi5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnd2FpdGluZy1wYXJ0aWNpcGFudC1hZGRlZCc6XG4gICAgICAgICAgc2V0KHdhaXRpbmdQYXJ0aWNpcGFudHNTdGF0ZSwgZnVuY3Rpb24gKHdwcykge1xuICAgICAgICAgICAgcmV0dXJuIHdwcy5pbmNsdWRlcyhldi5wYXJ0aWNpcGFudC5pZCkgPyB3cHMgOiBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZCh3cHMpLCBmYWxzZSksIFtldi5wYXJ0aWNpcGFudC5pZF0sIGZhbHNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXQod2FpdGluZ1BhcnRpY2lwYW50U3RhdGUoZXYucGFydGljaXBhbnQuaWQpLCBldi5wYXJ0aWNpcGFudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXRpbmctcGFydGljaXBhbnQtdXBkYXRlZCc6XG4gICAgICAgICAgc2V0KHdhaXRpbmdQYXJ0aWNpcGFudFN0YXRlKGV2LnBhcnRpY2lwYW50LmlkKSwgZXYucGFydGljaXBhbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0aW5nLXBhcnRpY2lwYW50LXJlbW92ZWQnOlxuICAgICAgICAgIHNldCh3YWl0aW5nUGFydGljaXBhbnRzU3RhdGUsIGZ1bmN0aW9uICh3cHMpIHtcbiAgICAgICAgICAgIHJldHVybiB3cHMuZmlsdGVyKGZ1bmN0aW9uICh3cCkge1xuICAgICAgICAgICAgICByZXR1cm4gd3AgIT09IGV2LnBhcnRpY2lwYW50LmlkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2FpdGluZ1BhcnRpY2lwYW50U3RhdGUucmVtb3ZlKGV2LnBhcnRpY2lwYW50LmlkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW10pKSwgMTAwLCB0cnVlKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkIG9yIGVtcHR5IHN0cmluZyAnJyxcbiAqIGlmIHRoZSBsb2NhbCBwYXJ0aWNpcGFudCBkb2Vzbid0IGV4aXN0LlxuICovXG52YXIgdXNlTG9jYWxTZXNzaW9uSWQgPSBmdW5jdGlvbiB1c2VMb2NhbFNlc3Npb25JZCgpIHtcbiAgdmFyIGxvY2FsSWQgPSB1c2VBdG9tVmFsdWUobG9jYWxJZFN0YXRlKTtcbiAgdXNlRGVidWdWYWx1ZShsb2NhbElkKTtcbiAgcmV0dXJuIGxvY2FsSWQ7XG59O1xuXG52YXIgbm9vcEZpbHRlciA9IGZ1bmN0aW9uIG5vb3BGaWx0ZXIoKSB7XG4gIHJldHVybiB0cnVlO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbW9zdCByZWNlbnQgc3BlYWtlciBpZCBtZW50aW9uZWQgaW4gYW4gW2FjdGl2ZS1zcGVha2VyLWNoYW5nZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvbWVldGluZy1ldmVudHMjYWN0aXZlLXNwZWFrZXItY2hhbmdlKSBldmVudC5cbiAqL1xudmFyIHVzZUFjdGl2ZVNwZWFrZXJJZCA9IGZ1bmN0aW9uIHVzZUFjdGl2ZVNwZWFrZXJJZChfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBfYyA9IF9iLmZpbHRlcixcbiAgICBmaWx0ZXIgPSBfYyA9PT0gdm9pZCAwID8gbm9vcEZpbHRlciA6IF9jLFxuICAgIF9kID0gX2IuaWdub3JlTG9jYWwsXG4gICAgaWdub3JlTG9jYWwgPSBfZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZDtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIHJlY2VudEFjdGl2ZUlkID0gdXNlQXRvbVZhbHVlKGFjdGl2ZUlkU3RhdGUpO1xuICB2YXIgaXNJZ25vcmVkTG9jYWxJZCA9IGlnbm9yZUxvY2FsICYmIHJlY2VudEFjdGl2ZUlkID09PSBsb2NhbFNlc3Npb25JZDtcbiAgdmFyIGlzRmlsdGVyZWRPdXQgPSAhKGZpbHRlciA9PT0gbnVsbCB8fCBmaWx0ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbHRlcihyZWNlbnRBY3RpdmVJZCkpO1xuICB2YXIgaXNSZWNlbnRJZFJlbGV2YW50ID0gIWlzSWdub3JlZExvY2FsSWQgJiYgIWlzRmlsdGVyZWRPdXQ7XG4gIHZhciBfZSA9IF9fcmVhZCh1c2VTdGF0ZShpc1JlY2VudElkUmVsZXZhbnQgPyByZWNlbnRBY3RpdmVJZCA6IG51bGwpLCAyKSxcbiAgICBhY3RpdmVJZCA9IF9lWzBdLFxuICAgIHNldEFjdGl2ZUlkID0gX2VbMV07XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzSWdub3JlZExvY2FsSWQgfHwgaXNGaWx0ZXJlZE91dCkgcmV0dXJuO1xuICAgIHNldEFjdGl2ZUlkKHJlY2VudEFjdGl2ZUlkKTtcbiAgfSwgW2lzRmlsdGVyZWRPdXQsIGlzSWdub3JlZExvY2FsSWQsIHJlY2VudEFjdGl2ZUlkXSk7XG4gIHVzZURlYnVnVmFsdWUoYWN0aXZlSWQpO1xuICByZXR1cm4gYWN0aXZlSWQ7XG59O1xuXG52YXIgaXNUcmFja09mZiA9IGZ1bmN0aW9uIGlzVHJhY2tPZmYodHJhY2tTdGF0ZSkge1xuICByZXR1cm4gWydibG9ja2VkJywgJ29mZiddLmluY2x1ZGVzKHRyYWNrU3RhdGUpO1xufTtcblxudmFyIFNFUklBTElaQUJMRV9ERUxJTSA9ICc7JztcbnZhciBnZXRQYXJ0aWNpcGFudElkc0ZpbHRlclNvcnRQYXJhbSA9IGZ1bmN0aW9uIGdldFBhcnRpY2lwYW50SWRzRmlsdGVyU29ydFBhcmFtKGZpbHRlciwgc29ydCkge1xuICByZXR1cm4gXCJcIi5jb25jYXQoZmlsdGVyKS5jb25jYXQoU0VSSUFMSVpBQkxFX0RFTElNKS5jb25jYXQoc29ydCk7XG59O1xuLyoqXG4gKiBTaG9ydC1jdXQgc3RhdGUgc2VsZWN0b3IgZm9yIHVzZVBhcnRpY2lwYW50SWRzKHsgZmlsdGVyOiAnbG9jYWwnIH0pXG4gKi9cbnZhciBwYXJ0aWNpcGFudElkc0ZpbHRlcmVkQW5kU29ydGVkU3RhdGUgPSBlcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGN1c3RvbURlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQocGFyYW0pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGdldCkge1xuICAgICAgdmFyIF9hID0gX19yZWFkKHBhcmFtLnNwbGl0KFNFUklBTElaQUJMRV9ERUxJTSksIDIpLFxuICAgICAgICBmaWx0ZXIgPSBfYVswXSxcbiAgICAgICAgc29ydCA9IF9hWzFdO1xuICAgICAgdmFyIGlkcyA9IGdldChwYXJ0aWNpcGFudElkc1N0YXRlKTtcbiAgICAgIHJldHVybiBpZHMuZmlsdGVyKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBzd2l0Y2ggKGZpbHRlcikge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFNpbXBsZSBib29sZWFuIGZpZWxkcyBmaXJzdC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjYXNlICdsb2NhbCc6XG4gICAgICAgICAgY2FzZSAnb3duZXInOlxuICAgICAgICAgIGNhc2UgJ3JlY29yZCc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJldHVybiBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsIGZpbHRlcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ3JlbW90ZSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJldHVybiAhZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGlkLCAnbG9jYWwnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnc2NyZWVuJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmFyIHNjcmVlbkF1ZGlvU3RhdGUgPSBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsICd0cmFja3Muc2NyZWVuQXVkaW8uc3RhdGUnKSk7XG4gICAgICAgICAgICAgIHZhciBzY3JlZW5WaWRlb1N0YXRlID0gZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGlkLCAndHJhY2tzLnNjcmVlblZpZGVvLnN0YXRlJykpO1xuICAgICAgICAgICAgICByZXR1cm4gIWlzVHJhY2tPZmYoc2NyZWVuQXVkaW9TdGF0ZSkgfHwgIWlzVHJhY2tPZmYoc2NyZWVuVmlkZW9TdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KS5zb3J0KGZ1bmN0aW9uIChpZEEsIGlkQikge1xuICAgICAgICBzd2l0Y2ggKHNvcnQpIHtcbiAgICAgICAgICBjYXNlICdqb2luZWRfYXQnOlxuICAgICAgICAgIGNhc2UgJ3Nlc3Npb25faWQnOlxuICAgICAgICAgIGNhc2UgJ3VzZXJfaWQnOlxuICAgICAgICAgIGNhc2UgJ3VzZXJfbmFtZSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZhciBhU29ydCA9IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZEEsIHNvcnQpKTtcbiAgICAgICAgICAgICAgdmFyIGJTb3J0ID0gZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGlkQiwgc29ydCkpO1xuICAgICAgICAgICAgICBpZiAoYVNvcnQgIT09IHVuZGVmaW5lZCB8fCBiU29ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFTb3J0ID09PSB1bmRlZmluZWQpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoYlNvcnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgaWYgKGFTb3J0ID4gYlNvcnQpIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIGlmIChhU29ydCA8IGJTb3J0KSByZXR1cm4gLTE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59KTtcbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgcGFydGljaXBhbnQgaWRzICg9IHNlc3Npb25faWQpLlxuICogVGhlIGxpc3QgY2FuIG9wdGlvbmFsbHkgYmUgZmlsdGVyZWQgYW5kIHNvcnRlZCwgdXNpbmcgdGhlIGZpbHRlciBhbmQgc29ydCBvcHRpb25zLlxuICovXG52YXIgdXNlUGFydGljaXBhbnRJZHMgPSBmdW5jdGlvbiB1c2VQYXJ0aWNpcGFudElkcyhfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBmaWx0ZXIgPSBfYi5maWx0ZXIsXG4gICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID0gX2Iub25BY3RpdmVTcGVha2VyQ2hhbmdlLFxuICAgIG9uUGFydGljaXBhbnRKb2luZWQgPSBfYi5vblBhcnRpY2lwYW50Sm9pbmVkLFxuICAgIG9uUGFydGljaXBhbnRMZWZ0ID0gX2Iub25QYXJ0aWNpcGFudExlZnQsXG4gICAgb25QYXJ0aWNpcGFudFVwZGF0ZWQgPSBfYi5vblBhcnRpY2lwYW50VXBkYXRlZCxcbiAgICBzb3J0ID0gX2Iuc29ydDtcbiAgLyoqXG4gICAqIEZvciBpbnN0YW5jZXMgb2YgdXNlUGFydGljaXBhbnRJZHMgd2l0aCBzdHJpbmctYmFzZWQgZmlsdGVyIGFuZCBzb3J0LFxuICAgKiB3ZSBjYW4gaW1tZWRpYXRlbHkgcmV0dXJuIHRoZSBjb3JyZWN0IGlkcyBmcm9tIEpvdGFpJ3Mgc3RhdGUuXG4gICAqL1xuICB2YXIgcHJlRmlsdGVyZWRTb3J0ZWRJZHMgPSB1c2VBdG9tVmFsdWUocGFydGljaXBhbnRJZHNGaWx0ZXJlZEFuZFNvcnRlZFN0YXRlKGdldFBhcnRpY2lwYW50SWRzRmlsdGVyU29ydFBhcmFtKHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnID8gZmlsdGVyIDogbnVsbCwgdHlwZW9mIHNvcnQgPT09ICdzdHJpbmcnID8gc29ydCA6IG51bGwpKSk7XG4gIHZhciBzaG91bGRVc2VDdXN0b21JZHMgPSB0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nO1xuICB2YXIgZ2V0Q3VzdG9tRmlsdGVyZWRJZHMgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZ2V0KSB7XG4gICAgaWYgKFxuICAgIC8vIElnbm9yZSBpZiBib3RoIGZpbHRlciBhbmQgc29ydCBhcmUgbm90IGZ1bmN0aW9ucy5cbiAgICB0eXBlb2YgZmlsdGVyICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3J0ICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gW107XG4gICAgdmFyIHBhcnRpY2lwYW50cyA9IHByZUZpbHRlcmVkU29ydGVkSWRzLm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHJldHVybiBnZXQocGFydGljaXBhbnRTdGF0ZShpZCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBwYXJ0aWNpcGFudHNcbiAgICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgYWNjaWRlbnRhbGx5IHRyeSB0byBmaWx0ZXIvc29ydCBgbnVsbGAgcGFydGljaXBhbnRzXG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIHdoZW4gYSBwYXJ0aWNpcGFudCdzIGlkIGlzIGFscmVhZHkgcHJlc2VudCBpbiBzdG9yZVxuICAgIC8vIGJ1dCB0aGUgcGFydGljaXBhbnQgb2JqZWN0IGlzIG5vdCBzdG9yZWQsIHlldC5cbiAgICAuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihwKTtcbiAgICB9KVxuICAgIC8vIFJ1biBjdXN0b20gZmlsdGVyLCBpZiBpdCdzIGEgZnVuY3Rpb24uIE90aGVyd2lzZSBkb24ndCBmaWx0ZXIgYW55IHBhcnRpY2lwYW50cy5cbiAgICAuZmlsdGVyKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgPyBmaWx0ZXIgOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KVxuICAgIC8vIFJ1biBjdXN0b20gc29ydCwgaWYgaXQncyBhIGZ1bmN0aW9uLiBPdGhlcndpc2UgZG9uJ3Qgc29ydC5cbiAgICAuc29ydCh0eXBlb2Ygc29ydCA9PT0gJ2Z1bmN0aW9uJyA/IHNvcnQgOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9KVxuICAgIC8vIE1hcCBiYWNrIHRvIHNlc3Npb25faWQuXG4gICAgLm1hcChmdW5jdGlvbiAocCkge1xuICAgICAgcmV0dXJuIHAuc2Vzc2lvbl9pZDtcbiAgICB9KVxuICAgIC8vIEZpbHRlciBhbnkgcG90ZW50aWFsIG51bGwvdW5kZWZpbmVkIGlkcy5cbiAgICAvLyBUaGlzIHNob3VsZG4ndCByZWFsbHkgaGFwcGVuLCBidXQgYmV0dGVyIHNhZmUgdGhhbiBzb3JyeS5cbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICB9LCBbZmlsdGVyLCBwcmVGaWx0ZXJlZFNvcnRlZElkcywgc29ydF0pO1xuICB2YXIgX2MgPSBfX3JlYWQodXNlU3RhdGUoW10pLCAyKSxcbiAgICBjdXN0b21JZHMgPSBfY1swXSxcbiAgICBzZXRDdXN0b21JZHMgPSBfY1sxXTtcbiAgdmFyIG1heWJlVXBkYXRlQ3VzdG9tSWRzID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQpIHtcbiAgICBpZiAoIXNob3VsZFVzZUN1c3RvbUlkcykgcmV0dXJuO1xuICAgIHZhciBuZXdJZHMgPSBnZXRDdXN0b21GaWx0ZXJlZElkcyhnZXQpO1xuICAgIGlmIChjdXN0b21EZWVwRXF1YWwobmV3SWRzLCBjdXN0b21JZHMpKSByZXR1cm47XG4gICAgc2V0Q3VzdG9tSWRzKG5ld0lkcyk7XG4gIH0sIFtjdXN0b21JZHMsIGdldEN1c3RvbUZpbHRlcmVkSWRzLCBzaG91bGRVc2VDdXN0b21JZHNdKSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgbWF5YmVVcGRhdGVDdXN0b21JZHMoKTtcbiAgfSwgW21heWJlVXBkYXRlQ3VzdG9tSWRzXSk7XG4gIHVzZVRocm90dGxlZERhaWx5RXZlbnQoWydwYXJ0aWNpcGFudC1qb2luZWQnLCAncGFydGljaXBhbnQtdXBkYXRlZCcsICdhY3RpdmUtc3BlYWtlci1jaGFuZ2UnLCAncGFydGljaXBhbnQtbGVmdCddLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZ0cykge1xuICAgIGlmICghZXZ0cy5sZW5ndGgpIHJldHVybjtcbiAgICBldnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBzd2l0Y2ggKGV2LmFjdGlvbikge1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC1qb2luZWQnOlxuICAgICAgICAgIG9uUGFydGljaXBhbnRKb2luZWQgPT09IG51bGwgfHwgb25QYXJ0aWNpcGFudEpvaW5lZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudEpvaW5lZChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BhcnRpY2lwYW50LXVwZGF0ZWQnOlxuICAgICAgICAgIG9uUGFydGljaXBhbnRVcGRhdGVkID09PSBudWxsIHx8IG9uUGFydGljaXBhbnRVcGRhdGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblBhcnRpY2lwYW50VXBkYXRlZChldik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZSc6XG4gICAgICAgICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID09PSBudWxsIHx8IG9uQWN0aXZlU3BlYWtlckNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25BY3RpdmVTcGVha2VyQ2hhbmdlKGV2KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncGFydGljaXBhbnQtbGVmdCc6XG4gICAgICAgICAgb25QYXJ0aWNpcGFudExlZnQgPT09IG51bGwgfHwgb25QYXJ0aWNpcGFudExlZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUGFydGljaXBhbnRMZWZ0KGV2KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBtYXliZVVwZGF0ZUN1c3RvbUlkcygpO1xuICB9LCBbbWF5YmVVcGRhdGVDdXN0b21JZHMsIG9uQWN0aXZlU3BlYWtlckNoYW5nZSwgb25QYXJ0aWNpcGFudEpvaW5lZCwgb25QYXJ0aWNpcGFudExlZnQsIG9uUGFydGljaXBhbnRVcGRhdGVkXSkpO1xuICB2YXIgcmVzdWx0ID0gdHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2Ygc29ydCA9PT0gJ2Z1bmN0aW9uJyA/IGN1c3RvbUlkcyA6IHByZUZpbHRlcmVkU29ydGVkSWRzO1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgc2NyZWVuU2hhcmVzU3RhdGUgPSBlcXVhbEF0b21GYW1pbHkoe1xuICBlcXVhbHM6IGFycmF5c0RlZXBFcXVhbCxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnZXQpIHtcbiAgICAgIHZhciBzY3JlZW5JZHMgPSBnZXQocGFydGljaXBhbnRJZHNGaWx0ZXJlZEFuZFNvcnRlZFN0YXRlKGdldFBhcnRpY2lwYW50SWRzRmlsdGVyU29ydFBhcmFtKCdzY3JlZW4nLCBudWxsKSkpO1xuICAgICAgcmV0dXJuIHNjcmVlbklkcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbG9jYWw6IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgJ2xvY2FsJykpLFxuICAgICAgICAgIHNjcmVlbkF1ZGlvOiBnZXQoZ2V0UGFydGljaXBhbnRQcm9wZXJ0eUF0b20oaWQsICd0cmFja3Muc2NyZWVuQXVkaW8nKSksXG4gICAgICAgICAgc2NyZWVuVmlkZW86IGdldChnZXRQYXJ0aWNpcGFudFByb3BlcnR5QXRvbShpZCwgJ3RyYWNrcy5zY3JlZW5WaWRlbycpKSxcbiAgICAgICAgICBzY3JlZW5JZDogXCJcIi5jb25jYXQoaWQsIFwiLXNjcmVlblwiKSxcbiAgICAgICAgICBzZXNzaW9uX2lkOiBpZFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufSk7XG4vKipcbiAqIEFsbG93cyBhY2Nlc3MgdG8gaW5mb3JtYXRpb24gYWJvdXQgc2hhcmVkIHNjcmVlbnMsIGFuZCBtZXRob2RzIHRvIHN0YXJ0IG9yIHN0b3AgYSBsb2NhbCBzY3JlZW4gc2hhcmUuXG4gKi9cbnZhciB1c2VTY3JlZW5TaGFyZSA9IGZ1bmN0aW9uIHVzZVNjcmVlblNoYXJlKF9hKSB7XG4gIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uRXJyb3IgPSBfYi5vbkVycm9yLFxuICAgIG9uTG9jYWxTY3JlZW5TaGFyZVN0YXJ0ZWQgPSBfYi5vbkxvY2FsU2NyZWVuU2hhcmVTdGFydGVkLFxuICAgIG9uTG9jYWxTY3JlZW5TaGFyZVN0b3BwZWQgPSBfYi5vbkxvY2FsU2NyZWVuU2hhcmVTdG9wcGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc3RhcnRTY3JlZW5TaGFyZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGRhaWx5ID09PSBudWxsIHx8IGRhaWx5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYWlseS5zdGFydFNjcmVlblNoYXJlLmFwcGx5KGRhaWx5LCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgc3RvcFNjcmVlblNoYXJlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnN0b3BTY3JlZW5TaGFyZS5hcHBseShkYWlseSwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpO1xuICB9LCBbZGFpbHldKTtcbiAgdXNlRGFpbHlFdmVudCgnbG9jYWwtc2NyZWVuLXNoYXJlLXN0YXJ0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG9uTG9jYWxTY3JlZW5TaGFyZVN0YXJ0ZWQgPT09IG51bGwgfHwgb25Mb2NhbFNjcmVlblNoYXJlU3RhcnRlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Mb2NhbFNjcmVlblNoYXJlU3RhcnRlZCgpO1xuICB9LCBbb25Mb2NhbFNjcmVlblNoYXJlU3RhcnRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbG9jYWwtc2NyZWVuLXNoYXJlLXN0b3BwZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG9uTG9jYWxTY3JlZW5TaGFyZVN0b3BwZWQgPT09IG51bGwgfHwgb25Mb2NhbFNjcmVlblNoYXJlU3RvcHBlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Mb2NhbFNjcmVlblNoYXJlU3RvcHBlZCgpO1xuICB9LCBbb25Mb2NhbFNjcmVlblNoYXJlU3RvcHBlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbm9uZmF0YWwtZXJyb3InLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBpZiAoZXYudHlwZSAhPT0gJ3NjcmVlbi1zaGFyZS1lcnJvcicpIHJldHVybjtcbiAgICBvbkVycm9yID09PSBudWxsIHx8IG9uRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uRXJyb3IoZXYpO1xuICB9LCBbb25FcnJvcl0pKTtcbiAgdmFyIHNjcmVlbnMgPSB1c2VBdG9tVmFsdWUoc2NyZWVuU2hhcmVzU3RhdGUodW5kZWZpbmVkKSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgaXNTaGFyaW5nU2NyZWVuOiBzY3JlZW5zLnNvbWUoZnVuY3Rpb24gKHMpIHtcbiAgICAgIHJldHVybiBzLmxvY2FsO1xuICAgIH0pLFxuICAgIHNjcmVlbnM6IHNjcmVlbnMsXG4gICAgc3RhcnRTY3JlZW5TaGFyZTogc3RhcnRTY3JlZW5TaGFyZSxcbiAgICBzdG9wU2NyZWVuU2hhcmU6IHN0b3BTY3JlZW5TaGFyZVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwYXJ0aWNpcGFudCdzIHRyYWNrIGFuZCBzdGF0ZSwgYmFzZWQgb24gdGhlIGdpdmVuIE1lZGlhVHlwZS5cbiAqXG4gKiBFcXVpdmFsZW50IHRvIGRhaWx5LnBhcnRpY2lwYW50cygpW3BhcnRpY2lwYW50SWRdLnRyYWNrc1t0eXBlXS5cbiAqXG4gKiBAcGFyYW0gcGFydGljaXBhbnRJZCBUaGUgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkLlxuICogQHBhcmFtIHR5cGUgVGhlIHRyYWNrIHR5cGUuIERlZmF1bHQ6IFwidmlkZW9cIlxuICovXG52YXIgdXNlTWVkaWFUcmFjayA9IGZ1bmN0aW9uIHVzZU1lZGlhVHJhY2socGFydGljaXBhbnRJZCwgdHlwZSkge1xuICBpZiAodHlwZSA9PT0gdm9pZCAwKSB7XG4gICAgdHlwZSA9ICd2aWRlbyc7XG4gIH1cbiAgdmFyIHRyYWNrU3RhdGUgPSB1c2VQYXJ0aWNpcGFudFByb3BlcnR5KHBhcnRpY2lwYW50SWQsIFwidHJhY2tzLlwiLmNvbmNhdCh0eXBlKSk7XG4gIHZhciByZXN1bHQgPSB0cmFja1N0YXRlID8gX2Fzc2lnbihfYXNzaWduKHt9LCB0cmFja1N0YXRlKSwge1xuICAgIGlzT2ZmOiBpc1RyYWNrT2ZmKHRyYWNrU3RhdGUuc3RhdGUpXG4gIH0pIDoge1xuICAgIGlzT2ZmOiB0cnVlLFxuICAgIHBlcnNpc3RlbnRUcmFjazogdW5kZWZpbmVkLFxuICAgIHN0YXRlOiAnb2ZmJyxcbiAgICBzdWJzY3JpYmVkOiBmYWxzZVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiB1c2VNZXJnZWRSZWYoKSB7XG4gIHZhciByZWZzID0gW107XG4gIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgcmVmc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICB9XG4gIHJldHVybiB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVmcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJlZiA9IHJlZnNbaV07XG4gICAgICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykgcmVmKGVsZW1lbnQpO2Vsc2UgaWYgKHJlZiAmJiBfdHlwZW9mKHJlZikgPT09ICdvYmplY3QnKSByZWYuY3VycmVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICB9LFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIHJlZnMpO1xufVxuXG52YXIgRGFpbHlBdWRpb1RyYWNrID0gbWVtbyhmb3J3YXJkUmVmKGZ1bmN0aW9uIChfYSwgcmVmKSB7XG4gIHZhciBvblBsYXlGYWlsZWQgPSBfYS5vblBsYXlGYWlsZWQsXG4gICAgc2Vzc2lvbklkID0gX2Euc2Vzc2lvbklkLFxuICAgIF9iID0gX2EudHlwZSxcbiAgICB0eXBlID0gX2IgPT09IHZvaWQgMCA/ICdhdWRpbycgOiBfYixcbiAgICBwcm9wcyA9IF9fcmVzdChfYSwgW1wib25QbGF5RmFpbGVkXCIsIFwic2Vzc2lvbklkXCIsIFwidHlwZVwiXSk7XG4gIHZhciBhdWRpb0VsID0gdXNlUmVmKG51bGwpO1xuICB2YXIgYXVkaW8gPSB1c2VNZWRpYVRyYWNrKHNlc3Npb25JZCwgdHlwZSk7XG4gIHZhciBhdWRpb1JlZiA9IHVzZU1lcmdlZFJlZihhdWRpb0VsLCByZWYpO1xuICB2YXIgc3Vic2NyaWJlZFN0YXRlID0gYXVkaW8gPT09IG51bGwgfHwgYXVkaW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1ZGlvLnN1YnNjcmliZWQ7XG4gIC8qKlxuICAgKiBTZXR1cCBhdWRpbyB0YWcuXG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdWRpb1RhZyA9IGF1ZGlvRWwuY3VycmVudDtcbiAgICBpZiAoIWF1ZGlvVGFnIHx8ICEoYXVkaW8gPT09IG51bGwgfHwgYXVkaW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1ZGlvLnBlcnNpc3RlbnRUcmFjaykpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlQ2FuUGxheSA9IGZ1bmN0aW9uIGhhbmRsZUNhblBsYXkoKSB7XG4gICAgICBhdWRpb1RhZy5wbGF5KClbXCJjYXRjaFwiXShmdW5jdGlvbiAoZSkge1xuICAgICAgICBvblBsYXlGYWlsZWQgPT09IG51bGwgfHwgb25QbGF5RmFpbGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblBsYXlGYWlsZWQoe1xuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICAgIHRhcmdldDogYXVkaW9UYWcsXG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICAgICAgbmFtZTogZS5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoIU1lZGlhU3RyZWFtKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJNZWRpYVN0cmVhbSBBUEkgbm90IGF2YWlsYWJsZS4gQ2FuJ3Qgc2V0dXAgXCIuY29uY2F0KHR5cGUsIFwiIGZvciBcIikuY29uY2F0KHNlc3Npb25JZCkpO1xuICAgICAgb25QbGF5RmFpbGVkID09PSBudWxsIHx8IG9uUGxheUZhaWxlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25QbGF5RmFpbGVkKHtcbiAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICAgIHRhcmdldDogYXVkaW9UYWcsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIG1lc3NhZ2U6ICdNZWRpYVN0cmVhbSBBUEkgbm90IGF2YWlsYWJsZScsXG4gICAgICAgIG5hbWU6ICdNZWRpYVN0cmVhbSBBUEkgbm90IGF2YWlsYWJsZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhdWRpb1RhZy5hZGRFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgaGFuZGxlQ2FuUGxheSk7XG4gICAgYXVkaW9UYWcuc3JjT2JqZWN0ID0gbmV3IE1lZGlhU3RyZWFtKFthdWRpbyA9PT0gbnVsbCB8fCBhdWRpbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXVkaW8ucGVyc2lzdGVudFRyYWNrXSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF1ZGlvVGFnID09PSBudWxsIHx8IGF1ZGlvVGFnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdWRpb1RhZy5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5JywgaGFuZGxlQ2FuUGxheSk7XG4gICAgfTtcbiAgfSwgW2F1ZGlvID09PSBudWxsIHx8IGF1ZGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdWRpby5wZXJzaXN0ZW50VHJhY2ssIG9uUGxheUZhaWxlZCwgc2Vzc2lvbklkLCB0eXBlXSk7XG4gIHVzZURhaWx5RXZlbnQoJ3BhcnRpY2lwYW50LWxlZnQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB2YXIgYXVkaW9UYWcgPSBhdWRpb0VsLmN1cnJlbnQ7XG4gICAgaWYgKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQgIT09IHNlc3Npb25JZCB8fCAhYXVkaW9UYWcpIHJldHVybjtcbiAgICBhdWRpb1RhZy5zcmNPYmplY3QgPSBudWxsO1xuICB9LCBbc2Vzc2lvbklkXSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIsIF9hc3NpZ24oe1xuICAgIGF1dG9QbGF5OiB0cnVlLFxuICAgIHJlZjogYXVkaW9SZWZcbiAgfSwgcHJvcHMsIHtcbiAgICBcImRhdGEtc2Vzc2lvbi1pZFwiOiBzZXNzaW9uSWQsXG4gICAgXCJkYXRhLWF1ZGlvLXR5cGVcIjogdHlwZSxcbiAgICBcImRhdGEtc3Vic2NyaWJlZFwiOiBzdWJzY3JpYmVkU3RhdGVcbiAgfSkpO1xufSkpO1xuRGFpbHlBdWRpb1RyYWNrLmRpc3BsYXlOYW1lID0gJ0RhaWx5QXVkaW9UcmFjayc7XG5cbnZhciBEYWlseUF1ZGlvID0gbWVtbyhmb3J3YXJkUmVmKGZ1bmN0aW9uIChfYSwgcmVmKSB7XG4gIHZhciBfYiA9IF9hLmF1dG9TdWJzY3JpYmVBY3RpdmVTcGVha2VyLFxuICAgIGF1dG9TdWJzY3JpYmVBY3RpdmVTcGVha2VyID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2IsXG4gICAgX2MgPSBfYS5tYXhTcGVha2VycyxcbiAgICBtYXhTcGVha2VycyA9IF9jID09PSB2b2lkIDAgPyA1IDogX2MsXG4gICAgb25QbGF5RmFpbGVkID0gX2Eub25QbGF5RmFpbGVkLFxuICAgIF9kID0gX2EucGxheUxvY2FsU2NyZWVuQXVkaW8sXG4gICAgcGxheUxvY2FsU2NyZWVuQXVkaW8gPSBfZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZDtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIF9lID0gX19yZWFkKHVzZVN0YXRlKG5ldyBBcnJheShtYXhTcGVha2VycykuZmlsbCgnJykpLCAyKSxcbiAgICBzcGVha2VycyA9IF9lWzBdLFxuICAgIHNldFNwZWFrZXJzID0gX2VbMV07XG4gIHZhciBzY3JlZW5zID0gdXNlU2NyZWVuU2hhcmUoKS5zY3JlZW5zO1xuICB2YXIgbG9jYWxTZXNzaW9uSWQgPSB1c2VMb2NhbFNlc3Npb25JZCgpO1xuICB2YXIgYWN0aXZlU3BlYWtlcklkID0gdXNlQWN0aXZlU3BlYWtlcklkKHtcbiAgICBpZ25vcmVMb2NhbDogdHJ1ZVxuICB9KTtcbiAgdmFyIGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0QWN0aXZlU3BlYWtlckF1ZGlvOiBmdW5jdGlvbiBnZXRBY3RpdmVTcGVha2VyQXVkaW8oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBjb250YWluZXJSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnF1ZXJ5U2VsZWN0b3IoXCJhdWRpb1tkYXRhLXNlc3Npb24taWQ9XFxcIlwiLmNvbmNhdChhY3RpdmVTcGVha2VySWQsIFwiXFxcIl1bZGF0YS1hdWRpby10eXBlPVxcXCJhdWRpb1xcXCJdXCIpKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBnZXRBbGxBdWRpbzogZnVuY3Rpb24gZ2V0QWxsQXVkaW8oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKChfYiA9IChfYSA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvckFsbCgnYXVkaW8nKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pO1xuICAgICAgfSxcbiAgICAgIGdldEF1ZGlvQnlTZXNzaW9uSWQ6IGZ1bmN0aW9uIGdldEF1ZGlvQnlTZXNzaW9uSWQoaWQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvcihcImF1ZGlvW2RhdGEtc2Vzc2lvbi1pZD1cXFwiXCIuY29uY2F0KGlkLCBcIlxcXCJdW2RhdGEtYXVkaW8tdHlwZT1cXFwiYXVkaW9cXFwiXVwiKSkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XG4gICAgICB9LFxuICAgICAgZ2V0Um1wQXVkaW86IGZ1bmN0aW9uIGdldFJtcEF1ZGlvKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSgoX2IgPSAoX2EgPSBjb250YWluZXJSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnF1ZXJ5U2VsZWN0b3JBbGwoJ2F1ZGlvW2RhdGEtYXVkaW8tdHlwZT1cInJtcEF1ZGlvXCJdJykpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdKTtcbiAgICAgIH0sXG4gICAgICBnZXRTY3JlZW5BdWRpbzogZnVuY3Rpb24gZ2V0U2NyZWVuQXVkaW8oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKChfYiA9IChfYSA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvckFsbCgnYXVkaW9bZGF0YS1hdWRpby10eXBlPVwic2NyZWVuQXVkaW9cIl0nKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW10pO1xuICAgICAgfSxcbiAgICAgIGdldFJtcEF1ZGlvQnlTZXNzaW9uSWQ6IGZ1bmN0aW9uIGdldFJtcEF1ZGlvQnlTZXNzaW9uSWQoaWQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvcihcImF1ZGlvW2RhdGEtc2Vzc2lvbi1pZD1cXFwiXCIuY29uY2F0KGlkLCBcIlxcXCJdW2RhdGEtYXVkaW8tdHlwZT1cXFwicm1wQXVkaW9cXFwiXVwiKSkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XG4gICAgICB9LFxuICAgICAgZ2V0U2NyZWVuQXVkaW9CeVNlc3Npb25JZDogZnVuY3Rpb24gZ2V0U2NyZWVuQXVkaW9CeVNlc3Npb25JZChpZCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gY29udGFpbmVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5xdWVyeVNlbGVjdG9yKFwiYXVkaW9bZGF0YS1zZXNzaW9uLWlkPVxcXCJcIi5jb25jYXQoaWQsIFwiXFxcIl1bZGF0YS1hdWRpby10eXBlPVxcXCJzY3JlZW5BdWRpb1xcXCJdXCIpKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbYWN0aXZlU3BlYWtlcklkXSk7XG4gIHZhciBhc3NpZ25TcGVha2VyID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChnZXQsIF9zZXQsIHNlc3Npb25JZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN1YnNjcmliZWRQYXJ0aWNpcGFudHMsIGlzU3Vic2NyaWJlZDtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgc3Vic2NyaWJlZFBhcnRpY2lwYW50cyA9IE9iamVjdC52YWx1ZXMoKF9hID0gZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnBhcnRpY2lwYW50cygpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgcmV0dXJuICFwLmxvY2FsICYmIEJvb2xlYW4ocC50cmFja3MuYXVkaW8uc3Vic2NyaWJlZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpc1N1YnNjcmliZWQgPSBmdW5jdGlvbiBpc1N1YnNjcmliZWQoaWQpIHtcbiAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlZFBhcnRpY2lwYW50cy5zb21lKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICByZXR1cm4gcC5zZXNzaW9uX2lkID09PSBpZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFpc1N1YnNjcmliZWQoc2Vzc2lvbklkKSkge1xuICAgICAgICAgIGlmIChkYWlseSAmJiAhZGFpbHkuaXNEZXN0cm95ZWQoKSAmJiBhdXRvU3Vic2NyaWJlQWN0aXZlU3BlYWtlciAmJiAhZGFpbHkuc3Vic2NyaWJlVG9UcmFja3NBdXRvbWF0aWNhbGx5KCkpIHtcbiAgICAgICAgICAgIGRhaWx5LnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwge1xuICAgICAgICAgICAgICBzZXRTdWJzY3JpYmVkVHJhY2tzOiB7XG4gICAgICAgICAgICAgICAgYXVkaW86IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZXRTcGVha2VycyhmdW5jdGlvbiAocHJldlNwZWFrZXJzKSB7XG4gICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgIC8vIE5ldyBzcGVha2VyIGlzIGFscmVhZHkgcHJlc2VudFxuICAgICAgICAgIGlmIChwcmV2U3BlYWtlcnMuaW5jbHVkZXMoc2Vzc2lvbklkKSkgcmV0dXJuIHByZXZTcGVha2VycztcbiAgICAgICAgICAvLyBUcnkgdG8gZmluZCBhIGZyZWUgc2xvdDogZWl0aGVyIHVuYXNzaWduZWQgb3IgdW5zdWJzY3JpYmVkXG4gICAgICAgICAgdmFyIGZyZWVTbG90Q2hlY2sgPSBmdW5jdGlvbiBmcmVlU2xvdENoZWNrKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gIWlkIHx8ICFpc1N1YnNjcmliZWQoaWQpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHByZXZTcGVha2Vycy5zb21lKGZyZWVTbG90Q2hlY2spKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gcHJldlNwZWFrZXJzLmZpbmRJbmRleChmcmVlU2xvdENoZWNrKTtcbiAgICAgICAgICAgIHByZXZTcGVha2Vyc1tpZHhdID0gc2Vzc2lvbklkO1xuICAgICAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChwcmV2U3BlYWtlcnMpLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEZyb20gaGVyZSBvbiB3ZSBjYW4gYXNzdW1lIHRoYXQgYWxsIGFzc2lnbmVkIGF1ZGlvIHRyYWNrcyBhcmUgc3Vic2NyaWJlZC5cbiAgICAgICAgICAvLyBUcnkgdG8gZmluZCBtdXRlZCByZWNlbnQgc3BlYWtlclxuICAgICAgICAgIHZhciBtdXRlZElkeCA9IHByZXZTcGVha2Vycy5maW5kSW5kZXgoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlZFBhcnRpY2lwYW50cy5zb21lKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwLnNlc3Npb25faWQgPT09IGlkICYmIGlzVHJhY2tPZmYocC50cmFja3MuYXVkaW8uc3RhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG11dGVkSWR4ID49IDApIHtcbiAgICAgICAgICAgIHByZXZTcGVha2Vyc1ttdXRlZElkeF0gPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICByZXR1cm4gX19zcHJlYWRBcnJheShbXSwgX19yZWFkKHByZXZTcGVha2VycyksIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRmluZCBsZWFzdCByZWNlbnQgbm9uLWFjdGl2ZSBzcGVha2VyIGFuZCByZXBsYWNlIHdpdGggbmV3IHNwZWFrZXJcbiAgICAgICAgICB2YXIgc3BlYWtlck9iamVjdHMgPSBzdWJzY3JpYmVkUGFydGljaXBhbnRzLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciBwYXJ0aWNpcGFudHMgY3VycmVudGx5IGFzc2lnbmVkIHRvIHNwZWFrZXIgc2xvdHNcbiAgICAgICAgICAgIHJldHVybiBwcmV2U3BlYWtlcnMuaW5jbHVkZXMocC5zZXNzaW9uX2lkKSAmJlxuICAgICAgICAgICAgLy8gRG9uJ3QgcmVwbGFjZSBjdXJyZW50IGFjdGl2ZSBwYXJ0aWNpcGFudCwgdG8gYXZvaWQgYXVkaW8gZHJvcC1vdXRzXG4gICAgICAgICAgICBwLnNlc3Npb25faWQgIT09IGFjdGl2ZVNwZWFrZXJJZDtcbiAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgdmFyIGxhc3RBY3RpdmVBID0gKF9hID0gZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGEuc2Vzc2lvbl9pZCwgJ2xhc3RfYWN0aXZlJykpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgRGF0ZSgnMTk3MC0wMS0wMScpO1xuICAgICAgICAgICAgdmFyIGxhc3RBY3RpdmVCID0gKF9iID0gZ2V0KGdldFBhcnRpY2lwYW50UHJvcGVydHlBdG9tKGIuc2Vzc2lvbl9pZCwgJ2xhc3RfYWN0aXZlJykpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBuZXcgRGF0ZSgnMTk3MC0wMS0wMScpO1xuICAgICAgICAgICAgaWYgKGxhc3RBY3RpdmVBID4gbGFzdEFjdGl2ZUIpIHJldHVybiAxO1xuICAgICAgICAgICAgaWYgKGxhc3RBY3RpdmVBIDwgbGFzdEFjdGl2ZUIpIHJldHVybiAtMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIE5vIHByZXZpb3VzIHNwZWFrZXIgaW4gY2FsbCBhbnltb3JlLiBBc3NpZ24gZmlyc3QgZnJlZSBzbG90LlxuICAgICAgICAgIGlmICghc3BlYWtlck9iamVjdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBEb24ndCByZXBsYWNlIHRoZSBhY3RpdmUgc3BlYWtlci4gSW5zdGVhZCBmaW5kIGZpcnN0IG5vbi1hY3RpdmUgc3BlYWtlciBzbG90LlxuICAgICAgICAgICAgdmFyIHJlcGxhY2VJZHhfMSA9IHByZXZTcGVha2Vycy5maW5kSW5kZXgoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpZCAhPT0gYWN0aXZlU3BlYWtlcklkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcmV2U3BlYWtlcnNbcmVwbGFjZUlkeF8xXSA9IHNlc3Npb25JZDtcbiAgICAgICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQocHJldlNwZWFrZXJzKSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZXBsYWNlIGxlYXN0IHJlY2VudCBzcGVha2VyIHdpdGggbmV3IHNwZWFrZXJcbiAgICAgICAgICB2YXIgcmVwbGFjZUlkeCA9IHByZXZTcGVha2Vycy5pbmRleE9mKChfYSA9IHNwZWFrZXJPYmplY3RzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgcHJldlNwZWFrZXJzW3JlcGxhY2VJZHhdID0gc2Vzc2lvbklkO1xuICAgICAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQocHJldlNwZWFrZXJzKSwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFthY3RpdmVTcGVha2VySWQsIGF1dG9TdWJzY3JpYmVBY3RpdmVTcGVha2VyLCBkYWlseV0pKTtcbiAgLyoqXG4gICAqIFVuYXNzaWducyBzcGVha2VyIGZyb20gc3BlYWtlciBzbG90LCBlLmcuIGJlY2F1c2UgcGFydGljaXBhbnQgbGVmdCB0aGUgY2FsbC5cbiAgICovXG4gIHZhciByZW1vdmVTcGVha2VyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHNlc3Npb25JZCkge1xuICAgIHNldFNwZWFrZXJzKGZ1bmN0aW9uIChwcmV2U3BlYWtlcnMpIHtcbiAgICAgIGlmICghcHJldlNwZWFrZXJzLmluY2x1ZGVzKHNlc3Npb25JZCkpIHJldHVybiBwcmV2U3BlYWtlcnM7XG4gICAgICB2YXIgbmV3U3BlYWtlcnMgPSBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQocHJldlNwZWFrZXJzKSwgZmFsc2UpO1xuICAgICAgdmFyIGlkeCA9IG5ld1NwZWFrZXJzLmluZGV4T2Yoc2Vzc2lvbklkKTtcbiAgICAgIG5ld1NwZWFrZXJzW2lkeF0gPSAnJztcbiAgICAgIHJldHVybiBuZXdTcGVha2VycztcbiAgICB9KTtcbiAgfSwgW10pO1xuICB1c2VUaHJvdHRsZWREYWlseUV2ZW50KFsnYWN0aXZlLXNwZWFrZXItY2hhbmdlJywgJ3RyYWNrLXN0YXJ0ZWQnLCAncGFydGljaXBhbnQtbGVmdCddLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZ0cykge1xuICAgIGV2dHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIHN3aXRjaCAoZXYuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZSc6XG4gICAgICAgICAgaWYgKGV2LmFjdGl2ZVNwZWFrZXIucGVlcklkID09PSBsb2NhbFNlc3Npb25JZCkgcmV0dXJuO1xuICAgICAgICAgIGFzc2lnblNwZWFrZXIoZXYuYWN0aXZlU3BlYWtlci5wZWVySWQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0cmFjay1zdGFydGVkJzpcbiAgICAgICAgICBpZiAoZXYudHJhY2sua2luZCA9PT0gJ2F1ZGlvJyAmJiBldi5wYXJ0aWNpcGFudCAmJiAhZXYucGFydGljaXBhbnQubG9jYWwpIHtcbiAgICAgICAgICAgIGFzc2lnblNwZWFrZXIoZXYucGFydGljaXBhbnQuc2Vzc2lvbl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC1sZWZ0JzpcbiAgICAgICAgICByZW1vdmVTcGVha2VyKGV2LnBhcnRpY2lwYW50LnNlc3Npb25faWQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbYXNzaWduU3BlYWtlciwgbG9jYWxTZXNzaW9uSWQsIHJlbW92ZVNwZWFrZXJdKSwgMjAwKTtcbiAgdmFyIHJtcEF1ZGlvSWRzID0gdXNlUGFydGljaXBhbnRJZHMoe1xuICAgIGZpbHRlcjogdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHApIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiBCb29sZWFuKChfYSA9IHAgPT09IG51bGwgfHwgcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcC50cmFja3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ybXBBdWRpbyk7XG4gICAgfSwgW10pXG4gIH0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiBjb250YWluZXJSZWZcbiAgfSwgc3BlYWtlcnMubWFwKGZ1bmN0aW9uIChzZXNzaW9uSWQsIGlkeCkge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5QXVkaW9UcmFjaywge1xuICAgICAga2V5OiBcInNwZWFrZXItc2xvdC1cIi5jb25jYXQoaWR4KSxcbiAgICAgIG9uUGxheUZhaWxlZDogb25QbGF5RmFpbGVkLFxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICB0eXBlOiBcImF1ZGlvXCJcbiAgICB9KTtcbiAgfSksIHNjcmVlbnMuZmlsdGVyKGZ1bmN0aW9uIChzY3JlZW4pIHtcbiAgICByZXR1cm4gcGxheUxvY2FsU2NyZWVuQXVkaW8gPyB0cnVlIDogIXNjcmVlbi5sb2NhbDtcbiAgfSkubWFwKGZ1bmN0aW9uIChzY3JlZW4pIHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseUF1ZGlvVHJhY2ssIHtcbiAgICAgIGtleTogc2NyZWVuLnNjcmVlbklkLFxuICAgICAgb25QbGF5RmFpbGVkOiBvblBsYXlGYWlsZWQsXG4gICAgICBzZXNzaW9uSWQ6IHNjcmVlbi5zZXNzaW9uX2lkLFxuICAgICAgdHlwZTogXCJzY3JlZW5BdWRpb1wiXG4gICAgfSk7XG4gIH0pLCBybXBBdWRpb0lkcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlBdWRpb1RyYWNrLCB7XG4gICAgICBrZXk6IFwiXCIuY29uY2F0KGlkLCBcIi1ybXBcIiksXG4gICAgICBvblBsYXlGYWlsZWQ6IG9uUGxheUZhaWxlZCxcbiAgICAgIHNlc3Npb25JZDogaWQsXG4gICAgICB0eXBlOiBcInJtcEF1ZGlvXCJcbiAgICB9KTtcbiAgfSkpO1xufSkpO1xuRGFpbHlBdWRpby5kaXNwbGF5TmFtZSA9ICdEYWlseUF1ZGlvJztcblxudmFyIERhaWx5VmlkZW8gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIERhaWx5VmlkZW8oX2EsIHJlZikge1xuICB2YXIgYXV0b21pcnJvciA9IF9hLmF1dG9taXJyb3IsXG4gICAgX2IgPSBfYS5maXQsXG4gICAgZml0ID0gX2IgPT09IHZvaWQgMCA/ICdjb250YWluJyA6IF9iLFxuICAgIG1pcnJvciA9IF9hLm1pcnJvcixcbiAgICBvblJlc2l6ZSA9IF9hLm9uUmVzaXplLFxuICAgIF9jID0gX2EucGxheWFibGVTdHlsZSxcbiAgICBwbGF5YWJsZVN0eWxlID0gX2MgPT09IHZvaWQgMCA/IHt9IDogX2MsXG4gICAgc2Vzc2lvbklkID0gX2Euc2Vzc2lvbklkLFxuICAgIF9kID0gX2Euc3R5bGUsXG4gICAgc3R5bGUgPSBfZCA9PT0gdm9pZCAwID8ge30gOiBfZCxcbiAgICBfZSA9IF9hLnR5cGUsXG4gICAgdHlwZSA9IF9lID09PSB2b2lkIDAgPyAndmlkZW8nIDogX2UsXG4gICAgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImF1dG9taXJyb3JcIiwgXCJmaXRcIiwgXCJtaXJyb3JcIiwgXCJvblJlc2l6ZVwiLCBcInBsYXlhYmxlU3R5bGVcIiwgXCJzZXNzaW9uSWRcIiwgXCJzdHlsZVwiLCBcInR5cGVcIl0pO1xuICB2YXIgbG9jYWxTZXNzaW9uSWQgPSB1c2VMb2NhbFNlc3Npb25JZCgpO1xuICB2YXIgaXNMb2NhbCA9IGxvY2FsU2Vzc2lvbklkID09PSBzZXNzaW9uSWQ7XG4gIHZhciBpc1NjcmVlbiA9IHR5cGUgPT09ICdzY3JlZW5WaWRlbyc7XG4gIHZhciBpc0xvY2FsQ2FtID0gaXNMb2NhbCAmJiAhaXNTY3JlZW47XG4gIHZhciB2aWRlb0VsID0gdXNlUmVmKG51bGwpO1xuICB2YXIgdmlkZW9SZWYgPSB1c2VNZXJnZWRSZWYodmlkZW9FbCwgcmVmKTtcbiAgdmFyIHZpZGVvU3RhdGUgPSB1c2VNZWRpYVRyYWNrKHNlc3Npb25JZCwgdHlwZSk7XG4gIHZhciB2aWRlb1RyYWNrID0gdmlkZW9TdGF0ZS5wZXJzaXN0ZW50VHJhY2s7XG4gIC8qKlxuICAgKiBDb25zaWRlcmVkIGFzIHBsYXlhYmxlIHZpZGVvOlxuICAgKiAtIGxvY2FsIGNhbSBmZWVkXG4gICAqIC0gYW55IHNjcmVlbiBzaGFyZVxuICAgKiAtIHJlbW90ZSBjYW0gZmVlZCB0aGF0IGlzIHN1YnNjcmliZWQgYW5kIHJlcG9ydGVkIGFzIHBsYXlhYmxlXG4gICAqL1xuICB2YXIgaXNQbGF5YWJsZSA9IGlzTG9jYWxDYW0gfHwgaXNTY3JlZW4gfHwgIXZpZGVvU3RhdGUuaXNPZmY7XG4gIHZhciB0cmFja1N0YXRlID0gdXNlUGFydGljaXBhbnRQcm9wZXJ0eShzZXNzaW9uSWQsIFwidHJhY2tzLlwiLmNvbmNhdCh0eXBlKSk7XG4gIHZhciBzdWJzY3JpYmVkU3RhdGUgPSB0cmFja1N0YXRlID09PSBudWxsIHx8IHRyYWNrU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyYWNrU3RhdGUuc3Vic2NyaWJlZDtcbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB2aWRlbyBuZWVkcyB0byBiZSBtaXJyb3JlZC5cbiAgICovXG4gIHZhciBpc01pcnJvcmVkID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBtaXJyb3IgPT09ICdib29sZWFuJykgcmV0dXJuIG1pcnJvcjtcbiAgICBpZiAoIWF1dG9taXJyb3IpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXZpZGVvVHJhY2spIHJldHVybiBpc0xvY2FsQ2FtO1xuICAgIHZhciB2aWRlb1RyYWNrU2V0dGluZ3MgPSB2aWRlb1RyYWNrLmdldFNldHRpbmdzKCk7XG4gICAgdmFyIGlzVXNlcnNGcm9udENhbWVyYSA9ICdmYWNpbmdNb2RlJyBpbiB2aWRlb1RyYWNrU2V0dGluZ3MgPyBpc0xvY2FsQ2FtICYmIHZpZGVvVHJhY2tTZXR0aW5ncy5mYWNpbmdNb2RlID09PSAndXNlcicgOiBpc0xvY2FsQ2FtO1xuICAgIC8vIG9ubHkgYXBwbHkgbWlycm9yIGVmZmVjdCB0byB1c2VyIGZhY2luZyBjYW1lcmFcbiAgICByZXR1cm4gaXNVc2Vyc0Zyb250Q2FtZXJhO1xuICB9LCBbYXV0b21pcnJvciwgaXNMb2NhbENhbSwgbWlycm9yLCB2aWRlb1RyYWNrXSk7XG4gIC8qKlxuICAgKiBIYW5kbGUgY2FucGxheSAmIHBpY3R1cmUtaW4tcGljdHVyZSBldmVudHMuXG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gc2V0dXBWaWRlb0V2ZW50cygpIHtcbiAgICB2YXIgdmlkZW8gPSB2aWRlb0VsLmN1cnJlbnQ7XG4gICAgaWYgKCF2aWRlbykgcmV0dXJuO1xuICAgIHZhciBwbGF5VmlkZW8gPSBmdW5jdGlvbiBwbGF5VmlkZW8oKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IHZpZGVvLnBsYXkoKTtcbiAgICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBBbGwgZ29vZCwgcGxheWJhY2sgc3RhcnRlZC5cbiAgICAgICAgICB2aWRlby5jb250cm9scyA9IGZhbHNlO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIC8vIEF1dG8tcGxheSB3YXMgcHJldmVudGVkLiBTaG93IHZpZGVvIGNvbnRyb2xzLCBzbyB1c2VyIGNhbiBwbGF5IHZpZGVvIG1hbnVhbGx5LlxuICAgICAgICAgIHZpZGVvLmNvbnRyb2xzID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBwbGF5IHZpZGVvJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBoYW5kbGVDYW5QbGF5ID0gZnVuY3Rpb24gaGFuZGxlQ2FuUGxheSgpIHtcbiAgICAgIGlmICghdmlkZW8ucGF1c2VkKSByZXR1cm47XG4gICAgICBwbGF5VmlkZW8oKTtcbiAgICB9O1xuICAgIHZhciBoYW5kbGVFbnRlclBJUCA9IGZ1bmN0aW9uIGhhbmRsZUVudGVyUElQKCkge1xuICAgICAgdmlkZW8uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcbiAgICB9O1xuICAgIHZhciBoYW5kbGVMZWF2ZVBJUCA9IGZ1bmN0aW9uIGhhbmRsZUxlYXZlUElQKCkge1xuICAgICAgdmlkZW8uc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZpZGVvLnBhdXNlZCkgcGxheVZpZGVvKCk7XG4gICAgICB9LCAxMDApO1xuICAgIH07XG4gICAgdmFyIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHJldHVybjtcbiAgICAgIGlmICghdmlkZW8ucGF1c2VkKSByZXR1cm47XG4gICAgICBwbGF5VmlkZW8oKTtcbiAgICB9O1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoYW5kbGVDYW5QbGF5KTtcbiAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbnRlcnBpY3R1cmVpbnBpY3R1cmUnLCBoYW5kbGVFbnRlclBJUCk7XG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbGVhdmVwaWN0dXJlaW5waWN0dXJlJywgaGFuZGxlTGVhdmVQSVApO1xuICAgIC8vIFZpZGVvcyBjYW4gYmUgcGF1c2VkIGlmIG1lZGlhIHdhcyBwbGF5ZWQgaW4gYW5vdGhlciBhcHAgb24gaU9TLlxuICAgIC8vIFJlc3VtaW5nIGhlcmUsIHdoZW4gcmV0dXJuaW5nIGJhY2sgdG8gRGFpbHkgY2FsbC5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCBoYW5kbGVDYW5QbGF5KTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VudGVycGljdHVyZWlucGljdHVyZScsIGhhbmRsZUVudGVyUElQKTtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xlYXZlcGljdHVyZWlucGljdHVyZScsIGhhbmRsZUxlYXZlUElQKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIC8qKlxuICAgKiBVcGRhdGUgc3JjT2JqZWN0LlxuICAgKi9cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uIHVwZGF0ZVNyY09iamVjdCgpIHtcbiAgICB2YXIgdmlkZW8gPSB2aWRlb0VsLmN1cnJlbnQ7XG4gICAgaWYgKCF2aWRlbyB8fCAhdmlkZW9UcmFjaykgcmV0dXJuO1xuICAgIGlmICghTWVkaWFTdHJlYW0pIHtcbiAgICAgIGNvbnNvbGUud2FybihcIk1lZGlhU3RyZWFtIEFQSSBub3QgYXZhaWxhYmxlLiBDYW4ndCBzZXR1cCBcIi5jb25jYXQodHlwZSwgXCIgZm9yIFwiKS5jb25jYXQoc2Vzc2lvbklkKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZpZGVvLnNyY09iamVjdCA9IG5ldyBNZWRpYVN0cmVhbShbdmlkZW9UcmFja10pO1xuICAgIHZpZGVvLmxvYWQoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gY2xlYW4gdXAgd2hlbiB1bm1vdW50ZWRcbiAgICAgIHZpZGVvLnNyY09iamVjdCA9IG51bGw7XG4gICAgICB2aWRlby5sb2FkKCk7XG4gICAgfTtcbiAgfSwgW3Nlc3Npb25JZCwgdHlwZSwgdmlkZW9UcmFjaywgdmlkZW9UcmFjayA9PT0gbnVsbCB8fCB2aWRlb1RyYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWRlb1RyYWNrLmlkXSk7XG4gIC8qKlxuICAgKiBBZGQgb3B0aW9uYWwgZXZlbnQgbGlzdGVuZXIgZm9yIHJlc2l6ZSBldmVudCBzbyB0aGUgcGFyZW50IGNvbXBvbmVudFxuICAgKiBjYW4ga25vdyB0aGUgdmlkZW8ncyBuYXRpdmUgYXNwZWN0IHJhdGlvLlxuICAgKi9cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uIHJlcG9ydFZpZGVvRGltZW5zaW9ucygpIHtcbiAgICB2YXIgdmlkZW8gPSB2aWRlb0VsLmN1cnJlbnQ7XG4gICAgaWYgKCFvblJlc2l6ZSB8fCAhdmlkZW8pIHJldHVybjtcbiAgICB2YXIgZnJhbWU7XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVzaXplKCkge1xuICAgICAgaWYgKGZyYW1lKSBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSk7XG4gICAgICBmcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2aWRlbyA9IHZpZGVvRWwuY3VycmVudDtcbiAgICAgICAgaWYgKCF2aWRlbyB8fCBkb2N1bWVudC5oaWRkZW4pIHJldHVybjtcbiAgICAgICAgdmFyIHZpZGVvV2lkdGggPSB2aWRlby52aWRlb1dpZHRoO1xuICAgICAgICB2YXIgdmlkZW9IZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDtcbiAgICAgICAgaWYgKHZpZGVvV2lkdGggJiYgdmlkZW9IZWlnaHQpIHtcbiAgICAgICAgICBvblJlc2l6ZSA9PT0gbnVsbCB8fCBvblJlc2l6ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZXNpemUoe1xuICAgICAgICAgICAgYXNwZWN0UmF0aW86IHZpZGVvV2lkdGggLyB2aWRlb0hlaWdodCxcbiAgICAgICAgICAgIGhlaWdodDogdmlkZW9IZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogdmlkZW9XaWR0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlUmVzaXplKCk7XG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBoYW5kbGVSZXNpemUpO1xuICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChmcmFtZSkgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpO1xuICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBoYW5kbGVSZXNpemUpO1xuICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTtcbiAgICB9O1xuICB9LCBbb25SZXNpemVdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCBfYXNzaWduKHtcbiAgICBhdXRvUGxheTogdHJ1ZSxcbiAgICBtdXRlZDogdHJ1ZSxcbiAgICBwbGF5c0lubGluZTogdHJ1ZSxcbiAgICByZWY6IHZpZGVvUmVmLFxuICAgIFwiZGF0YS1sb2NhbFwiOiBpc0xvY2FsLFxuICAgIFwiZGF0YS1taXJyb3JlZFwiOiBpc01pcnJvcmVkIHx8IHVuZGVmaW5lZCxcbiAgICBcImRhdGEtcGxheWFibGVcIjogaXNQbGF5YWJsZSB8fCB1bmRlZmluZWQsXG4gICAgXCJkYXRhLXNlc3Npb24taWRcIjogc2Vzc2lvbklkLFxuICAgIFwiZGF0YS1zdWJzY3JpYmVkXCI6IHN1YnNjcmliZWRTdGF0ZSxcbiAgICBcImRhdGEtdmlkZW8tdHlwZVwiOiB0eXBlLFxuICAgIHN0eWxlOiBfYXNzaWduKF9hc3NpZ24oe1xuICAgICAgb2JqZWN0Rml0OiBmaXQsXG4gICAgICB0cmFuc2Zvcm06IGlzTWlycm9yZWQgPyAnc2NhbGUoLTEsIDEpJyA6ICcnXG4gICAgfSwgc3R5bGUpLCBpc1BsYXlhYmxlID8gcGxheWFibGVTdHlsZSA6IHt9KVxuICB9LCBwcm9wcykpO1xufSk7XG5EYWlseVZpZGVvLmRpc3BsYXlOYW1lID0gJ0RhaWx5VmlkZW8nO1xuXG52YXIgRGFpbHlEZXZpY2VzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe1xuICByZWZyZXNoRGV2aWNlczogZnVuY3Rpb24gcmVmcmVzaERldmljZXMoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59KTtcblxudmFyIGdlbmVyYWxDYW1lcmFTdGF0ZSA9IGF0b20oJ2lkbGUnKTtcbmdlbmVyYWxDYW1lcmFTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdjYW1lcmEtc3RhdGUnKTtcbnZhciBnZW5lcmFsTWljcm9waG9uZVN0YXRlID0gYXRvbSgnaWRsZScpO1xuZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdtaWNyb3Bob25lLXN0YXRlJyk7XG52YXIgY2FtZXJhRGV2aWNlc1N0YXRlID0gYXRvbShbXSk7XG5jYW1lcmFEZXZpY2VzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnY2FtZXJhLWRldmljZXMnKTtcbnZhciBtaWNyb3Bob25lRGV2aWNlc1N0YXRlID0gYXRvbShbXSk7XG5taWNyb3Bob25lRGV2aWNlc1N0YXRlLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoJ21pY3JvcGhvbmUtZGV2aWNlcycpO1xudmFyIHNwZWFrZXJEZXZpY2VzU3RhdGUgPSBhdG9tKFtdKTtcbnNwZWFrZXJEZXZpY2VzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnc3BlYWtlci1kZXZpY2VzJyk7XG52YXIgbGFzdENhbWVyYUVycm9yU3RhdGUgPSBhdG9tKG51bGwpO1xubGFzdENhbWVyYUVycm9yU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnbGFzdC1jYW1lcmEtZXJyb3InKTtcbnZhciBEYWlseURldmljZXMgPSBmdW5jdGlvbiBEYWlseURldmljZXMoX2EpIHtcbiAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgbGlzdCBvZiBhdmFpbGFibGUgZGV2aWNlcyB1c2luZyBlbnVtZXJhdGVEZXZpY2VzLlxuICAgKiBQcmV2aW91cyBkZXZpY2Ugc3RhdGVzIGFyZSBrZXB0IGluIHBsYWNlLCBvdGhlcndpc2Ugc3RhdGVzIGFyZSBpbml0aWFsaXplZCBhcyAnZ3JhbnRlZCcuXG4gICAqL1xuICB2YXIgcmVmcmVzaERldmljZXMgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRldmljZXMsIGNhbXNfMSwgbWljc18xLCBzcGVha2Vyc18xLCBfYSwgY2FtZXJhXzEsIG1pY18xLCBzcGVha2VyXzEsIG1hcERldmljZV8xLCBzb3J0RGV2aWNlQnlMYWJlbF8xO1xuICAgICAgdmFyIF9iLCBfYztcbiAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2QpIHtcbiAgICAgICAgc3dpdGNoIChfZC5sYWJlbCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2hlY2sgZm9yIGxlZ2FjeSBicm93c2Vycy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoKF9iID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdldFVzZXJNZWRpYSkgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiAoKF9jID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmVudW1lcmF0ZURldmljZXMpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LXN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ25vdC1zdXBwb3J0ZWQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRhaWx5KSByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICBfZC5sYWJlbCA9IDE7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgX2QudHJ5cy5wdXNoKFsxLCA0LCwgNV0pO1xuICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGFpbHkuZW51bWVyYXRlRGV2aWNlcygpXTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBkZXZpY2VzID0gX2Quc2VudCgpLmRldmljZXM7XG4gICAgICAgICAgICBjYW1zXzEgPSBkZXZpY2VzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCcgJiYgZC5kZXZpY2VJZCAhPT0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1pY3NfMSA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkLmtpbmQgPT09ICdhdWRpb2lucHV0JyAmJiBkLmRldmljZUlkICE9PSAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3BlYWtlcnNfMSA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkLmtpbmQgPT09ICdhdWRpb291dHB1dCcgJiYgZC5kZXZpY2VJZCAhPT0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRhaWx5LmdldElucHV0RGV2aWNlcygpXTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBfYSA9IF9kLnNlbnQoKSwgY2FtZXJhXzEgPSBfYS5jYW1lcmEsIG1pY18xID0gX2EubWljLCBzcGVha2VyXzEgPSBfYS5zcGVha2VyO1xuICAgICAgICAgICAgbWFwRGV2aWNlXzEgPSBmdW5jdGlvbiBtYXBEZXZpY2VfMShkZXZpY2UsIGQsIHByZXZEZXZpY2VzKSB7XG4gICAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGV2aWNlOiBkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiAnZGV2aWNlSWQnIGluIGRldmljZSAmJiBkLmRldmljZUlkID09PSBkZXZpY2UuZGV2aWNlSWQsXG4gICAgICAgICAgICAgICAgc3RhdGU6IChfYiA9IChfYSA9IHByZXZEZXZpY2VzLmZpbmQoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwLmRldmljZS5kZXZpY2VJZCA9PT0gZC5kZXZpY2VJZDtcbiAgICAgICAgICAgICAgICB9KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YXRlKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnZ3JhbnRlZCdcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzb3J0RGV2aWNlQnlMYWJlbF8xID0gZnVuY3Rpb24gc29ydERldmljZUJ5TGFiZWxfMShhLCBiKSB7XG4gICAgICAgICAgICAgIGlmIChhLmRldmljZS5kZXZpY2VJZCA9PT0gJ2RlZmF1bHQnKSByZXR1cm4gLTE7XG4gICAgICAgICAgICAgIGlmIChiLmRldmljZS5kZXZpY2VJZCA9PT0gJ2RlZmF1bHQnKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgaWYgKGEuZGV2aWNlLmxhYmVsIDwgYi5kZXZpY2UubGFiZWwpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgaWYgKGEuZGV2aWNlLmxhYmVsID4gYi5kZXZpY2UubGFiZWwpIHJldHVybiAxO1xuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXQoY2FtZXJhRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAocHJldkNhbXMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhbXNfMS5maWx0ZXIoQm9vbGVhbikubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcERldmljZV8xKGNhbWVyYV8xLCBkLCBwcmV2Q2Ftcyk7XG4gICAgICAgICAgICAgIH0pLnNvcnQoc29ydERldmljZUJ5TGFiZWxfMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldChtaWNyb3Bob25lRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAocHJldk1pY3MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1pY3NfMS5maWx0ZXIoQm9vbGVhbikubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcERldmljZV8xKG1pY18xLCBkLCBwcmV2TWljcyk7XG4gICAgICAgICAgICAgIH0pLnNvcnQoc29ydERldmljZUJ5TGFiZWxfMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldChzcGVha2VyRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAocHJldlNwZWFrZXJzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzcGVha2Vyc18xLmZpbHRlcihCb29sZWFuKS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwRGV2aWNlXzEoc3BlYWtlcl8xLCBkLCBwcmV2U3BlYWtlcnMpO1xuICAgICAgICAgICAgICB9KS5zb3J0KHNvcnREZXZpY2VCeUxhYmVsXzEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBfZC5zZW50KCk7XG4gICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LXN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdub3Qtc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHldKSk7XG4gIC8qKlxuICAgKiBVcGRhdGVzIGdlbmVyYWwgYW5kIHNwZWNpZmljIGRldmljZSBzdGF0ZXMsIGJhc2VkIG9uIGJsb2NrZWQgc3RhdHVzLlxuICAgKi9cbiAgdmFyIHVwZGF0ZURldmljZVN0YXRlcyA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoZ2V0LCBzZXQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjdXJyZW50Q2FtU3RhdGUsIGN1cnJlbnRNaWNTdGF0ZSwgcGFydGljaXBhbnRzLCB0cmFja3MsIGNhbVBlcm1pc3Npb25TdGF0ZSwgbWljUGVybWlzc2lvblN0YXRlLCBjYW1QZXJtaXNzaW9uLCBtaWNQZXJtaXNzaW9uLCBhd2FpdGluZ0NhbUFjY2VzcywgaW5pdGlhbENhbU9mZiwgYXdhaXRpbmdNaWNBY2Nlc3MsIGluaXRpYWxNaWNPZmY7XG4gICAgICB2YXIgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbywgX3AsIF9xO1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfcikge1xuICAgICAgICBzd2l0Y2ggKF9yLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgaWYgKCFkYWlseSkgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgY3VycmVudENhbVN0YXRlID0gZ2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSk7XG4gICAgICAgICAgICBjdXJyZW50TWljU3RhdGUgPSBnZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSk7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudHMgPSBkYWlseS5wYXJ0aWNpcGFudHMoKTtcbiAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgcG90ZW50aWFsbHkgdW5pbml0aWFsaXplZCBsb2NhbCBwYXJ0aWNpcGFudFxuICAgICAgICAgICAgaWYgKCFwYXJ0aWNpcGFudHMubG9jYWwpIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIHRyYWNrcyA9IHBhcnRpY2lwYW50cy5sb2NhbC50cmFja3M7XG4gICAgICAgICAgICBjYW1QZXJtaXNzaW9uU3RhdGUgPSAncHJvbXB0JztcbiAgICAgICAgICAgIG1pY1Blcm1pc3Npb25TdGF0ZSA9ICdwcm9tcHQnO1xuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3IucGVybWlzc2lvbnMpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgX3IubGFiZWwgPSAxO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIF9yLnRyeXMucHVzaChbMSwgNCwsIDVdKTtcbiAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgbmFtZTogJ2NhbWVyYSdcbiAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYW1QZXJtaXNzaW9uID0gX3Iuc2VudCgpO1xuICAgICAgICAgICAgY2FtUGVybWlzc2lvblN0YXRlID0gY2FtUGVybWlzc2lvbi5zdGF0ZTtcbiAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgbmFtZTogJ21pY3JvcGhvbmUnXG4gICAgICAgICAgICB9KV07XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgbWljUGVybWlzc2lvbiA9IF9yLnNlbnQoKTtcbiAgICAgICAgICAgIG1pY1Blcm1pc3Npb25TdGF0ZSA9IG1pY1Blcm1pc3Npb24uc3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBfci5zZW50KCk7XG4gICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBhd2FpdGluZ0NhbUFjY2VzcyA9IGNhbVBlcm1pc3Npb25TdGF0ZSA9PT0gJ3Byb21wdCcgJiYgWydpZGxlJywgJ3BlbmRpbmcnXS5pbmNsdWRlcyhjdXJyZW50Q2FtU3RhdGUpICYmIHRyYWNrcy52aWRlby5zdGF0ZSA9PT0gJ2ludGVycnVwdGVkJyAmJiAhdHJhY2tzLnZpZGVvLnBlcnNpc3RlbnRUcmFjaztcbiAgICAgICAgICAgIGluaXRpYWxDYW1PZmYgPSBbJ2lkbGUnLCAncGVuZGluZyddLmluY2x1ZGVzKGN1cnJlbnRDYW1TdGF0ZSkgJiYgIXRyYWNrcy52aWRlby5wZXJzaXN0ZW50VHJhY2sgJiYgQm9vbGVhbigoX2IgPSB0cmFja3MudmlkZW8ub2ZmKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYnlVc2VyKTtcbiAgICAgICAgICAgIGF3YWl0aW5nTWljQWNjZXNzID0gbWljUGVybWlzc2lvblN0YXRlID09PSAncHJvbXB0JyAmJiBbJ2lkbGUnLCAncGVuZGluZyddLmluY2x1ZGVzKGN1cnJlbnRNaWNTdGF0ZSkgJiYgdHJhY2tzLmF1ZGlvLnN0YXRlID09PSAnaW50ZXJydXB0ZWQnICYmICF0cmFja3MuYXVkaW8ucGVyc2lzdGVudFRyYWNrO1xuICAgICAgICAgICAgaW5pdGlhbE1pY09mZiA9IFsnaWRsZScsICdwZW5kaW5nJ10uaW5jbHVkZXMoY3VycmVudE1pY1N0YXRlKSAmJiAhdHJhY2tzLmF1ZGlvLnBlcnNpc3RlbnRUcmFjayAmJiBCb29sZWFuKChfYyA9IHRyYWNrcy5hdWRpby5vZmYpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5ieVVzZXIpO1xuICAgICAgICAgICAgaWYgKChfZSA9IChfZCA9IHRyYWNrcy5hdWRpbykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmJsb2NrZWQpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5ieURldmljZUluVXNlKSB7XG4gICAgICAgICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgICAgICAgIHNldChtaWNyb3Bob25lRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAobWljcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaWNzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uc2VsZWN0ZWQgPyBfYXNzaWduKF9hc3NpZ24oe30sIG0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnaW4tdXNlJ1xuICAgICAgICAgICAgICAgICAgfSkgOiBtO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKF9nID0gKF9mID0gdHJhY2tzLmF1ZGlvKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuYmxvY2tlZCkgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmJ5RGV2aWNlTWlzc2luZykge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ25vdC1mb3VuZCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoKF9qID0gKF9oID0gdHJhY2tzLmF1ZGlvKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guYmxvY2tlZCkgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLmJ5UGVybWlzc2lvbnMpIHx8IG1pY1Blcm1pc3Npb25TdGF0ZSA9PT0gJ2RlbmllZCcpIHtcbiAgICAgICAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdibG9ja2VkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGF3YWl0aW5nTWljQWNjZXNzKSB7XG4gICAgICAgICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAncGVuZGluZycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsTWljT2ZmKSB7XG4gICAgICAgICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaWRsZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdncmFudGVkJyk7XG4gICAgICAgICAgICAgIHNldChtaWNyb3Bob25lRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAobWljcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaWNzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uc2VsZWN0ZWQgPyBfYXNzaWduKF9hc3NpZ24oe30sIG0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnZ3JhbnRlZCdcbiAgICAgICAgICAgICAgICAgIH0pIDogbTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKF9sID0gKF9rID0gdHJhY2tzLnZpZGVvKSA9PT0gbnVsbCB8fCBfayA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2suYmxvY2tlZCkgPT09IG51bGwgfHwgX2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sLmJ5RGV2aWNlSW5Vc2UpIHtcbiAgICAgICAgICAgICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2luLXVzZScpO1xuICAgICAgICAgICAgICBzZXQoY2FtZXJhRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAoY2Ftcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW1zLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uc2VsZWN0ZWQgPyBfYXNzaWduKF9hc3NpZ24oe30sIG0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnaW4tdXNlJ1xuICAgICAgICAgICAgICAgICAgfSkgOiBtO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKF9vID0gKF9tID0gdHJhY2tzLnZpZGVvKSA9PT0gbnVsbCB8fCBfbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX20uYmxvY2tlZCkgPT09IG51bGwgfHwgX28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vLmJ5RGV2aWNlTWlzc2luZykge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LWZvdW5kJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCgoX3EgPSAoX3AgPSB0cmFja3MudmlkZW8pID09PSBudWxsIHx8IF9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcC5ibG9ja2VkKSA9PT0gbnVsbCB8fCBfcSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3EuYnlQZXJtaXNzaW9ucykgfHwgY2FtUGVybWlzc2lvblN0YXRlID09PSAnZGVuaWVkJykge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnYmxvY2tlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhd2FpdGluZ0NhbUFjY2Vzcykge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAncGVuZGluZycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbml0aWFsQ2FtT2ZmKSB7XG4gICAgICAgICAgICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdpZGxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnZ3JhbnRlZCcpO1xuICAgICAgICAgICAgICBzZXQoY2FtZXJhRGV2aWNlc1N0YXRlLCBmdW5jdGlvbiAoY2Ftcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW1zLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uc2VsZWN0ZWQgPyBfYXNzaWduKF9hc3NpZ24oe30sIG0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnZ3JhbnRlZCdcbiAgICAgICAgICAgICAgICAgIH0pIDogbTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWZyZXNoRGV2aWNlcygpO1xuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW2RhaWx5LCByZWZyZXNoRGV2aWNlc10pKTtcbiAgdXNlRGFpbHlFdmVudCgncGFydGljaXBhbnQtdXBkYXRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmICghZXYucGFydGljaXBhbnQubG9jYWwpIHJldHVybjtcbiAgICB1cGRhdGVEZXZpY2VTdGF0ZXMoKTtcbiAgfSwgW3VwZGF0ZURldmljZVN0YXRlc10pKTtcbiAgdXNlRGFpbHlFdmVudCgnYXZhaWxhYmxlLWRldmljZXMtdXBkYXRlZCcsIHJlZnJlc2hEZXZpY2VzKTtcbiAgdXNlRGFpbHlFdmVudCgnc2VsZWN0ZWQtZGV2aWNlcy11cGRhdGVkJywgcmVmcmVzaERldmljZXMpO1xuICB1c2VEYWlseUV2ZW50KCdjYW1lcmEtZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgc2V0KGxhc3RDYW1lcmFFcnJvclN0YXRlLCBldi5lcnJvcik7XG4gICAgc3dpdGNoICgoX2EgPSBldi5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NhbS1pbi11c2UnOlxuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWljLWluLXVzZSc6XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2FtLW1pYy1pbi11c2UnOlxuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnaW4tdXNlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbm90LWZvdW5kJzpcbiAgICAgICAgaWYgKChfYiA9IGV2LmVycm9yKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWlzc2luZ01lZGlhLmluY2x1ZGVzKCd2aWRlbycpKSBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnbm90LWZvdW5kJyk7XG4gICAgICAgIGlmICgoX2MgPSBldi5lcnJvcikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm1pc3NpbmdNZWRpYS5pbmNsdWRlcygnYXVkaW8nKSkgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdub3QtZm91bmQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwZXJtaXNzaW9ucyc6XG4gICAgICAgIGlmICgoX2QgPSBldi5lcnJvcikgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmJsb2NrZWRNZWRpYS5pbmNsdWRlcygndmlkZW8nKSkgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ2Jsb2NrZWQnKTtcbiAgICAgICAgaWYgKChfZSA9IGV2LmVycm9yKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuYmxvY2tlZE1lZGlhLmluY2x1ZGVzKCdhdWRpbycpKSBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ2Jsb2NrZWQnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjb25zdHJhaW50cyc6XG4gICAgICAgIGlmICgoKF9mID0gZXYuZXJyb3IpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5yZWFzb24pID09PSAnaW52YWxpZCcpIHtcbiAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnY29uc3RyYWludHMtaW52YWxpZCcpO1xuICAgICAgICAgIHNldChnZW5lcmFsTWljcm9waG9uZVN0YXRlLCAnY29uc3RyYWludHMtaW52YWxpZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKCgoX2cgPSBldi5lcnJvcikgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLnJlYXNvbikgPT09ICdub25lLXNwZWNpZmllZCcpIHtcbiAgICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAnY29uc3RyYWludHMtbm9uZS1zcGVjaWZpZWQnKTtcbiAgICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ2NvbnN0cmFpbnRzLW5vbmUtc3BlY2lmaWVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bmRlZmluZWQtbWVkaWFkZXZpY2VzJzpcbiAgICAgICAgc2V0KGdlbmVyYWxDYW1lcmFTdGF0ZSwgJ3VuZGVmaW5lZC1tZWRpYWRldmljZXMnKTtcbiAgICAgICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICd1bmRlZmluZWQtbWVkaWFkZXZpY2VzJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5rbm93bic6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzZXQoZ2VuZXJhbENhbWVyYVN0YXRlLCAndW5rbm93bicpO1xuICAgICAgICBzZXQoZ2VuZXJhbE1pY3JvcGhvbmVTdGF0ZSwgJ3Vua25vd24nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LCBbXSkpKTtcbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgZGV2aWNlIHN0YXRlLCB3aGVuIGNhbWVyYSBpcyBzdGFydGVkLlxuICAgKi9cbiAgdXNlRGFpbHlFdmVudCgnc3RhcnRlZC1jYW1lcmEnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldChnZW5lcmFsQ2FtZXJhU3RhdGUsICdncmFudGVkJyk7XG4gICAgc2V0KGdlbmVyYWxNaWNyb3Bob25lU3RhdGUsICdncmFudGVkJyk7XG4gICAgdXBkYXRlRGV2aWNlU3RhdGVzKCk7XG4gIH0sIFt1cGRhdGVEZXZpY2VTdGF0ZXNdKSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseURldmljZXNDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHJlZnJlc2hEZXZpY2VzOiByZWZyZXNoRGV2aWNlc1xuICAgIH1cbiAgfSwgY2hpbGRyZW4pO1xufTtcblxudmFyIGxpdmVTdHJlYW1pbmdTdGF0ZSA9IGF0b20oe1xuICBlcnJvck1zZzogdW5kZWZpbmVkLFxuICBpc0xpdmVTdHJlYW1pbmc6IGZhbHNlLFxuICBsYXlvdXQ6IHVuZGVmaW5lZFxufSk7XG5saXZlU3RyZWFtaW5nU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnbGl2ZS1zdHJlYW1pbmcnKTtcbnZhciBEYWlseUxpdmVTdHJlYW1pbmcgPSBmdW5jdGlvbiBEYWlseUxpdmVTdHJlYW1pbmcoX2EpIHtcbiAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gIHVzZURhaWx5RXZlbnQoJ2xpdmUtc3RyZWFtaW5nLXN0YXJ0ZWQnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQobGl2ZVN0cmVhbWluZ1N0YXRlLCB7XG4gICAgICBpc0xpdmVTdHJlYW1pbmc6IHRydWUsXG4gICAgICBsYXlvdXQ6IGV2ID09PSBudWxsIHx8IGV2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldi5sYXlvdXRcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xpdmUtc3RyZWFtaW5nLXN0b3BwZWQnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldChsaXZlU3RyZWFtaW5nU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfYXNzaWduKF9hc3NpZ24oe30sIHByZXZTdGF0ZSksIHtcbiAgICAgICAgaXNMaXZlU3RyZWFtaW5nOiBmYWxzZSxcbiAgICAgICAgbGF5b3V0OiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQobGl2ZVN0cmVhbWluZ1N0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gX2Fzc2lnbihfYXNzaWduKHt9LCBwcmV2U3RhdGUpLCB7XG4gICAgICAgIGVycm9yTXNnOiBldi5lcnJvck1zZ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdsZWZ0LW1lZXRpbmcnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldChsaXZlU3RyZWFtaW5nU3RhdGUsIHtcbiAgICAgIGVycm9yTXNnOiB1bmRlZmluZWQsXG4gICAgICBpc0xpdmVTdHJlYW1pbmc6IGZhbHNlLFxuICAgICAgbGF5b3V0OiB1bmRlZmluZWRcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlbik7XG59O1xuXG52YXIgbWVldGluZ1N0YXRlU3RhdGUgPSBhdG9tKCduZXcnKTtcbm1lZXRpbmdTdGF0ZVN0YXRlLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoJ21lZXRpbmctc3RhdGUnKTtcbnZhciBtZWV0aW5nRXJyb3JTdGF0ZSA9IGF0b20obnVsbCk7XG5tZWV0aW5nRXJyb3JTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdtZWV0aW5nLWVycm9yJyk7XG52YXIgbm9uRmF0YWxFcnJvclN0YXRlID0gYXRvbShudWxsKTtcbm5vbkZhdGFsRXJyb3JTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdub24tZmF0YWwtZXJyb3InKTtcbnZhciBtZWV0aW5nU2Vzc2lvbkRhdGFTdGF0ZSA9IGF0b20oe1xuICBkYXRhOiB1bmRlZmluZWQsXG4gIHRvcG9sb2d5OiAnbm9uZSdcbn0pO1xubWVldGluZ1Nlc3Npb25EYXRhU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnbWVldGluZy1zZXNzaW9uLWRhdGEnKTtcbnZhciBEYWlseU1lZXRpbmcgPSBmdW5jdGlvbiBEYWlseU1lZXRpbmcoX2EpIHtcbiAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIC8qKlxuICAgKiBVcGRhdGVzIG1lZXRpbmcgc3RhdGUuXG4gICAqL1xuICB2YXIgdXBkYXRlTWVldGluZ1N0YXRlID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgdmFyIG1lZXRpbmdTdGF0ZSA9IGRhaWx5Lm1lZXRpbmdTdGF0ZSgpO1xuICAgIHNldChtZWV0aW5nU3RhdGVTdGF0ZSwgbWVldGluZ1N0YXRlKTtcbiAgICByZXR1cm4gbWVldGluZ1N0YXRlO1xuICB9LCBbZGFpbHldKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xvYWRpbmcnLCB1cGRhdGVNZWV0aW5nU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdsb2FkZWQnLCB1cGRhdGVNZWV0aW5nU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdqb2luaW5nLW1lZXRpbmcnLCB1cGRhdGVNZWV0aW5nU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdqb2luZWQtbWVldGluZycsIHVwZGF0ZU1lZXRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVwZGF0ZU1lZXRpbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2Vycm9yJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KG1lZXRpbmdFcnJvclN0YXRlLCBldik7XG4gICAgdXBkYXRlTWVldGluZ1N0YXRlKCk7XG4gIH0sIFt1cGRhdGVNZWV0aW5nU3RhdGVdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldikge1xuICAgIHNldChub25GYXRhbEVycm9yU3RhdGUsIGV2KTtcbiAgfSwgW10pKSk7XG4gIC8qKlxuICAgKiBVcGRhdGVzIG1lZXRpbmcgc2Vzc2lvbiBzdGF0ZS5cbiAgICovXG4gIHZhciBpbml0TWVldGluZ1Nlc3Npb25TdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIHNldChtZWV0aW5nU2Vzc2lvbkRhdGFTdGF0ZSwgZGFpbHkubWVldGluZ1Nlc3Npb25TdGF0ZSgpKTtcbiAgfSwgW2RhaWx5XSkpO1xuICAvKipcbiAgICogSW5pdGlhbGl6ZSBzdGF0ZSB3aGVuIGpvaW5lZCBtZWV0aW5nIG9yIHNldHRpbmcgdXAgdGhlIGhvb2suXG4gICAqL1xuICB1c2VEYWlseUV2ZW50KCdqb2luZWQtbWVldGluZycsIGluaXRNZWV0aW5nU2Vzc2lvblN0YXRlKTtcbiAgLyoqXG4gICAqIFVwZGF0ZSBKb3RhaSBzdGF0ZSB3aGVuZXZlciBtZWV0aW5nIHNlc3Npb24gc3RhdGUgaXMgdXBkYXRlZC5cbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ21lZXRpbmctc2Vzc2lvbi1zdGF0ZS11cGRhdGVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KG1lZXRpbmdTZXNzaW9uRGF0YVN0YXRlLCBldi5tZWV0aW5nU2Vzc2lvblN0YXRlKTtcbiAgfSwgW10pKSk7XG4gIC8qKlxuICAgKiBSZXNldCBKb3RhaSBzdGF0ZSB3aGVuIG1lZXRpbmcgZW5kcy5cbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KG1lZXRpbmdTZXNzaW9uRGF0YVN0YXRlLCB7XG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICB0b3BvbG9neTogJ25vbmUnXG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICAvKipcbiAgICogUmVzZXQgSm90YWkgc3RhdGUgd2hlbiBjYWxsIGluc3RhbmNlIGlzIGRlc3Ryb3llZC5cbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICBzZXQobWVldGluZ1N0YXRlU3RhdGUsICduZXcnKTtcbiAgICBzZXQobWVldGluZ0Vycm9yU3RhdGUsIG51bGwpO1xuICAgIHNldChub25GYXRhbEVycm9yU3RhdGUsIG51bGwpO1xuICAgIHNldChtZWV0aW5nU2Vzc2lvbkRhdGFTdGF0ZSwge1xuICAgICAgZGF0YTogdW5kZWZpbmVkLFxuICAgICAgdG9wb2xvZ3k6ICdub25lJ1xuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn07XG5cbnZhciB0b3BvbG9neVN0YXRlID0gYXRvbSgnbm9uZScpO1xudG9wb2xvZ3lTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCd0b3BvbG9neScpO1xudmFyIG5ldHdvcmtTdGF0ZSA9IGF0b20oJ3Vua25vd24nKTtcbnZhciBuZXR3b3JrU3RhdGVSZWFzb25zID0gYXRvbShbXSk7XG4vLyBAZGVwcmVjYXRlZFxudmFyIG5ldHdvcmtRdWFsaXR5U3RhdGUgPSBhdG9tKDEwMCk7XG5uZXR3b3JrUXVhbGl0eVN0YXRlLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoJ25ldHdvcmstcXVhbGl0eScpO1xuLy8gQGRlcHJlY2F0ZWRcbnZhciBuZXR3b3JrVGhyZXNob2xkU3RhdGUgPSBhdG9tKCdnb29kJyk7XG5uZXR3b3JrVGhyZXNob2xkU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnbmV0d29yay10aHJlc2hvbGQnKTtcbnZhciBEYWlseU5ldHdvcmsgPSBmdW5jdGlvbiBEYWlseU5ldHdvcmsoX2EpIHtcbiAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciB0b3BvbG9neSA9IHVzZUF0b21WYWx1ZSh0b3BvbG9neVN0YXRlKTtcbiAgdmFyIGluaXRUb3BvbG9neSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdG9wb2xvZ3k7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBpZiAoIWRhaWx5KSByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYWlseS5nZXROZXR3b3JrVG9wb2xvZ3koKV07XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdG9wb2xvZ3kgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICBpZiAoIXRvcG9sb2d5IHx8ICh0b3BvbG9neSA9PT0gbnVsbCB8fCB0b3BvbG9neSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9wb2xvZ3kudG9wb2xvZ3kpID09PSAnbm9uZScpIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIHNldCh0b3BvbG9neVN0YXRlLCB0b3BvbG9neS50b3BvbG9neSk7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHldKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2pvaW5lZC1tZWV0aW5nJywgaW5pdFRvcG9sb2d5KTtcbiAgdXNlRGFpbHlFdmVudCgnbmV0d29yay1jb25uZWN0aW9uJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc3dpdGNoIChldi5ldmVudCkge1xuICAgICAgY2FzZSAnY29ubmVjdGVkJzpcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09ICdwZWVyLXRvLXBlZXInKSBzZXQodG9wb2xvZ3lTdGF0ZSwgJ3BlZXInKTtcbiAgICAgICAgaWYgKGV2LnR5cGUgPT09ICdzZnUnKSBzZXQodG9wb2xvZ3lTdGF0ZSwgJ3NmdScpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCduZXR3b3JrLXF1YWxpdHktY2hhbmdlJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KG5ldHdvcmtTdGF0ZSwgZnVuY3Rpb24gKHByZXZOZXR3b3JrU3RhdGUpIHtcbiAgICAgIHJldHVybiBwcmV2TmV0d29ya1N0YXRlICE9PSBldi5uZXR3b3JrU3RhdGUgPyBldi5uZXR3b3JrU3RhdGUgOiBwcmV2TmV0d29ya1N0YXRlO1xuICAgIH0pO1xuICAgIHNldChuZXR3b3JrU3RhdGVSZWFzb25zLCBmdW5jdGlvbiAocHJldlJlYXNvbnMpIHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHZhciBjdXJSZWFzb25zID0gKF9hID0gZXYubmV0d29ya1N0YXRlUmVhc29ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICByZXR1cm4gIWFycmF5c0RlZXBFcXVhbChwcmV2UmVhc29ucywgY3VyUmVhc29ucykgPyBjdXJSZWFzb25zIDogcHJldlJlYXNvbnM7XG4gICAgfSk7XG4gICAgc2V0KG5ldHdvcmtRdWFsaXR5U3RhdGUsIGZ1bmN0aW9uIChwcmV2UXVhbGl0eSkge1xuICAgICAgcmV0dXJuIHByZXZRdWFsaXR5ICE9PSBldi5xdWFsaXR5ID8gZXYucXVhbGl0eSA6IHByZXZRdWFsaXR5O1xuICAgIH0pO1xuICAgIHNldChuZXR3b3JrVGhyZXNob2xkU3RhdGUsIGZ1bmN0aW9uIChwcmV2VGhyZXNob2xkKSB7XG4gICAgICByZXR1cm4gcHJldlRocmVzaG9sZCAhPT0gZXYudGhyZXNob2xkID8gZXYudGhyZXNob2xkIDogcHJldlRocmVzaG9sZDtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xlZnQtbWVldGluZycsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHRvcG9sb2d5U3RhdGUsICdub25lJyk7XG4gICAgc2V0KG5ldHdvcmtTdGF0ZSwgJ3Vua25vd24nKTtcbiAgICBzZXQobmV0d29ya1N0YXRlUmVhc29ucywgW10pO1xuICAgIHNldChuZXR3b3JrUXVhbGl0eVN0YXRlLCAxMDApO1xuICAgIHNldChuZXR3b3JrVGhyZXNob2xkU3RhdGUsICdnb29kJyk7XG4gIH0sIFtdKSkpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZGFpbHkgfHwgdG9wb2xvZ3kgIT09ICdub25lJykgcmV0dXJuO1xuICAgIGluaXRUb3BvbG9neSgpO1xuICB9LCBbZGFpbHksIGluaXRUb3BvbG9neSwgdG9wb2xvZ3ldKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn07XG5cbnZhciByZWNvcmRpbmdTdGF0ZSA9IGF0b20oe1xuICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZDogZmFsc2UsXG4gIGlzUmVjb3JkaW5nOiBmYWxzZVxufSk7XG5yZWNvcmRpbmdTdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdyZWNvcmRpbmctc3RhdGUnKTtcbnZhciBEYWlseVJlY29yZGluZ3MgPSBmdW5jdGlvbiBEYWlseVJlY29yZGluZ3MoX2EpIHtcbiAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XG4gIHZhciBsb2NhbFNlc3Npb25JZCA9IHVzZUxvY2FsU2Vzc2lvbklkKCk7XG4gIHZhciByZWNvcmRpbmdQYXJ0aWNpcGFudElkcyA9IHVzZVBhcnRpY2lwYW50SWRzKHtcbiAgICBmaWx0ZXI6ICdyZWNvcmQnXG4gIH0pO1xuICB2YXIgbWF5YmVVcGRhdGVSZWNvcmRpbmdTdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoZ2V0LCBzZXQsIGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cywgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkaW5nKSB7XG4gICAgdmFyIG9sZFN0YXRlID0gZ2V0KHJlY29yZGluZ1N0YXRlKTtcbiAgICB2YXIgcyA9IHtcbiAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkOiBvbGRTdGF0ZS5pc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZCxcbiAgICAgIGlzUmVjb3JkaW5nOiBvbGRTdGF0ZS5pc1JlY29yZGluZyxcbiAgICAgIGxvY2FsOiBvbGRTdGF0ZS5sb2NhbCxcbiAgICAgIHR5cGU6IG9sZFN0YXRlLnR5cGVcbiAgICB9O1xuICAgIHZhciBuZXdTdGF0ZSA9IHtcbiAgICAgIC8vIEluIGNhc2UgdHlwZSBpcyBsb2NhbCBvciBub3Qgc2V0LCBkZXRlcm1pbmUgYmFzZWQgb24gcmVjb3JkaW5nIHBhcnRpY2lwYW50c1xuICAgICAgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQ6IChzID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHMudHlwZSkgPT09ICdsb2NhbCcgfHwgIShzID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHMudHlwZSkgPyBoYXNSZWNvcmRpbmdQYXJ0aWNpcGFudHMgOiBzLmlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkLFxuICAgICAgaXNSZWNvcmRpbmc6IChzID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHMudHlwZSkgPT09ICdsb2NhbCcgfHwgIShzID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHMudHlwZSkgPyBoYXNSZWNvcmRpbmdQYXJ0aWNpcGFudHMgOiBzLmlzUmVjb3JkaW5nLFxuICAgICAgbG9jYWw6ICgocyA9PT0gbnVsbCB8fCBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzLnR5cGUpID09PSAnbG9jYWwnIHx8ICEocyA9PT0gbnVsbCB8fCBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzLnR5cGUpKSAmJiBoYXNSZWNvcmRpbmdQYXJ0aWNpcGFudHMgPyBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRpbmcgOiBzID09PSBudWxsIHx8IHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHMubG9jYWwsXG4gICAgICAvKipcbiAgICAgICAqIFNldCB0eXBlIGluIGNhc2UgcmVjb3JkaW5nIHBhcnRpY2lwYW50cyBhcmUgZGV0ZWN0ZWQuXG4gICAgICAgKiBXZSBvbmx5IHNldCBgcmVjb3JkYCBvbiBwYXJ0aWNpcGFudHMsIHdoZW4gcmVjb3JkaW5nIHR5cGUgaXMgJ2xvY2FsJy5cbiAgICAgICAqL1xuICAgICAgdHlwZTogaGFzUmVjb3JkaW5nUGFydGljaXBhbnRzID8gJ2xvY2FsJyA6IG9sZFN0YXRlID09PSBudWxsIHx8IG9sZFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbGRTdGF0ZS50eXBlXG4gICAgfTtcbiAgICBpZiAoY3VzdG9tRGVlcEVxdWFsKHMsIG5ld1N0YXRlKSkgcmV0dXJuO1xuICAgIHNldChyZWNvcmRpbmdTdGF0ZSwgX2Fzc2lnbihfYXNzaWduKHt9LCBzKSwgbmV3U3RhdGUpKTtcbiAgfSwgW10pKTtcbiAgLyoqXG4gICAqIFVwZGF0ZSByZWNvcmRpbmcgc3RhdGUsIHdoZW5ldmVyIGFtb3VudCBvZiByZWNvcmRpbmcgcGFydGljaXBhbnRzIGNoYW5nZXMuXG4gICAqL1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNSZWNvcmRpbmdQYXJ0aWNpcGFudHMgPSByZWNvcmRpbmdQYXJ0aWNpcGFudElkcy5sZW5ndGggPiAwO1xuICAgIHZhciBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRpbmcgPSByZWNvcmRpbmdQYXJ0aWNpcGFudElkcy5pbmNsdWRlcyhsb2NhbFNlc3Npb25JZCB8fCAnbG9jYWwnKTtcbiAgICBtYXliZVVwZGF0ZVJlY29yZGluZ1N0YXRlKGhhc1JlY29yZGluZ1BhcnRpY2lwYW50cywgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkaW5nKTtcbiAgfSwgW2xvY2FsU2Vzc2lvbklkLCBtYXliZVVwZGF0ZVJlY29yZGluZ1N0YXRlLCByZWNvcmRpbmdQYXJ0aWNpcGFudElkc10pO1xuICB1c2VEYWlseUV2ZW50KCdyZWNvcmRpbmctc3RhcnRlZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBldikge1xuICAgIHZhciBfYTtcbiAgICB2YXIgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQgPSB0cnVlO1xuICAgIHN3aXRjaCAoZXYudHlwZSkge1xuICAgICAgY2FzZSAnY2xvdWQtYmV0YSc6XG4gICAgICBjYXNlICdjbG91ZCc6XG4gICAgICAgIHtcbiAgICAgICAgICBpZiAobG9jYWxTZXNzaW9uSWQgJiYgKChfYSA9IGV2LmxheW91dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByZXNldCkgPT09ICdzaW5nbGUtcGFydGljaXBhbnQnICYmIGV2LmxheW91dC5zZXNzaW9uX2lkICE9PSBsb2NhbFNlc3Npb25JZCkge1xuICAgICAgICAgICAgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0KHJlY29yZGluZ1N0YXRlLCB7XG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZDogaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQsXG4gICAgICBpc1JlY29yZGluZzogdHJ1ZSxcbiAgICAgIGxheW91dDogZXYgPT09IG51bGwgfHwgZXYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2LmxheW91dCxcbiAgICAgIGxvY2FsOiBldiA9PT0gbnVsbCB8fCBldiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXYubG9jYWwsXG4gICAgICByZWNvcmRpbmdJZDogZXYgPT09IG51bGwgfHwgZXYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2LnJlY29yZGluZ0lkLFxuICAgICAgcmVjb3JkaW5nU3RhcnRlZERhdGU6IG5ldyBEYXRlKCksXG4gICAgICBzdGFydGVkQnk6IGV2ID09PSBudWxsIHx8IGV2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldi5zdGFydGVkQnksXG4gICAgICB0eXBlOiBldiA9PT0gbnVsbCB8fCBldiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXYudHlwZVxuICAgIH0pO1xuICB9LCBbbG9jYWxTZXNzaW9uSWRdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdyZWNvcmRpbmctc3RvcHBlZCcsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHJlY29yZGluZ1N0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gX2Fzc2lnbihfYXNzaWduKHt9LCBwcmV2U3RhdGUpLCB7XG4gICAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudFJlY29yZGVkOiBmYWxzZSxcbiAgICAgICAgaXNSZWNvcmRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1lcnJvcicsIHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0KSB7XG4gICAgc2V0KHJlY29yZGluZ1N0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gX2Fzc2lnbihfYXNzaWduKHt9LCBwcmV2U3RhdGUpLCB7XG4gICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICBpc0xvY2FsUGFydGljaXBhbnRSZWNvcmRlZDogZmFsc2UsXG4gICAgICAgIGlzUmVjb3JkaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdsZWZ0LW1lZXRpbmcnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldChyZWNvcmRpbmdTdGF0ZSwge1xuICAgICAgaXNMb2NhbFBhcnRpY2lwYW50UmVjb3JkZWQ6IGZhbHNlLFxuICAgICAgaXNSZWNvcmRpbmc6IGZhbHNlXG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgbWVldGluZydzIGN1cnJlbnQgc3RhdGUuXG4gKi9cbnZhciB1c2VNZWV0aW5nU3RhdGUgPSBmdW5jdGlvbiB1c2VNZWV0aW5nU3RhdGUoKSB7XG4gIHZhciBtZWV0aW5nU3RhdGUgPSB1c2VBdG9tVmFsdWUobWVldGluZ1N0YXRlU3RhdGUpO1xuICB1c2VEZWJ1Z1ZhbHVlKG1lZXRpbmdTdGF0ZSk7XG4gIHJldHVybiBtZWV0aW5nU3RhdGU7XG59O1xuXG52YXIgcm9vbVN0YXRlID0gYXRvbShudWxsKTtcbnJvb21TdGF0ZS5kZWJ1Z0xhYmVsID0gam90YWlEZWJ1Z0xhYmVsKCdyb29tLXN0YXRlJyk7XG52YXIgRGFpbHlSb29tID0gZnVuY3Rpb24gRGFpbHlSb29tKF9hKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgbWVldGluZ1N0YXRlID0gdXNlTWVldGluZ1N0YXRlKCk7XG4gIHZhciB1cGRhdGVSb29tID0gdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByb29tO1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgaWYgKCFkYWlseSB8fCBtZWV0aW5nU3RhdGUgPT09ICdsZWZ0LW1lZXRpbmcnKSByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYWlseS5yb29tKCldO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJvb20gPSBfYS5zZW50KCk7XG4gICAgICAgICAgICBpZiAocm9vbSAmJiAnaWQnIGluIHJvb20pIHtcbiAgICAgICAgICAgICAgc2V0KHJvb21TdGF0ZSwgcm9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcm9vbV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHksIG1lZXRpbmdTdGF0ZV0pKTtcbiAgdXNlRGFpbHlFdmVudCgnYWNjZXNzLXN0YXRlLXVwZGF0ZWQnLCB1cGRhdGVSb29tKTtcbiAgdXNlRGFpbHlFdmVudCgnbGVmdC1tZWV0aW5nJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgc2V0KHJvb21TdGF0ZSwgbnVsbCk7XG4gICAgfTtcbiAgfSwgW10pKSk7XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlbik7XG59O1xuXG52YXIgdHJhbnNjcmlwdGlvblN0YXRlID0gYXRvbSh7XG4gIGlzVHJhbnNjcmliaW5nOiBmYWxzZSxcbiAgbW9kZWw6ICdnZW5lcmFsJyxcbiAgbGFuZ3VhZ2U6ICdlbicsXG4gIHRyYW5zY3JpcHRpb25zOiBbXVxufSk7XG50cmFuc2NyaXB0aW9uU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgndHJhbnNjcmlwdGlvbi1zdGF0ZScpO1xudmFyIERhaWx5VHJhbnNjcmlwdGlvbnMgPSBmdW5jdGlvbiBEYWlseVRyYW5zY3JpcHRpb25zKF9hKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xuICB1c2VEYWlseUV2ZW50KCd0cmFuc2NyaXB0aW9uLXN0YXJ0ZWQnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgZXYpIHtcbiAgICBzZXQodHJhbnNjcmlwdGlvblN0YXRlLCB7XG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICB0cmFuc2NyaXB0aW9uU3RhcnREYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgaXNUcmFuc2NyaWJpbmc6IHRydWUsXG4gICAgICB0cmFuc2NyaXB0aW9uczogW10sXG4gICAgICBlbmRwb2ludGluZzogZXYuZW5kcG9pbnRpbmcsXG4gICAgICBleHRyYTogZXYuZXh0cmEsXG4gICAgICBpbmNsdWRlUmF3UmVzcG9uc2U6IGV2LmluY2x1ZGVSYXdSZXNwb25zZSxcbiAgICAgIGluc3RhbmNlSWQ6IGV2Lmluc3RhbmNlSWQsXG4gICAgICBsYW5ndWFnZTogZXYubGFuZ3VhZ2UsXG4gICAgICBtb2RlbDogZXYubW9kZWwsXG4gICAgICBwcm9mYW5pdHlfZmlsdGVyOiBldi5wcm9mYW5pdHlfZmlsdGVyLFxuICAgICAgcHVuY3R1YXRlOiBldi5wdW5jdHVhdGUsXG4gICAgICByZWRhY3Q6IGV2LnJlZGFjdCxcbiAgICAgIHN0YXJ0ZWRCeTogZXYuc3RhcnRlZEJ5LFxuICAgICAgdGllcjogZXYudGllclxuICAgIH0pO1xuICB9LCBbXSkpKTtcbiAgdXNlRGFpbHlFdmVudCgndHJhbnNjcmlwdGlvbi1zdG9wcGVkJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgc2V0KHRyYW5zY3JpcHRpb25TdGF0ZSwgZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgcmV0dXJuIF9hc3NpZ24oX2Fzc2lnbih7fSwgcHJldlN0YXRlKSwge1xuICAgICAgICB1cGRhdGVkQnk6IGV2LnVwZGF0ZWRCeSxcbiAgICAgICAgaXNUcmFuc2NyaWJpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3RyYW5zY3JpcHRpb24tZXJyb3InLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldCh0cmFuc2NyaXB0aW9uU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfYXNzaWduKF9hc3NpZ24oe30sIHByZXZTdGF0ZSksIHtcbiAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgIGlzVHJhbnNjcmliaW5nOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtdKSkpO1xuICB1c2VEYWlseUV2ZW50KCdsZWZ0LW1lZXRpbmcnLCB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCkge1xuICAgIHNldCh0cmFuc2NyaXB0aW9uU3RhdGUsIGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBfYXNzaWduKF9hc3NpZ24oe30sIHByZXZTdGF0ZSksIHtcbiAgICAgICAgaXNUcmFuc2NyaWJpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW10pKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FwcC1tZXNzYWdlJywgdXNlQXRvbUNhbGxiYWNrKHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChfZ2V0LCBzZXQsIGV2KSB7XG4gICAgaWYgKChldiA9PT0gbnVsbCB8fCBldiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXYuZnJvbUlkKSA9PT0gJ3RyYW5zY3JpcHRpb24nKSB7XG4gICAgICBzZXQodHJhbnNjcmlwdGlvblN0YXRlLCBmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIHJldHVybiBfYXNzaWduKF9hc3NpZ24oe30sIHByZXZTdGF0ZSksIHtcbiAgICAgICAgICAvLyBzZXR0aW5nIGl0IHRvIHRydWUgd2hlbmV2ZXIgYSBuZXcgbWVzc2FnZSBpcyByZWNlaXZlZFxuICAgICAgICAgIC8vIGFzIHRoZSBwYXJ0aWNpcGFudHMgd2hvIGpvaW5lZCBhZnRlciB0aGUgdHJhbnNjcmlwdGlvbi1zdGFydGVkIGV2ZW50XG4gICAgICAgICAgLy8gd29uJ3QgYmUga25vd2luZyBpZiB0cmFuc2NyaXB0aW9uIGlzIHN0YXJ0ZWQgb3Igbm90XG4gICAgICAgICAgaXNUcmFuc2NyaWJpbmc6IHRydWUsXG4gICAgICAgICAgdHJhbnNjcmlwdGlvbnM6IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKHByZXZTdGF0ZS50cmFuc2NyaXB0aW9ucyksIGZhbHNlKSwgW2V2LmRhdGFdLCBmYWxzZSlcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtdKSkpO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4pO1xufTtcblxudmFyIGRlZmF1bHRPcHRpb25zID0ge307XG52YXIgZGVmYXVsdFNob3VsZENyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24gZGVmYXVsdFNob3VsZENyZWF0ZUluc3RhbmNlKCkge1xuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBvcHRpb25zOiBkZWZhdWx0T3B0aW9ucyxcbiAgc2hvdWxkQ3JlYXRlSW5zdGFuY2U6IGRlZmF1bHRTaG91bGRDcmVhdGVJbnN0YW5jZVxufTtcbi8qKlxuICogSGVscGVyIGhvb2sgdG8gbWFpbnRhaW4gY3VzdG9tIGNhbGwgaW5zdGFuY2VzIGluIFJlYWN0IGNvZGViYXNlcy5cbiAqL1xudmFyIHVzZUNhbGxJbnN0YW5jZSA9IGZ1bmN0aW9uIHVzZUNhbGxJbnN0YW5jZSh0eXBlLCBfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8gZGVmYXVsdFByb3BzIDogX2EsXG4gICAgcGFyZW50RWxSZWYgPSBfYi5wYXJlbnRFbFJlZixcbiAgICBfYyA9IF9iLm9wdGlvbnMsXG4gICAgb3B0aW9ucyA9IF9jID09PSB2b2lkIDAgPyBkZWZhdWx0T3B0aW9ucyA6IF9jLFxuICAgIF9kID0gX2Iuc2hvdWxkQ3JlYXRlSW5zdGFuY2UsXG4gICAgc2hvdWxkQ3JlYXRlSW5zdGFuY2UgPSBfZCA9PT0gdm9pZCAwID8gZGVmYXVsdFNob3VsZENyZWF0ZUluc3RhbmNlIDogX2Q7XG4gIHZhciBfZSA9IF9fcmVhZCh1c2VTdGF0ZShudWxsKSwgMiksXG4gICAgY2FsbEluc3RhbmNlID0gX2VbMF0sXG4gICAgc2V0Q2FsbEluc3RhbmNlID0gX2VbMV07XG4gIC8qKlxuICAgKiBIb2xkcyBsYXN0IHVzZWQgcHJvcHMgd2hlbiBjYWxsT2JqZWN0IGluc3RhbmNlIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgdmFyIGxhc3RVc2VkT3B0aW9ucyA9IHVzZVJlZigpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENhbGwgZnJhbWUgaW5zdGFuY2VzIHdpdGggYSBkZWZpbmVkIHBhcmVudEVsIGxpa2VseSBwYXNzIGEgcmVmLlxuICAgICAqIFR5cGljYWxseSBhIERPTSByZWYgaXMgaW5pdGlhbGl6ZWQgd2l0aCB1c2VSZWYobnVsbCkuXG4gICAgICogV2UnbGwgd2FudCB0byB3YWl0IHVudGlsIHBhcmVudEVsIGlzIGRlZmluZWQsIG1lYW5pbmcgdGhhdCB0aGUgcmVmIGlzXG4gICAgICogY29ycmVjdGx5IHdpcmVkIHVwIHdpdGggYSBET00gZWxlbWVudC5cbiAgICAgKiBPdGhlcndpc2Ugd2UnbGwganVzdCBjaGVjayBzaG91bGRDcmVhdGVJbnN0YW5jZSgpLlxuICAgICAqL1xuICAgIGlmICh0eXBlID09PSAnY2FsbEZyYW1lJyAmJiAocGFyZW50RWxSZWYgPT09IG51bGwgfHwgcGFyZW50RWxSZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEVsUmVmLmN1cnJlbnQpID09PSBudWxsIHx8ICFzaG91bGRDcmVhdGVJbnN0YW5jZSgpKSByZXR1cm47XG4gICAgZnVuY3Rpb24gZGVzdHJveUNhbGxJbnN0YW5jZShjbykge1xuICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjby5kZXN0cm95KCldO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9uY2UgaW5zdGFuY2UgaXMgZGVzdHJveWVkLCBudWxsaWZ5IGNhbGxJbnN0YW5jZSwgc28gYSBuZXcgb25lIGNhbiBiZSBjcmVhdGVkLlxuICAgICAqL1xuICAgIHZhciBoYW5kbGVEZXN0cm95ZWRJbnN0YW5jZSA9IGZ1bmN0aW9uIGhhbmRsZURlc3Ryb3llZEluc3RhbmNlKCkge1xuICAgICAgLyoqXG4gICAgICAgKiBTZXR0aW5nIGEgdGltZW91dCBtYWtlcyBzdXJlIHRoZSBkZXN0cnVjdGlvbiBhbmQgY3JlYXRpb25cbiAgICAgICAqIG9mIGNhbGwgaW5zdGFuY2VzIGhhcHBlbiBpbiBzZXBhcmF0ZSBjYWxsIHN0YWNrcy5cbiAgICAgICAqIE90aGVyd2lzZSB0aGVyZSdzIGEgcmlzayBmb3IgZHVwbGljYXRlIGNhbGwgaW5zdGFuY2VzLlxuICAgICAgICovXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNldENhbGxJbnN0YW5jZShudWxsKTtcbiAgICAgIH0sIDApO1xuICAgIH07XG4gICAgdmFyIGNvID0gRGFpbHkuZ2V0Q2FsbEluc3RhbmNlKCk7XG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBhIGNhbGwgaW5zdGFuY2UgZXhpc3RzIG91dHNpZGUgb2YgdGhpcyBob29rIGluc3RhbmNlJ3Mga25vd2xlZGdlLFxuICAgICAqIHN0b3JlIGl0IGluIHN0YXRlLlxuICAgICAqL1xuICAgIGlmICghY2FsbEluc3RhbmNlICYmIGNvICYmICFjby5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICBjby5vbmNlKCdjYWxsLWluc3RhbmNlLWRlc3Ryb3llZCcsIGhhbmRsZURlc3Ryb3llZEluc3RhbmNlKTtcbiAgICAgIHNldENhbGxJbnN0YW5jZShjbyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGxJbnN0YW5jZSBleGlzdHMuXG4gICAgICovXG4gICAgaWYgKGNhbGxJbnN0YW5jZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBQcm9wcyBoYXZlIGNoYW5nZWQuIERlc3Ryb3kgY3VycmVudCBpbnN0YW5jZSwgc28gYSBuZXcgb25lIGNhbiBiZSBjcmVhdGVkLlxuICAgICAgICovXG4gICAgICBpZiAoIWN1c3RvbURlZXBFcXVhbChsYXN0VXNlZE9wdGlvbnMuY3VycmVudCwgb3B0aW9ucykpIHtcbiAgICAgICAgZGVzdHJveUNhbGxJbnN0YW5jZShjYWxsSW5zdGFuY2UpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm4gZWFybHkuXG4gICAgICAgKi9cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFjbyB8fCBjby5pc0Rlc3Ryb3llZCgpKSB7XG4gICAgICAvKipcbiAgICAgICAqIGNhbGxJbnN0YW5jZSBkb2Vzbid0IGV4aXN0IG9yIGlzIGRlc3Ryb3llZCAoVE9ETzogQ2hlY2sgd2h5IGdldENhbGxJbnN0YW5jZSgpIGNhbiByZXR1cm4gYSBkZXN0cm95ZWQgaW5zdGFuY2UpLFxuICAgICAgICogYnV0IHNob3VsZCBiZSBjcmVhdGVkLlxuICAgICAgICogSW1wb3J0YW50IHRvIHNwcmVhZCBwcm9wcywgYmVjYXVzZSBjcmVhdGVDYWxsT2JqZWN0L2NyZWF0ZUZyYW1lIGFsdGVycyB0aGUgcGFzc2VkIG9iamVjdCAoYWRkcyBsYXlvdXQgYW5kIGRhaWx5SnNWZXJzaW9uKS5cbiAgICAgICAqL1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NhbGxGcmFtZSc6XG4gICAgICAgICAgY28gPSAocGFyZW50RWxSZWYgPT09IG51bGwgfHwgcGFyZW50RWxSZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEVsUmVmLmN1cnJlbnQpID8gRGFpbHkuY3JlYXRlRnJhbWUocGFyZW50RWxSZWYuY3VycmVudCwgX2Fzc2lnbih7fSwgb3B0aW9ucykpIDogRGFpbHkuY3JlYXRlRnJhbWUoX2Fzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjYWxsT2JqZWN0JzpcbiAgICAgICAgICBjbyA9IERhaWx5LmNyZWF0ZUNhbGxPYmplY3QoX2Fzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGFzdFVzZWRPcHRpb25zLmN1cnJlbnQgPSBvcHRpb25zO1xuICAgIH1cbiAgICBzZXRDYWxsSW5zdGFuY2UoY28pO1xuICAgIGNvLm9uY2UoJ2NhbGwtaW5zdGFuY2UtZGVzdHJveWVkJywgaGFuZGxlRGVzdHJveWVkSW5zdGFuY2UpO1xuICAgIC8qKlxuICAgICAqIE5vIGNsZWFudXAgcGhhc2UgaGVyZSwgYmVjYXVzZSBjYWxsT2JqZWN0LmRlc3Ryb3koKSByZXR1cm5zIGEgUHJvbWlzZS5cbiAgICAgKiBXZSBjYW4ndCBoYXZlIGFzeW5jaHJvbm91cyBjbGVhbnVwcyBpbiBhIHVzZUVmZmVjdC5cbiAgICAgKiBUbyBhdm9pZCBpbmZpbml0ZSByZW5kZXIgbG9vcHMgd2UgY29tcGFyZSB0aGUgcHJvcHMgd2hlbiBjcmVhdGluZyBjYWxsIG9iamVjdCBpbnN0YW5jZXMuXG4gICAgICovXG4gIH0sIFtjYWxsSW5zdGFuY2UsIG9wdGlvbnMsIHBhcmVudEVsUmVmLCBzaG91bGRDcmVhdGVJbnN0YW5jZSwgdHlwZV0pO1xuICByZXR1cm4gY2FsbEluc3RhbmNlO1xufTtcblxuLyoqXG4gKiBIZWxwZXIgaG9vayB0byBtYWludGFpbiBjdXN0b20gY2FsbE9iamVjdCBpbnN0YW5jZXMgaW4gUmVhY3QgY29kZWJhc2VzLlxuICovXG52YXIgdXNlQ2FsbE9iamVjdCA9IGZ1bmN0aW9uIHVzZUNhbGxPYmplY3QocHJvcHMpIHtcbiAgcmV0dXJuIHVzZUNhbGxJbnN0YW5jZSgnY2FsbE9iamVjdCcsIHByb3BzKTtcbn07XG5cbnZhciBEYWlseVByb3ZpZGVyID0gZnVuY3Rpb24gRGFpbHlQcm92aWRlcihfYSkge1xuICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbixcbiAgICBqb3RhaVN0b3JlID0gX2Euam90YWlTdG9yZSxcbiAgICBwcm9wcyA9IF9fcmVzdChfYSwgW1wiY2hpbGRyZW5cIiwgXCJqb3RhaVN0b3JlXCJdKTtcbiAgdmFyIGV2ZW50c01hcCA9IHVzZVJlZih7fSk7XG4gIC8qKlxuICAgKiBHZW5lcmljIGV2ZW50IGhhbmRsZXIgdG8gbG9vcCB0aHJvdWdoIHJlZ2lzdGVyZWQgZXZlbnQgY2FsbGJhY2tzLlxuICAgKi9cbiAgdmFyIGhhbmRsZUV2ZW50ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgdmFyIGVfMSwgX2E7XG4gICAgdmFyIF9iLCBfYztcbiAgICBpZiAoISgnYWN0aW9uJyBpbiBldikpIHJldHVybjtcbiAgICB2YXIgZXZlbnQgPSBldi5hY3Rpb247XG4gICAgdmFyIGFsbEhhbmRsZXJzID0gQXJyYXkuZnJvbSgoX2MgPSAoX2IgPSBldmVudHNNYXAuY3VycmVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW2V2ZW50XSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogW10pO1xuICAgIHZhciBwcmlvcml0eUhhbmRsZXJzID0gYWxsSGFuZGxlcnMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xuICAgICAgdmFyIF9iID0gX19yZWFkKF9hLCAxKSxcbiAgICAgICAga2V5ID0gX2JbMF07XG4gICAgICByZXR1cm4ga2V5IDwgMDtcbiAgICB9KTtcbiAgICB2YXIgbm9ybWFsSGFuZGxlcnMgPSBhbGxIYW5kbGVycy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XG4gICAgICB2YXIgX2IgPSBfX3JlYWQoX2EsIDEpLFxuICAgICAgICBrZXkgPSBfYlswXTtcbiAgICAgIHJldHVybiBrZXkgPiAwO1xuICAgIH0pO1xuICAgIHZhciBzb3J0ZWRIYW5kbGVycyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKHByaW9yaXR5SGFuZGxlcnMpLCBmYWxzZSksIF9fcmVhZChub3JtYWxIYW5kbGVycyksIGZhbHNlKTtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgc29ydGVkSGFuZGxlcnNfMSA9IF9fdmFsdWVzKHNvcnRlZEhhbmRsZXJzKSwgc29ydGVkSGFuZGxlcnNfMV8xID0gc29ydGVkSGFuZGxlcnNfMS5uZXh0KCk7ICFzb3J0ZWRIYW5kbGVyc18xXzEuZG9uZTsgc29ydGVkSGFuZGxlcnNfMV8xID0gc29ydGVkSGFuZGxlcnNfMS5uZXh0KCkpIHtcbiAgICAgICAgdmFyIF9kID0gX19yZWFkKHNvcnRlZEhhbmRsZXJzXzFfMS52YWx1ZSwgMiksXG4gICAgICAgICAgY2IgPSBfZFsxXTtcbiAgICAgICAgY2IoZXYpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVfMV8xKSB7XG4gICAgICBlXzEgPSB7XG4gICAgICAgIGVycm9yOiBlXzFfMVxuICAgICAgfTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHNvcnRlZEhhbmRsZXJzXzFfMSAmJiAhc29ydGVkSGFuZGxlcnNfMV8xLmRvbmUgJiYgKF9hID0gc29ydGVkSGFuZGxlcnNfMVtcInJldHVyblwiXSkpIF9hLmNhbGwoc29ydGVkSGFuZGxlcnNfMSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG4gIC8qKlxuICAgKiBJbiBjYXNlIGV2ZW50cyBhcmUgc2V0IHVwIHZpYSB1c2VEYWlseUV2ZW50IGJlZm9yZSBhIERhaWx5Q2FsbCBpbnN0YW5jZSBpcyBhdmFpbGFibGUsXG4gICAqIHdlJ2xsIHJlZ2lzdGVyIHRoZSBldmVudHMgd2hlbmV2ZXIgZGFpbHkgaXMgc2V0LlxuICAgKi9cbiAgdmFyIGluaXRFdmVudEhhbmRsZXJzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRhaWx5KSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIE9iamVjdC5rZXlzKGV2ZW50c01hcC5jdXJyZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZGFpbHkub2ZmKGV2ZW50LCBoYW5kbGVFdmVudCk7XG4gICAgICBpZiAoIWRhaWx5LmlzRGVzdHJveWVkKCkpIHtcbiAgICAgICAgZGFpbHkub24oZXZlbnQsIGhhbmRsZUV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2hhbmRsZUV2ZW50XSk7XG4gIHZhciBleHRlcm5hbENhbGxPYmplY3QgPSAnY2FsbE9iamVjdCcgaW4gcHJvcHMgPyBwcm9wcy5jYWxsT2JqZWN0IDogbnVsbDtcbiAgdmFyIG1lbW9pemVkT3B0aW9ucyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnY2FsbE9iamVjdCcgaW4gcHJvcHMgPyB7fSA6IHByb3BzO1xuICB9LCBbcHJvcHNdKTtcbiAgdmFyIGludGVybmFsQ2FsbE9iamVjdCA9IHVzZUNhbGxPYmplY3Qoe1xuICAgIG9wdGlvbnM6IG1lbW9pemVkT3B0aW9ucyxcbiAgICBzaG91bGRDcmVhdGVJbnN0YW5jZTogdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICEoJ2NhbGxPYmplY3QnIGluIHByb3BzKTtcbiAgICB9LCBbcHJvcHNdKVxuICB9KTtcbiAgdmFyIGNhbGxPYmplY3QgPSBleHRlcm5hbENhbGxPYmplY3QgIT09IG51bGwgJiYgZXh0ZXJuYWxDYWxsT2JqZWN0ICE9PSB2b2lkIDAgPyBleHRlcm5hbENhbGxPYmplY3QgOiBpbnRlcm5hbENhbGxPYmplY3Q7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsT2JqZWN0KSByZXR1cm47XG4gICAgaW5pdEV2ZW50SGFuZGxlcnMoY2FsbE9iamVjdCk7XG4gIH0sIFtjYWxsT2JqZWN0LCBpbml0RXZlbnRIYW5kbGVyc10pO1xuICAvKipcbiAgICogUmVnaXN0ZXJzIGV2ZW50IGNhbGxiYWNrLlxuICAgKi9cbiAgdmFyIG9uID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2LCBjYiwga2V5KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoIWV2ZW50c01hcC5jdXJyZW50W2V2XSkge1xuICAgICAgZXZlbnRzTWFwLmN1cnJlbnRbZXZdID0gbmV3IE1hcCgpO1xuICAgICAgaWYgKGNhbGxPYmplY3QpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ha2Ugc3VyZSBvbmx5IDEgZXZlbnQgbGlzdGVuZXIgaXMgcmVnaXN0ZXJlZCBhdCBhbnkgdGltZSBmb3IgaGFuZGxlRXZlbnQuXG4gICAgICAgICAqIE90aGVyd2lzZSwgZXZlbnRzIHNlbnQgZnJvbSBkYWlseS1qcyBtaWdodCBiZSBoYW5kbGVkIG11bHRpcGxlIHRpbWVzLlxuICAgICAgICAgKi9cbiAgICAgICAgY2FsbE9iamVjdC5vZmYoZXYsIGhhbmRsZUV2ZW50KTtcbiAgICAgICAgaWYgKCFjYWxsT2JqZWN0LmlzRGVzdHJveWVkKCkpIHtcbiAgICAgICAgICBjYWxsT2JqZWN0Lm9uKGV2LCBoYW5kbGVFdmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEoKF9hID0gZXZlbnRzTWFwLmN1cnJlbnRbZXZdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGFzKGtleSkpKSB7XG4gICAgICAoX2IgPSBldmVudHNNYXAuY3VycmVudFtldl0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zZXQoa2V5LCBjYik7XG4gICAgfVxuICB9LCBbY2FsbE9iamVjdCwgaGFuZGxlRXZlbnRdKTtcbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGV2ZW50IGNhbGxiYWNrLlxuICAgKi9cbiAgdmFyIG9mZiA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldiwga2V5KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAoX2EgPSBldmVudHNNYXAuY3VycmVudFtldl0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtcImRlbGV0ZVwiXShrZXkpO1xuICAgIGlmICgoKF9iID0gZXZlbnRzTWFwLmN1cnJlbnRbZXZdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc2l6ZSkgPT09IDApIHtcbiAgICAgIGNhbGxPYmplY3QgPT09IG51bGwgfHwgY2FsbE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FsbE9iamVjdC5vZmYoZXYsIGhhbmRsZUV2ZW50KTtcbiAgICAgIGRlbGV0ZSBldmVudHNNYXAuY3VycmVudFtldl07XG4gICAgfVxuICB9LCBbY2FsbE9iamVjdCwgaGFuZGxlRXZlbnRdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvdmlkZXIsIHtcbiAgICBzdG9yZTogam90YWlTdG9yZVxuICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5Q29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBjYWxsT2JqZWN0XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlFdmVudENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgb246IG9uLFxuICAgICAgb2ZmOiBvZmZcbiAgICB9XG4gIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlSb29tLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5TWVldGluZywgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseU5ldHdvcmssIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlQYXJ0aWNpcGFudHMsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGFpbHlSZWNvcmRpbmdzLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5TGl2ZVN0cmVhbWluZywgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChEYWlseVRyYW5zY3JpcHRpb25zLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KERhaWx5RGV2aWNlcywgbnVsbCwgY2hpbGRyZW4pKSkpKSkpKSkpKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcGFydGljaXBhbnQgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW4gc2Vzc2lvbklkLlxuICogQHBhcmFtIHNlc3Npb25JZCDigJMgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZCBvciBcImxvY2FsXCIuXG4gKiBAZGVwcmVjYXRlZCBVc2UgW3VzZVBhcnRpY2lwYW50UHJvcGVydHldKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktcmVhY3QvdXNlLXBhcnRpY2lwYW50LXByb3BlcnR5KSBpbnN0ZWFkIHRvIG9ubHkgc3Vic2NyaWJlIHRvIHJlcXVpcmVkIHBhcnRpY2lwYW50IHByb3BlcnRpZXMuXG4gKi9cbnZhciB1c2VQYXJ0aWNpcGFudCA9IGZ1bmN0aW9uIHVzZVBhcnRpY2lwYW50KHNlc3Npb25JZCwgX2EpIHtcbiAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgb25QYXJ0aWNpcGFudExlZnQgPSBfYi5vblBhcnRpY2lwYW50TGVmdCxcbiAgICBvblBhcnRpY2lwYW50VXBkYXRlZCA9IF9iLm9uUGFydGljaXBhbnRVcGRhdGVkO1xuICB2YXIgcGFydGljaXBhbnQgPSB1c2VBdG9tVmFsdWUocGFydGljaXBhbnRTdGF0ZShzZXNzaW9uSWQpKTtcbiAgdXNlVGhyb3R0bGVkRGFpbHlFdmVudChbJ3BhcnRpY2lwYW50LXVwZGF0ZWQnLCAncGFydGljaXBhbnQtbGVmdCddLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZ0cykge1xuICAgIHZhciBmaWx0ZXJlZEV2dHMgPSBldnRzLmZpbHRlcihmdW5jdGlvbiAoZXYpIHtcbiAgICAgIHJldHVybiBldi5wYXJ0aWNpcGFudC5zZXNzaW9uX2lkID09PSBzZXNzaW9uSWQ7XG4gICAgfSk7XG4gICAgaWYgKCFmaWx0ZXJlZEV2dHMubGVuZ3RoKSByZXR1cm47XG4gICAgZmlsdGVyZWRFdnRzLmZvckVhY2goZnVuY3Rpb24gKGV2KSB7XG4gICAgICBzd2l0Y2ggKGV2LmFjdGlvbikge1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC11cGRhdGVkJzpcbiAgICAgICAgICBvblBhcnRpY2lwYW50VXBkYXRlZCA9PT0gbnVsbCB8fCBvblBhcnRpY2lwYW50VXBkYXRlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudFVwZGF0ZWQoZXYpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYXJ0aWNpcGFudC1sZWZ0JzpcbiAgICAgICAgICBvblBhcnRpY2lwYW50TGVmdCA9PT0gbnVsbCB8fCBvblBhcnRpY2lwYW50TGVmdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudExlZnQoZXYpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbb25QYXJ0aWNpcGFudExlZnQsIG9uUGFydGljaXBhbnRVcGRhdGVkLCBzZXNzaW9uSWRdKSk7XG4gIHVzZURlYnVnVmFsdWUocGFydGljaXBhbnQpO1xuICByZXR1cm4gcGFydGljaXBhbnQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1vc3QgcmVjZW50IHBhcnRpY2lwYW50IG1lbnRpb25lZCBpbiBhbiBbYWN0aXZlLXNwZWFrZXItY2hhbmdlXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2V2ZW50cy9tZWV0aW5nLWV2ZW50cyNhY3RpdmUtc3BlYWtlci1jaGFuZ2UpIGV2ZW50LlxuICogQGRlcHJlY2F0ZWQgVXNlIFt1c2VBY3RpdmVTcGVha2VySWRdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktcmVhY3QvdXNlLWFjdGl2ZS1zcGVha2VyLWlkKSBpbnN0ZWFkLlxuICovXG52YXIgdXNlQWN0aXZlUGFydGljaXBhbnQgPSBmdW5jdGlvbiB1c2VBY3RpdmVQYXJ0aWNpcGFudChfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBfYyA9IF9iLmlnbm9yZUxvY2FsLFxuICAgIGlnbm9yZUxvY2FsID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsXG4gICAgb25BY3RpdmVTcGVha2VyQ2hhbmdlID0gX2Iub25BY3RpdmVTcGVha2VyQ2hhbmdlO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgcmVjZW50QWN0aXZlSWQgPSB1c2VBdG9tVmFsdWUoYWN0aXZlSWRTdGF0ZSk7XG4gIHZhciBfZCA9IF9fcmVhZCh1c2VTdGF0ZSgnJyksIDIpLFxuICAgIGFjdGl2ZUlkID0gX2RbMF0sXG4gICAgc2V0QWN0aXZlSWQgPSBfZFsxXTtcbiAgdmFyIGFjdGl2ZVBhcnRpY2lwYW50ID0gdXNlUGFydGljaXBhbnQoYWN0aXZlSWQpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgdmFyIGxvY2FsID0gKF9hID0gZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnBhcnRpY2lwYW50cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubG9jYWw7XG4gICAgaWYgKGlnbm9yZUxvY2FsICYmIHJlY2VudEFjdGl2ZUlkID09PSAobG9jYWwgPT09IG51bGwgfHwgbG9jYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxvY2FsLnNlc3Npb25faWQpKSByZXR1cm47XG4gICAgLy8gc2V0dGluZyBhY3RpdmVJZCBhcyBzdHJpbmcgdG8gYXZvaWQgcGFzc2luZyBudWxsIHRvIHVzZVBhcnRpY2lwYW50IGhvb2tcbiAgICBzZXRBY3RpdmVJZChyZWNlbnRBY3RpdmVJZCAhPT0gbnVsbCAmJiByZWNlbnRBY3RpdmVJZCAhPT0gdm9pZCAwID8gcmVjZW50QWN0aXZlSWQgOiAnJyk7XG4gIH0sIFtkYWlseSwgaWdub3JlTG9jYWwsIHJlY2VudEFjdGl2ZUlkXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2FjdGl2ZS1zcGVha2VyLWNoYW5nZScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uQWN0aXZlU3BlYWtlckNoYW5nZSA9PT0gbnVsbCB8fCBvbkFjdGl2ZVNwZWFrZXJDaGFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQWN0aXZlU3BlYWtlckNoYW5nZShldik7XG4gIH0sIFtvbkFjdGl2ZVNwZWFrZXJDaGFuZ2VdKSk7XG4gIHVzZURlYnVnVmFsdWUoYWN0aXZlUGFydGljaXBhbnQpO1xuICByZXR1cm4gYWN0aXZlUGFydGljaXBhbnQ7XG59O1xuXG4vKipcbiAqIFJlYWN0IGhvb2sgdG8gc2V0dXAgW2FwcC1tZXNzYWdlXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2V2ZW50cy9wYXJ0aWNpcGFudC1ldmVudHMjYXBwLW1lc3NhZ2UpIGxpc3RlbmVycyBhbmRcbiAqIHRvIHNlbmQgbWVzc2FnZXMgdmlhIFtzZW5kQXBwTWVzc2FnZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3NlbmQtYXBwLW1lc3NhZ2UpLlxuICovXG52YXIgdXNlQXBwTWVzc2FnZSA9IGZ1bmN0aW9uIHVzZUFwcE1lc3NhZ2UoX2EpIHtcbiAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgb25BcHBNZXNzYWdlID0gX2Iub25BcHBNZXNzYWdlO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc2VuZEFwcE1lc3NhZ2UgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZGF0YSwgdG8pIHtcbiAgICBpZiAodG8gPT09IHZvaWQgMCkge1xuICAgICAgdG8gPSAnKic7XG4gICAgfVxuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zZW5kQXBwTWVzc2FnZShkYXRhLCB0byk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgaGFuZGxlQXBwTWVzc2FnZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uQXBwTWVzc2FnZSA9PT0gbnVsbCB8fCBvbkFwcE1lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQXBwTWVzc2FnZShldiwgc2VuZEFwcE1lc3NhZ2UpO1xuICB9LCBbb25BcHBNZXNzYWdlLCBzZW5kQXBwTWVzc2FnZV0pO1xuICB1c2VEYWlseUV2ZW50KCdhcHAtbWVzc2FnZScsIGhhbmRsZUFwcE1lc3NhZ2UpO1xuICByZXR1cm4gc2VuZEFwcE1lc3NhZ2U7XG59O1xuXG52YXIgYXVkaW9MZXZlbFByb2Nlc3NvciA9IFwiXFxuICAgIGNsYXNzIEF1ZGlvTGV2ZWxQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3Ige1xcbiAgICB2b2x1bWU7XFxuICAgIGludGVydmFsO1xcbiAgICBuZXh0RnJhbWU7XFxuICAgIFxcbiAgICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgICBzdXBlcigpO1xcbiAgICAgIHRoaXMudm9sdW1lID0gMDtcXG4gICAgICB0aGlzLmludGVydmFsID0gMjU7XFxuICAgICAgdGhpcy5uZXh0RnJhbWUgPSB0aGlzLmludGVydmFsO1xcbiAgICB9XFxuICAgIFxcbiAgICBnZXQgaW50ZXJ2YWxJbkZyYW1lcygpIHtcXG4gICAgICAvLyBzYW1wbGVSYXRlIGlzIGdsb2JhbGx5IGRlZmluZWQgaW4gQXVkaW9Xb3JrbGV0cy5cXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0F1ZGlvV29ya2xldEdsb2JhbFNjb3BlXFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXFxuICAgICAgcmV0dXJuICh0aGlzLmludGVydmFsIC8gMTAwMCkgKiBzYW1wbGVSYXRlO1xcbiAgICB9XFxuICAgIFxcbiAgICBwcm9jZXNzKGlucHV0TGlzdCkge1xcbiAgICAgIGNvbnN0IGZpcnN0SW5wdXQgPSBpbnB1dExpc3RbMF07XFxuICAgIFxcbiAgICAgIGlmIChmaXJzdElucHV0Lmxlbmd0aCA+IDApIHtcXG4gICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IGZpcnN0SW5wdXRbMF07XFxuICAgICAgICBsZXQgdG90YWwgPSAwO1xcbiAgICBcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXREYXRhLmxlbmd0aDsgKytpKSB7XFxuICAgICAgICAgIHRvdGFsICs9IE1hdGguYWJzKGlucHV0RGF0YVtpXSk7XFxuICAgICAgICB9XFxuICAgIFxcbiAgICAgICAgY29uc3Qgcm1zID0gTWF0aC5zcXJ0KHRvdGFsIC8gaW5wdXREYXRhLmxlbmd0aCk7XFxuICAgICAgICB0aGlzLnZvbHVtZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHJtcykpO1xcbiAgICBcXG4gICAgICAgIHRoaXMubmV4dEZyYW1lIC09IGlucHV0RGF0YS5sZW5ndGg7XFxuICAgICAgICBpZiAodGhpcy5uZXh0RnJhbWUgPCAwKSB7XFxuICAgICAgICAgIHRoaXMubmV4dEZyYW1lICs9IHRoaXMuaW50ZXJ2YWxJbkZyYW1lcztcXG4gICAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKHsgdm9sdW1lOiB0aGlzLnZvbHVtZSB9KTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIFxcbiAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKCdhdWRpb2xldmVsJywgQXVkaW9MZXZlbFByb2Nlc3Nvcik7ICAgICAgICAgICAgICBcXG5cIjtcbnZhciBpbmxpbmVBdWRpb1dvcmtsZXQgPSBcImRhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdDtjaGFyc2V0PXV0ZjgsXCIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChhdWRpb0xldmVsUHJvY2Vzc29yKSk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdm9sdW1lIGxldmVsIG9mIGEgZ2l2ZW4gTWVkaWFTdHJlYW1UcmFjay5cbiAqIEBwYXJhbSBtZWRpYVRyYWNrIFRoZSBNZWRpYVN0cmVhbVRyYWNrIHRvIGJlIGFuYWx5c2VkLlxuICogQHBhcmFtIG9uVm9sdW1lQ2hhbmdlIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIHZvbHVtZSBjaGFuZ2VzLiBDYW4gYmUgdXNlZCB0byB2aXN1YWxpc2UgYXVkaW8gb3V0cHV0LlxuICogQGRlcHJlY2F0ZWQgVXNlIHVzZUF1ZGlvTGV2ZWxPYnNlcnZlcigpIGluc3RlYWQuXG4gKi9cbnZhciB1c2VBdWRpb0xldmVsID0gZnVuY3Rpb24gdXNlQXVkaW9MZXZlbChtZWRpYVRyYWNrLCBvblZvbHVtZUNoYW5nZSkge1xuICB2YXIgYXVkaW9DdHggPSB1c2VSZWYoKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uIHNldHVwU3RyZWFtQW5kU3RhcnRQcm9jZXNzaW5nKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgLy8gTm8gbWVkaWFUcmFjay4gU3RvcCBpbW1lZGlhdGVseS5cbiAgICBpZiAoIW1lZGlhVHJhY2spIHJldHVybjtcbiAgICB2YXIgQXVkaW9DdHggPSB0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJyA/IEF1ZGlvQ29udGV4dCA6IHR5cGVvZiB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgOiBudWxsO1xuICAgIC8vIE5vIEF1ZGlvQ29udGV4dCBhdmFpbGFibGUgaW4gYnJvd3Nlci4gQ2FuJ3QgbWVhc3VyZSBhdWRpbyB2b2x1bWUuXG4gICAgaWYgKCFBdWRpb0N0eCkgcmV0dXJuO1xuICAgIGlmICghYXVkaW9DdHguY3VycmVudCkge1xuICAgICAgLy8gTm8gYXVkaW8gY29udGV4dCBpbml0aWFsaXplZC4gSW5pdGlhbGl6aW5nIG5vdy5cbiAgICAgIGF1ZGlvQ3R4LmN1cnJlbnQgPSBuZXcgQXVkaW9DdHgoKTtcbiAgICB9XG4gICAgdmFyIGF1ZGlvQ29udGV4dCA9IGF1ZGlvQ3R4LmN1cnJlbnQ7XG4gICAgLy8gQXVkaW8gY29udGV4dCBjb3VsZCBub3QgYmUgaW5pdGlhbGl6ZWQuIFN0b3BwaW5nLlxuICAgIGlmICghYXVkaW9Db250ZXh0KSByZXR1cm47XG4gICAgLy8gTm8gTWVkaWFTdHJlYW0gQVBJIGF2YWlsYWJsZSAoZS5nLiBXZWJSVEMgZGlzYWJsZWQpXG4gICAgaWYgKCFNZWRpYVN0cmVhbSkgcmV0dXJuO1xuICAgIHZhciBtZWRpYVN0cmVhbVNvdXJjZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShuZXcgTWVkaWFTdHJlYW0oW21lZGlhVHJhY2tdKSk7XG4gICAgdmFyIG5vZGU7XG4gICAgdmFyIGdhaW5Ob2RlO1xuICAgIHZhciBzdGFydFByb2Nlc3NpbmcgPSBmdW5jdGlvbiBzdGFydFByb2Nlc3NpbmcoKSB7XG4gICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZV8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzAsIDEsLCA2XSk7XG4gICAgICAgICAgICAgIG5vZGUgPSBuZXcgQXVkaW9Xb3JrbGV0Tm9kZShhdWRpb0NvbnRleHQsICdhdWRpb2xldmVsJyk7XG4gICAgICAgICAgICAgIGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzIsIDQsLCA1XSk7XG4gICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGF1ZGlvQ29udGV4dC5hdWRpb1dvcmtsZXQuYWRkTW9kdWxlKGlubGluZUF1ZGlvV29ya2xldCldO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgIG5vZGUgPSBuZXcgQXVkaW9Xb3JrbGV0Tm9kZShhdWRpb0NvbnRleHQsICdhdWRpb2xldmVsJyk7XG4gICAgICAgICAgICAgIGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgIGVfMSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlXzEpO1xuICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgIGlmICghKG5vZGUgJiYgZ2Fpbk5vZGUpKSByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgIG5vZGUucG9ydC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdm9sdW1lID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS52b2x1bWUpIHZvbHVtZSA9IGV2ZW50LmRhdGEudm9sdW1lO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIG9uVm9sdW1lQ2hhbmdlKHZvbHVtZSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4udmFsdWUgPSAwO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3Qobm9kZSkuY29ubmVjdChnYWluTm9kZSkuY29ubmVjdChhdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHN0YXJ0UHJvY2Vzc2luZygpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBub2RlID09PSBudWxsIHx8IG5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgbm9kZSA9IG51bGw7XG4gICAgICBtZWRpYVN0cmVhbVNvdXJjZSA9PT0gbnVsbCB8fCBtZWRpYVN0cmVhbVNvdXJjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWVkaWFTdHJlYW1Tb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtvblZvbHVtZUNoYW5nZSwgbWVkaWFUcmFja10pO1xufTtcblxuLyoqXG4gKiBPYnNlcnZlcyB0aGUgdm9sdW1lIGxldmVsIGZvciBhIGdpdmVuIHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGlkIFRoZSBzZXNzaW9uX2lkIG9mIHRoZSBwYXJ0aWNpcGFudCB0byBvYnNlcnZlLlxuICogQHBhcmFtIGNiIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIHZvbHVtZSBjaGFuZ2VzLiBDYW4gYmUgdXNlZCB0byB2aXN1YWxpc2UgYXVkaW8gb3V0cHV0LlxuICogQHBhcmFtIGVycm9yQ2IgRXJyb3IgY2FsbGJhY2suIENhbGxlZCB3aGVuIGxvY2FsIGF1ZGlvIGxldmVsIG9ic2VydmVyIGlzIG5vdCBhdmFpbGFibGUgaW4gYnJvd3Nlci5cbiAqIEBwYXJhbSBpbnRlcnZhbCBDYWxsYmFja3Mgd2lsbCBiZSBleGVjdXRlZCBhdCB0aGlzIGZyZXFlbmN5LiBJZiB1bnNwZWNpZmllZCwgRGFpbHkncyBkZWZhdWx0IGZyZXF1ZW5jeSBpcyB1c2VkLlxuICovXG52YXIgdXNlQXVkaW9MZXZlbE9ic2VydmVyID0gZnVuY3Rpb24gdXNlQXVkaW9MZXZlbE9ic2VydmVyKGlkLCBjYiwgZXJyb3JDYiwgaW50ZXJ2YWwpIHtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIGlzTG9jYWwgPSBpZCA9PT0gbG9jYWxTZXNzaW9uSWQ7XG4gIHVzZURhaWx5RXZlbnQoJ2xvY2FsLWF1ZGlvLWxldmVsJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgaWYgKCFpc0xvY2FsKSByZXR1cm47XG4gICAgY2IoZXYuYXVkaW9MZXZlbCk7XG4gIH0sIFtjYiwgaXNMb2NhbF0pKTtcbiAgdXNlRGFpbHlFdmVudCgncmVtb3RlLXBhcnRpY2lwYW50cy1hdWRpby1sZXZlbCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChpc0xvY2FsKSByZXR1cm47XG4gICAgY2IoZXYucGFydGljaXBhbnRzQXVkaW9MZXZlbFtpZF0pO1xuICB9LCBbY2IsIGlkLCBpc0xvY2FsXSkpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gbWF5YmVTdGFydExvY2FsQXVkaW9PYnNlcnZlcigpIHtcbiAgICBpZiAoIWRhaWx5IHx8IGRhaWx5LmlzRGVzdHJveWVkKCkgfHwgIWlzTG9jYWwpIHJldHVybjtcbiAgICBpZiAoZGFpbHkuaXNMb2NhbEF1ZGlvTGV2ZWxPYnNlcnZlclJ1bm5pbmcoKSkgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICBkYWlseS5zdGFydExvY2FsQXVkaW9MZXZlbE9ic2VydmVyKGludGVydmFsKTtcbiAgICB9IGNhdGNoIChfYSkge1xuICAgICAgZXJyb3JDYiA9PT0gbnVsbCB8fCBlcnJvckNiID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvckNiKCdMb2NhbCBhdWRpbyBsZXZlbCBvYnNlcnZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpO1xuICAgIH1cbiAgfSwgW2RhaWx5LCBlcnJvckNiLCBpbnRlcnZhbCwgaXNMb2NhbF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gbWF5YmVTdGFydFJlbW90ZUF1ZGlvT2JzZXJ2ZXIoKSB7XG4gICAgaWYgKCFkYWlseSB8fCBkYWlseS5pc0Rlc3Ryb3llZCgpIHx8IGlzTG9jYWwpIHJldHVybjtcbiAgICBpZiAoZGFpbHkuaXNSZW1vdGVQYXJ0aWNpcGFudHNBdWRpb0xldmVsT2JzZXJ2ZXJSdW5uaW5nKCkpIHJldHVybjtcbiAgICBkYWlseS5zdGFydFJlbW90ZVBhcnRpY2lwYW50c0F1ZGlvTGV2ZWxPYnNlcnZlcihpbnRlcnZhbCk7XG4gIH0sIFtkYWlseSwgaW50ZXJ2YWwsIGlzTG9jYWxdKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHBhcnRpY2lwYW50J3MgYXVkaW8gdHJhY2sgYW5kIHN0YXRlLlxuICogQHBhcmFtIHBhcnRpY2lwYW50SWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZC5cbiAqL1xudmFyIHVzZUF1ZGlvVHJhY2sgPSBmdW5jdGlvbiB1c2VBdWRpb1RyYWNrKHBhcnRpY2lwYW50SWQpIHtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2socGFydGljaXBhbnRJZCwgJ2F1ZGlvJyk7XG59O1xuXG4vKipcbiAqIEhlbHBlciBob29rIHRvIG1haW50YWluIGN1c3RvbSBjYWxsRnJhbWUgaW5zdGFuY2VzIGluIFJlYWN0IGNvZGViYXNlcy5cbiAqL1xudmFyIHVzZUNhbGxGcmFtZSA9IGZ1bmN0aW9uIHVzZUNhbGxGcmFtZShwcm9wcykge1xuICByZXR1cm4gdXNlQ2FsbEluc3RhbmNlKCdjYWxsRnJhbWUnLCBwcm9wcyk7XG59O1xuXG52YXIgZmFzdERlZXBFcXVhbDtcbnZhciBoYXNSZXF1aXJlZEZhc3REZWVwRXF1YWw7XG5mdW5jdGlvbiByZXF1aXJlRmFzdERlZXBFcXVhbCgpIHtcbiAgaWYgKGhhc1JlcXVpcmVkRmFzdERlZXBFcXVhbCkgcmV0dXJuIGZhc3REZWVwRXF1YWw7XG4gIGhhc1JlcXVpcmVkRmFzdERlZXBFcXVhbCA9IDE7XG5cbiAgLy8gZG8gbm90IGVkaXQgLmpzIGZpbGVzIGRpcmVjdGx5IC0gZWRpdCBzcmMvaW5kZXguanN0XG5cbiAgZmFzdERlZXBFcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgJiYgYiAmJiBfdHlwZW9mKGEpID09ICdvYmplY3QnICYmIF90eXBlb2YoYikgPT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgbGVuZ3RoLCBpLCBrZXlzO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSBpZiAoIWVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICAgICAgaWYgKGEudmFsdWVPZiAhPT0gT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mKSByZXR1cm4gYS52YWx1ZU9mKCkgPT09IGIudmFsdWVPZigpO1xuICAgICAgaWYgKGEudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGtleXNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIGlmICghZXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xuICB9O1xuICByZXR1cm4gZmFzdERlZXBFcXVhbDtcbn1cblxudmFyIGZhc3REZWVwRXF1YWxFeHBvcnRzID0gcmVxdWlyZUZhc3REZWVwRXF1YWwoKTtcbnZhciBkZWVwRXF1YWwgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmFzdERlZXBFcXVhbEV4cG9ydHMpO1xuXG52YXIgQ1BVTG9hZFN0YXRlID0gYXRvbSh7XG4gIHN0YXRlOiAnbG93JyxcbiAgcmVhc29uOiAnbm9uZSdcbn0pO1xuQ1BVTG9hZFN0YXRlLmRlYnVnTGFiZWwgPSBqb3RhaURlYnVnTGFiZWwoJ2NwdS1sb2FkJyk7XG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgQ1BVIGxvYWQgYXMgcmVwb3J0ZWQgYnkgZGFpbHktanMgW2NwdS1sb2FkLWNoYW5nZV0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvcXVhbGl0eS1ldmVudHMjY3B1LWxvYWQtY2hhbmdlKSBldmVudHNcbiAqIGFuZCBbZ2V0Q3B1TG9hZFN0YXRzXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvZ2V0LWNwdS1sb2FkLXN0YXRzKS5cbiAqL1xudmFyIHVzZUNQVUxvYWQgPSBmdW5jdGlvbiB1c2VDUFVMb2FkKF9hKSB7XG4gIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uQ1BVTG9hZENoYW5nZSA9IF9iLm9uQ1BVTG9hZENoYW5nZTtcbiAgdmFyIGNwdSA9IHVzZUF0b21WYWx1ZShDUFVMb2FkU3RhdGUpO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgbWVldGluZ1N0YXRlID0gdXNlTWVldGluZ1N0YXRlKCk7XG4gIHZhciB1cGRhdGVDUFVMb2FkU3RhdGUgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKGdldCwgc2V0LCBjcHUpIHtcbiAgICB2YXIgcHJldiA9IGdldChDUFVMb2FkU3RhdGUpOyAvLyBHZXQgdGhlIGN1cnJlbnQgQ1BVIGxvYWQgc3RhdGVcbiAgICBpZiAoZGVlcEVxdWFsKHByZXYsIGNwdSkpIHJldHVybjsgLy8gQ2hlY2sgaWYgdGhlIHByZXZpb3VzIHN0YXRlIGlzIGVxdWFsIHRvIHRoZSBjdXJyZW50IG9uZVxuICAgIHNldChDUFVMb2FkU3RhdGUsIGNwdSk7IC8vIFVwZGF0ZSB0aGUgc3RhdGUgaWYgZGlmZmVyZW50XG4gIH0sIFtdKSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1vdW50ZWQgPSB0cnVlO1xuICAgIGlmICghZGFpbHkgfHwgZGFpbHkuaXNEZXN0cm95ZWQoKSB8fCBtZWV0aW5nU3RhdGUgIT09ICdqb2luZWQtbWVldGluZycpIHJldHVybjtcbiAgICBkYWlseS5nZXRDcHVMb2FkU3RhdHMoKS50aGVuKGZ1bmN0aW9uIChzdGF0cykge1xuICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICB1cGRhdGVDUFVMb2FkU3RhdGUoe1xuICAgICAgICBzdGF0ZTogc3RhdHMuY3B1TG9hZFN0YXRlLFxuICAgICAgICByZWFzb246IHN0YXRzLmNwdUxvYWRTdGF0ZVJlYXNvblxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbZGFpbHksIG1lZXRpbmdTdGF0ZSwgdXBkYXRlQ1BVTG9hZFN0YXRlXSk7XG4gIHVzZURhaWx5RXZlbnQoJ2NwdS1sb2FkLWNoYW5nZScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIHVwZGF0ZUNQVUxvYWRTdGF0ZSh7XG4gICAgICBzdGF0ZTogZXYuY3B1TG9hZFN0YXRlLFxuICAgICAgcmVhc29uOiBldi5jcHVMb2FkU3RhdGVSZWFzb25cbiAgICB9KTtcbiAgICBvbkNQVUxvYWRDaGFuZ2UgPT09IG51bGwgfHwgb25DUFVMb2FkQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNQVUxvYWRDaGFuZ2UoZXYpO1xuICB9LCBbb25DUFVMb2FkQ2hhbmdlLCB1cGRhdGVDUFVMb2FkU3RhdGVdKSk7XG4gIHVzZURlYnVnVmFsdWUoY3B1KTtcbiAgcmV0dXJuIGNwdTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIG1lZXRpbmcncyBsYXN0IGtub3duIGVycm9ycy5cbiAqL1xudmFyIHVzZURhaWx5RXJyb3IgPSBmdW5jdGlvbiB1c2VEYWlseUVycm9yKCkge1xuICB2YXIgbWVldGluZ0Vycm9yID0gdXNlQXRvbVZhbHVlKG1lZXRpbmdFcnJvclN0YXRlKTtcbiAgdmFyIG5vbkZhdGFsRXJyb3IgPSB1c2VBdG9tVmFsdWUobm9uRmF0YWxFcnJvclN0YXRlKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBtZWV0aW5nRXJyb3I6IG1lZXRpbmdFcnJvcixcbiAgICBub25GYXRhbEVycm9yOiBub25GYXRhbEVycm9yXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogVGhpcyBob29rIGFsbG93cyBhY2Nlc3MgdG8gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIncyBkZXZpY2VzIGFuZCB0aGVpciBzdGF0ZS5cbiAqL1xudmFyIHVzZURldmljZXMgPSBmdW5jdGlvbiB1c2VEZXZpY2VzKCkge1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgY2FtU3RhdGUgPSB1c2VBdG9tVmFsdWUoZ2VuZXJhbENhbWVyYVN0YXRlKTtcbiAgdmFyIG1pY1N0YXRlID0gdXNlQXRvbVZhbHVlKGdlbmVyYWxNaWNyb3Bob25lU3RhdGUpO1xuICB2YXIgY2FtRGV2aWNlcyA9IHVzZUF0b21WYWx1ZShjYW1lcmFEZXZpY2VzU3RhdGUpO1xuICB2YXIgbWljRGV2aWNlcyA9IHVzZUF0b21WYWx1ZShtaWNyb3Bob25lRGV2aWNlc1N0YXRlKTtcbiAgdmFyIHNwZWFrZXJEZXZpY2VzID0gdXNlQXRvbVZhbHVlKHNwZWFrZXJEZXZpY2VzU3RhdGUpO1xuICB2YXIgY2FtZXJhRXJyb3IgPSB1c2VBdG9tVmFsdWUobGFzdENhbWVyYUVycm9yU3RhdGUpO1xuICB2YXIgcmVmcmVzaERldmljZXMgPSB1c2VDb250ZXh0KERhaWx5RGV2aWNlc0NvbnRleHQpLnJlZnJlc2hEZXZpY2VzO1xuICAvKipcbiAgICogU2V0cyB2aWRlbyBpbnB1dCBkZXZpY2UgdG8gZ2l2ZW4gZGV2aWNlSWQuXG4gICAqL1xuICB2YXIgc2V0Q2FtZXJhID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRldmljZUlkKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYWlseSA9PT0gbnVsbCB8fCBkYWlseSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGFpbHkuc2V0SW5wdXREZXZpY2VzQXN5bmMoe1xuICAgICAgICAgICAgICBhdWRpb0RldmljZUlkOiBudWxsLFxuICAgICAgICAgICAgICB2aWRlb0RldmljZUlkOiBkZXZpY2VJZFxuICAgICAgICAgICAgfSldO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIFtkYWlseV0pO1xuICAvKipcbiAgICogU2V0cyBhdWRpbyBpbnB1dCBkZXZpY2UgdG8gZ2l2ZW4gZGV2aWNlSWQuXG4gICAqL1xuICB2YXIgc2V0TWljcm9waG9uZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChkZXZpY2VJZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnNldElucHV0RGV2aWNlc0FzeW5jKHtcbiAgICAgICAgICAgICAgYXVkaW9EZXZpY2VJZDogZGV2aWNlSWQsXG4gICAgICAgICAgICAgIHZpZGVvRGV2aWNlSWQ6IG51bGxcbiAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHldKTtcbiAgLyoqXG4gICAqIFNldHMgYXVkaW8gb3V0cHV0IGRldmljZSB0byBnaXZlbiBkZXZpY2VJZC5cbiAgICovXG4gIHZhciBzZXRTcGVha2VyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRldmljZUlkKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYWlseSA9PT0gbnVsbCB8fCBkYWlseSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGFpbHkuc2V0T3V0cHV0RGV2aWNlQXN5bmMoe1xuICAgICAgICAgICAgICBvdXRwdXREZXZpY2VJZDogZGV2aWNlSWRcbiAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIGVycm9yU3RhdGVzID0gWydibG9ja2VkJywgJ2luLXVzZScsICdub3QtZm91bmQnLCAnY29uc3RyYWludHMtaW52YWxpZCcsICdjb25zdHJhaW50cy1ub25lLXNwZWNpZmllZCcsICd1bmRlZmluZWQtbWVkaWFkZXZpY2VzJywgJ3Vua25vd24nXTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICAvKipcbiAgICAgKiBNb3N0IHJlY2VudCBlcnJvciBvYmplY3QgZW1pdHRlZCB2aWEgW2NhbWVyYS1lcnJvciBldmVudF0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9ldmVudHMvbWVldGluZy1ldmVudHMjY2FtZXJhLWVycm9yKS5cbiAgICAgKi9cbiAgICBjYW1lcmFFcnJvcjogY2FtZXJhRXJyb3IsXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIHRoZSB1c2VyJ3MgY2FtZXJhICh2aWRlb2lucHV0KSBkZXZpY2VzLiBTZWUgW01lZGlhRGV2aWNlSW5mb10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlSW5mbykgZm9yIG1vcmUgaW5mby5cbiAgICAgKi9cbiAgICBjYW1lcmFzOiBjYW1EZXZpY2VzLFxuICAgIC8qKlxuICAgICAqIFRoZSBnZW5lcmFsIHN0YXRlIGZvciBjYW1lcmEgYWNjZXNzLlxuICAgICAqL1xuICAgIGNhbVN0YXRlOiBjYW1TdGF0ZSxcbiAgICAvKipcbiAgICAgKiBIb2xkcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNhbWVyYS5cbiAgICAgKi9cbiAgICBjdXJyZW50Q2FtOiBjYW1EZXZpY2VzLmZpbmQoZnVuY3Rpb24gKGNhbSkge1xuICAgICAgcmV0dXJuIGNhbS5zZWxlY3RlZDtcbiAgICB9KSxcbiAgICAvKipcbiAgICAgKiBIb2xkcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG1pY3JvcGhvbmUuXG4gICAgICovXG4gICAgY3VycmVudE1pYzogbWljRGV2aWNlcy5maW5kKGZ1bmN0aW9uIChtaWMpIHtcbiAgICAgIHJldHVybiBtaWMuc2VsZWN0ZWQ7XG4gICAgfSksXG4gICAgLyoqXG4gICAgICogSG9sZHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBzcGVha2VyLlxuICAgICAqL1xuICAgIGN1cnJlbnRTcGVha2VyOiBzcGVha2VyRGV2aWNlcy5maW5kKGZ1bmN0aW9uIChzcGVha2VyKSB7XG4gICAgICByZXR1cm4gc3BlYWtlci5zZWxlY3RlZDtcbiAgICB9KSxcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGVyZSdzIGFuIGlzc3VlIHdpdGggY2FtZXJhIGRldmljZXMuXG4gICAgICovXG4gICAgaGFzQ2FtRXJyb3I6IGVycm9yU3RhdGVzLmluY2x1ZGVzKGNhbVN0YXRlKSxcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGVyZSdzIGFuIGlzc3VlIHdpdGggbWljcm9waG9uZSBkZXZpY2VzLlxuICAgICAqL1xuICAgIGhhc01pY0Vycm9yOiBlcnJvclN0YXRlcy5pbmNsdWRlcyhtaWNTdGF0ZSksXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIHRoZSB1c2VyJ3MgbWljcm9waG9uZSAoYXVkaW9pbnB1dCkgZGV2aWNlcy4gU2VlIFtNZWRpYURldmljZUluZm9dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYURldmljZUluZm8pIGZvciBtb3JlIGluZm8uXG4gICAgICovXG4gICAgbWljcm9waG9uZXM6IG1pY0RldmljZXMsXG4gICAgLyoqXG4gICAgICogVGhlIGdlbmVyYWwgc3RhdGUgZm9yIG1pY3JvcGhvbmUgYWNjZXNzLlxuICAgICAqL1xuICAgIG1pY1N0YXRlOiBtaWNTdGF0ZSxcbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIGxpc3Qgb2YgZGV2aWNlcyB1c2luZyBbZW51bWVyYXRlRGV2aWNlc10oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL2VudW1lcmF0ZS1kZXZpY2VzKS5cbiAgICAgKi9cbiAgICByZWZyZXNoRGV2aWNlczogcmVmcmVzaERldmljZXMsXG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIHN3aXRjaCB0byB0aGUgY2FtZXJhIHdpdGggdGhlIHNwZWNpZmllZCBkZXZpY2VJZC4gQ2FsbHMgW3NldElucHV0RGV2aWNlc0FzeW5jXShodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvc2V0LWlucHV0LWRldmljZXMtYXN5bmMpIGludGVybmFsbHkuXG4gICAgICovXG4gICAgc2V0Q2FtZXJhOiBzZXRDYW1lcmEsXG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIHN3aXRjaCB0byB0aGUgbWljcm9waG9uZSB3aXRoIHRoZSBzcGVjaWZpZWQgZGV2aWNlSWQuIENhbGxzIFtzZXRJbnB1dERldmljZXNBc3luY10oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3NldC1pbnB1dC1kZXZpY2VzLWFzeW5jKSBpbnRlcm5hbGx5LlxuICAgICAqL1xuICAgIHNldE1pY3JvcGhvbmU6IHNldE1pY3JvcGhvbmUsXG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIHN3aXRjaCB0byB0aGUgc3BlYWtlciB3aXRoIHRoZSBzcGVjaWZpZWQgZGV2aWNlSWQuIENhbGxzIFtzZXRPdXRwdXREZXZpY2VdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvaW5zdGFuY2UtbWV0aG9kcy9zZXQtb3V0cHV0LWRldmljZSkgaW50ZXJuYWxseS5cbiAgICAgKi9cbiAgICBzZXRTcGVha2VyOiBzZXRTcGVha2VyLFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiB0aGUgdXNlcidzIHNwZWFrZXIgKGF1ZGlvb3V0cHV0KSBkZXZpY2VzLiBTZWUgW01lZGlhRGV2aWNlSW5mb10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlSW5mbykgZm9yIG1vcmUgaW5mby5cbiAgICAgKi9cbiAgICBzcGVha2Vyczogc3BlYWtlckRldmljZXNcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIGlucHV0U2V0dGluZ3NTdGF0ZSA9IGF0b20obnVsbCk7XG5pbnB1dFNldHRpbmdzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnaW5wdXQtc2V0dGluZ3MnKTtcbnZhciB1c2VJbnB1dFNldHRpbmdzID0gZnVuY3Rpb24gdXNlSW5wdXRTZXR0aW5ncyhfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBvbkVycm9yID0gX2Iub25FcnJvcixcbiAgICBvbklucHV0U2V0dGluZ3NVcGRhdGVkID0gX2Iub25JbnB1dFNldHRpbmdzVXBkYXRlZDtcbiAgdmFyIGlucHV0U2V0dGluZ3MgPSB1c2VBdG9tVmFsdWUoaW5wdXRTZXR0aW5nc1N0YXRlKTtcbiAgdmFyIG5vbkZhdGFsRXJyb3IgPSB1c2VEYWlseUVycm9yKCkubm9uRmF0YWxFcnJvcjtcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIHVwZGF0ZUlucHV0U2V0dGluZ3NTdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCBpbnB1dFNldHRpbmdzKSB7XG4gICAgc2V0KGlucHV0U2V0dGluZ3NTdGF0ZSwgaW5wdXRTZXR0aW5ncyk7XG4gIH0sIFtdKSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIGRhaWx5LmdldElucHV0U2V0dGluZ3MoKS50aGVuKHVwZGF0ZUlucHV0U2V0dGluZ3NTdGF0ZSk7XG4gIH0sIFtkYWlseSwgdXBkYXRlSW5wdXRTZXR0aW5nc1N0YXRlXSk7XG4gIC8qKlxuICAgKiBIYW5kbGUgJ2lucHV0LXNldHRpbmdzLXVwZGF0ZWQnIGV2ZW50cy5cbiAgICovXG4gIHVzZURhaWx5RXZlbnQoJ2lucHV0LXNldHRpbmdzLXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICB1cGRhdGVJbnB1dFNldHRpbmdzU3RhdGUoZXYuaW5wdXRTZXR0aW5ncyk7XG4gICAgb25JbnB1dFNldHRpbmdzVXBkYXRlZCA9PT0gbnVsbCB8fCBvbklucHV0U2V0dGluZ3NVcGRhdGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbklucHV0U2V0dGluZ3NVcGRhdGVkKGV2KTtcbiAgfSwgW29uSW5wdXRTZXR0aW5nc1VwZGF0ZWQsIHVwZGF0ZUlucHV0U2V0dGluZ3NTdGF0ZV0pKTtcbiAgLyoqXG4gICAqIEhhbmRsZSBub25mYXRhbCBlcnJvcnMgb2YgdHlwZSAnaW5wdXQtc2V0dGluZ3MtZXJyb3InLlxuICAgKi9cbiAgdXNlRGFpbHlFdmVudCgnbm9uZmF0YWwtZXJyb3InLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBpZiAoZXYudHlwZSAhPT0gJ2lucHV0LXNldHRpbmdzLWVycm9yJykgcmV0dXJuO1xuICAgIG9uRXJyb3IgPT09IG51bGwgfHwgb25FcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25FcnJvcihldik7XG4gIH0sIFtvbkVycm9yXSkpO1xuICAvKipcbiAgICogQ2FsbHMgZGFpbHkudXBkYXRlSW5wdXRTZXR0aW5ncyBpbnRlcm5hbGx5LlxuICAgKi9cbiAgdmFyIHVwZGF0ZUlucHV0U2V0dGluZ3MgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnVwZGF0ZUlucHV0U2V0dGluZ3MuYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZXJyb3JNc2c6IChub25GYXRhbEVycm9yID09PSBudWxsIHx8IG5vbkZhdGFsRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vbkZhdGFsRXJyb3IudHlwZSkgPT09ICdpbnB1dC1zZXR0aW5ncy1lcnJvcicgPyBub25GYXRhbEVycm9yLmVycm9yTXNnIDogbnVsbCxcbiAgICBpbnB1dFNldHRpbmdzOiBpbnB1dFNldHRpbmdzLFxuICAgIHVwZGF0ZUlucHV0U2V0dGluZ3M6IHVwZGF0ZUlucHV0U2V0dGluZ3NcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBUaGlzIGhvb2sgYWxsb3dzIHRvIHNldHVwIFtsaXZlIHN0cmVhbWluZyBldmVudHNdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL2xpdmUtc3RyZWFtaW5nLWV2ZW50cyksXG4gKiBhcyB3ZWxsIGFzIHN0YXJ0aW5nLCBzdG9wcGluZyBhbmQgdXBkYXRpbmcgbGl2ZSBzdHJlYW1zLlxuICpcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgbGl2ZSBzdHJlYW1pbmcgc3RhdGUsIGluY2wuIHRoZSBjdXJyZW50IGxheW91dCBhbmQgcG90ZW50aWFsIGVycm9yTXNnLlxuICovXG52YXIgdXNlTGl2ZVN0cmVhbWluZyA9IGZ1bmN0aW9uIHVzZUxpdmVTdHJlYW1pbmcoX2EpIHtcbiAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgb25MaXZlU3RyZWFtaW5nRXJyb3IgPSBfYi5vbkxpdmVTdHJlYW1pbmdFcnJvcixcbiAgICBvbkxpdmVTdHJlYW1pbmdTdGFydGVkID0gX2Iub25MaXZlU3RyZWFtaW5nU3RhcnRlZCxcbiAgICBvbkxpdmVTdHJlYW1pbmdTdG9wcGVkID0gX2Iub25MaXZlU3RyZWFtaW5nU3RvcHBlZCxcbiAgICBvbkxpdmVTdHJlYW1pbmdVcGRhdGVkID0gX2Iub25MaXZlU3RyZWFtaW5nVXBkYXRlZCxcbiAgICBvbkxpdmVTdHJlYW1pbmdXYXJuaW5nID0gX2Iub25MaXZlU3RyZWFtaW5nV2FybmluZztcbiAgdmFyIGRhaWx5ID0gdXNlRGFpbHkoKTtcbiAgdmFyIHN0YXRlID0gdXNlQXRvbVZhbHVlKGxpdmVTdHJlYW1pbmdTdGF0ZSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xpdmUtc3RyZWFtaW5nLXN0YXJ0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbkxpdmVTdHJlYW1pbmdTdGFydGVkID09PSBudWxsIHx8IG9uTGl2ZVN0cmVhbWluZ1N0YXJ0ZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1N0YXJ0ZWQoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nU3RhcnRlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbGl2ZS1zdHJlYW1pbmctc3RvcHBlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTGl2ZVN0cmVhbWluZ1N0b3BwZWQgPT09IG51bGwgfHwgb25MaXZlU3RyZWFtaW5nU3RvcHBlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25MaXZlU3RyZWFtaW5nU3RvcHBlZChldik7XG4gIH0sIFtvbkxpdmVTdHJlYW1pbmdTdG9wcGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCdsaXZlLXN0cmVhbWluZy11cGRhdGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25MaXZlU3RyZWFtaW5nVXBkYXRlZCA9PT0gbnVsbCB8fCBvbkxpdmVTdHJlYW1pbmdVcGRhdGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkxpdmVTdHJlYW1pbmdVcGRhdGVkKGV2KTtcbiAgfSwgW29uTGl2ZVN0cmVhbWluZ1VwZGF0ZWRdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ2xpdmUtc3RyZWFtaW5nLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25MaXZlU3RyZWFtaW5nRXJyb3IgPT09IG51bGwgfHwgb25MaXZlU3RyZWFtaW5nRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ0Vycm9yKGV2KTtcbiAgfSwgW29uTGl2ZVN0cmVhbWluZ0Vycm9yXSkpO1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChldi50eXBlICE9PSAnbGl2ZS1zdHJlYW1pbmctd2FybmluZycpIHJldHVybjtcbiAgICBvbkxpdmVTdHJlYW1pbmdXYXJuaW5nID09PSBudWxsIHx8IG9uTGl2ZVN0cmVhbWluZ1dhcm5pbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTGl2ZVN0cmVhbWluZ1dhcm5pbmcoZXYpO1xuICB9LCBbb25MaXZlU3RyZWFtaW5nV2FybmluZ10pKTtcbiAgdmFyIHN0YXJ0TGl2ZVN0cmVhbWluZyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zdGFydExpdmVTdHJlYW1pbmcuYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciBzdG9wTGl2ZVN0cmVhbWluZyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zdG9wTGl2ZVN0cmVhbWluZy5hcHBseShkYWlseSwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHVwZGF0ZUxpdmVTdHJlYW1pbmcgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkudXBkYXRlTGl2ZVN0cmVhbWluZy5hcHBseShkYWlseSwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHJlc3VsdCA9IF9hc3NpZ24oX2Fzc2lnbih7fSwgc3RhdGUpLCB7XG4gICAgc3RhcnRMaXZlU3RyZWFtaW5nOiBzdGFydExpdmVTdHJlYW1pbmcsXG4gICAgc3RvcExpdmVTdHJlYW1pbmc6IHN0b3BMaXZlU3RyZWFtaW5nLFxuICAgIHVwZGF0ZUxpdmVTdHJlYW1pbmc6IHVwZGF0ZUxpdmVTdHJlYW1pbmdcbiAgfSk7XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgW3BhcnRpY2lwYW50cygpIG9iamVjdF0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1qcy9pbnN0YW5jZS1tZXRob2RzL3BhcnRpY2lwYW50cykgZm9yIHRoZSBsb2NhbCB1c2VyLlxuICogQGRlcHJlY2F0ZWQgVXNlIFt1c2VMb2NhbFNlc3Npb25JZF0oaHR0cHM6Ly9kb2NzLmRhaWx5LmNvL3JlZmVyZW5jZS9kYWlseS1yZWFjdC91c2UtbG9jYWwtc2Vzc2lvbi1pZCkgaW5zdGVhZC5cbiAqL1xudmFyIHVzZUxvY2FsUGFydGljaXBhbnQgPSBmdW5jdGlvbiB1c2VMb2NhbFBhcnRpY2lwYW50KCkge1xuICB2YXIgbG9jYWxJZCA9IHVzZUF0b21WYWx1ZShsb2NhbElkU3RhdGUpO1xuICB2YXIgbG9jYWxQYXJ0aWNpcGFudCA9IHVzZVBhcnRpY2lwYW50KGxvY2FsSWQpO1xuICB1c2VEZWJ1Z1ZhbHVlKGxvY2FsUGFydGljaXBhbnQpO1xuICByZXR1cm4gbG9jYWxQYXJ0aWNpcGFudDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIG1lZXRpbmcncyBjdXJyZW50IHNlc3Npb24gZGF0YSBhbmQgdG9wb2xvZ3kuXG4gKi9cbnZhciB1c2VNZWV0aW5nU2Vzc2lvblN0YXRlID0gZnVuY3Rpb24gdXNlTWVldGluZ1Nlc3Npb25TdGF0ZShfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBvbkVycm9yID0gX2Iub25FcnJvcjtcbiAgdmFyIG1lZXRpbmdTZXNzaW9uU3RhdGUgPSB1c2VBdG9tVmFsdWUobWVldGluZ1Nlc3Npb25EYXRhU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdub25mYXRhbC1lcnJvcicsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIGlmIChldi50eXBlICE9PSAnbWVldGluZy1zZXNzaW9uLWRhdGEtZXJyb3InKSByZXR1cm47XG4gICAgb25FcnJvciA9PT0gbnVsbCB8fCBvbkVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkVycm9yKGV2KTtcbiAgfSwgW29uRXJyb3JdKSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZGF0YTogbWVldGluZ1Nlc3Npb25TdGF0ZSA9PT0gbnVsbCB8fCBtZWV0aW5nU2Vzc2lvblN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZWV0aW5nU2Vzc2lvblN0YXRlLmRhdGEsXG4gICAgdG9wb2xvZ3k6IG1lZXRpbmdTZXNzaW9uU3RhdGUgPT09IG51bGwgfHwgbWVldGluZ1Nlc3Npb25TdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWVldGluZ1Nlc3Npb25TdGF0ZS50b3BvbG9neVxuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgY3VycmVudCBpbmZvcm1hdGlvbiBhYm91dCBuZXR3b3JrIHF1YWxpdHkgYW5kIHRvcG9sb2d5LlxuICogQWxsb3dzIHRvIHNldHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgZGFpbHkncyBbbmV0d29yayBldmVudHNdKGh0dHBzOi8vZG9jcy5kYWlseS5jby9yZWZlcmVuY2UvZGFpbHktanMvZXZlbnRzL25ldHdvcmstZXZlbnRzKS5cbiAqL1xudmFyIHVzZU5ldHdvcmsgPSBmdW5jdGlvbiB1c2VOZXR3b3JrKF9hKSB7XG4gIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uTmV0d29ya0Nvbm5lY3Rpb24gPSBfYi5vbk5ldHdvcmtDb25uZWN0aW9uLFxuICAgIG9uTmV0d29ya1F1YWxpdHlDaGFuZ2UgPSBfYi5vbk5ldHdvcmtRdWFsaXR5Q2hhbmdlO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgdG9wb2xvZ3kgPSB1c2VBdG9tVmFsdWUodG9wb2xvZ3lTdGF0ZSk7XG4gIHZhciBuZXR3b3JrU3RhdGUkMSA9IHVzZUF0b21WYWx1ZShuZXR3b3JrU3RhdGUpO1xuICB2YXIgbmV0d29ya1N0YXRlUmVhc29ucyQxID0gdXNlQXRvbVZhbHVlKG5ldHdvcmtTdGF0ZVJlYXNvbnMpO1xuICB2YXIgcXVhbGl0eSA9IHVzZUF0b21WYWx1ZShuZXR3b3JrUXVhbGl0eVN0YXRlKTtcbiAgdmFyIHRocmVzaG9sZCA9IHVzZUF0b21WYWx1ZShuZXR3b3JrVGhyZXNob2xkU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCduZXR3b3JrLWNvbm5lY3Rpb24nLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbk5ldHdvcmtDb25uZWN0aW9uID09PSBudWxsIHx8IG9uTmV0d29ya0Nvbm5lY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTmV0d29ya0Nvbm5lY3Rpb24oZXYpO1xuICB9LCBbb25OZXR3b3JrQ29ubmVjdGlvbl0pKTtcbiAgdXNlRGFpbHlFdmVudCgnbmV0d29yay1xdWFsaXR5LWNoYW5nZScsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uTmV0d29ya1F1YWxpdHlDaGFuZ2UgPT09IG51bGwgfHwgb25OZXR3b3JrUXVhbGl0eUNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25OZXR3b3JrUXVhbGl0eUNoYW5nZShldik7XG4gIH0sIFtvbk5ldHdvcmtRdWFsaXR5Q2hhbmdlXSkpO1xuICB2YXIgZ2V0U3RhdHMgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmV3U3RhdHM7XG4gICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYWlseSA9PT0gbnVsbCB8fCBkYWlseSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGFpbHkuZ2V0TmV0d29ya1N0YXRzKCldO1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIG5ld1N0YXRzID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ld1N0YXRzID09PSBudWxsIHx8IG5ld1N0YXRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuZXdTdGF0cy5zdGF0c107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbZGFpbHldKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBnZXRTdGF0czogZ2V0U3RhdHMsXG4gICAgbmV0d29ya1N0YXRlOiBuZXR3b3JrU3RhdGUkMSxcbiAgICBuZXR3b3JrU3RhdGVSZWFzb25zOiBuZXR3b3JrU3RhdGVSZWFzb25zJDEsXG4gICAgcXVhbGl0eTogcXVhbGl0eSxcbiAgICB0aHJlc2hvbGQ6IHRocmVzaG9sZCxcbiAgICB0b3BvbG9neTogdG9wb2xvZ3lcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxudmFyIHBhcnRpY2lwYW50Q291bnRzU3RhdGUgPSBhdG9tKHtcbiAgaGlkZGVuOiAwLFxuICBwcmVzZW50OiAwXG59KTtcbnBhcnRpY2lwYW50Q291bnRzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgncGFydGljaXBhbnQtY291bnRzJyk7XG4vKipcbiAqIFJldHVybnMgcGFydGljaXBhbnQgY291bnRzIGZvciBoaWRkZW4gYW5kIHByZXNlbnQgcGFydGljaXBhbnRzLlxuICovXG52YXIgdXNlUGFydGljaXBhbnRDb3VudHMgPSBmdW5jdGlvbiB1c2VQYXJ0aWNpcGFudENvdW50cyhfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZCA9IF9iLm9uUGFydGljaXBhbnRDb3VudHNVcGRhdGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgcGFydGljaXBhbnRDb3VudHMgPSB1c2VBdG9tVmFsdWUocGFydGljaXBhbnRDb3VudHNTdGF0ZSk7XG4gIHZhciB1cGRhdGVDb3VudHMgPSB1c2VBdG9tQ2FsbGJhY2sodXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9nZXQsIHNldCwgY291bnRzKSB7XG4gICAgc2V0KHBhcnRpY2lwYW50Q291bnRzU3RhdGUsIGNvdW50cyk7XG4gIH0sIFtdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3BhcnRpY2lwYW50LWNvdW50cy11cGRhdGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgdXBkYXRlQ291bnRzKGV2LnBhcnRpY2lwYW50Q291bnRzKTtcbiAgICBvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZCA9PT0gbnVsbCB8fCBvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWQoZXYpO1xuICB9LCBbb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWQsIHVwZGF0ZUNvdW50c10pKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5IHx8IGRhaWx5LmlzRGVzdHJveWVkKCkpIHJldHVybjtcbiAgICB1cGRhdGVDb3VudHMoZGFpbHkucGFydGljaXBhbnRDb3VudHMoKSk7XG4gIH0sIFtkYWlseSwgdXBkYXRlQ291bnRzXSk7XG4gIHVzZURlYnVnVmFsdWUocGFydGljaXBhbnRDb3VudHMpO1xuICByZXR1cm4gcGFydGljaXBhbnRDb3VudHM7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcGFyc2VkIHBlcm1pc3Npb25zIGZvciBhIGdpdmVuIHBhcnRpY2lwYW50LlxuICogSW4gY2FzZSBubyBgc2Vzc2lvbklkYCBpcyBwYXNzZWQsIHRoZSBob29rIHJldHVybnMgcGVybWlzc2lvbnMgZm9yIHRoZSBsb2NhbCBwYXJ0aWNpcGFudC5cbiAqIEBwYXJhbSBzZXNzaW9uSWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZCAob3B0aW9uYWwpXG4gKi9cbnZhciB1c2VQZXJtaXNzaW9ucyA9IGZ1bmN0aW9uIHVzZVBlcm1pc3Npb25zKHNlc3Npb25JZCkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfajtcbiAgdmFyIGxvY2FsU2Vzc2lvbklkID0gdXNlTG9jYWxTZXNzaW9uSWQoKTtcbiAgdmFyIHBlcm1pc3Npb25zID0gdXNlUGFydGljaXBhbnRQcm9wZXJ0eShzZXNzaW9uSWQgIT09IG51bGwgJiYgc2Vzc2lvbklkICE9PSB2b2lkIDAgPyBzZXNzaW9uSWQgOiBsb2NhbFNlc3Npb25JZCwgJ3Blcm1pc3Npb25zJyk7XG4gIHZhciBjYW5TZW5kQXVkaW8gPSB0eXBlb2YgKHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQgOiBCb29sZWFuKChfYSA9IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGFzKCdhdWRpbycpKTtcbiAgdmFyIGNhblNlbmRWaWRlbyA9IHR5cGVvZiAocGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQpID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCA6IEJvb2xlYW4oKF9iID0gcGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oYXMoJ3ZpZGVvJykpO1xuICB2YXIgY2FuU2VuZEN1c3RvbUF1ZGlvID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kIDogQm9vbGVhbigoX2MgPSBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmhhcygnY3VzdG9tQXVkaW8nKSk7XG4gIHZhciBjYW5TZW5kQ3VzdG9tVmlkZW8gPSB0eXBlb2YgKHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQgOiBCb29sZWFuKChfZCA9IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuaGFzKCdjdXN0b21WaWRlbycpKTtcbiAgdmFyIGNhblNlbmRTY3JlZW5BdWRpbyA9IHR5cGVvZiAocGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQpID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCA6IEJvb2xlYW4oKF9lID0gcGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhblNlbmQpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5oYXMoJ3NjcmVlbkF1ZGlvJykpO1xuICB2YXIgY2FuU2VuZFNjcmVlblZpZGVvID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09ICdib29sZWFuJyA/IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5TZW5kIDogQm9vbGVhbigoX2YgPSBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuU2VuZCkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmhhcygnc2NyZWVuVmlkZW8nKSk7XG4gIHZhciBjYW5BZG1pblBhcnRpY2lwYW50cyA9IHR5cGVvZiAocGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhbkFkbWluKSA9PT0gJ2Jvb2xlYW4nID8gcGVybWlzc2lvbnMgPT09IG51bGwgfHwgcGVybWlzc2lvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBlcm1pc3Npb25zLmNhbkFkbWluIDogQm9vbGVhbigoX2cgPSBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4pID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5oYXMoJ3BhcnRpY2lwYW50cycpKTtcbiAgdmFyIGNhbkFkbWluU3RyZWFtaW5nID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4pID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4gOiBCb29sZWFuKChfaCA9IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5BZG1pbikgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLmhhcygnc3RyZWFtaW5nJykpO1xuICB2YXIgY2FuQWRtaW5UcmFuc2NyaXB0aW9uID0gdHlwZW9mIChwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4pID09PSAnYm9vbGVhbicgPyBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuY2FuQWRtaW4gOiBCb29sZWFuKChfaiA9IHBlcm1pc3Npb25zID09PSBudWxsIHx8IHBlcm1pc3Npb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9ucy5jYW5BZG1pbikgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLmhhcygndHJhbnNjcmlwdGlvbicpKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBjYW5BZG1pblBhcnRpY2lwYW50czogY2FuQWRtaW5QYXJ0aWNpcGFudHMsXG4gICAgY2FuQWRtaW5TdHJlYW1pbmc6IGNhbkFkbWluU3RyZWFtaW5nLFxuICAgIGNhbkFkbWluVHJhbnNjcmlwdGlvbjogY2FuQWRtaW5UcmFuc2NyaXB0aW9uLFxuICAgIGNhblNlbmRBdWRpbzogY2FuU2VuZEF1ZGlvLFxuICAgIGNhblNlbmRDdXN0b21BdWRpbzogY2FuU2VuZEN1c3RvbUF1ZGlvLFxuICAgIGNhblNlbmRDdXN0b21WaWRlbzogY2FuU2VuZEN1c3RvbVZpZGVvLFxuICAgIGNhblNlbmRTY3JlZW5BdWRpbzogY2FuU2VuZFNjcmVlbkF1ZGlvLFxuICAgIGNhblNlbmRTY3JlZW5WaWRlbzogY2FuU2VuZFNjcmVlblZpZGVvLFxuICAgIGNhblNlbmRWaWRlbzogY2FuU2VuZFZpZGVvLFxuICAgIGhhc1ByZXNlbmNlOiBwZXJtaXNzaW9ucyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGVybWlzc2lvbnMuaGFzUHJlc2VuY2UsXG4gICAgcGVybWlzc2lvbnM6IHBlcm1pc3Npb25zXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlID0gYXRvbUZhbWlseShmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIHBhcnRpY2lwYW50UmVjZWl2ZVNldHRpbmdzQXRvbSA9IGF0b20oe30sIGZ1bmN0aW9uIChfZ2V0LCBzZXQsIG5ld1ZhbHVlKSB7XG4gICAgc2V0KHBhcnRpY2lwYW50UmVjZWl2ZVNldHRpbmdzU3RhdGUoaWQpLCBuZXdWYWx1ZSk7XG4gIH0pO1xuICBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc0F0b20uZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbChcInBhcnRpY2lwYW50LXJlY2VpdmUtc2V0dGluZ3MtXCIuY29uY2F0KGlkKSk7XG4gIHJldHVybiBwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc0F0b207XG59KTtcbi8qKlxuICogQWxsb3dzIHRvIHJlYWQgYW5kIHNldCByZWNlaXZlU2V0dGluZ3MuXG4gKiBJbiBjYXNlIHJlY2VpdmVTZXR0aW5ncyBmb3IgcGFydGljaXBhbnQgc3BlY2lmaWVkIGJ5IGlkIGFyZSBlbXB0eSwgbm90IHNldCBvciAnaW5oZXJpdCcsXG4gKiBiYXNlIHJlY2VpdmVTZXR0aW5ncyB3aWxsIGJlIHJldHVybmVkLlxuICogSW4gY2FzZSBtZWV0aW5nIGlzIG5vdCBpbiBqb2luZWQgc3RhdGUsIGNhbGxzIHRvIHVwZGF0ZVJlY2VpdmVTZXR0aW5ncyB3aWxsIGJlIHNpbGVudGx5IGlnbm9yZWQuXG4gKi9cbnZhciB1c2VSZWNlaXZlU2V0dGluZ3MgPSBmdW5jdGlvbiB1c2VSZWNlaXZlU2V0dGluZ3MoX2EpIHtcbiAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsXG4gICAgX2MgPSBfYi5pZCxcbiAgICBpZCA9IF9jID09PSB2b2lkIDAgPyAnYmFzZScgOiBfYyxcbiAgICBvblJlY2VpdmVTZXR0aW5nc1VwZGF0ZWQgPSBfYi5vblJlY2VpdmVTZXR0aW5nc1VwZGF0ZWQ7XG4gIHZhciBfZCA9IF9fcmVhZCh1c2VBdG9tKHBhcnRpY2lwYW50UmVjZWl2ZVNldHRpbmdzU3RhdGUoJ2Jhc2UnKSksIDEpLFxuICAgIGJhc2VTZXR0aW5ncyA9IF9kWzBdO1xuICB2YXIgX2UgPSBfX3JlYWQodXNlQXRvbShwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlKGlkKSksIDEpLFxuICAgIHJlY2VpdmVTZXR0aW5ncyA9IF9lWzBdO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgbWVldGluZ1N0YXRlID0gdXNlTWVldGluZ1N0YXRlKCk7XG4gIHZhciB1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZSA9IHVzZUF0b21DYWxsYmFjayh1c2VDYWxsYmFjayhmdW5jdGlvbiAoX2dldCwgc2V0LCByZWNlaXZlU2V0dGluZ3MpIHtcbiAgICB2YXIgZV8xLCBfYTtcbiAgICB2YXIgaWRzID0gX19yZXN0KHJlY2VpdmVTZXR0aW5ncywgW10pO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKE9iamVjdC5lbnRyaWVzKGlkcykpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XG4gICAgICAgIHZhciBfZCA9IF9fcmVhZChfYy52YWx1ZSwgMiksXG4gICAgICAgICAgaWRfMSA9IF9kWzBdLFxuICAgICAgICAgIHNldHRpbmdzID0gX2RbMV07XG4gICAgICAgIHNldChwYXJ0aWNpcGFudFJlY2VpdmVTZXR0aW5nc1N0YXRlKGlkXzEpLCBzZXR0aW5ncyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZV8xXzEpIHtcbiAgICAgIGVfMSA9IHtcbiAgICAgICAgZXJyb3I6IGVfMV8xXG4gICAgICB9O1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2JbXCJyZXR1cm5cIl0pKSBfYS5jYWxsKF9iKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEoaWQgaW4gaWRzKSkge1xuICAgICAgcGFydGljaXBhbnRSZWNlaXZlU2V0dGluZ3NTdGF0ZS5yZW1vdmUoaWQpO1xuICAgIH1cbiAgfSwgW2lkXSAvLyBEZXBlbmRlbmNpZXNcbiAgKSk7XG5cbiAgdXNlRGFpbHlFdmVudCgncmVjZWl2ZS1zZXR0aW5ncy11cGRhdGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgdXBkYXRlUmVjZWl2ZVNldHRpbmdzU3RhdGUoZXYucmVjZWl2ZVNldHRpbmdzKTtcbiAgICBvblJlY2VpdmVTZXR0aW5nc1VwZGF0ZWQgPT09IG51bGwgfHwgb25SZWNlaXZlU2V0dGluZ3NVcGRhdGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblJlY2VpdmVTZXR0aW5nc1VwZGF0ZWQoZXYpO1xuICB9LCBbb25SZWNlaXZlU2V0dGluZ3NVcGRhdGVkLCB1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZV0pKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRhaWx5IHx8IGRhaWx5LmlzRGVzdHJveWVkKCkpIHJldHVybjtcbiAgICBkYWlseS5nZXRSZWNlaXZlU2V0dGluZ3MoKS50aGVuKHVwZGF0ZVJlY2VpdmVTZXR0aW5nc1N0YXRlKTtcbiAgfSwgW2RhaWx5LCB1cGRhdGVSZWNlaXZlU2V0dGluZ3NTdGF0ZV0pO1xuICB2YXIgdXBkYXRlUmVjZWl2ZVNldHRpbmdzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICghZGFpbHkgfHwgbWVldGluZ1N0YXRlICE9PSAnam9pbmVkLW1lZXRpbmcnKSByZXR1cm47XG4gICAgKF9hID0gZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnVwZGF0ZVJlY2VpdmVTZXR0aW5ncykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwuYXBwbHkoX2EsIF9fc3ByZWFkQXJyYXkoW2RhaWx5XSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpO1xuICB9LCBbZGFpbHksIG1lZXRpbmdTdGF0ZV0pO1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIHJlY2VpdmVTZXR0aW5nczogaWQgPT09ICdiYXNlJyB8fCBPYmplY3Qua2V5cyhyZWNlaXZlU2V0dGluZ3MpLmxlbmd0aCA9PT0gMCA/IGJhc2VTZXR0aW5ncyA6IHJlY2VpdmVTZXR0aW5ncyxcbiAgICB1cGRhdGVSZWNlaXZlU2V0dGluZ3M6IHVwZGF0ZVJlY2VpdmVTZXR0aW5nc1xuICB9O1xuICB1c2VEZWJ1Z1ZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG52YXIgdXNlUmVjb3JkaW5nID0gZnVuY3Rpb24gdXNlUmVjb3JkaW5nKF9hKSB7XG4gIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uUmVjb3JkaW5nRGF0YSA9IF9iLm9uUmVjb3JkaW5nRGF0YSxcbiAgICBvblJlY29yZGluZ0Vycm9yID0gX2Iub25SZWNvcmRpbmdFcnJvcixcbiAgICBvblJlY29yZGluZ1N0YXJ0ZWQgPSBfYi5vblJlY29yZGluZ1N0YXJ0ZWQsXG4gICAgb25SZWNvcmRpbmdTdG9wcGVkID0gX2Iub25SZWNvcmRpbmdTdG9wcGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc3RhdGUgPSB1c2VBdG9tVmFsdWUocmVjb3JkaW5nU3RhdGUpO1xuICB1c2VEYWlseUV2ZW50KCdyZWNvcmRpbmctc3RhcnRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uUmVjb3JkaW5nU3RhcnRlZCA9PT0gbnVsbCB8fCBvblJlY29yZGluZ1N0YXJ0ZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uUmVjb3JkaW5nU3RhcnRlZChldik7XG4gIH0sIFtvblJlY29yZGluZ1N0YXJ0ZWRdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1zdG9wcGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25SZWNvcmRpbmdTdG9wcGVkID09PSBudWxsIHx8IG9uUmVjb3JkaW5nU3RvcHBlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZWNvcmRpbmdTdG9wcGVkKGV2KTtcbiAgfSwgW29uUmVjb3JkaW5nU3RvcHBlZF0pKTtcbiAgdXNlRGFpbHlFdmVudCgncmVjb3JkaW5nLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25SZWNvcmRpbmdFcnJvciA9PT0gbnVsbCB8fCBvblJlY29yZGluZ0Vycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblJlY29yZGluZ0Vycm9yKGV2KTtcbiAgfSwgW29uUmVjb3JkaW5nRXJyb3JdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3JlY29yZGluZy1kYXRhJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25SZWNvcmRpbmdEYXRhID09PSBudWxsIHx8IG9uUmVjb3JkaW5nRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25SZWNvcmRpbmdEYXRhKGV2KTtcbiAgfSwgW29uUmVjb3JkaW5nRGF0YV0pKTtcbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcmVjb3JkaW5nIHdpdGggdGhlIGdpdmVuIG9wdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICB2YXIgc3RhcnRSZWNvcmRpbmcgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuc3RhcnRSZWNvcmRpbmcuYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIC8qKlxuICAgKiBTdG9wcyBhIHJlY29yZGluZy5cbiAgICovXG4gIHZhciBzdG9wUmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKCFkYWlseSkgcmV0dXJuO1xuICAgIGRhaWx5LnN0b3BSZWNvcmRpbmcuYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgcnVubmluZyByZWNvcmRpbmcncyBsYXlvdXQgY29uZmlndXJhdGlvbi5cbiAgICovXG4gIHZhciB1cGRhdGVSZWNvcmRpbmcgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkudXBkYXRlUmVjb3JkaW5nLmFwcGx5KGRhaWx5LCBfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgcmVzdWx0ID0gX2Fzc2lnbihfYXNzaWduKHt9LCBzdGF0ZSksIHtcbiAgICBzdGFydFJlY29yZGluZzogc3RhcnRSZWNvcmRpbmcsXG4gICAgc3RvcFJlY29yZGluZzogc3RvcFJlY29yZGluZyxcbiAgICB1cGRhdGVSZWNvcmRpbmc6IHVwZGF0ZVJlY29yZGluZ1xuICB9KTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBTdGF0ZWZ1bCBob29rIHRvIHdvcmsgd2l0aCByb29tLCBkb21haW4gYW5kIHRva2VuIGNvbmZpZ3VyYXRpb24gZm9yIGEgZGFpbHkgcm9vbS5cbiAqIEluY2x1ZGVzIHJvb20gZGVmYXVsdCB2YWx1ZXMuXG4gKi9cbnZhciB1c2VSb29tID0gZnVuY3Rpb24gdXNlUm9vbSgpIHtcbiAgdmFyIHJvb20gPSB1c2VBdG9tVmFsdWUocm9vbVN0YXRlKTtcbiAgdXNlRGVidWdWYWx1ZShyb29tKTtcbiAgcmV0dXJuIHJvb207XG59O1xuXG52YXIgdXNlUm9vbUV4cCA9IGZ1bmN0aW9uIHVzZVJvb21FeHAoX2EpIHtcbiAgdmFyIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gIHZhciBfaCA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uQ291bnRkb3duID0gX2gub25Db3VudGRvd247XG4gIHZhciBsb2NhbEpvaW5EYXRlID0gdXNlQXRvbVZhbHVlKGxvY2FsSm9pbkRhdGVTdGF0ZSk7XG4gIHZhciByb29tID0gdXNlUm9vbSgpO1xuICB2YXIgX2ogPSBfX3JlYWQodXNlU3RhdGUobnVsbCksIDIpLFxuICAgIGVqZWN0RGF0ZSA9IF9qWzBdLFxuICAgIHNldEVqZWN0RGF0ZSA9IF9qWzFdO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgdmFyIGV4cENhbmRpZGF0ZXMgPSBbXTtcbiAgICB2YXIgZWplY3RBZnRlckVsYXBzZWQgPSAoX2QgPSAoX2IgPSAoX2EgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20udG9rZW5Db25maWcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lamVjdF9hZnRlcl9lbGFwc2VkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAoX2MgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20uY29uZmlnKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZWplY3RfYWZ0ZXJfZWxhcHNlZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICBpZiAoZWplY3RBZnRlckVsYXBzZWQgJiYgbG9jYWxKb2luRGF0ZSkge1xuICAgICAgZXhwQ2FuZGlkYXRlcy5wdXNoKGxvY2FsSm9pbkRhdGUuZ2V0VGltZSgpICsgMTAwMCAqIGVqZWN0QWZ0ZXJFbGFwc2VkKTtcbiAgICB9XG4gICAgaWYgKCgoX2UgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20udG9rZW5Db25maWcpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5leHApICYmICgoX2YgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20udG9rZW5Db25maWcpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5lamVjdF9hdF90b2tlbl9leHApKSB7XG4gICAgICBleHBDYW5kaWRhdGVzLnB1c2gocm9vbS50b2tlbkNvbmZpZy5leHAgKiAxMDAwKTtcbiAgICB9XG4gICAgaWYgKCgoX2cgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20uY29uZmlnKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cuZXhwKSAmJiAoKF9oID0gcm9vbSA9PT0gbnVsbCB8fCByb29tID09PSB2b2lkIDAgPyB2b2lkIDAgOiByb29tLmNvbmZpZykgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLmVqZWN0X2F0X3Jvb21fZXhwKSkge1xuICAgICAgZXhwQ2FuZGlkYXRlcy5wdXNoKHJvb20uY29uZmlnLmV4cCAqIDEwMDApO1xuICAgIH1cbiAgICB2YXIgbmV3RWplY3REYXRlID0gZXhwQ2FuZGlkYXRlcy5sZW5ndGggPiAwID8gbmV3IERhdGUoTWF0aC5taW4uYXBwbHkoTWF0aCwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGV4cENhbmRpZGF0ZXMpLCBmYWxzZSkpKSA6IG5ldyBEYXRlKDApO1xuICAgIGlmIChuZXdFamVjdERhdGUuZ2V0VGltZSgpID09PSAwKSByZXR1cm47XG4gICAgc2V0RWplY3REYXRlKGZ1bmN0aW9uIChvbGRFamVjdERhdGUpIHtcbiAgICAgIHJldHVybiAob2xkRWplY3REYXRlID09PSBudWxsIHx8IG9sZEVqZWN0RGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2xkRWplY3REYXRlLmdldFRpbWUoKSkgIT09IG5ld0VqZWN0RGF0ZS5nZXRUaW1lKCkgPyBuZXdFamVjdERhdGUgOiBvbGRFamVjdERhdGU7XG4gICAgfSk7XG4gIH0sIFtsb2NhbEpvaW5EYXRlLCAoX2IgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20uY29uZmlnKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZWplY3RfYWZ0ZXJfZWxhcHNlZCwgKF9jID0gcm9vbSA9PT0gbnVsbCB8fCByb29tID09PSB2b2lkIDAgPyB2b2lkIDAgOiByb29tLmNvbmZpZykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmVqZWN0X2F0X3Jvb21fZXhwLCAoX2QgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20uY29uZmlnKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZXhwLCAoX2UgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20udG9rZW5Db25maWcpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5lamVjdF9hZnRlcl9lbGFwc2VkLCAoX2YgPSByb29tID09PSBudWxsIHx8IHJvb20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJvb20udG9rZW5Db25maWcpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5lamVjdF9hdF90b2tlbl9leHAsIChfZyA9IHJvb20gPT09IG51bGwgfHwgcm9vbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcm9vbS50b2tlbkNvbmZpZykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmV4cF0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghZWplY3REYXRlIHx8IGVqZWN0RGF0ZS5nZXRUaW1lKCkgPT09IDApIHJldHVybjtcbiAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2E7XG4gICAgICB2YXIgZWplY3QgPSAoKF9hID0gZWplY3REYXRlID09PSBudWxsIHx8IGVqZWN0RGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWplY3REYXRlLmdldFRpbWUoKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMCkgLyAxMDAwO1xuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCkgLyAxMDAwO1xuICAgICAgdmFyIGRpZmYgPSBlamVjdCAtIG5vdztcbiAgICAgIGlmIChkaWZmIDwgMCkgcmV0dXJuO1xuICAgICAgdmFyIGhvdXJzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihkaWZmIC8gMzYwMCkpO1xuICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKGRpZmYgJSAzNjAwIC8gNjApKTtcbiAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihkaWZmICUgNjApKTtcbiAgICAgIG9uQ291bnRkb3duID09PSBudWxsIHx8IG9uQ291bnRkb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNvdW50ZG93bih7XG4gICAgICAgIGhvdXJzOiBob3VycyxcbiAgICAgICAgbWludXRlczogbWludXRlcyxcbiAgICAgICAgc2Vjb25kczogc2Vjb25kc1xuICAgICAgfSk7XG4gICAgfSwgMTAwMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtlamVjdERhdGUsIG9uQ291bnRkb3duXSk7XG4gIHZhciByZXN1bHQgPSB7XG4gICAgZWplY3REYXRlOiBlamVjdERhdGVcbiAgfTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcGFydGljaXBhbnQncyBzY3JlZW5BdWRpbyB0cmFjayBhbmQgc3RhdGUuXG4gKiBAcGFyYW0gcGFydGljaXBhbnRJZCBUaGUgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkLlxuICovXG52YXIgdXNlU2NyZWVuQXVkaW9UcmFjayA9IGZ1bmN0aW9uIHVzZVNjcmVlbkF1ZGlvVHJhY2socGFydGljaXBhbnRJZCkge1xuICByZXR1cm4gdXNlTWVkaWFUcmFjayhwYXJ0aWNpcGFudElkLCAnc2NyZWVuQXVkaW8nKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHBhcnRpY2lwYW50J3Mgc2NyZWVuVmlkZW8gdHJhY2sgYW5kIHN0YXRlLlxuICogQHBhcmFtIHBhcnRpY2lwYW50SWQgVGhlIHBhcnRpY2lwYW50J3Mgc2Vzc2lvbl9pZC5cbiAqL1xudmFyIHVzZVNjcmVlblZpZGVvVHJhY2sgPSBmdW5jdGlvbiB1c2VTY3JlZW5WaWRlb1RyYWNrKHBhcnRpY2lwYW50SWQpIHtcbiAgcmV0dXJuIHVzZU1lZGlhVHJhY2socGFydGljaXBhbnRJZCwgJ3NjcmVlblZpZGVvJyk7XG59O1xuXG52YXIgc2VuZFNldHRpbmdzU3RhdGUgPSBhdG9tKG51bGwpO1xuc2VuZFNldHRpbmdzU3RhdGUuZGVidWdMYWJlbCA9IGpvdGFpRGVidWdMYWJlbCgnc2VuZC1zZXR0aW5ncycpO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IG1lZGlhIHNlbmQgc2V0dGluZ3MgYW5kIGFuIHVwZGF0ZXIgZnVuY3Rpb24gdG8gY2hhbmdlIHRoZSBzZXR0aW5ncy5cbiAqL1xudmFyIHVzZVNlbmRTZXR0aW5ncyA9IGZ1bmN0aW9uIHVzZVNlbmRTZXR0aW5ncyhfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBvblNlbmRTZXR0aW5nc1VwZGF0ZWQgPSBfYi5vblNlbmRTZXR0aW5nc1VwZGF0ZWQ7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciBfYyA9IF9fcmVhZCh1c2VBdG9tKHNlbmRTZXR0aW5nc1N0YXRlKSwgMiksXG4gICAgc2VuZFNldHRpbmdzID0gX2NbMF0sXG4gICAgc2V0U2VuZFNldHRpbmdzID0gX2NbMV07XG4gIHVzZURhaWx5RXZlbnQoJ3NlbmQtc2V0dGluZ3MtdXBkYXRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIHNldFNlbmRTZXR0aW5ncyhldi5zZW5kU2V0dGluZ3MpO1xuICAgIG9uU2VuZFNldHRpbmdzVXBkYXRlZCA9PT0gbnVsbCB8fCBvblNlbmRTZXR0aW5nc1VwZGF0ZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uU2VuZFNldHRpbmdzVXBkYXRlZChldik7XG4gIH0sIFtvblNlbmRTZXR0aW5nc1VwZGF0ZWQsIHNldFNlbmRTZXR0aW5nc10pKTtcbiAgdmFyIHN0b3JlU2VuZFNldHRpbmdzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHNlbmRTZXR0aW5ncykge1xuICAgIHNldFNlbmRTZXR0aW5ncyhzZW5kU2V0dGluZ3MpO1xuICB9LCBbc2V0U2VuZFNldHRpbmdzXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkYWlseSB8fCBkYWlseS5pc0Rlc3Ryb3llZCgpKSByZXR1cm47XG4gICAgc3RvcmVTZW5kU2V0dGluZ3MoZGFpbHkuZ2V0U2VuZFNldHRpbmdzKCkpO1xuICB9LCBbZGFpbHksIHN0b3JlU2VuZFNldHRpbmdzXSk7XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBsb2NhbCBjbGllbnRzIHNlbmQgc2V0dGluZ3MuXG4gICAqIFNlZSBodHRwczovL2RvY3MuZGFpbHkuY28vcmVmZXJlbmNlL2RhaWx5LWpzL2luc3RhbmNlLW1ldGhvZHMvdXBkYXRlLXNlbmQtc2V0dGluZ3MgZm9yIGRldGFpbHMuXG4gICAqL1xuICB2YXIgdXBkYXRlU2VuZFNldHRpbmdzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmV3U2VuZFNldHRpbmdzO1xuICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnVwZGF0ZVNlbmRTZXR0aW5ncy5hcHBseShkYWlseSwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpXTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBuZXdTZW5kU2V0dGluZ3MgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICBpZiAoIW5ld1NlbmRTZXR0aW5ncykgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgc3RvcmVTZW5kU2V0dGluZ3MobmV3U2VuZFNldHRpbmdzKTtcbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXdTZW5kU2V0dGluZ3NdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW2RhaWx5LCBzdG9yZVNlbmRTZXR0aW5nc10pO1xuICB2YXIgcmVzdWx0ID0ge1xuICAgIHNlbmRTZXR0aW5nczogc2VuZFNldHRpbmdzLFxuICAgIHVwZGF0ZVNlbmRTZXR0aW5nczogdXBkYXRlU2VuZFNldHRpbmdzXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciB1c2VUcmFuc2NyaXB0aW9uID0gZnVuY3Rpb24gdXNlVHJhbnNjcmlwdGlvbihfYSkge1xuICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSxcbiAgICBvblRyYW5zY3JpcHRpb25BcHBEYXRhID0gX2Iub25UcmFuc2NyaXB0aW9uQXBwRGF0YSxcbiAgICBvblRyYW5zY3JpcHRpb25FcnJvciA9IF9iLm9uVHJhbnNjcmlwdGlvbkVycm9yLFxuICAgIG9uVHJhbnNjcmlwdGlvbk1lc3NhZ2UgPSBfYi5vblRyYW5zY3JpcHRpb25NZXNzYWdlLFxuICAgIG9uVHJhbnNjcmlwdGlvblN0YXJ0ZWQgPSBfYi5vblRyYW5zY3JpcHRpb25TdGFydGVkLFxuICAgIG9uVHJhbnNjcmlwdGlvblN0b3BwZWQgPSBfYi5vblRyYW5zY3JpcHRpb25TdG9wcGVkO1xuICB2YXIgZGFpbHkgPSB1c2VEYWlseSgpO1xuICB2YXIgc3RhdGUgPSB1c2VBdG9tVmFsdWUodHJhbnNjcmlwdGlvblN0YXRlKTtcbiAgdXNlRGFpbHlFdmVudCgndHJhbnNjcmlwdGlvbi1zdGFydGVkJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25UcmFuc2NyaXB0aW9uU3RhcnRlZCA9PT0gbnVsbCB8fCBvblRyYW5zY3JpcHRpb25TdGFydGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblRyYW5zY3JpcHRpb25TdGFydGVkKGV2KTtcbiAgfSwgW29uVHJhbnNjcmlwdGlvblN0YXJ0ZWRdKSk7XG4gIHVzZURhaWx5RXZlbnQoJ3RyYW5zY3JpcHRpb24tc3RvcHBlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uVHJhbnNjcmlwdGlvblN0b3BwZWQgPT09IG51bGwgfHwgb25UcmFuc2NyaXB0aW9uU3RvcHBlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25UcmFuc2NyaXB0aW9uU3RvcHBlZChldik7XG4gIH0sIFtvblRyYW5zY3JpcHRpb25TdG9wcGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCd0cmFuc2NyaXB0aW9uLWVycm9yJywgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2KSB7XG4gICAgb25UcmFuc2NyaXB0aW9uRXJyb3IgPT09IG51bGwgfHwgb25UcmFuc2NyaXB0aW9uRXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uVHJhbnNjcmlwdGlvbkVycm9yKGV2KTtcbiAgfSwgW29uVHJhbnNjcmlwdGlvbkVycm9yXSkpO1xuICB1c2VEYWlseUV2ZW50KCd0cmFuc2NyaXB0aW9uLW1lc3NhZ2UnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvblRyYW5zY3JpcHRpb25NZXNzYWdlID09PSBudWxsIHx8IG9uVHJhbnNjcmlwdGlvbk1lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uVHJhbnNjcmlwdGlvbk1lc3NhZ2UoZXYpO1xuICB9LCBbb25UcmFuc2NyaXB0aW9uTWVzc2FnZV0pKTtcbiAgdXNlRGFpbHlFdmVudCgnYXBwLW1lc3NhZ2UnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBpZiAoKGV2ID09PSBudWxsIHx8IGV2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldi5mcm9tSWQpID09PSAndHJhbnNjcmlwdGlvbicpIHtcbiAgICAgIG9uVHJhbnNjcmlwdGlvbkFwcERhdGEgPT09IG51bGwgfHwgb25UcmFuc2NyaXB0aW9uQXBwRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25UcmFuc2NyaXB0aW9uQXBwRGF0YShldik7XG4gICAgfVxuICB9LCBbb25UcmFuc2NyaXB0aW9uQXBwRGF0YV0pKTtcbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgdHJhbnNjcmlwdGlvbiB3aXRoIHRoZSBnaXZlbiBvcHRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgdmFyIHN0YXJ0VHJhbnNjcmlwdGlvbiA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICghZGFpbHkpIHJldHVybjtcbiAgICBkYWlseS5zdGFydFRyYW5zY3JpcHRpb24uYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIC8qKlxuICAgKiBTdG9wcyBhIHRyYW5zY3JpcHRpb24uXG4gICAqL1xuICB2YXIgc3RvcFRyYW5zY3JpcHRpb24gPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoIWRhaWx5KSByZXR1cm47XG4gICAgZGFpbHkuc3RvcFRyYW5zY3JpcHRpb24uYXBwbHkoZGFpbHksIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcbiAgfSwgW2RhaWx5XSk7XG4gIHZhciByZXN1bHQgPSBfYXNzaWduKF9hc3NpZ24oe30sIHN0YXRlKSwge1xuICAgIHN0YXJ0VHJhbnNjcmlwdGlvbjogc3RhcnRUcmFuc2NyaXB0aW9uLFxuICAgIHN0b3BUcmFuc2NyaXB0aW9uOiBzdG9wVHJhbnNjcmlwdGlvblxuICB9KTtcbiAgdXNlRGVidWdWYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcGFydGljaXBhbnQncyB2aWRlbyB0cmFjayBhbmQgc3RhdGUuXG4gKiBAcGFyYW0gcGFydGljaXBhbnRJZCBUaGUgcGFydGljaXBhbnQncyBzZXNzaW9uX2lkLlxuICovXG52YXIgdXNlVmlkZW9UcmFjayA9IGZ1bmN0aW9uIHVzZVZpZGVvVHJhY2socGFydGljaXBhbnRJZCkge1xuICByZXR1cm4gdXNlTWVkaWFUcmFjayhwYXJ0aWNpcGFudElkLCAndmlkZW8nKTtcbn07XG5cbi8qKlxuICogSG9vayB0byBhY2Nlc3MgYW5kIG1hbmFnZSB3YWl0aW5nIHBhcnRpY2lwYW50cy5cbiAqL1xudmFyIHVzZVdhaXRpbmdQYXJ0aWNpcGFudHMgPSBmdW5jdGlvbiB1c2VXYWl0aW5nUGFydGljaXBhbnRzKF9hKSB7XG4gIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLFxuICAgIG9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQgPSBfYi5vbldhaXRpbmdQYXJ0aWNpcGFudEFkZGVkLFxuICAgIG9uV2FpdGluZ1BhcnRpY2lwYW50UmVtb3ZlZCA9IF9iLm9uV2FpdGluZ1BhcnRpY2lwYW50UmVtb3ZlZCxcbiAgICBvbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQgPSBfYi5vbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQ7XG4gIHZhciBkYWlseSA9IHVzZURhaWx5KCk7XG4gIHZhciB3YWl0aW5nUGFydGljaXBhbnRzID0gdXNlQXRvbVZhbHVlKGFsbFdhaXRpbmdQYXJ0aWNpcGFudHNTZWxlY3Rvcih1bmRlZmluZWQpKTtcbiAgdXNlRGFpbHlFdmVudCgnd2FpdGluZy1wYXJ0aWNpcGFudC1hZGRlZCcsIHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldikge1xuICAgIG9uV2FpdGluZ1BhcnRpY2lwYW50QWRkZWQgPT09IG51bGwgfHwgb25XYWl0aW5nUGFydGljaXBhbnRBZGRlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25XYWl0aW5nUGFydGljaXBhbnRBZGRlZChldik7XG4gIH0sIFtvbldhaXRpbmdQYXJ0aWNpcGFudEFkZGVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCd3YWl0aW5nLXBhcnRpY2lwYW50LXJlbW92ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbldhaXRpbmdQYXJ0aWNpcGFudFJlbW92ZWQgPT09IG51bGwgfHwgb25XYWl0aW5nUGFydGljaXBhbnRSZW1vdmVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbldhaXRpbmdQYXJ0aWNpcGFudFJlbW92ZWQoZXYpO1xuICB9LCBbb25XYWl0aW5nUGFydGljaXBhbnRSZW1vdmVkXSkpO1xuICB1c2VEYWlseUV2ZW50KCd3YWl0aW5nLXBhcnRpY2lwYW50LXVwZGF0ZWQnLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXYpIHtcbiAgICBvbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQgPT09IG51bGwgfHwgb25XYWl0aW5nUGFydGljaXBhbnRVcGRhdGVkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbldhaXRpbmdQYXJ0aWNpcGFudFVwZGF0ZWQoZXYpO1xuICB9LCBbb25XYWl0aW5nUGFydGljaXBhbnRVcGRhdGVkXSkpO1xuICB2YXIgdXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50QWNjZXNzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGlkLCBncmFudFJlcXVlc3RlZEFjY2Vzcykge1xuICAgIGlmIChpZCA9PT0gJyonKSB7XG4gICAgICBkYWlseSA9PT0gbnVsbCB8fCBkYWlseSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGFpbHkudXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50cyh7XG4gICAgICAgICcqJzoge1xuICAgICAgICAgIGdyYW50UmVxdWVzdGVkQWNjZXNzOiBncmFudFJlcXVlc3RlZEFjY2Vzc1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGFpbHkgPT09IG51bGwgfHwgZGFpbHkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhaWx5LnVwZGF0ZVdhaXRpbmdQYXJ0aWNpcGFudChpZCwge1xuICAgICAgZ3JhbnRSZXF1ZXN0ZWRBY2Nlc3M6IGdyYW50UmVxdWVzdGVkQWNjZXNzXG4gICAgfSk7XG4gIH0sIFtkYWlseV0pO1xuICB2YXIgZ3JhbnRBY2Nlc3MgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWQpIHtcbiAgICB1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRBY2Nlc3MoaWQsIHRydWUpO1xuICB9LCBbdXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50QWNjZXNzXSk7XG4gIHZhciBkZW55QWNjZXNzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGlkKSB7XG4gICAgdXBkYXRlV2FpdGluZ1BhcnRpY2lwYW50QWNjZXNzKGlkLCBmYWxzZSk7XG4gIH0sIFt1cGRhdGVXYWl0aW5nUGFydGljaXBhbnRBY2Nlc3NdKTtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICB3YWl0aW5nUGFydGljaXBhbnRzOiB3YWl0aW5nUGFydGljaXBhbnRzLFxuICAgIGdyYW50QWNjZXNzOiBncmFudEFjY2VzcyxcbiAgICBkZW55QWNjZXNzOiBkZW55QWNjZXNzXG4gIH07XG4gIHVzZURlYnVnVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCB7IERhaWx5QXVkaW8sIERhaWx5QXVkaW9UcmFjaywgRGFpbHlQcm92aWRlciwgRGFpbHlWaWRlbywgdXNlQWN0aXZlUGFydGljaXBhbnQsIHVzZUFjdGl2ZVNwZWFrZXJJZCwgdXNlQXBwTWVzc2FnZSwgdXNlQXVkaW9MZXZlbCwgdXNlQXVkaW9MZXZlbE9ic2VydmVyLCB1c2VBdWRpb1RyYWNrLCB1c2VDUFVMb2FkLCB1c2VDYWxsRnJhbWUsIHVzZUNhbGxPYmplY3QsIHVzZURhaWx5LCB1c2VEYWlseUVycm9yLCB1c2VEYWlseUV2ZW50LCB1c2VEZXZpY2VzLCB1c2VJbnB1dFNldHRpbmdzLCB1c2VMaXZlU3RyZWFtaW5nLCB1c2VMb2NhbFBhcnRpY2lwYW50LCB1c2VMb2NhbFNlc3Npb25JZCwgdXNlTWVkaWFUcmFjaywgdXNlTWVldGluZ1Nlc3Npb25TdGF0ZSwgdXNlTWVldGluZ1N0YXRlLCB1c2VOZXR3b3JrLCB1c2VQYXJ0aWNpcGFudCwgdXNlUGFydGljaXBhbnRDb3VudHMsIHVzZVBhcnRpY2lwYW50SWRzLCB1c2VQYXJ0aWNpcGFudFByb3BlcnR5LCB1c2VQZXJtaXNzaW9ucywgdXNlUmVjZWl2ZVNldHRpbmdzLCB1c2VSZWNvcmRpbmcsIHVzZVJvb20sIHVzZVJvb21FeHAsIHVzZVNjcmVlbkF1ZGlvVHJhY2ssIHVzZVNjcmVlblNoYXJlLCB1c2VTY3JlZW5WaWRlb1RyYWNrLCB1c2VTZW5kU2V0dGluZ3MsIHVzZVRocm90dGxlZERhaWx5RXZlbnQsIHVzZVRyYW5zY3JpcHRpb24sIHVzZVZpZGVvVHJhY2ssIHVzZVdhaXRpbmdQYXJ0aWNpcGFudHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@daily-co/daily-react/dist/index.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jotai/esm/react.mjs":
/*!******************************************!*\
  !*** ./node_modules/jotai/esm/react.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Provider: () => (/* binding */ Provider),\n/* harmony export */   useAtom: () => (/* binding */ useAtom),\n/* harmony export */   useAtomValue: () => (/* binding */ useAtomValue),\n/* harmony export */   useSetAtom: () => (/* binding */ useSetAtom),\n/* harmony export */   useStore: () => (/* binding */ useStore)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/vanilla */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs\");\n/* harmony import */ var jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai/vanilla/internals */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla/internals.mjs\");\n/* __next_internal_client_entry_do_not_use__ Provider,useAtom,useAtomValue,useSetAtom,useStore auto */ var _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$(), _s4 = $RefreshSig$();\n\n\n\nconst StoreContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nfunction useStore(options) {\n    _s();\n    const store = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(StoreContext);\n    return (options == null ? void 0 : options.store) || store || (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.getDefaultStore)();\n}\n_s(useStore, \"Wl1jJrZzTCxjtMcqth/dX4wg3Uo=\");\nfunction Provider(param) {\n    let { children, store } = param;\n    _s1();\n    const storeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0);\n    if (!store && !storeRef.current) {\n        storeRef.current = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.createStore)();\n    }\n    return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(StoreContext.Provider, {\n        value: store || storeRef.current\n    }, children);\n}\n_s1(Provider, \"EtiU7pDwGhTDZwMnrKEqZbxjqXE=\");\n_c = Provider;\nconst isPromiseLike = (x)=>typeof (x == null ? void 0 : x.then) === \"function\";\nconst attachPromiseStatus = (promise)=>{\n    if (!promise.status) {\n        promise.status = \"pending\";\n        promise.then((v)=>{\n            promise.status = \"fulfilled\";\n            promise.value = v;\n        }, (e)=>{\n            promise.status = \"rejected\";\n            promise.reason = e;\n        });\n    }\n};\nconst use = react__WEBPACK_IMPORTED_MODULE_0__.use || // A shim for older React versions\n((promise)=>{\n    if (promise.status === \"pending\") {\n        throw promise;\n    } else if (promise.status === \"fulfilled\") {\n        return promise.value;\n    } else if (promise.status === \"rejected\") {\n        throw promise.reason;\n    } else {\n        attachPromiseStatus(promise);\n        throw promise;\n    }\n});\nconst continuablePromiseMap = /* @__PURE__ */ new WeakMap();\nconst createContinuablePromise = (promise, getValue)=>{\n    let continuablePromise = continuablePromiseMap.get(promise);\n    if (!continuablePromise) {\n        continuablePromise = new Promise((resolve, reject)=>{\n            let curr = promise;\n            const onFulfilled = (me)=>(v)=>{\n                    if (curr === me) {\n                        resolve(v);\n                    }\n                };\n            const onRejected = (me)=>(e)=>{\n                    if (curr === me) {\n                        reject(e);\n                    }\n                };\n            const onAbort = ()=>{\n                try {\n                    const nextValue = getValue();\n                    if (isPromiseLike(nextValue)) {\n                        continuablePromiseMap.set(nextValue, continuablePromise);\n                        curr = nextValue;\n                        nextValue.then(onFulfilled(nextValue), onRejected(nextValue));\n                        (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_registerAbortHandler)(nextValue, onAbort);\n                    } else {\n                        resolve(nextValue);\n                    }\n                } catch (e) {\n                    reject(e);\n                }\n            };\n            promise.then(onFulfilled(promise), onRejected(promise));\n            (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_registerAbortHandler)(promise, onAbort);\n        });\n        continuablePromiseMap.set(promise, continuablePromise);\n    }\n    return continuablePromise;\n};\nfunction useAtomValue(atom, options) {\n    _s2();\n    const { delay, unstable_promiseStatus: promiseStatus = !react__WEBPACK_IMPORTED_MODULE_0__.use } = options || {};\n    const store = useStore(options);\n    const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)({\n        \"useAtomValue.useReducer\": (prev)=>{\n            const nextValue = store.get(atom);\n            if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n                return prev;\n            }\n            return [\n                nextValue,\n                store,\n                atom\n            ];\n        }\n    }[\"useAtomValue.useReducer\"], void 0, {\n        \"useAtomValue.useReducer\": ()=>[\n                store.get(atom),\n                store,\n                atom\n            ]\n    }[\"useAtomValue.useReducer\"]);\n    let value = valueFromReducer;\n    if (storeFromReducer !== store || atomFromReducer !== atom) {\n        rerender();\n        value = store.get(atom);\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAtomValue.useEffect\": ()=>{\n            const unsub = store.sub(atom, {\n                \"useAtomValue.useEffect.unsub\": ()=>{\n                    if (promiseStatus) {\n                        try {\n                            const value2 = store.get(atom);\n                            if (isPromiseLike(value2)) {\n                                attachPromiseStatus(createContinuablePromise(value2, {\n                                    \"useAtomValue.useEffect.unsub\": ()=>store.get(atom)\n                                }[\"useAtomValue.useEffect.unsub\"]));\n                            }\n                        } catch (e) {}\n                    }\n                    if (typeof delay === \"number\") {\n                        setTimeout(rerender, delay);\n                        return;\n                    }\n                    rerender();\n                }\n            }[\"useAtomValue.useEffect.unsub\"]);\n            rerender();\n            return unsub;\n        }\n    }[\"useAtomValue.useEffect\"], [\n        store,\n        atom,\n        delay,\n        promiseStatus\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(value);\n    if (isPromiseLike(value)) {\n        const promise = createContinuablePromise(value, ()=>store.get(atom));\n        if (promiseStatus) {\n            attachPromiseStatus(promise);\n        }\n        return use(promise);\n    }\n    return value;\n}\n_s2(useAtomValue, \"1uk+Y9a78As5DspzFTGKs8amIyM=\", false, function() {\n    return [\n        useStore\n    ];\n});\nfunction useSetAtom(atom, options) {\n    _s3();\n    const store = useStore(options);\n    const setAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSetAtom.useCallback[setAtom]\": function() {\n            for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){\n                args[_key] = arguments[_key];\n            }\n            if (( false ? 0 : void 0) !== \"production\" && !(\"write\" in atom)) {\n                throw new Error(\"not writable atom\");\n            }\n            return store.set(atom, ...args);\n        }\n    }[\"useSetAtom.useCallback[setAtom]\"], [\n        store,\n        atom\n    ]);\n    return setAtom;\n}\n_s3(useSetAtom, \"Pn+Qt5Bv6ZjW7g23e6pLgnE3PKk=\", false, function() {\n    return [\n        useStore\n    ];\n});\nfunction useAtom(atom, options) {\n    _s4();\n    return [\n        useAtomValue(atom, options),\n        // We do wrong type assertion here, which results in throwing an error.\n        useSetAtom(atom, options)\n    ];\n}\n_s4(useAtom, \"+d8xoddIKQXMn74fLgw78AhLuew=\", false, function() {\n    return [\n        useAtomValue,\n        useSetAtom\n    ];\n});\n\nvar _c;\n$RefreshReg$(_c, \"Provider\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vcmVhY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUNtSTtBQUN0RTtBQUNXO0FBRXhFLE1BQU1ZLDZCQUFlWCxvREFBYUEsQ0FDaEMsS0FBSztBQUVQLFNBQVNZLFNBQVNDLE9BQU87O0lBQ3ZCLE1BQU1DLFFBQVFiLGlEQUFVQSxDQUFDVTtJQUN6QixPQUFPLENBQUNFLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVFDLEtBQUssS0FBS0EsU0FBU04sOERBQWVBO0FBQy9FO0dBSFNJO0FBSVQsU0FBU0csU0FBUyxLQUdqQjtRQUhpQixFQUNoQkMsUUFBUSxFQUNSRixLQUFLLEVBQ04sR0FIaUI7O0lBSWhCLE1BQU1HLFdBQVdmLDZDQUFNQSxDQUFDLEtBQUs7SUFDN0IsSUFBSSxDQUFDWSxTQUFTLENBQUNHLFNBQVNDLE9BQU8sRUFBRTtRQUMvQkQsU0FBU0MsT0FBTyxHQUFHVCwwREFBV0E7SUFDaEM7SUFDQSxxQkFBT04sb0RBQWFBLENBQ2xCUSxhQUFhSSxRQUFRLEVBQ3JCO1FBQ0VJLE9BQU9MLFNBQVNHLFNBQVNDLE9BQU87SUFDbEMsR0FDQUY7QUFFSjtJQWZTRDtLQUFBQTtBQWlCVCxNQUFNSyxnQkFBZ0IsQ0FBQ0MsSUFBTSxPQUFRQSxDQUFBQSxLQUFLLE9BQU8sS0FBSyxJQUFJQSxFQUFFQyxJQUFJLE1BQU07QUFDdEUsTUFBTUMsc0JBQXNCLENBQUNDO0lBQzNCLElBQUksQ0FBQ0EsUUFBUUMsTUFBTSxFQUFFO1FBQ25CRCxRQUFRQyxNQUFNLEdBQUc7UUFDakJELFFBQVFGLElBQUksQ0FDVixDQUFDSTtZQUNDRixRQUFRQyxNQUFNLEdBQUc7WUFDakJELFFBQVFMLEtBQUssR0FBR087UUFDbEIsR0FDQSxDQUFDQztZQUNDSCxRQUFRQyxNQUFNLEdBQUc7WUFDakJELFFBQVFJLE1BQU0sR0FBR0Q7UUFDbkI7SUFFSjtBQUNGO0FBQ0EsTUFBTUUsTUFBTTlC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anMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZiwgY3JlYXRlRWxlbWVudCwgdXNlUmVkdWNlciwgdXNlRWZmZWN0LCB1c2VEZWJ1Z1ZhbHVlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldERlZmF1bHRTdG9yZSwgY3JlYXRlU3RvcmUgfSBmcm9tICdqb3RhaS92YW5pbGxhJztcbmltcG9ydCB7IElOVEVSTkFMX3JlZ2lzdGVyQWJvcnRIYW5kbGVyIH0gZnJvbSAnam90YWkvdmFuaWxsYS9pbnRlcm5hbHMnO1xuXG5jb25zdCBTdG9yZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KFxuICB2b2lkIDBcbik7XG5mdW5jdGlvbiB1c2VTdG9yZShvcHRpb25zKSB7XG4gIGNvbnN0IHN0b3JlID0gdXNlQ29udGV4dChTdG9yZUNvbnRleHQpO1xuICByZXR1cm4gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc3RvcmUpIHx8IHN0b3JlIHx8IGdldERlZmF1bHRTdG9yZSgpO1xufVxuZnVuY3Rpb24gUHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgc3RvcmVcbn0pIHtcbiAgY29uc3Qgc3RvcmVSZWYgPSB1c2VSZWYodm9pZCAwKTtcbiAgaWYgKCFzdG9yZSAmJiAhc3RvcmVSZWYuY3VycmVudCkge1xuICAgIHN0b3JlUmVmLmN1cnJlbnQgPSBjcmVhdGVTdG9yZSgpO1xuICB9XG4gIHJldHVybiBjcmVhdGVFbGVtZW50KFxuICAgIFN0b3JlQ29udGV4dC5Qcm92aWRlcixcbiAgICB7XG4gICAgICB2YWx1ZTogc3RvcmUgfHwgc3RvcmVSZWYuY3VycmVudFxuICAgIH0sXG4gICAgY2hpbGRyZW5cbiAgKTtcbn1cblxuY29uc3QgaXNQcm9taXNlTGlrZSA9ICh4KSA9PiB0eXBlb2YgKHggPT0gbnVsbCA/IHZvaWQgMCA6IHgudGhlbikgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IGF0dGFjaFByb21pc2VTdGF0dXMgPSAocHJvbWlzZSkgPT4ge1xuICBpZiAoIXByb21pc2Uuc3RhdHVzKSB7XG4gICAgcHJvbWlzZS5zdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgICBwcm9taXNlLnRoZW4oXG4gICAgICAodikgPT4ge1xuICAgICAgICBwcm9taXNlLnN0YXR1cyA9IFwiZnVsZmlsbGVkXCI7XG4gICAgICAgIHByb21pc2UudmFsdWUgPSB2O1xuICAgICAgfSxcbiAgICAgIChlKSA9PiB7XG4gICAgICAgIHByb21pc2Uuc3RhdHVzID0gXCJyZWplY3RlZFwiO1xuICAgICAgICBwcm9taXNlLnJlYXNvbiA9IGU7XG4gICAgICB9XG4gICAgKTtcbiAgfVxufTtcbmNvbnN0IHVzZSA9IFJlYWN0LnVzZSB8fCAvLyBBIHNoaW0gZm9yIG9sZGVyIFJlYWN0IHZlcnNpb25zXG4oKHByb21pc2UpID0+IHtcbiAgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcInBlbmRpbmdcIikge1xuICAgIHRocm93IHByb21pc2U7XG4gIH0gZWxzZSBpZiAocHJvbWlzZS5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICByZXR1cm4gcHJvbWlzZS52YWx1ZTtcbiAgfSBlbHNlIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gXCJyZWplY3RlZFwiKSB7XG4gICAgdGhyb3cgcHJvbWlzZS5yZWFzb247XG4gIH0gZWxzZSB7XG4gICAgYXR0YWNoUHJvbWlzZVN0YXR1cyhwcm9taXNlKTtcbiAgICB0aHJvdyBwcm9taXNlO1xuICB9XG59KTtcbmNvbnN0IGNvbnRpbnVhYmxlUHJvbWlzZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgY3JlYXRlQ29udGludWFibGVQcm9taXNlID0gKHByb21pc2UsIGdldFZhbHVlKSA9PiB7XG4gIGxldCBjb250aW51YWJsZVByb21pc2UgPSBjb250aW51YWJsZVByb21pc2VNYXAuZ2V0KHByb21pc2UpO1xuICBpZiAoIWNvbnRpbnVhYmxlUHJvbWlzZSkge1xuICAgIGNvbnRpbnVhYmxlUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBjdXJyID0gcHJvbWlzZTtcbiAgICAgIGNvbnN0IG9uRnVsZmlsbGVkID0gKG1lKSA9PiAodikgPT4ge1xuICAgICAgICBpZiAoY3VyciA9PT0gbWUpIHtcbiAgICAgICAgICByZXNvbHZlKHYpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3Qgb25SZWplY3RlZCA9IChtZSkgPT4gKGUpID0+IHtcbiAgICAgICAgaWYgKGN1cnIgPT09IG1lKSB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3Qgb25BYm9ydCA9ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBnZXRWYWx1ZSgpO1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKG5leHRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVhYmxlUHJvbWlzZU1hcC5zZXQobmV4dFZhbHVlLCBjb250aW51YWJsZVByb21pc2UpO1xuICAgICAgICAgICAgY3VyciA9IG5leHRWYWx1ZTtcbiAgICAgICAgICAgIG5leHRWYWx1ZS50aGVuKG9uRnVsZmlsbGVkKG5leHRWYWx1ZSksIG9uUmVqZWN0ZWQobmV4dFZhbHVlKSk7XG4gICAgICAgICAgICBJTlRFUk5BTF9yZWdpc3RlckFib3J0SGFuZGxlcihuZXh0VmFsdWUsIG9uQWJvcnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKG5leHRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcHJvbWlzZS50aGVuKG9uRnVsZmlsbGVkKHByb21pc2UpLCBvblJlamVjdGVkKHByb21pc2UpKTtcbiAgICAgIElOVEVSTkFMX3JlZ2lzdGVyQWJvcnRIYW5kbGVyKHByb21pc2UsIG9uQWJvcnQpO1xuICAgIH0pO1xuICAgIGNvbnRpbnVhYmxlUHJvbWlzZU1hcC5zZXQocHJvbWlzZSwgY29udGludWFibGVQcm9taXNlKTtcbiAgfVxuICByZXR1cm4gY29udGludWFibGVQcm9taXNlO1xufTtcbmZ1bmN0aW9uIHVzZUF0b21WYWx1ZShhdG9tLCBvcHRpb25zKSB7XG4gIGNvbnN0IHsgZGVsYXksIHVuc3RhYmxlX3Byb21pc2VTdGF0dXM6IHByb21pc2VTdGF0dXMgPSAhUmVhY3QudXNlIH0gPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKG9wdGlvbnMpO1xuICBjb25zdCBbW3ZhbHVlRnJvbVJlZHVjZXIsIHN0b3JlRnJvbVJlZHVjZXIsIGF0b21Gcm9tUmVkdWNlcl0sIHJlcmVuZGVyXSA9IHVzZVJlZHVjZXIoXG4gICAgKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5leHRWYWx1ZSA9IHN0b3JlLmdldChhdG9tKTtcbiAgICAgIGlmIChPYmplY3QuaXMocHJldlswXSwgbmV4dFZhbHVlKSAmJiBwcmV2WzFdID09PSBzdG9yZSAmJiBwcmV2WzJdID09PSBhdG9tKSB7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtuZXh0VmFsdWUsIHN0b3JlLCBhdG9tXTtcbiAgICB9LFxuICAgIHZvaWQgMCxcbiAgICAoKSA9PiBbc3RvcmUuZ2V0KGF0b20pLCBzdG9yZSwgYXRvbV1cbiAgKTtcbiAgbGV0IHZhbHVlID0gdmFsdWVGcm9tUmVkdWNlcjtcbiAgaWYgKHN0b3JlRnJvbVJlZHVjZXIgIT09IHN0b3JlIHx8IGF0b21Gcm9tUmVkdWNlciAhPT0gYXRvbSkge1xuICAgIHJlcmVuZGVyKCk7XG4gICAgdmFsdWUgPSBzdG9yZS5nZXQoYXRvbSk7XG4gIH1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1bnN1YiA9IHN0b3JlLnN1YihhdG9tLCAoKSA9PiB7XG4gICAgICBpZiAocHJvbWlzZVN0YXR1cykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlMiA9IHN0b3JlLmdldChhdG9tKTtcbiAgICAgICAgICBpZiAoaXNQcm9taXNlTGlrZSh2YWx1ZTIpKSB7XG4gICAgICAgICAgICBhdHRhY2hQcm9taXNlU3RhdHVzKFxuICAgICAgICAgICAgICBjcmVhdGVDb250aW51YWJsZVByb21pc2UodmFsdWUyLCAoKSA9PiBzdG9yZS5nZXQoYXRvbSkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRlbGF5ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHNldFRpbWVvdXQocmVyZW5kZXIsIGRlbGF5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVyZW5kZXIoKTtcbiAgICB9KTtcbiAgICByZXJlbmRlcigpO1xuICAgIHJldHVybiB1bnN1YjtcbiAgfSwgW3N0b3JlLCBhdG9tLCBkZWxheSwgcHJvbWlzZVN0YXR1c10pO1xuICB1c2VEZWJ1Z1ZhbHVlKHZhbHVlKTtcbiAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IGNyZWF0ZUNvbnRpbnVhYmxlUHJvbWlzZSh2YWx1ZSwgKCkgPT4gc3RvcmUuZ2V0KGF0b20pKTtcbiAgICBpZiAocHJvbWlzZVN0YXR1cykge1xuICAgICAgYXR0YWNoUHJvbWlzZVN0YXR1cyhwcm9taXNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVzZShwcm9taXNlKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVzZVNldEF0b20oYXRvbSwgb3B0aW9ucykge1xuICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKG9wdGlvbnMpO1xuICBjb25zdCBzZXRBdG9tID0gdXNlQ2FsbGJhY2soXG4gICAgKC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhKFwid3JpdGVcIiBpbiBhdG9tKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3Qgd3JpdGFibGUgYXRvbVwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdG9yZS5zZXQoYXRvbSwgLi4uYXJncyk7XG4gICAgfSxcbiAgICBbc3RvcmUsIGF0b21dXG4gICk7XG4gIHJldHVybiBzZXRBdG9tO1xufVxuXG5mdW5jdGlvbiB1c2VBdG9tKGF0b20sIG9wdGlvbnMpIHtcbiAgcmV0dXJuIFtcbiAgICB1c2VBdG9tVmFsdWUoYXRvbSwgb3B0aW9ucyksXG4gICAgLy8gV2UgZG8gd3JvbmcgdHlwZSBhc3NlcnRpb24gaGVyZSwgd2hpY2ggcmVzdWx0cyBpbiB0aHJvd2luZyBhbiBlcnJvci5cbiAgICB1c2VTZXRBdG9tKGF0b20sIG9wdGlvbnMpXG4gIF07XG59XG5cbmV4cG9ydCB7IFByb3ZpZGVyLCB1c2VBdG9tLCB1c2VBdG9tVmFsdWUsIHVzZVNldEF0b20sIHVzZVN0b3JlIH07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVJlZiIsImNyZWF0ZUVsZW1lbnQiLCJ1c2VSZWR1Y2VyIiwidXNlRWZmZWN0IiwidXNlRGVidWdWYWx1ZSIsInVzZUNhbGxiYWNrIiwiZ2V0RGVmYXVsdFN0b3JlIiwiY3JlYXRlU3RvcmUiLCJJTlRFUk5BTF9yZWdpc3RlckFib3J0SGFuZGxlciIsIlN0b3JlQ29udGV4dCIsInVzZVN0b3JlIiwib3B0aW9ucyIsInN0b3JlIiwiUHJvdmlkZXIiLCJjaGlsZHJlbiIsInN0b3JlUmVmIiwiY3VycmVudCIsInZhbHVlIiwiaXNQcm9taXNlTGlrZSIsIngiLCJ0aGVuIiwiYXR0YWNoUHJvbWlzZVN0YXR1cyIsInByb21pc2UiLCJzdGF0dXMiLCJ2IiwiZSIsInJlYXNvbiIsInVzZSIsImNvbnRpbnVhYmxlUHJvbWlzZU1hcCIsIldlYWtNYXAiLCJjcmVhdGVDb250aW51YWJsZVByb21pc2UiLCJnZXRWYWx1ZSIsImNvbnRpbnVhYmxlUHJvbWlzZSIsImdldCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY3VyciIsIm9uRnVsZmlsbGVkIiwibWUiLCJvblJlamVjdGVkIiwib25BYm9ydCIsIm5leHRWYWx1ZSIsInNldCIsInVzZUF0b21WYWx1ZSIsImF0b20iLCJkZWxheSIsInVuc3RhYmxlX3Byb21pc2VTdGF0dXMiLCJwcm9taXNlU3RhdHVzIiwidmFsdWVGcm9tUmVkdWNlciIsInN0b3JlRnJvbVJlZHVjZXIiLCJhdG9tRnJvbVJlZHVjZXIiLCJyZXJlbmRlciIsInByZXYiLCJPYmplY3QiLCJpcyIsInVuc3ViIiwic3ViIiwidmFsdWUyIiwic2V0VGltZW91dCIsInVzZVNldEF0b20iLCJzZXRBdG9tIiwiYXJncyIsImVudiIsIk1PREUiLCJFcnJvciIsInVzZUF0b20iXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jotai/esm/react.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jotai/esm/react/utils.mjs":
/*!************************************************!*\
  !*** ./node_modules/jotai/esm/react/utils.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAtomCallback: () => (/* binding */ useAtomCallback),\n/* harmony export */   useHydrateAtoms: () => (/* binding */ useHydrateAtoms),\n/* harmony export */   useReducerAtom: () => (/* binding */ useReducerAtom),\n/* harmony export */   useResetAtom: () => (/* binding */ useResetAtom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var jotai_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/react */ \"(app-pages-browser)/./node_modules/jotai/esm/react.mjs\");\n/* harmony import */ var jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai/vanilla/utils */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla/utils.mjs\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jotai/vanilla */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs\");\n/* __next_internal_client_entry_do_not_use__ useAtomCallback,useHydrateAtoms,useReducerAtom,useResetAtom auto */ var _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$(), _s3 = $RefreshSig$();\n\n\n\n\nfunction useResetAtom(anAtom, options) {\n    _s();\n    const setAtom = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n    const resetAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useResetAtom.useCallback[resetAtom]\": ()=>setAtom(jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__.RESET)\n    }[\"useResetAtom.useCallback[resetAtom]\"], [\n        setAtom\n    ]);\n    return resetAtom;\n}\n_s(useResetAtom, \"xvOzvfQeziT2O6fKpYSJZTxFkkk=\", false, function() {\n    return [\n        jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom\n    ];\n});\nfunction useReducerAtom(anAtom, reducer, options) {\n    _s1();\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn(\"[DEPRECATED] useReducerAtom is deprecated and will be removed in the future. Please create your own version using the recipe. https://github.com/pmndrs/jotai/pull/2467\");\n    }\n    const [state, setState] = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useAtom)(anAtom, options);\n    const dispatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useReducerAtom.useCallback[dispatch]\": (action)=>{\n            setState({\n                \"useReducerAtom.useCallback[dispatch]\": (prev)=>reducer(prev, action)\n            }[\"useReducerAtom.useCallback[dispatch]\"]);\n        }\n    }[\"useReducerAtom.useCallback[dispatch]\"], [\n        setState,\n        reducer\n    ]);\n    return [\n        state,\n        dispatch\n    ];\n}\n_s1(useReducerAtom, \"hoEMfgRk0JF+zb+KQhZpLbvQp7E=\", false, function() {\n    return [\n        jotai_react__WEBPACK_IMPORTED_MODULE_1__.useAtom\n    ];\n});\nfunction useAtomCallback(callback, options) {\n    _s2();\n    const anAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useAtomCallback.useMemo[anAtom]\": ()=>(0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__.atom)(null, {\n                \"useAtomCallback.useMemo[anAtom]\": function(get, set) {\n                    for(var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++){\n                        args[_key - 2] = arguments[_key];\n                    }\n                    return callback(get, set, ...args);\n                }\n            }[\"useAtomCallback.useMemo[anAtom]\"])\n    }[\"useAtomCallback.useMemo[anAtom]\"], [\n        callback\n    ]);\n    return (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n}\n_s2(useAtomCallback, \"2PPvRjKD3ShVzbcwbXxxi8y2BU8=\", false, function() {\n    return [\n        jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom\n    ];\n});\nconst hydratedMap = /* @__PURE__ */ new WeakMap();\nfunction useHydrateAtoms(values, options) {\n    _s3();\n    const store = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useStore)(options);\n    const hydratedSet = getHydratedSet(store);\n    for (const [atom, ...args] of values){\n        if (!hydratedSet.has(atom) || (options == null ? void 0 : options.dangerouslyForceHydrate)) {\n            hydratedSet.add(atom);\n            store.set(atom, ...args);\n        }\n    }\n}\n_s3(useHydrateAtoms, \"lacCqcEtsbxX3PAG/fPlTuRiPg0=\", false, function() {\n    return [\n        jotai_react__WEBPACK_IMPORTED_MODULE_1__.useStore\n    ];\n});\nconst getHydratedSet = (store)=>{\n    let hydratedSet = hydratedMap.get(store);\n    if (!hydratedSet) {\n        hydratedSet = /* @__PURE__ */ new WeakSet();\n        hydratedMap.set(store, hydratedSet);\n    }\n    return hydratedSet;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vcmVhY3QvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUM2QztBQUNlO0FBQ2hCO0FBQ1A7QUFFckMsU0FBU08sYUFBYUMsTUFBTSxFQUFFQyxPQUFPOztJQUNuQyxNQUFNQyxVQUFVUix1REFBVUEsQ0FBQ00sUUFBUUM7SUFDbkMsTUFBTUUsWUFBWVgsa0RBQVdBOytDQUFDLElBQU1VLFFBQVFMLHNEQUFLQTs4Q0FBRztRQUFDSztLQUFRO0lBQzdELE9BQU9DO0FBQ1Q7R0FKU0o7O1FBQ1NMLG1EQUFVQTs7O0FBSzVCLFNBQVNVLGVBQWVKLE1BQU0sRUFBRUssT0FBTyxFQUFFSixPQUFPOztJQUM5QyxJQUFJLENBQUMsTUFBZSxHQUFHLENBQW9CLEdBQUcsS0FBSyxPQUFPLGNBQWM7UUFDdEVPLFFBQVFDLElBQUksQ0FDVjtJQUVKO0lBQ0EsTUFBTSxDQUFDQyxPQUFPQyxTQUFTLEdBQUdoQixvREFBT0EsQ0FBQ0ssUUFBUUM7SUFDMUMsTUFBTVcsV0FBV3BCLGtEQUFXQTtnREFDMUIsQ0FBQ3FCO1lBQ0NGO3dEQUFTLENBQUNHLE9BQVNULFFBQVFTLE1BQU1EOztRQUNuQzsrQ0FDQTtRQUFDRjtRQUFVTjtLQUFRO0lBRXJCLE9BQU87UUFBQ0s7UUFBT0U7S0FBUztBQUMxQjtJQWRTUjs7UUFNbUJULGdEQUFPQTs7O0FBVW5DLFNBQVNvQixnQkFBZ0JDLFFBQVEsRUFBRWYsT0FBTzs7SUFDeEMsTUFBTUQsU0FBU1AsOENBQU9BOzJDQUNwQixJQUFNSyxtREFBSUEsQ0FBQzttREFBTSxTQUFDbUIsS0FBS0M7cURBQVFDO3dCQUFBQTs7MkJBQVNILFNBQVNDLEtBQUtDLFFBQVFDOzs7MENBQzlEO1FBQUNIO0tBQVM7SUFFWixPQUFPdEIsdURBQVVBLENBQUNNLFFBQVFDO0FBQzVCO0lBTlNjOztRQUtBckIsbURBQVVBOzs7QUFHbkIsTUFBTTBCLGNBQWMsYUFBYSxHQUFHLElBQUlDO0FBQ3hDLFNBQVNDLGdCQUFnQkMsTUFBTSxFQUFFdEIsT0FBTzs7SUFDdEMsTUFBTXVCLFFBQVE1QixxREFBUUEsQ0FBQ0s7SUFDdkIsTUFBTXdCLGNBQWNDLGVBQWVGO0lBQ25DLEtBQUssTUFBTSxDQUFDMUIsTUFBTSxHQUFHcUIsS0FBSyxJQUFJSSxPQUFRO1FBQ3BDLElBQUksQ0FBQ0UsWUFBWUUsR0FBRyxDQUFDN0IsU0FBVUcsQ0FBQUEsV0FBVyxPQUFPLEtBQUssSUFBSUEsUUFBUTJCLHVCQUF1QixHQUFHO1lBQzFGSCxZQUFZSSxHQUFHLENBQUMvQjtZQUNoQjBCLE1BQU1OLEdBQUcsQ0FBQ3BCLFNBQVNxQjtRQUNyQjtJQUNGO0FBQ0Y7SUFUU0c7O1FBQ08xQixpREFBUUE7OztBQVN4QixNQUFNOEIsaUJBQWlCLENBQUNGO0lBQ3RCLElBQUlDLGNBQWNMLFlBQVlILEdBQUcsQ0FBQ087SUFDbEMsSUFBSSxDQUFDQyxhQUFhO1FBQ2hCQSxjQUFjLGFBQWEsR0FBRyxJQUFJSztRQUNsQ1YsWUFBWUYsR0FBRyxDQUFDTSxPQUFPQztJQUN6QjtJQUNBLE9BQU9BO0FBQ1Q7QUFFMEUiLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxub2RlX21vZHVsZXNcXGpvdGFpXFxlc21cXHJlYWN0XFx1dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXRBdG9tLCB1c2VBdG9tLCB1c2VTdG9yZSB9IGZyb20gJ2pvdGFpL3JlYWN0JztcbmltcG9ydCB7IFJFU0VUIH0gZnJvbSAnam90YWkvdmFuaWxsYS91dGlscyc7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWkvdmFuaWxsYSc7XG5cbmZ1bmN0aW9uIHVzZVJlc2V0QXRvbShhbkF0b20sIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2V0QXRvbSA9IHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbiAgY29uc3QgcmVzZXRBdG9tID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0QXRvbShSRVNFVCksIFtzZXRBdG9tXSk7XG4gIHJldHVybiByZXNldEF0b207XG59XG5cbmZ1bmN0aW9uIHVzZVJlZHVjZXJBdG9tKGFuQXRvbSwgcmVkdWNlciwgb3B0aW9ucykge1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIltERVBSRUNBVEVEXSB1c2VSZWR1Y2VyQXRvbSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gUGxlYXNlIGNyZWF0ZSB5b3VyIG93biB2ZXJzaW9uIHVzaW5nIHRoZSByZWNpcGUuIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvam90YWkvcHVsbC8yNDY3XCJcbiAgICApO1xuICB9XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlQXRvbShhbkF0b20sIG9wdGlvbnMpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUNhbGxiYWNrKFxuICAgIChhY3Rpb24pID0+IHtcbiAgICAgIHNldFN0YXRlKChwcmV2KSA9PiByZWR1Y2VyKHByZXYsIGFjdGlvbikpO1xuICAgIH0sXG4gICAgW3NldFN0YXRlLCByZWR1Y2VyXVxuICApO1xuICByZXR1cm4gW3N0YXRlLCBkaXNwYXRjaF07XG59XG5cbmZ1bmN0aW9uIHVzZUF0b21DYWxsYmFjayhjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBhbkF0b20gPSB1c2VNZW1vKFxuICAgICgpID0+IGF0b20obnVsbCwgKGdldCwgc2V0LCAuLi5hcmdzKSA9PiBjYWxsYmFjayhnZXQsIHNldCwgLi4uYXJncykpLFxuICAgIFtjYWxsYmFja11cbiAgKTtcbiAgcmV0dXJuIHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbn1cblxuY29uc3QgaHlkcmF0ZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHVzZUh5ZHJhdGVBdG9tcyh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZShvcHRpb25zKTtcbiAgY29uc3QgaHlkcmF0ZWRTZXQgPSBnZXRIeWRyYXRlZFNldChzdG9yZSk7XG4gIGZvciAoY29uc3QgW2F0b20sIC4uLmFyZ3NdIG9mIHZhbHVlcykge1xuICAgIGlmICghaHlkcmF0ZWRTZXQuaGFzKGF0b20pIHx8IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRhbmdlcm91c2x5Rm9yY2VIeWRyYXRlKSkge1xuICAgICAgaHlkcmF0ZWRTZXQuYWRkKGF0b20pO1xuICAgICAgc3RvcmUuc2V0KGF0b20sIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxufVxuY29uc3QgZ2V0SHlkcmF0ZWRTZXQgPSAoc3RvcmUpID0+IHtcbiAgbGV0IGh5ZHJhdGVkU2V0ID0gaHlkcmF0ZWRNYXAuZ2V0KHN0b3JlKTtcbiAgaWYgKCFoeWRyYXRlZFNldCkge1xuICAgIGh5ZHJhdGVkU2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgaHlkcmF0ZWRNYXAuc2V0KHN0b3JlLCBoeWRyYXRlZFNldCk7XG4gIH1cbiAgcmV0dXJuIGh5ZHJhdGVkU2V0O1xufTtcblxuZXhwb3J0IHsgdXNlQXRvbUNhbGxiYWNrLCB1c2VIeWRyYXRlQXRvbXMsIHVzZVJlZHVjZXJBdG9tLCB1c2VSZXNldEF0b20gfTtcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VTZXRBdG9tIiwidXNlQXRvbSIsInVzZVN0b3JlIiwiUkVTRVQiLCJhdG9tIiwidXNlUmVzZXRBdG9tIiwiYW5BdG9tIiwib3B0aW9ucyIsInNldEF0b20iLCJyZXNldEF0b20iLCJ1c2VSZWR1Y2VyQXRvbSIsInJlZHVjZXIiLCJlbnYiLCJNT0RFIiwiY29uc29sZSIsIndhcm4iLCJzdGF0ZSIsInNldFN0YXRlIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJwcmV2IiwidXNlQXRvbUNhbGxiYWNrIiwiY2FsbGJhY2siLCJnZXQiLCJzZXQiLCJhcmdzIiwiaHlkcmF0ZWRNYXAiLCJXZWFrTWFwIiwidXNlSHlkcmF0ZUF0b21zIiwidmFsdWVzIiwic3RvcmUiLCJoeWRyYXRlZFNldCIsImdldEh5ZHJhdGVkU2V0IiwiaGFzIiwiZGFuZ2Vyb3VzbHlGb3JjZUh5ZHJhdGUiLCJhZGQiLCJXZWFrU2V0Il0sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jotai/esm/react/utils.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs":
/*!********************************************!*\
  !*** ./node_modules/jotai/esm/vanilla.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_overrideCreateStore: () => (/* binding */ INTERNAL_overrideCreateStore),\n/* harmony export */   atom: () => (/* binding */ atom),\n/* harmony export */   createStore: () => (/* binding */ createStore),\n/* harmony export */   getDefaultStore: () => (/* binding */ getDefaultStore)\n/* harmony export */ });\n/* harmony import */ var jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jotai/vanilla/internals */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla/internals.mjs\");\n\n\nlet keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString() {\n      return ( false ? 0 : void 0) !== \"production\" && this.debugLabel ? key + \":\" + this.debugLabel : key;\n    }\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = defaultRead;\n    config.write = defaultWrite;\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\nfunction defaultRead(get) {\n  return get(this);\n}\nfunction defaultWrite(get, set, arg) {\n  return set(\n    this,\n    typeof arg === \"function\" ? arg(get(this)) : arg\n  );\n}\n\nlet overiddenCreateStore;\nfunction INTERNAL_overrideCreateStore(fn) {\n  overiddenCreateStore = fn(overiddenCreateStore);\n}\nfunction createStore() {\n  if (overiddenCreateStore) {\n    return overiddenCreateStore();\n  }\n  return (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_0__.INTERNAL_buildStoreRev1)();\n}\nlet defaultStore;\nfunction getDefaultStore() {\n  if (!defaultStore) {\n    defaultStore = createStore();\n    if (( false ? 0 : void 0) !== \"production\") {\n      globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = defaultStore);\n      if (globalThis.__JOTAI_DEFAULT_STORE__ !== defaultStore) {\n        console.warn(\n          \"Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044\"\n        );\n      }\n    }\n  }\n  return defaultStore;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0U7O0FBRWxFO0FBQ0E7QUFDQSxxQkFBcUIsV0FBVztBQUNoQztBQUNBO0FBQ0EsY0FBYyxNQUFlLEdBQUcsQ0FBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdGQUF1QjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFlLEdBQUcsQ0FBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTRFIiwic291cmNlcyI6WyJDOlxcdmFwaVxcbm9kZV9tb2R1bGVzXFxqb3RhaVxcZXNtXFx2YW5pbGxhLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlRFUk5BTF9idWlsZFN0b3JlUmV2MSB9IGZyb20gJ2pvdGFpL3ZhbmlsbGEvaW50ZXJuYWxzJztcblxubGV0IGtleUNvdW50ID0gMDtcbmZ1bmN0aW9uIGF0b20ocmVhZCwgd3JpdGUpIHtcbiAgY29uc3Qga2V5ID0gYGF0b20keysra2V5Q291bnR9YDtcbiAgY29uc3QgY29uZmlnID0ge1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuIChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmIHRoaXMuZGVidWdMYWJlbCA/IGtleSArIFwiOlwiICsgdGhpcy5kZWJ1Z0xhYmVsIDoga2V5O1xuICAgIH1cbiAgfTtcbiAgaWYgKHR5cGVvZiByZWFkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25maWcucmVhZCA9IHJlYWQ7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLmluaXQgPSByZWFkO1xuICAgIGNvbmZpZy5yZWFkID0gZGVmYXVsdFJlYWQ7XG4gICAgY29uZmlnLndyaXRlID0gZGVmYXVsdFdyaXRlO1xuICB9XG4gIGlmICh3cml0ZSkge1xuICAgIGNvbmZpZy53cml0ZSA9IHdyaXRlO1xuICB9XG4gIHJldHVybiBjb25maWc7XG59XG5mdW5jdGlvbiBkZWZhdWx0UmVhZChnZXQpIHtcbiAgcmV0dXJuIGdldCh0aGlzKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZShnZXQsIHNldCwgYXJnKSB7XG4gIHJldHVybiBzZXQoXG4gICAgdGhpcyxcbiAgICB0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIgPyBhcmcoZ2V0KHRoaXMpKSA6IGFyZ1xuICApO1xufVxuXG5sZXQgb3ZlcmlkZGVuQ3JlYXRlU3RvcmU7XG5mdW5jdGlvbiBJTlRFUk5BTF9vdmVycmlkZUNyZWF0ZVN0b3JlKGZuKSB7XG4gIG92ZXJpZGRlbkNyZWF0ZVN0b3JlID0gZm4ob3ZlcmlkZGVuQ3JlYXRlU3RvcmUpO1xufVxuZnVuY3Rpb24gY3JlYXRlU3RvcmUoKSB7XG4gIGlmIChvdmVyaWRkZW5DcmVhdGVTdG9yZSkge1xuICAgIHJldHVybiBvdmVyaWRkZW5DcmVhdGVTdG9yZSgpO1xuICB9XG4gIHJldHVybiBJTlRFUk5BTF9idWlsZFN0b3JlUmV2MSgpO1xufVxubGV0IGRlZmF1bHRTdG9yZTtcbmZ1bmN0aW9uIGdldERlZmF1bHRTdG9yZSgpIHtcbiAgaWYgKCFkZWZhdWx0U3RvcmUpIHtcbiAgICBkZWZhdWx0U3RvcmUgPSBjcmVhdGVTdG9yZSgpO1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyB8fCAoZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyA9IGRlZmF1bHRTdG9yZSk7XG4gICAgICBpZiAoZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyAhPT0gZGVmYXVsdFN0b3JlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIkRldGVjdGVkIG11bHRpcGxlIEpvdGFpIGluc3RhbmNlcy4gSXQgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3Igd2l0aCB0aGUgZGVmYXVsdCBzdG9yZS4gaHR0cHM6Ly9naXRodWIuY29tL3BtbmRycy9qb3RhaS9kaXNjdXNzaW9ucy8yMDQ0XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRTdG9yZTtcbn1cblxuZXhwb3J0IHsgSU5URVJOQUxfb3ZlcnJpZGVDcmVhdGVTdG9yZSwgYXRvbSwgY3JlYXRlU3RvcmUsIGdldERlZmF1bHRTdG9yZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jotai/esm/vanilla/internals.mjs":
/*!******************************************************!*\
  !*** ./node_modules/jotai/esm/vanilla/internals.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_abortPromise: () => (/* binding */ INTERNAL_abortPromise),\n/* harmony export */   INTERNAL_addPendingPromiseToDependency: () => (/* binding */ INTERNAL_addPendingPromiseToDependency),\n/* harmony export */   INTERNAL_buildStoreRev1: () => (/* binding */ INTERNAL_buildStoreRev1),\n/* harmony export */   INTERNAL_getBuildingBlocksRev1: () => (/* binding */ INTERNAL_getBuildingBlocksRev1),\n/* harmony export */   INTERNAL_getMountedOrPendingDependents: () => (/* binding */ INTERNAL_getMountedOrPendingDependents),\n/* harmony export */   INTERNAL_hasInitialValue: () => (/* binding */ INTERNAL_hasInitialValue),\n/* harmony export */   INTERNAL_initializeStoreHooks: () => (/* binding */ INTERNAL_initializeStoreHooks),\n/* harmony export */   INTERNAL_isActuallyWritableAtom: () => (/* binding */ INTERNAL_isActuallyWritableAtom),\n/* harmony export */   INTERNAL_isAtomStateInitialized: () => (/* binding */ INTERNAL_isAtomStateInitialized),\n/* harmony export */   INTERNAL_isPendingPromise: () => (/* binding */ INTERNAL_isPendingPromise),\n/* harmony export */   INTERNAL_isPromiseLike: () => (/* binding */ INTERNAL_isPromiseLike),\n/* harmony export */   INTERNAL_isSelfAtom: () => (/* binding */ INTERNAL_isSelfAtom),\n/* harmony export */   INTERNAL_promiseStateMap: () => (/* binding */ INTERNAL_promiseStateMap),\n/* harmony export */   INTERNAL_registerAbortHandler: () => (/* binding */ INTERNAL_registerAbortHandler),\n/* harmony export */   INTERNAL_returnAtomValue: () => (/* binding */ INTERNAL_returnAtomValue),\n/* harmony export */   INTERNAL_setAtomStateValueOrPromise: () => (/* binding */ INTERNAL_setAtomStateValueOrPromise)\n/* harmony export */ });\nconst isSelfAtom = (atom, a) => atom.unstable_is ? atom.unstable_is(a) : a === atom;\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst isAtomStateInitialized = (atomState) => \"v\" in atomState || \"e\" in atomState;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  if (( false ? 0 : void 0) !== \"production\" && !(\"v\" in atomState)) {\n    throw new Error(\"[Bug] atom state is not initialized\");\n  }\n  return atomState.v;\n};\nconst promiseStateMap = /* @__PURE__ */ new WeakMap();\nconst isPendingPromise = (value) => {\n  var _a;\n  return isPromiseLike(value) && !!((_a = promiseStateMap.get(value)) == null ? void 0 : _a[0]);\n};\nconst abortPromise = (promise) => {\n  const promiseState = promiseStateMap.get(promise);\n  if (promiseState == null ? void 0 : promiseState[0]) {\n    promiseState[0] = false;\n    promiseState[1].forEach((fn) => fn());\n  }\n};\nconst registerAbortHandler = (promise, abortHandler) => {\n  let promiseState = promiseStateMap.get(promise);\n  if (!promiseState) {\n    promiseState = [true, /* @__PURE__ */ new Set()];\n    promiseStateMap.set(promise, promiseState);\n    const settle = () => {\n      promiseState[0] = false;\n    };\n    promise.then(settle, settle);\n  }\n  promiseState[1].add(abortHandler);\n};\nconst isPromiseLike = (p) => typeof (p == null ? void 0 : p.then) === \"function\";\nconst addPendingPromiseToDependency = (atom, promise, dependencyAtomState) => {\n  if (!dependencyAtomState.p.has(atom)) {\n    dependencyAtomState.p.add(atom);\n    promise.then(\n      () => {\n        dependencyAtomState.p.delete(atom);\n      },\n      () => {\n        dependencyAtomState.p.delete(atom);\n      }\n    );\n  }\n};\nconst setAtomStateValueOrPromise = (atom, valueOrPromise, ensureAtomState) => {\n  const atomState = ensureAtomState(atom);\n  const hasPrevValue = \"v\" in atomState;\n  const prevValue = atomState.v;\n  if (isPromiseLike(valueOrPromise)) {\n    for (const a of atomState.d.keys()) {\n      addPendingPromiseToDependency(atom, valueOrPromise, ensureAtomState(a));\n    }\n  }\n  atomState.v = valueOrPromise;\n  delete atomState.e;\n  if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n    ++atomState.n;\n    if (isPromiseLike(prevValue)) {\n      abortPromise(prevValue);\n    }\n  }\n};\nconst getMountedOrPendingDependents = (atom, atomState, mountedMap) => {\n  var _a;\n  const dependents = /* @__PURE__ */ new Set();\n  for (const a of ((_a = mountedMap.get(atom)) == null ? void 0 : _a.t) || []) {\n    if (mountedMap.has(a)) {\n      dependents.add(a);\n    }\n  }\n  for (const atomWithPendingPromise of atomState.p) {\n    dependents.add(atomWithPendingPromise);\n  }\n  return dependents;\n};\nconst createStoreHook = () => {\n  const callbacks = /* @__PURE__ */ new Set();\n  const notify = () => {\n    callbacks.forEach((fn) => fn());\n  };\n  notify.add = (fn) => {\n    callbacks.add(fn);\n    return () => {\n      callbacks.delete(fn);\n    };\n  };\n  return notify;\n};\nconst createStoreHookForAtoms = () => {\n  const all = {};\n  const callbacks = /* @__PURE__ */ new WeakMap();\n  const notify = (atom) => {\n    var _a, _b;\n    (_a = callbacks.get(all)) == null ? void 0 : _a.forEach((fn) => fn(atom));\n    (_b = callbacks.get(atom)) == null ? void 0 : _b.forEach((fn) => fn());\n  };\n  notify.add = (atom, fn) => {\n    const key = atom || all;\n    const fns = (callbacks.has(key) ? callbacks : callbacks.set(key, /* @__PURE__ */ new Set())).get(key);\n    fns.add(fn);\n    return () => {\n      fns == null ? void 0 : fns.delete(fn);\n      if (!fns.size) {\n        callbacks.delete(key);\n      }\n    };\n  };\n  return notify;\n};\nconst initializeStoreHooks = (storeHooks) => {\n  storeHooks.c || (storeHooks.c = createStoreHookForAtoms());\n  storeHooks.m || (storeHooks.m = createStoreHookForAtoms());\n  storeHooks.u || (storeHooks.u = createStoreHookForAtoms());\n  storeHooks.f || (storeHooks.f = createStoreHook());\n  return storeHooks;\n};\nconst BUILDING_BLOCKS = Symbol();\nconst getBuildingBlocks = (store) => store[BUILDING_BLOCKS];\nconst buildStore = (atomStateMap = /* @__PURE__ */ new WeakMap(), mountedMap = /* @__PURE__ */ new WeakMap(), invalidatedAtoms = /* @__PURE__ */ new WeakMap(), changedAtoms = /* @__PURE__ */ new Set(), mountCallbacks = /* @__PURE__ */ new Set(), unmountCallbacks = /* @__PURE__ */ new Set(), storeHooks = {}, atomRead = (atom, ...params) => atom.read(...params), atomWrite = (atom, ...params) => atom.write(...params), atomOnInit = (atom, store) => {\n  var _a;\n  return (_a = atom.unstable_onInit) == null ? void 0 : _a.call(atom, store);\n}, atomOnMount = (atom, setAtom) => {\n  var _a;\n  return (_a = atom.onMount) == null ? void 0 : _a.call(atom, setAtom);\n}, ...buildingBlockFunctions) => {\n  const ensureAtomState = buildingBlockFunctions[0] || ((atom) => {\n    if (( false ? 0 : void 0) !== \"production\" && !atom) {\n      throw new Error(\"Atom is undefined or null\");\n    }\n    let atomState = atomStateMap.get(atom);\n    if (!atomState) {\n      atomState = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 };\n      atomStateMap.set(atom, atomState);\n      atomOnInit == null ? void 0 : atomOnInit(atom, store);\n    }\n    return atomState;\n  });\n  const flushCallbacks = buildingBlockFunctions[1] || (() => {\n    const errors = [];\n    const call = (fn) => {\n      try {\n        fn();\n      } catch (e) {\n        errors.push(e);\n      }\n    };\n    do {\n      if (storeHooks.f) {\n        call(storeHooks.f);\n      }\n      const callbacks = /* @__PURE__ */ new Set();\n      const add = callbacks.add.bind(callbacks);\n      changedAtoms.forEach((atom) => {\n        var _a;\n        return (_a = mountedMap.get(atom)) == null ? void 0 : _a.l.forEach(add);\n      });\n      changedAtoms.clear();\n      unmountCallbacks.forEach(add);\n      unmountCallbacks.clear();\n      mountCallbacks.forEach(add);\n      mountCallbacks.clear();\n      callbacks.forEach(call);\n      if (changedAtoms.size) {\n        recomputeInvalidatedAtoms();\n      }\n    } while (changedAtoms.size || unmountCallbacks.size || mountCallbacks.size);\n    if (errors.length) {\n      throw new AggregateError(errors);\n    }\n  });\n  const recomputeInvalidatedAtoms = buildingBlockFunctions[2] || (() => {\n    const topSortedReversed = [];\n    const visiting = /* @__PURE__ */ new WeakSet();\n    const visited = /* @__PURE__ */ new WeakSet();\n    const stack = Array.from(changedAtoms);\n    while (stack.length) {\n      const a = stack[stack.length - 1];\n      const aState = ensureAtomState(a);\n      if (visited.has(a)) {\n        stack.pop();\n        continue;\n      }\n      if (visiting.has(a)) {\n        if (invalidatedAtoms.get(a) === aState.n) {\n          topSortedReversed.push([a, aState]);\n        } else if (( false ? 0 : void 0) !== \"production\" && invalidatedAtoms.has(a)) {\n          throw new Error(\"[Bug] invalidated atom exists\");\n        }\n        visited.add(a);\n        stack.pop();\n        continue;\n      }\n      visiting.add(a);\n      for (const d of getMountedOrPendingDependents(a, aState, mountedMap)) {\n        if (!visiting.has(d)) {\n          stack.push(d);\n        }\n      }\n    }\n    for (let i = topSortedReversed.length - 1; i >= 0; --i) {\n      const [a, aState] = topSortedReversed[i];\n      let hasChangedDeps = false;\n      for (const dep of aState.d.keys()) {\n        if (dep !== a && changedAtoms.has(dep)) {\n          hasChangedDeps = true;\n          break;\n        }\n      }\n      if (hasChangedDeps) {\n        readAtomState(a);\n        mountDependencies(a);\n      }\n      invalidatedAtoms.delete(a);\n    }\n  });\n  const readAtomState = buildingBlockFunctions[3] || ((atom) => {\n    var _a;\n    const atomState = ensureAtomState(atom);\n    if (isAtomStateInitialized(atomState)) {\n      if (mountedMap.has(atom) && invalidatedAtoms.get(atom) !== atomState.n) {\n        return atomState;\n      }\n      if (Array.from(atomState.d).every(\n        ([a, n]) => (\n          // Recursively, read the atom state of the dependency, and\n          // check if the atom epoch number is unchanged\n          readAtomState(a).n === n\n        )\n      )) {\n        return atomState;\n      }\n    }\n    atomState.d.clear();\n    let isSync = true;\n    const mountDependenciesIfAsync = () => {\n      if (mountedMap.has(atom)) {\n        mountDependencies(atom);\n        recomputeInvalidatedAtoms();\n        flushCallbacks();\n      }\n    };\n    const getter = (a) => {\n      var _a2;\n      if (isSelfAtom(atom, a)) {\n        const aState2 = ensureAtomState(a);\n        if (!isAtomStateInitialized(aState2)) {\n          if (hasInitialValue(a)) {\n            setAtomStateValueOrPromise(a, a.init, ensureAtomState);\n          } else {\n            throw new Error(\"no atom init\");\n          }\n        }\n        return returnAtomValue(aState2);\n      }\n      const aState = readAtomState(a);\n      try {\n        return returnAtomValue(aState);\n      } finally {\n        atomState.d.set(a, aState.n);\n        if (isPendingPromise(atomState.v)) {\n          addPendingPromiseToDependency(atom, atomState.v, aState);\n        }\n        (_a2 = mountedMap.get(a)) == null ? void 0 : _a2.t.add(atom);\n        if (!isSync) {\n          mountDependenciesIfAsync();\n        }\n      }\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        if (( false ? 0 : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            if (( false ? 0 : void 0) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              try {\n                return writeAtomState(atom, ...args);\n              } finally {\n                recomputeInvalidatedAtoms();\n                flushCallbacks();\n              }\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    const prevEpochNumber = atomState.n;\n    try {\n      const valueOrPromise = atomRead(atom, getter, options);\n      setAtomStateValueOrPromise(atom, valueOrPromise, ensureAtomState);\n      if (isPromiseLike(valueOrPromise)) {\n        registerAbortHandler(valueOrPromise, () => controller == null ? void 0 : controller.abort());\n        valueOrPromise.then(\n          mountDependenciesIfAsync,\n          mountDependenciesIfAsync\n        );\n      }\n      return atomState;\n    } catch (error) {\n      delete atomState.v;\n      atomState.e = error;\n      ++atomState.n;\n      return atomState;\n    } finally {\n      isSync = false;\n      if (prevEpochNumber !== atomState.n && invalidatedAtoms.get(atom) === prevEpochNumber) {\n        invalidatedAtoms.set(atom, atomState.n);\n        changedAtoms.add(atom);\n        (_a = storeHooks.c) == null ? void 0 : _a.call(storeHooks, atom);\n      }\n    }\n  });\n  const invalidateDependents = buildingBlockFunctions[4] || ((atom) => {\n    const stack = [atom];\n    while (stack.length) {\n      const a = stack.pop();\n      const aState = ensureAtomState(a);\n      for (const d of getMountedOrPendingDependents(a, aState, mountedMap)) {\n        const dState = ensureAtomState(d);\n        invalidatedAtoms.set(d, dState.n);\n        stack.push(d);\n      }\n    }\n  });\n  const writeAtomState = buildingBlockFunctions[5] || ((atom, ...args) => {\n    let isSync = true;\n    const getter = (a) => returnAtomValue(readAtomState(a));\n    const setter = (a, ...args2) => {\n      var _a;\n      const aState = ensureAtomState(a);\n      try {\n        if (isSelfAtom(atom, a)) {\n          if (!hasInitialValue(a)) {\n            throw new Error(\"atom not writable\");\n          }\n          const prevEpochNumber = aState.n;\n          const v = args2[0];\n          setAtomStateValueOrPromise(a, v, ensureAtomState);\n          mountDependencies(a);\n          if (prevEpochNumber !== aState.n) {\n            changedAtoms.add(a);\n            (_a = storeHooks.c) == null ? void 0 : _a.call(storeHooks, a);\n            invalidateDependents(a);\n          }\n          return void 0;\n        } else {\n          return writeAtomState(a, ...args2);\n        }\n      } finally {\n        if (!isSync) {\n          recomputeInvalidatedAtoms();\n          flushCallbacks();\n        }\n      }\n    };\n    try {\n      return atomWrite(atom, getter, setter, ...args);\n    } finally {\n      isSync = false;\n    }\n  });\n  const mountDependencies = buildingBlockFunctions[6] || ((atom) => {\n    var _a;\n    const atomState = ensureAtomState(atom);\n    const mounted = mountedMap.get(atom);\n    if (mounted && !isPendingPromise(atomState.v)) {\n      for (const [a, n] of atomState.d) {\n        if (!mounted.d.has(a)) {\n          const aState = ensureAtomState(a);\n          const aMounted = mountAtom(a);\n          aMounted.t.add(atom);\n          mounted.d.add(a);\n          if (n !== aState.n) {\n            changedAtoms.add(a);\n            (_a = storeHooks.c) == null ? void 0 : _a.call(storeHooks, a);\n            invalidateDependents(a);\n          }\n        }\n      }\n      for (const a of mounted.d || []) {\n        if (!atomState.d.has(a)) {\n          mounted.d.delete(a);\n          const aMounted = unmountAtom(a);\n          aMounted == null ? void 0 : aMounted.t.delete(atom);\n        }\n      }\n    }\n  });\n  const mountAtom = buildingBlockFunctions[7] || ((atom) => {\n    var _a;\n    const atomState = ensureAtomState(atom);\n    let mounted = mountedMap.get(atom);\n    if (!mounted) {\n      readAtomState(atom);\n      for (const a of atomState.d.keys()) {\n        const aMounted = mountAtom(a);\n        aMounted.t.add(atom);\n      }\n      mounted = {\n        l: /* @__PURE__ */ new Set(),\n        d: new Set(atomState.d.keys()),\n        t: /* @__PURE__ */ new Set()\n      };\n      mountedMap.set(atom, mounted);\n      (_a = storeHooks.m) == null ? void 0 : _a.call(storeHooks, atom);\n      if (isActuallyWritableAtom(atom)) {\n        const processOnMount = () => {\n          let isSync = true;\n          const setAtom = (...args) => {\n            try {\n              return writeAtomState(atom, ...args);\n            } finally {\n              if (!isSync) {\n                recomputeInvalidatedAtoms();\n                flushCallbacks();\n              }\n            }\n          };\n          try {\n            const onUnmount = atomOnMount(atom, setAtom);\n            if (onUnmount) {\n              mounted.u = () => {\n                isSync = true;\n                try {\n                  onUnmount();\n                } finally {\n                  isSync = false;\n                }\n              };\n            }\n          } finally {\n            isSync = false;\n          }\n        };\n        mountCallbacks.add(processOnMount);\n      }\n    }\n    return mounted;\n  });\n  const unmountAtom = buildingBlockFunctions[8] || ((atom) => {\n    var _a;\n    const atomState = ensureAtomState(atom);\n    let mounted = mountedMap.get(atom);\n    if (mounted && !mounted.l.size && !Array.from(mounted.t).some((a) => {\n      var _a2;\n      return (_a2 = mountedMap.get(a)) == null ? void 0 : _a2.d.has(atom);\n    })) {\n      if (mounted.u) {\n        unmountCallbacks.add(mounted.u);\n      }\n      mounted = void 0;\n      mountedMap.delete(atom);\n      (_a = storeHooks.u) == null ? void 0 : _a.call(storeHooks, atom);\n      for (const a of atomState.d.keys()) {\n        const aMounted = unmountAtom(a);\n        aMounted == null ? void 0 : aMounted.t.delete(atom);\n      }\n      return void 0;\n    }\n    return mounted;\n  });\n  const buildingBlocks = [\n    // store state\n    atomStateMap,\n    mountedMap,\n    invalidatedAtoms,\n    changedAtoms,\n    mountCallbacks,\n    unmountCallbacks,\n    storeHooks,\n    // atom interceptors\n    atomRead,\n    atomWrite,\n    atomOnInit,\n    atomOnMount,\n    // building-block functions\n    ensureAtomState,\n    flushCallbacks,\n    recomputeInvalidatedAtoms,\n    readAtomState,\n    invalidateDependents,\n    writeAtomState,\n    mountDependencies,\n    mountAtom,\n    unmountAtom\n  ];\n  const store = {\n    get: (atom) => returnAtomValue(readAtomState(atom)),\n    set: (atom, ...args) => {\n      try {\n        return writeAtomState(atom, ...args);\n      } finally {\n        recomputeInvalidatedAtoms();\n        flushCallbacks();\n      }\n    },\n    sub: (atom, listener) => {\n      const mounted = mountAtom(atom);\n      const listeners = mounted.l;\n      listeners.add(listener);\n      flushCallbacks();\n      return () => {\n        listeners.delete(listener);\n        unmountAtom(atom);\n        flushCallbacks();\n      };\n    }\n  };\n  Object.defineProperty(store, BUILDING_BLOCKS, { value: buildingBlocks });\n  return store;\n};\nconst INTERNAL_buildStoreRev1 = buildStore;\nconst INTERNAL_getBuildingBlocksRev1 = getBuildingBlocks;\nconst INTERNAL_initializeStoreHooks = initializeStoreHooks;\nconst INTERNAL_isSelfAtom = isSelfAtom;\nconst INTERNAL_hasInitialValue = hasInitialValue;\nconst INTERNAL_isActuallyWritableAtom = isActuallyWritableAtom;\nconst INTERNAL_isAtomStateInitialized = isAtomStateInitialized;\nconst INTERNAL_returnAtomValue = returnAtomValue;\nconst INTERNAL_promiseStateMap = promiseStateMap;\nconst INTERNAL_isPendingPromise = isPendingPromise;\nconst INTERNAL_abortPromise = abortPromise;\nconst INTERNAL_registerAbortHandler = registerAbortHandler;\nconst INTERNAL_isPromiseLike = isPromiseLike;\nconst INTERNAL_addPendingPromiseToDependency = addPendingPromiseToDependency;\nconst INTERNAL_setAtomStateValueOrPromise = setAtomStateValueOrPromise;\nconst INTERNAL_getMountedOrPendingDependents = getMountedOrPendingDependents;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS9pbnRlcm5hbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbVRBQW1UO0FBQ25UO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLFNBQVMsTUFBZSxHQUFHLENBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVLE1BQWUsR0FBRyxDQUFvQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsYUFBYSxNQUFlLEdBQUcsQ0FBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBZSxHQUFHLENBQW9CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1QkFBdUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVxZSIsInNvdXJjZXMiOlsiQzpcXHZhcGlcXG5vZGVfbW9kdWxlc1xcam90YWlcXGVzbVxcdmFuaWxsYVxcaW50ZXJuYWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc1NlbGZBdG9tID0gKGF0b20sIGEpID0+IGF0b20udW5zdGFibGVfaXMgPyBhdG9tLnVuc3RhYmxlX2lzKGEpIDogYSA9PT0gYXRvbTtcbmNvbnN0IGhhc0luaXRpYWxWYWx1ZSA9IChhdG9tKSA9PiBcImluaXRcIiBpbiBhdG9tO1xuY29uc3QgaXNBY3R1YWxseVdyaXRhYmxlQXRvbSA9IChhdG9tKSA9PiAhIWF0b20ud3JpdGU7XG5jb25zdCBpc0F0b21TdGF0ZUluaXRpYWxpemVkID0gKGF0b21TdGF0ZSkgPT4gXCJ2XCIgaW4gYXRvbVN0YXRlIHx8IFwiZVwiIGluIGF0b21TdGF0ZTtcbmNvbnN0IHJldHVybkF0b21WYWx1ZSA9IChhdG9tU3RhdGUpID0+IHtcbiAgaWYgKFwiZVwiIGluIGF0b21TdGF0ZSkge1xuICAgIHRocm93IGF0b21TdGF0ZS5lO1xuICB9XG4gIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhKFwidlwiIGluIGF0b21TdGF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJbQnVnXSBhdG9tIHN0YXRlIGlzIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgfVxuICByZXR1cm4gYXRvbVN0YXRlLnY7XG59O1xuY29uc3QgcHJvbWlzZVN0YXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBpc1BlbmRpbmdQcm9taXNlID0gKHZhbHVlKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIGlzUHJvbWlzZUxpa2UodmFsdWUpICYmICEhKChfYSA9IHByb21pc2VTdGF0ZU1hcC5nZXQodmFsdWUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FbMF0pO1xufTtcbmNvbnN0IGFib3J0UHJvbWlzZSA9IChwcm9taXNlKSA9PiB7XG4gIGNvbnN0IHByb21pc2VTdGF0ZSA9IHByb21pc2VTdGF0ZU1hcC5nZXQocHJvbWlzZSk7XG4gIGlmIChwcm9taXNlU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IHByb21pc2VTdGF0ZVswXSkge1xuICAgIHByb21pc2VTdGF0ZVswXSA9IGZhbHNlO1xuICAgIHByb21pc2VTdGF0ZVsxXS5mb3JFYWNoKChmbikgPT4gZm4oKSk7XG4gIH1cbn07XG5jb25zdCByZWdpc3RlckFib3J0SGFuZGxlciA9IChwcm9taXNlLCBhYm9ydEhhbmRsZXIpID0+IHtcbiAgbGV0IHByb21pc2VTdGF0ZSA9IHByb21pc2VTdGF0ZU1hcC5nZXQocHJvbWlzZSk7XG4gIGlmICghcHJvbWlzZVN0YXRlKSB7XG4gICAgcHJvbWlzZVN0YXRlID0gW3RydWUsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCldO1xuICAgIHByb21pc2VTdGF0ZU1hcC5zZXQocHJvbWlzZSwgcHJvbWlzZVN0YXRlKTtcbiAgICBjb25zdCBzZXR0bGUgPSAoKSA9PiB7XG4gICAgICBwcm9taXNlU3RhdGVbMF0gPSBmYWxzZTtcbiAgICB9O1xuICAgIHByb21pc2UudGhlbihzZXR0bGUsIHNldHRsZSk7XG4gIH1cbiAgcHJvbWlzZVN0YXRlWzFdLmFkZChhYm9ydEhhbmRsZXIpO1xufTtcbmNvbnN0IGlzUHJvbWlzZUxpa2UgPSAocCkgPT4gdHlwZW9mIChwID09IG51bGwgPyB2b2lkIDAgOiBwLnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBhZGRQZW5kaW5nUHJvbWlzZVRvRGVwZW5kZW5jeSA9IChhdG9tLCBwcm9taXNlLCBkZXBlbmRlbmN5QXRvbVN0YXRlKSA9PiB7XG4gIGlmICghZGVwZW5kZW5jeUF0b21TdGF0ZS5wLmhhcyhhdG9tKSkge1xuICAgIGRlcGVuZGVuY3lBdG9tU3RhdGUucC5hZGQoYXRvbSk7XG4gICAgcHJvbWlzZS50aGVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBkZXBlbmRlbmN5QXRvbVN0YXRlLnAuZGVsZXRlKGF0b20pO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgZGVwZW5kZW5jeUF0b21TdGF0ZS5wLmRlbGV0ZShhdG9tKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG59O1xuY29uc3Qgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UgPSAoYXRvbSwgdmFsdWVPclByb21pc2UsIGVuc3VyZUF0b21TdGF0ZSkgPT4ge1xuICBjb25zdCBhdG9tU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUoYXRvbSk7XG4gIGNvbnN0IGhhc1ByZXZWYWx1ZSA9IFwidlwiIGluIGF0b21TdGF0ZTtcbiAgY29uc3QgcHJldlZhbHVlID0gYXRvbVN0YXRlLnY7XG4gIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlT3JQcm9taXNlKSkge1xuICAgIGZvciAoY29uc3QgYSBvZiBhdG9tU3RhdGUuZC5rZXlzKCkpIHtcbiAgICAgIGFkZFBlbmRpbmdQcm9taXNlVG9EZXBlbmRlbmN5KGF0b20sIHZhbHVlT3JQcm9taXNlLCBlbnN1cmVBdG9tU3RhdGUoYSkpO1xuICAgIH1cbiAgfVxuICBhdG9tU3RhdGUudiA9IHZhbHVlT3JQcm9taXNlO1xuICBkZWxldGUgYXRvbVN0YXRlLmU7XG4gIGlmICghaGFzUHJldlZhbHVlIHx8ICFPYmplY3QuaXMocHJldlZhbHVlLCBhdG9tU3RhdGUudikpIHtcbiAgICArK2F0b21TdGF0ZS5uO1xuICAgIGlmIChpc1Byb21pc2VMaWtlKHByZXZWYWx1ZSkpIHtcbiAgICAgIGFib3J0UHJvbWlzZShwcmV2VmFsdWUpO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IGdldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzID0gKGF0b20sIGF0b21TdGF0ZSwgbW91bnRlZE1hcCkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGRlcGVuZGVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBmb3IgKGNvbnN0IGEgb2YgKChfYSA9IG1vdW50ZWRNYXAuZ2V0KGF0b20pKSA9PSBudWxsID8gdm9pZCAwIDogX2EudCkgfHwgW10pIHtcbiAgICBpZiAobW91bnRlZE1hcC5oYXMoYSkpIHtcbiAgICAgIGRlcGVuZGVudHMuYWRkKGEpO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IGF0b21XaXRoUGVuZGluZ1Byb21pc2Ugb2YgYXRvbVN0YXRlLnApIHtcbiAgICBkZXBlbmRlbnRzLmFkZChhdG9tV2l0aFBlbmRpbmdQcm9taXNlKTtcbiAgfVxuICByZXR1cm4gZGVwZW5kZW50cztcbn07XG5jb25zdCBjcmVhdGVTdG9yZUhvb2sgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IG5vdGlmeSA9ICgpID0+IHtcbiAgICBjYWxsYmFja3MuZm9yRWFjaCgoZm4pID0+IGZuKCkpO1xuICB9O1xuICBub3RpZnkuYWRkID0gKGZuKSA9PiB7XG4gICAgY2FsbGJhY2tzLmFkZChmbik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNhbGxiYWNrcy5kZWxldGUoZm4pO1xuICAgIH07XG4gIH07XG4gIHJldHVybiBub3RpZnk7XG59O1xuY29uc3QgY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMgPSAoKSA9PiB7XG4gIGNvbnN0IGFsbCA9IHt9O1xuICBjb25zdCBjYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgbm90aWZ5ID0gKGF0b20pID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIChfYSA9IGNhbGxiYWNrcy5nZXQoYWxsKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvckVhY2goKGZuKSA9PiBmbihhdG9tKSk7XG4gICAgKF9iID0gY2FsbGJhY2tzLmdldChhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmZvckVhY2goKGZuKSA9PiBmbigpKTtcbiAgfTtcbiAgbm90aWZ5LmFkZCA9IChhdG9tLCBmbikgPT4ge1xuICAgIGNvbnN0IGtleSA9IGF0b20gfHwgYWxsO1xuICAgIGNvbnN0IGZucyA9IChjYWxsYmFja3MuaGFzKGtleSkgPyBjYWxsYmFja3MgOiBjYWxsYmFja3Muc2V0KGtleSwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkpLmdldChrZXkpO1xuICAgIGZucy5hZGQoZm4pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGZucy5kZWxldGUoZm4pO1xuICAgICAgaWYgKCFmbnMuc2l6ZSkge1xuICAgICAgICBjYWxsYmFja3MuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIG5vdGlmeTtcbn07XG5jb25zdCBpbml0aWFsaXplU3RvcmVIb29rcyA9IChzdG9yZUhvb2tzKSA9PiB7XG4gIHN0b3JlSG9va3MuYyB8fCAoc3RvcmVIb29rcy5jID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MubSB8fCAoc3RvcmVIb29rcy5tID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MudSB8fCAoc3RvcmVIb29rcy51ID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MuZiB8fCAoc3RvcmVIb29rcy5mID0gY3JlYXRlU3RvcmVIb29rKCkpO1xuICByZXR1cm4gc3RvcmVIb29rcztcbn07XG5jb25zdCBCVUlMRElOR19CTE9DS1MgPSBTeW1ib2woKTtcbmNvbnN0IGdldEJ1aWxkaW5nQmxvY2tzID0gKHN0b3JlKSA9PiBzdG9yZVtCVUlMRElOR19CTE9DS1NdO1xuY29uc3QgYnVpbGRTdG9yZSA9IChhdG9tU3RhdGVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgbW91bnRlZE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBpbnZhbGlkYXRlZEF0b21zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNoYW5nZWRBdG9tcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksIG1vdW50Q2FsbGJhY2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSwgdW5tb3VudENhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksIHN0b3JlSG9va3MgPSB7fSwgYXRvbVJlYWQgPSAoYXRvbSwgLi4ucGFyYW1zKSA9PiBhdG9tLnJlYWQoLi4ucGFyYW1zKSwgYXRvbVdyaXRlID0gKGF0b20sIC4uLnBhcmFtcykgPT4gYXRvbS53cml0ZSguLi5wYXJhbXMpLCBhdG9tT25Jbml0ID0gKGF0b20sIHN0b3JlKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChfYSA9IGF0b20udW5zdGFibGVfb25Jbml0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChhdG9tLCBzdG9yZSk7XG59LCBhdG9tT25Nb3VudCA9IChhdG9tLCBzZXRBdG9tKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIChfYSA9IGF0b20ub25Nb3VudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoYXRvbSwgc2V0QXRvbSk7XG59LCAuLi5idWlsZGluZ0Jsb2NrRnVuY3Rpb25zKSA9PiB7XG4gIGNvbnN0IGVuc3VyZUF0b21TdGF0ZSA9IGJ1aWxkaW5nQmxvY2tGdW5jdGlvbnNbMF0gfHwgKChhdG9tKSA9PiB7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmICFhdG9tKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdG9tIGlzIHVuZGVmaW5lZCBvciBudWxsXCIpO1xuICAgIH1cbiAgICBsZXQgYXRvbVN0YXRlID0gYXRvbVN0YXRlTWFwLmdldChhdG9tKTtcbiAgICBpZiAoIWF0b21TdGF0ZSkge1xuICAgICAgYXRvbVN0YXRlID0geyBkOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBwOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLCBuOiAwIH07XG4gICAgICBhdG9tU3RhdGVNYXAuc2V0KGF0b20sIGF0b21TdGF0ZSk7XG4gICAgICBhdG9tT25Jbml0ID09IG51bGwgPyB2b2lkIDAgOiBhdG9tT25Jbml0KGF0b20sIHN0b3JlKTtcbiAgICB9XG4gICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgfSk7XG4gIGNvbnN0IGZsdXNoQ2FsbGJhY2tzID0gYnVpbGRpbmdCbG9ja0Z1bmN0aW9uc1sxXSB8fCAoKCkgPT4ge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGNvbnN0IGNhbGwgPSAoZm4pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgZG8ge1xuICAgICAgaWYgKHN0b3JlSG9va3MuZikge1xuICAgICAgICBjYWxsKHN0b3JlSG9va3MuZik7XG4gICAgICB9XG4gICAgICBjb25zdCBjYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgY29uc3QgYWRkID0gY2FsbGJhY2tzLmFkZC5iaW5kKGNhbGxiYWNrcyk7XG4gICAgICBjaGFuZ2VkQXRvbXMuZm9yRWFjaCgoYXRvbSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSBtb3VudGVkTWFwLmdldChhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmwuZm9yRWFjaChhZGQpO1xuICAgICAgfSk7XG4gICAgICBjaGFuZ2VkQXRvbXMuY2xlYXIoKTtcbiAgICAgIHVubW91bnRDYWxsYmFja3MuZm9yRWFjaChhZGQpO1xuICAgICAgdW5tb3VudENhbGxiYWNrcy5jbGVhcigpO1xuICAgICAgbW91bnRDYWxsYmFja3MuZm9yRWFjaChhZGQpO1xuICAgICAgbW91bnRDYWxsYmFja3MuY2xlYXIoKTtcbiAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNhbGwpO1xuICAgICAgaWYgKGNoYW5nZWRBdG9tcy5zaXplKSB7XG4gICAgICAgIHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMoKTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChjaGFuZ2VkQXRvbXMuc2l6ZSB8fCB1bm1vdW50Q2FsbGJhY2tzLnNpemUgfHwgbW91bnRDYWxsYmFja3Muc2l6ZSk7XG4gICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMgPSBidWlsZGluZ0Jsb2NrRnVuY3Rpb25zWzJdIHx8ICgoKSA9PiB7XG4gICAgY29uc3QgdG9wU29ydGVkUmV2ZXJzZWQgPSBbXTtcbiAgICBjb25zdCB2aXNpdGluZyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuICAgIGNvbnN0IHZpc2l0ZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbiAgICBjb25zdCBzdGFjayA9IEFycmF5LmZyb20oY2hhbmdlZEF0b21zKTtcbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICBjb25zdCBhID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICBjb25zdCBhU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUoYSk7XG4gICAgICBpZiAodmlzaXRlZC5oYXMoYSkpIHtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZpc2l0aW5nLmhhcyhhKSkge1xuICAgICAgICBpZiAoaW52YWxpZGF0ZWRBdG9tcy5nZXQoYSkgPT09IGFTdGF0ZS5uKSB7XG4gICAgICAgICAgdG9wU29ydGVkUmV2ZXJzZWQucHVzaChbYSwgYVN0YXRlXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgaW52YWxpZGF0ZWRBdG9tcy5oYXMoYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbQnVnXSBpbnZhbGlkYXRlZCBhdG9tIGV4aXN0c1wiKTtcbiAgICAgICAgfVxuICAgICAgICB2aXNpdGVkLmFkZChhKTtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmlzaXRpbmcuYWRkKGEpO1xuICAgICAgZm9yIChjb25zdCBkIG9mIGdldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzKGEsIGFTdGF0ZSwgbW91bnRlZE1hcCkpIHtcbiAgICAgICAgaWYgKCF2aXNpdGluZy5oYXMoZCkpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSB0b3BTb3J0ZWRSZXZlcnNlZC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3QgW2EsIGFTdGF0ZV0gPSB0b3BTb3J0ZWRSZXZlcnNlZFtpXTtcbiAgICAgIGxldCBoYXNDaGFuZ2VkRGVwcyA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBkZXAgb2YgYVN0YXRlLmQua2V5cygpKSB7XG4gICAgICAgIGlmIChkZXAgIT09IGEgJiYgY2hhbmdlZEF0b21zLmhhcyhkZXApKSB7XG4gICAgICAgICAgaGFzQ2hhbmdlZERlcHMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaGFzQ2hhbmdlZERlcHMpIHtcbiAgICAgICAgcmVhZEF0b21TdGF0ZShhKTtcbiAgICAgICAgbW91bnREZXBlbmRlbmNpZXMoYSk7XG4gICAgICB9XG4gICAgICBpbnZhbGlkYXRlZEF0b21zLmRlbGV0ZShhKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCByZWFkQXRvbVN0YXRlID0gYnVpbGRpbmdCbG9ja0Z1bmN0aW9uc1szXSB8fCAoKGF0b20pID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgYXRvbVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlKGF0b20pO1xuICAgIGlmIChpc0F0b21TdGF0ZUluaXRpYWxpemVkKGF0b21TdGF0ZSkpIHtcbiAgICAgIGlmIChtb3VudGVkTWFwLmhhcyhhdG9tKSAmJiBpbnZhbGlkYXRlZEF0b21zLmdldChhdG9tKSAhPT0gYXRvbVN0YXRlLm4pIHtcbiAgICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5mcm9tKGF0b21TdGF0ZS5kKS5ldmVyeShcbiAgICAgICAgKFthLCBuXSkgPT4gKFxuICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5LCByZWFkIHRoZSBhdG9tIHN0YXRlIG9mIHRoZSBkZXBlbmRlbmN5LCBhbmRcbiAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgYXRvbSBlcG9jaCBudW1iZXIgaXMgdW5jaGFuZ2VkXG4gICAgICAgICAgcmVhZEF0b21TdGF0ZShhKS5uID09PSBuXG4gICAgICAgIClcbiAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXRvbVN0YXRlLmQuY2xlYXIoKTtcbiAgICBsZXQgaXNTeW5jID0gdHJ1ZTtcbiAgICBjb25zdCBtb3VudERlcGVuZGVuY2llc0lmQXN5bmMgPSAoKSA9PiB7XG4gICAgICBpZiAobW91bnRlZE1hcC5oYXMoYXRvbSkpIHtcbiAgICAgICAgbW91bnREZXBlbmRlbmNpZXMoYXRvbSk7XG4gICAgICAgIHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMoKTtcbiAgICAgICAgZmx1c2hDYWxsYmFja3MoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGdldHRlciA9IChhKSA9PiB7XG4gICAgICB2YXIgX2EyO1xuICAgICAgaWYgKGlzU2VsZkF0b20oYXRvbSwgYSkpIHtcbiAgICAgICAgY29uc3QgYVN0YXRlMiA9IGVuc3VyZUF0b21TdGF0ZShhKTtcbiAgICAgICAgaWYgKCFpc0F0b21TdGF0ZUluaXRpYWxpemVkKGFTdGF0ZTIpKSB7XG4gICAgICAgICAgaWYgKGhhc0luaXRpYWxWYWx1ZShhKSkge1xuICAgICAgICAgICAgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UoYSwgYS5pbml0LCBlbnN1cmVBdG9tU3RhdGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBhdG9tIGluaXRcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5BdG9tVmFsdWUoYVN0YXRlMik7XG4gICAgICB9XG4gICAgICBjb25zdCBhU3RhdGUgPSByZWFkQXRvbVN0YXRlKGEpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHJldHVybkF0b21WYWx1ZShhU3RhdGUpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgYXRvbVN0YXRlLmQuc2V0KGEsIGFTdGF0ZS5uKTtcbiAgICAgICAgaWYgKGlzUGVuZGluZ1Byb21pc2UoYXRvbVN0YXRlLnYpKSB7XG4gICAgICAgICAgYWRkUGVuZGluZ1Byb21pc2VUb0RlcGVuZGVuY3koYXRvbSwgYXRvbVN0YXRlLnYsIGFTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgKF9hMiA9IG1vdW50ZWRNYXAuZ2V0KGEpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLnQuYWRkKGF0b20pO1xuICAgICAgICBpZiAoIWlzU3luYykge1xuICAgICAgICAgIG1vdW50RGVwZW5kZW5jaWVzSWZBc3luYygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgY29udHJvbGxlcjtcbiAgICBsZXQgc2V0U2VsZjtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgZ2V0IHNpZ25hbCgpIHtcbiAgICAgICAgaWYgKCFjb250cm9sbGVyKSB7XG4gICAgICAgICAgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udHJvbGxlci5zaWduYWw7XG4gICAgICB9LFxuICAgICAgZ2V0IHNldFNlbGYoKSB7XG4gICAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiAhaXNBY3R1YWxseVdyaXRhYmxlQXRvbShhdG9tKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcInNldFNlbGYgZnVuY3Rpb24gY2Fubm90IGJlIHVzZWQgd2l0aCByZWFkLW9ubHkgYXRvbVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNldFNlbGYgJiYgaXNBY3R1YWxseVdyaXRhYmxlQXRvbShhdG9tKSkge1xuICAgICAgICAgIHNldFNlbGYgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmIGlzU3luYykge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJzZXRTZWxmIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgaW4gc3luY1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNTeW5jKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlQXRvbVN0YXRlKGF0b20sIC4uLmFyZ3MpO1xuICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMoKTtcbiAgICAgICAgICAgICAgICBmbHVzaENhbGxiYWNrcygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2V0U2VsZjtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHByZXZFcG9jaE51bWJlciA9IGF0b21TdGF0ZS5uO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YWx1ZU9yUHJvbWlzZSA9IGF0b21SZWFkKGF0b20sIGdldHRlciwgb3B0aW9ucyk7XG4gICAgICBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZShhdG9tLCB2YWx1ZU9yUHJvbWlzZSwgZW5zdXJlQXRvbVN0YXRlKTtcbiAgICAgIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlT3JQcm9taXNlKSkge1xuICAgICAgICByZWdpc3RlckFib3J0SGFuZGxlcih2YWx1ZU9yUHJvbWlzZSwgKCkgPT4gY29udHJvbGxlciA9PSBudWxsID8gdm9pZCAwIDogY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICAgICAgdmFsdWVPclByb21pc2UudGhlbihcbiAgICAgICAgICBtb3VudERlcGVuZGVuY2llc0lmQXN5bmMsXG4gICAgICAgICAgbW91bnREZXBlbmRlbmNpZXNJZkFzeW5jXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXRvbVN0YXRlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZWxldGUgYXRvbVN0YXRlLnY7XG4gICAgICBhdG9tU3RhdGUuZSA9IGVycm9yO1xuICAgICAgKythdG9tU3RhdGUubjtcbiAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzU3luYyA9IGZhbHNlO1xuICAgICAgaWYgKHByZXZFcG9jaE51bWJlciAhPT0gYXRvbVN0YXRlLm4gJiYgaW52YWxpZGF0ZWRBdG9tcy5nZXQoYXRvbSkgPT09IHByZXZFcG9jaE51bWJlcikge1xuICAgICAgICBpbnZhbGlkYXRlZEF0b21zLnNldChhdG9tLCBhdG9tU3RhdGUubik7XG4gICAgICAgIGNoYW5nZWRBdG9tcy5hZGQoYXRvbSk7XG4gICAgICAgIChfYSA9IHN0b3JlSG9va3MuYykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoc3RvcmVIb29rcywgYXRvbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgY29uc3QgaW52YWxpZGF0ZURlcGVuZGVudHMgPSBidWlsZGluZ0Jsb2NrRnVuY3Rpb25zWzRdIHx8ICgoYXRvbSkgPT4ge1xuICAgIGNvbnN0IHN0YWNrID0gW2F0b21dO1xuICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGEgPSBzdGFjay5wb3AoKTtcbiAgICAgIGNvbnN0IGFTdGF0ZSA9IGVuc3VyZUF0b21TdGF0ZShhKTtcbiAgICAgIGZvciAoY29uc3QgZCBvZiBnZXRNb3VudGVkT3JQZW5kaW5nRGVwZW5kZW50cyhhLCBhU3RhdGUsIG1vdW50ZWRNYXApKSB7XG4gICAgICAgIGNvbnN0IGRTdGF0ZSA9IGVuc3VyZUF0b21TdGF0ZShkKTtcbiAgICAgICAgaW52YWxpZGF0ZWRBdG9tcy5zZXQoZCwgZFN0YXRlLm4pO1xuICAgICAgICBzdGFjay5wdXNoKGQpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHdyaXRlQXRvbVN0YXRlID0gYnVpbGRpbmdCbG9ja0Z1bmN0aW9uc1s1XSB8fCAoKGF0b20sIC4uLmFyZ3MpID0+IHtcbiAgICBsZXQgaXNTeW5jID0gdHJ1ZTtcbiAgICBjb25zdCBnZXR0ZXIgPSAoYSkgPT4gcmV0dXJuQXRvbVZhbHVlKHJlYWRBdG9tU3RhdGUoYSkpO1xuICAgIGNvbnN0IHNldHRlciA9IChhLCAuLi5hcmdzMikgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgYVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlKGEpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGlzU2VsZkF0b20oYXRvbSwgYSkpIHtcbiAgICAgICAgICBpZiAoIWhhc0luaXRpYWxWYWx1ZShhKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXRvbSBub3Qgd3JpdGFibGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHByZXZFcG9jaE51bWJlciA9IGFTdGF0ZS5uO1xuICAgICAgICAgIGNvbnN0IHYgPSBhcmdzMlswXTtcbiAgICAgICAgICBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZShhLCB2LCBlbnN1cmVBdG9tU3RhdGUpO1xuICAgICAgICAgIG1vdW50RGVwZW5kZW5jaWVzKGEpO1xuICAgICAgICAgIGlmIChwcmV2RXBvY2hOdW1iZXIgIT09IGFTdGF0ZS5uKSB7XG4gICAgICAgICAgICBjaGFuZ2VkQXRvbXMuYWRkKGEpO1xuICAgICAgICAgICAgKF9hID0gc3RvcmVIb29rcy5jKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChzdG9yZUhvb2tzLCBhKTtcbiAgICAgICAgICAgIGludmFsaWRhdGVEZXBlbmRlbnRzKGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB3cml0ZUF0b21TdGF0ZShhLCAuLi5hcmdzMik7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICghaXNTeW5jKSB7XG4gICAgICAgICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tcygpO1xuICAgICAgICAgIGZsdXNoQ2FsbGJhY2tzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXRvbVdyaXRlKGF0b20sIGdldHRlciwgc2V0dGVyLCAuLi5hcmdzKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaXNTeW5jID0gZmFsc2U7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgbW91bnREZXBlbmRlbmNpZXMgPSBidWlsZGluZ0Jsb2NrRnVuY3Rpb25zWzZdIHx8ICgoYXRvbSkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBhdG9tU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUoYXRvbSk7XG4gICAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGF0b20pO1xuICAgIGlmIChtb3VudGVkICYmICFpc1BlbmRpbmdQcm9taXNlKGF0b21TdGF0ZS52KSkge1xuICAgICAgZm9yIChjb25zdCBbYSwgbl0gb2YgYXRvbVN0YXRlLmQpIHtcbiAgICAgICAgaWYgKCFtb3VudGVkLmQuaGFzKGEpKSB7XG4gICAgICAgICAgY29uc3QgYVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlKGEpO1xuICAgICAgICAgIGNvbnN0IGFNb3VudGVkID0gbW91bnRBdG9tKGEpO1xuICAgICAgICAgIGFNb3VudGVkLnQuYWRkKGF0b20pO1xuICAgICAgICAgIG1vdW50ZWQuZC5hZGQoYSk7XG4gICAgICAgICAgaWYgKG4gIT09IGFTdGF0ZS5uKSB7XG4gICAgICAgICAgICBjaGFuZ2VkQXRvbXMuYWRkKGEpO1xuICAgICAgICAgICAgKF9hID0gc3RvcmVIb29rcy5jKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChzdG9yZUhvb2tzLCBhKTtcbiAgICAgICAgICAgIGludmFsaWRhdGVEZXBlbmRlbnRzKGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBhIG9mIG1vdW50ZWQuZCB8fCBbXSkge1xuICAgICAgICBpZiAoIWF0b21TdGF0ZS5kLmhhcyhhKSkge1xuICAgICAgICAgIG1vdW50ZWQuZC5kZWxldGUoYSk7XG4gICAgICAgICAgY29uc3QgYU1vdW50ZWQgPSB1bm1vdW50QXRvbShhKTtcbiAgICAgICAgICBhTW91bnRlZCA9PSBudWxsID8gdm9pZCAwIDogYU1vdW50ZWQudC5kZWxldGUoYXRvbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCBtb3VudEF0b20gPSBidWlsZGluZ0Jsb2NrRnVuY3Rpb25zWzddIHx8ICgoYXRvbSkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBhdG9tU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUoYXRvbSk7XG4gICAgbGV0IG1vdW50ZWQgPSBtb3VudGVkTWFwLmdldChhdG9tKTtcbiAgICBpZiAoIW1vdW50ZWQpIHtcbiAgICAgIHJlYWRBdG9tU3RhdGUoYXRvbSk7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbVN0YXRlLmQua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IGFNb3VudGVkID0gbW91bnRBdG9tKGEpO1xuICAgICAgICBhTW91bnRlZC50LmFkZChhdG9tKTtcbiAgICAgIH1cbiAgICAgIG1vdW50ZWQgPSB7XG4gICAgICAgIGw6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgICAgIGQ6IG5ldyBTZXQoYXRvbVN0YXRlLmQua2V5cygpKSxcbiAgICAgICAgdDogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKVxuICAgICAgfTtcbiAgICAgIG1vdW50ZWRNYXAuc2V0KGF0b20sIG1vdW50ZWQpO1xuICAgICAgKF9hID0gc3RvcmVIb29rcy5tKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChzdG9yZUhvb2tzLCBhdG9tKTtcbiAgICAgIGlmIChpc0FjdHVhbGx5V3JpdGFibGVBdG9tKGF0b20pKSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NPbk1vdW50ID0gKCkgPT4ge1xuICAgICAgICAgIGxldCBpc1N5bmMgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHNldEF0b20gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlQXRvbVN0YXRlKGF0b20sIC4uLmFyZ3MpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgaWYgKCFpc1N5bmMpIHtcbiAgICAgICAgICAgICAgICByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zKCk7XG4gICAgICAgICAgICAgICAgZmx1c2hDYWxsYmFja3MoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9uVW5tb3VudCA9IGF0b21Pbk1vdW50KGF0b20sIHNldEF0b20pO1xuICAgICAgICAgICAgaWYgKG9uVW5tb3VudCkge1xuICAgICAgICAgICAgICBtb3VudGVkLnUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXNTeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgb25Vbm1vdW50KCk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgIGlzU3luYyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaXNTeW5jID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBtb3VudENhbGxiYWNrcy5hZGQocHJvY2Vzc09uTW91bnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbW91bnRlZDtcbiAgfSk7XG4gIGNvbnN0IHVubW91bnRBdG9tID0gYnVpbGRpbmdCbG9ja0Z1bmN0aW9uc1s4XSB8fCAoKGF0b20pID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgYXRvbVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlKGF0b20pO1xuICAgIGxldCBtb3VudGVkID0gbW91bnRlZE1hcC5nZXQoYXRvbSk7XG4gICAgaWYgKG1vdW50ZWQgJiYgIW1vdW50ZWQubC5zaXplICYmICFBcnJheS5mcm9tKG1vdW50ZWQudCkuc29tZSgoYSkgPT4ge1xuICAgICAgdmFyIF9hMjtcbiAgICAgIHJldHVybiAoX2EyID0gbW91bnRlZE1hcC5nZXQoYSkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZC5oYXMoYXRvbSk7XG4gICAgfSkpIHtcbiAgICAgIGlmIChtb3VudGVkLnUpIHtcbiAgICAgICAgdW5tb3VudENhbGxiYWNrcy5hZGQobW91bnRlZC51KTtcbiAgICAgIH1cbiAgICAgIG1vdW50ZWQgPSB2b2lkIDA7XG4gICAgICBtb3VudGVkTWFwLmRlbGV0ZShhdG9tKTtcbiAgICAgIChfYSA9IHN0b3JlSG9va3MudSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoc3RvcmVIb29rcywgYXRvbSk7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbVN0YXRlLmQua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IGFNb3VudGVkID0gdW5tb3VudEF0b20oYSk7XG4gICAgICAgIGFNb3VudGVkID09IG51bGwgPyB2b2lkIDAgOiBhTW91bnRlZC50LmRlbGV0ZShhdG9tKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBtb3VudGVkO1xuICB9KTtcbiAgY29uc3QgYnVpbGRpbmdCbG9ja3MgPSBbXG4gICAgLy8gc3RvcmUgc3RhdGVcbiAgICBhdG9tU3RhdGVNYXAsXG4gICAgbW91bnRlZE1hcCxcbiAgICBpbnZhbGlkYXRlZEF0b21zLFxuICAgIGNoYW5nZWRBdG9tcyxcbiAgICBtb3VudENhbGxiYWNrcyxcbiAgICB1bm1vdW50Q2FsbGJhY2tzLFxuICAgIHN0b3JlSG9va3MsXG4gICAgLy8gYXRvbSBpbnRlcmNlcHRvcnNcbiAgICBhdG9tUmVhZCxcbiAgICBhdG9tV3JpdGUsXG4gICAgYXRvbU9uSW5pdCxcbiAgICBhdG9tT25Nb3VudCxcbiAgICAvLyBidWlsZGluZy1ibG9jayBmdW5jdGlvbnNcbiAgICBlbnN1cmVBdG9tU3RhdGUsXG4gICAgZmx1c2hDYWxsYmFja3MsXG4gICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tcyxcbiAgICByZWFkQXRvbVN0YXRlLFxuICAgIGludmFsaWRhdGVEZXBlbmRlbnRzLFxuICAgIHdyaXRlQXRvbVN0YXRlLFxuICAgIG1vdW50RGVwZW5kZW5jaWVzLFxuICAgIG1vdW50QXRvbSxcbiAgICB1bm1vdW50QXRvbVxuICBdO1xuICBjb25zdCBzdG9yZSA9IHtcbiAgICBnZXQ6IChhdG9tKSA9PiByZXR1cm5BdG9tVmFsdWUocmVhZEF0b21TdGF0ZShhdG9tKSksXG4gICAgc2V0OiAoYXRvbSwgLi4uYXJncykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHdyaXRlQXRvbVN0YXRlKGF0b20sIC4uLmFyZ3MpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tcygpO1xuICAgICAgICBmbHVzaENhbGxiYWNrcygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc3ViOiAoYXRvbSwgbGlzdGVuZXIpID0+IHtcbiAgICAgIGNvbnN0IG1vdW50ZWQgPSBtb3VudEF0b20oYXRvbSk7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSBtb3VudGVkLmw7XG4gICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgIGZsdXNoQ2FsbGJhY2tzKCk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgdW5tb3VudEF0b20oYXRvbSk7XG4gICAgICAgIGZsdXNoQ2FsbGJhY2tzKCk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCBCVUlMRElOR19CTE9DS1MsIHsgdmFsdWU6IGJ1aWxkaW5nQmxvY2tzIH0pO1xuICByZXR1cm4gc3RvcmU7XG59O1xuY29uc3QgSU5URVJOQUxfYnVpbGRTdG9yZVJldjEgPSBidWlsZFN0b3JlO1xuY29uc3QgSU5URVJOQUxfZ2V0QnVpbGRpbmdCbG9ja3NSZXYxID0gZ2V0QnVpbGRpbmdCbG9ja3M7XG5jb25zdCBJTlRFUk5BTF9pbml0aWFsaXplU3RvcmVIb29rcyA9IGluaXRpYWxpemVTdG9yZUhvb2tzO1xuY29uc3QgSU5URVJOQUxfaXNTZWxmQXRvbSA9IGlzU2VsZkF0b207XG5jb25zdCBJTlRFUk5BTF9oYXNJbml0aWFsVmFsdWUgPSBoYXNJbml0aWFsVmFsdWU7XG5jb25zdCBJTlRFUk5BTF9pc0FjdHVhbGx5V3JpdGFibGVBdG9tID0gaXNBY3R1YWxseVdyaXRhYmxlQXRvbTtcbmNvbnN0IElOVEVSTkFMX2lzQXRvbVN0YXRlSW5pdGlhbGl6ZWQgPSBpc0F0b21TdGF0ZUluaXRpYWxpemVkO1xuY29uc3QgSU5URVJOQUxfcmV0dXJuQXRvbVZhbHVlID0gcmV0dXJuQXRvbVZhbHVlO1xuY29uc3QgSU5URVJOQUxfcHJvbWlzZVN0YXRlTWFwID0gcHJvbWlzZVN0YXRlTWFwO1xuY29uc3QgSU5URVJOQUxfaXNQZW5kaW5nUHJvbWlzZSA9IGlzUGVuZGluZ1Byb21pc2U7XG5jb25zdCBJTlRFUk5BTF9hYm9ydFByb21pc2UgPSBhYm9ydFByb21pc2U7XG5jb25zdCBJTlRFUk5BTF9yZWdpc3RlckFib3J0SGFuZGxlciA9IHJlZ2lzdGVyQWJvcnRIYW5kbGVyO1xuY29uc3QgSU5URVJOQUxfaXNQcm9taXNlTGlrZSA9IGlzUHJvbWlzZUxpa2U7XG5jb25zdCBJTlRFUk5BTF9hZGRQZW5kaW5nUHJvbWlzZVRvRGVwZW5kZW5jeSA9IGFkZFBlbmRpbmdQcm9taXNlVG9EZXBlbmRlbmN5O1xuY29uc3QgSU5URVJOQUxfc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2UgPSBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZTtcbmNvbnN0IElOVEVSTkFMX2dldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzID0gZ2V0TW91bnRlZE9yUGVuZGluZ0RlcGVuZGVudHM7XG5cbmV4cG9ydCB7IElOVEVSTkFMX2Fib3J0UHJvbWlzZSwgSU5URVJOQUxfYWRkUGVuZGluZ1Byb21pc2VUb0RlcGVuZGVuY3ksIElOVEVSTkFMX2J1aWxkU3RvcmVSZXYxLCBJTlRFUk5BTF9nZXRCdWlsZGluZ0Jsb2Nrc1JldjEsIElOVEVSTkFMX2dldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzLCBJTlRFUk5BTF9oYXNJbml0aWFsVmFsdWUsIElOVEVSTkFMX2luaXRpYWxpemVTdG9yZUhvb2tzLCBJTlRFUk5BTF9pc0FjdHVhbGx5V3JpdGFibGVBdG9tLCBJTlRFUk5BTF9pc0F0b21TdGF0ZUluaXRpYWxpemVkLCBJTlRFUk5BTF9pc1BlbmRpbmdQcm9taXNlLCBJTlRFUk5BTF9pc1Byb21pc2VMaWtlLCBJTlRFUk5BTF9pc1NlbGZBdG9tLCBJTlRFUk5BTF9wcm9taXNlU3RhdGVNYXAsIElOVEVSTkFMX3JlZ2lzdGVyQWJvcnRIYW5kbGVyLCBJTlRFUk5BTF9yZXR1cm5BdG9tVmFsdWUsIElOVEVSTkFMX3NldEF0b21TdGF0ZVZhbHVlT3JQcm9taXNlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jotai/esm/vanilla/internals.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/jotai/esm/vanilla/utils.mjs":
/*!**************************************************!*\
  !*** ./node_modules/jotai/esm/vanilla/utils.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESET: () => (/* binding */ RESET),\n/* harmony export */   atomFamily: () => (/* binding */ atomFamily),\n/* harmony export */   atomWithDefault: () => (/* binding */ atomWithDefault),\n/* harmony export */   atomWithLazy: () => (/* binding */ atomWithLazy),\n/* harmony export */   atomWithObservable: () => (/* binding */ atomWithObservable),\n/* harmony export */   atomWithReducer: () => (/* binding */ atomWithReducer),\n/* harmony export */   atomWithRefresh: () => (/* binding */ atomWithRefresh),\n/* harmony export */   atomWithReset: () => (/* binding */ atomWithReset),\n/* harmony export */   atomWithStorage: () => (/* binding */ atomWithStorage),\n/* harmony export */   createJSONStorage: () => (/* binding */ createJSONStorage),\n/* harmony export */   freezeAtom: () => (/* binding */ freezeAtom),\n/* harmony export */   freezeAtomCreator: () => (/* binding */ freezeAtomCreator),\n/* harmony export */   loadable: () => (/* binding */ loadable),\n/* harmony export */   selectAtom: () => (/* binding */ selectAtom),\n/* harmony export */   splitAtom: () => (/* binding */ splitAtom),\n/* harmony export */   unstable_withStorageValidator: () => (/* binding */ withStorageValidator),\n/* harmony export */   unwrap: () => (/* binding */ unwrap)\n/* harmony export */ });\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jotai/vanilla */ \"(app-pages-browser)/./node_modules/jotai/esm/vanilla.mjs\");\n\n\nconst RESET = Symbol(\n  ( false ? 0 : void 0) !== \"production\" ? \"RESET\" : \"\"\n);\n\nfunction atomWithReset(initialValue) {\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    initialValue,\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(anAtom)) : update;\n      set(anAtom, nextValue === RESET ? initialValue : nextValue);\n    }\n  );\n  return anAtom;\n}\n\nfunction atomWithReducer(initialValue, reducer) {\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(initialValue, function(get, set, action) {\n    set(this, reducer(get(this), action));\n  });\n}\n\nfunction atomFamily(initializeAtom, areEqual) {\n  let shouldRemove = null;\n  const atoms = /* @__PURE__ */ new Map();\n  const listeners = /* @__PURE__ */ new Set();\n  const createAtom = (param) => {\n    let item;\n    if (areEqual === void 0) {\n      item = atoms.get(param);\n    } else {\n      for (const [key, value] of atoms) {\n        if (areEqual(key, param)) {\n          item = value;\n          break;\n        }\n      }\n    }\n    if (item !== void 0) {\n      if (shouldRemove == null ? void 0 : shouldRemove(item[1], param)) {\n        createAtom.remove(param);\n      } else {\n        return item[0];\n      }\n    }\n    const newAtom = initializeAtom(param);\n    atoms.set(param, [newAtom, Date.now()]);\n    notifyListeners(\"CREATE\", param, newAtom);\n    return newAtom;\n  };\n  const notifyListeners = (type, param, atom) => {\n    for (const listener of listeners) {\n      listener({ type, param, atom });\n    }\n  };\n  createAtom.unstable_listen = (callback) => {\n    listeners.add(callback);\n    return () => {\n      listeners.delete(callback);\n    };\n  };\n  createAtom.getParams = () => atoms.keys();\n  createAtom.remove = (param) => {\n    if (areEqual === void 0) {\n      if (!atoms.has(param)) return;\n      const [atom] = atoms.get(param);\n      atoms.delete(param);\n      notifyListeners(\"REMOVE\", param, atom);\n    } else {\n      for (const [key, [atom]] of atoms) {\n        if (areEqual(key, param)) {\n          atoms.delete(key);\n          notifyListeners(\"REMOVE\", key, atom);\n          break;\n        }\n      }\n    }\n  };\n  createAtom.setShouldRemove = (fn) => {\n    shouldRemove = fn;\n    if (!shouldRemove) return;\n    for (const [key, [atom, createdAt]] of atoms) {\n      if (shouldRemove(createdAt, key)) {\n        atoms.delete(key);\n        notifyListeners(\"REMOVE\", key, atom);\n      }\n    }\n  };\n  return createAtom;\n}\n\nconst getCached$2 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$3 = /* @__PURE__ */ new WeakMap();\nconst memo3 = (create, dep1, dep2, dep3) => {\n  const cache2 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache1$3, dep1);\n  const cache3 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache2, dep2);\n  return getCached$2(create, cache3, dep3);\n};\nfunction selectAtom(anAtom, selector, equalityFn = Object.is) {\n  return memo3(\n    () => {\n      const EMPTY = Symbol();\n      const selectValue = ([value, prevSlice]) => {\n        if (prevSlice === EMPTY) {\n          return selector(value);\n        }\n        const slice = selector(value, prevSlice);\n        return equalityFn(prevSlice, slice) ? prevSlice : slice;\n      };\n      const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(derivedAtom);\n        const value = get(anAtom);\n        return selectValue([value, prev]);\n      });\n      derivedAtom.init = EMPTY;\n      return derivedAtom;\n    },\n    anAtom,\n    selector,\n    equalityFn\n  );\n}\n\nconst frozenAtoms = /* @__PURE__ */ new WeakSet();\nconst deepFreeze = (value) => {\n  if (typeof value !== \"object\" || value === null) {\n    return value;\n  }\n  Object.freeze(value);\n  const propNames = Object.getOwnPropertyNames(value);\n  for (const name of propNames) {\n    deepFreeze(value[name]);\n  }\n  return value;\n};\nfunction freezeAtom(anAtom) {\n  if (frozenAtoms.has(anAtom)) {\n    return anAtom;\n  }\n  frozenAtoms.add(anAtom);\n  const origRead = anAtom.read;\n  anAtom.read = function(get, options) {\n    return deepFreeze(origRead.call(this, get, options));\n  };\n  if (\"write\" in anAtom) {\n    const origWrite = anAtom.write;\n    anAtom.write = function(get, set, ...args) {\n      return origWrite.call(\n        this,\n        get,\n        (...setArgs) => {\n          if (setArgs[0] === anAtom) {\n            setArgs[1] = deepFreeze(setArgs[1]);\n          }\n          return set(...setArgs);\n        },\n        ...args\n      );\n    };\n  }\n  return anAtom;\n}\nfunction freezeAtomCreator(createAtom) {\n  if (( false ? 0 : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] freezeAtomCreator is deprecated, define it on users end\"\n    );\n  }\n  return (...args) => freezeAtom(createAtom(...args));\n}\n\nconst getCached$1 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$2 = /* @__PURE__ */ new WeakMap();\nconst memo2$1 = (create, dep1, dep2) => {\n  const cache2 = getCached$1(() => /* @__PURE__ */ new WeakMap(), cache1$2, dep1);\n  return getCached$1(create, cache2, dep2);\n};\nconst cacheKeyForEmptyKeyExtractor = {};\nconst isWritable = (atom2) => !!atom2.write;\nconst isFunction = (x) => typeof x === \"function\";\nfunction splitAtom(arrAtom, keyExtractor) {\n  return memo2$1(\n    () => {\n      const mappingCache = /* @__PURE__ */ new WeakMap();\n      const getMapping = (arr, prev) => {\n        let mapping = mappingCache.get(arr);\n        if (mapping) {\n          return mapping;\n        }\n        const prevMapping = prev && mappingCache.get(prev);\n        const atomList = [];\n        const keyList = [];\n        arr.forEach((item, index) => {\n          const key = keyExtractor ? keyExtractor(item) : index;\n          keyList[index] = key;\n          const cachedAtom = prevMapping && prevMapping.atomList[prevMapping.keyList.indexOf(key)];\n          if (cachedAtom) {\n            atomList[index] = cachedAtom;\n            return;\n          }\n          const read = (get) => {\n            const prev2 = get(mappingAtom);\n            const currArr = get(arrAtom);\n            const mapping2 = getMapping(currArr, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= currArr.length) {\n              const prevItem = arr[getMapping(arr).keyList.indexOf(key)];\n              if (prevItem) {\n                return prevItem;\n              }\n              throw new Error(\"splitAtom: index out of bounds for read\");\n            }\n            return currArr[index2];\n          };\n          const write = (get, set, update) => {\n            const prev2 = get(mappingAtom);\n            const arr2 = get(arrAtom);\n            const mapping2 = getMapping(arr2, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= arr2.length) {\n              throw new Error(\"splitAtom: index out of bounds for write\");\n            }\n            const nextItem = isFunction(update) ? update(arr2[index2]) : update;\n            if (!Object.is(arr2[index2], nextItem)) {\n              set(arrAtom, [\n                ...arr2.slice(0, index2),\n                nextItem,\n                ...arr2.slice(index2 + 1)\n              ]);\n            }\n          };\n          atomList[index] = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read, write) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read);\n        });\n        if (prevMapping && prevMapping.keyList.length === keyList.length && prevMapping.keyList.every((x, i) => x === keyList[i])) {\n          mapping = prevMapping;\n        } else {\n          mapping = { arr, atomList, keyList };\n        }\n        mappingCache.set(arr, mapping);\n        return mapping;\n      };\n      const mappingAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(mappingAtom);\n        const arr = get(arrAtom);\n        const mapping = getMapping(arr, prev == null ? void 0 : prev.arr);\n        return mapping;\n      });\n      if (( false ? 0 : void 0) !== \"production\") {\n        mappingAtom.debugPrivate = true;\n      }\n      mappingAtom.init = void 0;\n      const splittedAtom = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => get(mappingAtom).atomList,\n        (get, set, action) => {\n          switch (action.type) {\n            case \"remove\": {\n              const index = get(splittedAtom).indexOf(action.atom);\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  ...arr.slice(index + 1)\n                ]);\n              }\n              break;\n            }\n            case \"insert\": {\n              const index = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  action.value,\n                  ...arr.slice(index)\n                ]);\n              }\n              break;\n            }\n            case \"move\": {\n              const index1 = get(splittedAtom).indexOf(action.atom);\n              const index2 = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index1 >= 0 && index2 >= 0) {\n                const arr = get(arrAtom);\n                if (index1 < index2) {\n                  set(arrAtom, [\n                    ...arr.slice(0, index1),\n                    ...arr.slice(index1 + 1, index2),\n                    arr[index1],\n                    ...arr.slice(index2)\n                  ]);\n                } else {\n                  set(arrAtom, [\n                    ...arr.slice(0, index2),\n                    arr[index1],\n                    ...arr.slice(index2, index1),\n                    ...arr.slice(index1 + 1)\n                  ]);\n                }\n              }\n              break;\n            }\n          }\n        }\n      ) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(mappingAtom).atomList);\n      return splittedAtom;\n    },\n    arrAtom,\n    keyExtractor || cacheKeyForEmptyKeyExtractor\n  );\n}\n\nfunction atomWithDefault(getDefault) {\n  const EMPTY = Symbol();\n  const overwrittenAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(EMPTY);\n  if (( false ? 0 : void 0) !== \"production\") {\n    overwrittenAtom.debugPrivate = true;\n  }\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      const overwritten = get(overwrittenAtom);\n      if (overwritten !== EMPTY) {\n        return overwritten;\n      }\n      return getDefault(get, options);\n    },\n    (get, set, update) => {\n      if (update === RESET) {\n        set(overwrittenAtom, EMPTY);\n      } else if (typeof update === \"function\") {\n        const prevValue = get(anAtom);\n        set(overwrittenAtom, update(prevValue));\n      } else {\n        set(overwrittenAtom, update);\n      }\n    }\n  );\n  return anAtom;\n}\n\nconst isPromiseLike$3 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nfunction withStorageValidator(validator) {\n  return (unknownStorage) => {\n    const storage = {\n      ...unknownStorage,\n      getItem: (key, initialValue) => {\n        const validate = (value2) => {\n          if (!validator(value2)) {\n            return initialValue;\n          }\n          return value2;\n        };\n        const value = unknownStorage.getItem(key, initialValue);\n        if (isPromiseLike$3(value)) {\n          return value.then(validate);\n        }\n        return validate(value);\n      }\n    };\n    return storage;\n  };\n}\nfunction createJSONStorage(getStringStorage = () => {\n  try {\n    return window.localStorage;\n  } catch (e) {\n    if (( false ? 0 : void 0) !== \"production\") {\n      if (typeof window !== \"undefined\") {\n        console.warn(e);\n      }\n    }\n    return void 0;\n  }\n}, options) {\n  var _a;\n  let lastStr;\n  let lastValue;\n  const storage = {\n    getItem: (key, initialValue) => {\n      var _a2, _b;\n      const parse = (str2) => {\n        str2 = str2 || \"\";\n        if (lastStr !== str2) {\n          try {\n            lastValue = JSON.parse(str2, options == null ? void 0 : options.reviver);\n          } catch (e) {\n            return initialValue;\n          }\n          lastStr = str2;\n        }\n        return lastValue;\n      };\n      const str = (_b = (_a2 = getStringStorage()) == null ? void 0 : _a2.getItem(key)) != null ? _b : null;\n      if (isPromiseLike$3(str)) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (key, newValue) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.setItem(\n        key,\n        JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n      );\n    },\n    removeItem: (key) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.removeItem(key);\n    }\n  };\n  const createHandleSubscribe = (subscriber2) => (key, callback, initialValue) => subscriber2(key, (v) => {\n    let newValue;\n    try {\n      newValue = JSON.parse(v || \"\");\n    } catch (e) {\n      newValue = initialValue;\n    }\n    callback(newValue);\n  });\n  let subscriber;\n  try {\n    subscriber = (_a = getStringStorage()) == null ? void 0 : _a.subscribe;\n  } catch (e) {\n  }\n  if (!subscriber && typeof window !== \"undefined\" && typeof window.addEventListener === \"function\" && window.Storage) {\n    subscriber = (key, callback) => {\n      if (!(getStringStorage() instanceof window.Storage)) {\n        return () => {\n        };\n      }\n      const storageEventCallback = (e) => {\n        if (e.storageArea === getStringStorage() && e.key === key) {\n          callback(e.newValue);\n        }\n      };\n      window.addEventListener(\"storage\", storageEventCallback);\n      return () => {\n        window.removeEventListener(\"storage\", storageEventCallback);\n      };\n    };\n  }\n  if (subscriber) {\n    storage.subscribe = createHandleSubscribe(subscriber);\n  }\n  return storage;\n}\nconst defaultStorage = createJSONStorage();\nfunction atomWithStorage(key, initialValue, storage = defaultStorage, options) {\n  const getOnInit = options == null ? void 0 : options.getOnInit;\n  const baseAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    getOnInit ? storage.getItem(key, initialValue) : initialValue\n  );\n  if (( false ? 0 : void 0) !== \"production\") {\n    baseAtom.debugPrivate = true;\n  }\n  baseAtom.onMount = (setAtom) => {\n    setAtom(storage.getItem(key, initialValue));\n    let unsub;\n    if (storage.subscribe) {\n      unsub = storage.subscribe(key, setAtom, initialValue);\n    }\n    return unsub;\n  };\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => get(baseAtom),\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(baseAtom)) : update;\n      if (nextValue === RESET) {\n        set(baseAtom, initialValue);\n        return storage.removeItem(key);\n      }\n      if (isPromiseLike$3(nextValue)) {\n        return nextValue.then((resolvedValue) => {\n          set(baseAtom, resolvedValue);\n          return storage.setItem(key, resolvedValue);\n        });\n      }\n      set(baseAtom, nextValue);\n      return storage.setItem(key, nextValue);\n    }\n  );\n  return anAtom;\n}\n\nconst isPromiseLike$2 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nfunction atomWithObservable(getObservable, options) {\n  const returnResultData = (result) => {\n    if (\"e\" in result) {\n      throw result.e;\n    }\n    return result.d;\n  };\n  const observableResultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n    var _a;\n    let observable = getObservable(get);\n    const itself = (_a = observable[Symbol.observable]) == null ? void 0 : _a.call(observable);\n    if (itself) {\n      observable = itself;\n    }\n    let resolve;\n    const makePending = () => new Promise((r) => {\n      resolve = r;\n    });\n    const initialResult = options && \"initialValue\" in options ? {\n      d: typeof options.initialValue === \"function\" ? options.initialValue() : options.initialValue\n    } : makePending();\n    let setResult;\n    let lastResult;\n    const listener = (result) => {\n      lastResult = result;\n      resolve == null ? void 0 : resolve(result);\n      setResult == null ? void 0 : setResult(result);\n    };\n    let subscription;\n    let timer;\n    const isNotMounted = () => !setResult;\n    const unsubscribe = () => {\n      if (subscription) {\n        subscription.unsubscribe();\n        subscription = void 0;\n      }\n    };\n    const start = () => {\n      if (subscription) {\n        clearTimeout(timer);\n        subscription.unsubscribe();\n      }\n      subscription = observable.subscribe({\n        next: (d) => listener({ d }),\n        error: (e) => listener({ e }),\n        complete: () => {\n        }\n      });\n      if (isNotMounted() && (options == null ? void 0 : options.unstable_timeout)) {\n        timer = setTimeout(unsubscribe, options.unstable_timeout);\n      }\n    };\n    start();\n    const resultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(lastResult || initialResult);\n    if (( false ? 0 : void 0) !== \"production\") {\n      resultAtom.debugPrivate = true;\n    }\n    resultAtom.onMount = (update) => {\n      setResult = update;\n      if (lastResult) {\n        update(lastResult);\n      }\n      if (subscription) {\n        clearTimeout(timer);\n      } else {\n        start();\n      }\n      return () => {\n        setResult = void 0;\n        if (options == null ? void 0 : options.unstable_timeout) {\n          timer = setTimeout(unsubscribe, options.unstable_timeout);\n        } else {\n          unsubscribe();\n        }\n      };\n    };\n    return [resultAtom, observable, makePending, start, isNotMounted];\n  });\n  if (( false ? 0 : void 0) !== \"production\") {\n    observableResultAtom.debugPrivate = true;\n  }\n  const observableAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => {\n      const [resultAtom] = get(observableResultAtom);\n      const result = get(resultAtom);\n      if (isPromiseLike$2(result)) {\n        return result.then(returnResultData);\n      }\n      return returnResultData(result);\n    },\n    (get, set, data) => {\n      const [resultAtom, observable, makePending, start, isNotMounted] = get(observableResultAtom);\n      if (\"next\" in observable) {\n        if (isNotMounted()) {\n          set(resultAtom, makePending());\n          start();\n        }\n        observable.next(data);\n      } else {\n        throw new Error(\"observable is not subject\");\n      }\n    }\n  );\n  return observableAtom;\n}\n\nconst cache1$1 = /* @__PURE__ */ new WeakMap();\nconst memo1 = (create, dep1) => (cache1$1.has(dep1) ? cache1$1 : cache1$1.set(dep1, create())).get(dep1);\nconst isPromiseLike$1 = (p) => typeof (p == null ? void 0 : p.then) === \"function\";\nconst LOADING = { state: \"loading\" };\nfunction loadable(anAtom) {\n  return memo1(() => {\n    const loadableCache = /* @__PURE__ */ new WeakMap();\n    const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n    if (( false ? 0 : void 0) !== \"production\") {\n      refreshAtom.debugPrivate = true;\n    }\n    const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n      (get, { setSelf }) => {\n        get(refreshAtom);\n        let value;\n        try {\n          value = get(anAtom);\n        } catch (error) {\n          return { state: \"hasError\", error };\n        }\n        if (!isPromiseLike$1(value)) {\n          return { state: \"hasData\", data: value };\n        }\n        const promise = value;\n        const cached1 = loadableCache.get(promise);\n        if (cached1) {\n          return cached1;\n        }\n        promise.then(\n          (data) => {\n            loadableCache.set(promise, { state: \"hasData\", data });\n            setSelf();\n          },\n          (error) => {\n            loadableCache.set(promise, { state: \"hasError\", error });\n            setSelf();\n          }\n        );\n        const cached2 = loadableCache.get(promise);\n        if (cached2) {\n          return cached2;\n        }\n        loadableCache.set(promise, LOADING);\n        return LOADING;\n      },\n      (_get, set) => {\n        set(refreshAtom, (c) => c + 1);\n      }\n    );\n    if (( false ? 0 : void 0) !== \"production\") {\n      derivedAtom.debugPrivate = true;\n    }\n    return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(derivedAtom));\n  }, anAtom);\n}\n\nconst getCached = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1 = /* @__PURE__ */ new WeakMap();\nconst memo2 = (create, dep1, dep2) => {\n  const cache2 = getCached(() => /* @__PURE__ */ new WeakMap(), cache1, dep1);\n  return getCached(create, cache2, dep2);\n};\nconst isPromiseLike = (p) => typeof (p == null ? void 0 : p.then) === \"function\";\nconst defaultFallback = () => void 0;\nfunction unwrap(anAtom, fallback = defaultFallback) {\n  return memo2(\n    () => {\n      const promiseErrorCache = /* @__PURE__ */ new WeakMap();\n      const promiseResultCache = /* @__PURE__ */ new WeakMap();\n      const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n      if (( false ? 0 : void 0) !== \"production\") {\n        refreshAtom.debugPrivate = true;\n      }\n      const promiseAndValueAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get, { setSelf }) => {\n          get(refreshAtom);\n          const prev = get(promiseAndValueAtom);\n          const promise = get(anAtom);\n          if (!isPromiseLike(promise)) {\n            return { v: promise };\n          }\n          if (promise !== (prev == null ? void 0 : prev.p)) {\n            promise.then(\n              (v) => {\n                promiseResultCache.set(promise, v);\n                setSelf();\n              },\n              (e) => {\n                promiseErrorCache.set(promise, e);\n                setSelf();\n              }\n            );\n          }\n          if (promiseErrorCache.has(promise)) {\n            throw promiseErrorCache.get(promise);\n          }\n          if (promiseResultCache.has(promise)) {\n            return {\n              p: promise,\n              v: promiseResultCache.get(promise)\n            };\n          }\n          if (prev && \"v\" in prev) {\n            return { p: promise, f: fallback(prev.v), v: prev.v };\n          }\n          return { p: promise, f: fallback() };\n        },\n        (_get, set) => {\n          set(refreshAtom, (c) => c + 1);\n        }\n      );\n      promiseAndValueAtom.init = void 0;\n      if (( false ? 0 : void 0) !== \"production\") {\n        promiseAndValueAtom.debugPrivate = true;\n      }\n      return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => {\n          const state = get(promiseAndValueAtom);\n          if (\"f\" in state) {\n            return state.f;\n          }\n          return state.v;\n        },\n        (_get, set, ...args) => set(anAtom, ...args)\n      );\n    },\n    anAtom,\n    fallback\n  );\n}\n\nfunction atomWithRefresh(read, write) {\n  const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n  if (( false ? 0 : void 0) !== \"production\") {\n    refreshAtom.debugPrivate = true;\n  }\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      get(refreshAtom);\n      return read(get, options);\n    },\n    (get, set, ...args) => {\n      if (args.length === 0) {\n        set(refreshAtom, (c) => c + 1);\n      } else if (write) {\n        return write(get, set, ...args);\n      } else if (( false ? 0 : void 0) !== \"production\") {\n        throw new Error(\"refresh must be called without arguments\");\n      }\n    }\n  );\n}\n\nfunction atomWithLazy(makeInitial) {\n  const a = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(void 0);\n  delete a.init;\n  Object.defineProperty(a, \"init\", {\n    get() {\n      return makeInitial();\n    }\n  });\n  return a;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDOztBQUVyQztBQUNBLEdBQUcsTUFBZSxHQUFHLENBQW9CO0FBQ3pDOztBQUVBO0FBQ0EsaUJBQWlCLG1EQUFJO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLG1EQUFJO0FBQ2I7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbURBQUk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQixtREFBSTtBQUMxQixPQUFPLE1BQWUsR0FBRyxDQUFvQjtBQUM3QztBQUNBO0FBQ0EsU0FBUyxtREFBSTtBQUNiO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRLFVBQVUsTUFBZSxHQUFHLENBQW9CO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFb1MiLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxub2RlX21vZHVsZXNcXGpvdGFpXFxlc21cXHZhbmlsbGFcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWkvdmFuaWxsYSc7XG5cbmNvbnN0IFJFU0VUID0gU3ltYm9sKFxuICAoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiA/IFwiUkVTRVRcIiA6IFwiXCJcbik7XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVzZXQoaW5pdGlhbFZhbHVlKSB7XG4gIGNvbnN0IGFuQXRvbSA9IGF0b20oXG4gICAgaW5pdGlhbFZhbHVlLFxuICAgIChnZXQsIHNldCwgdXBkYXRlKSA9PiB7XG4gICAgICBjb25zdCBuZXh0VmFsdWUgPSB0eXBlb2YgdXBkYXRlID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGUoZ2V0KGFuQXRvbSkpIDogdXBkYXRlO1xuICAgICAgc2V0KGFuQXRvbSwgbmV4dFZhbHVlID09PSBSRVNFVCA/IGluaXRpYWxWYWx1ZSA6IG5leHRWYWx1ZSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aFJlZHVjZXIoaW5pdGlhbFZhbHVlLCByZWR1Y2VyKSB7XG4gIHJldHVybiBhdG9tKGluaXRpYWxWYWx1ZSwgZnVuY3Rpb24oZ2V0LCBzZXQsIGFjdGlvbikge1xuICAgIHNldCh0aGlzLCByZWR1Y2VyKGdldCh0aGlzKSwgYWN0aW9uKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhdG9tRmFtaWx5KGluaXRpYWxpemVBdG9tLCBhcmVFcXVhbCkge1xuICBsZXQgc2hvdWxkUmVtb3ZlID0gbnVsbDtcbiAgY29uc3QgYXRvbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBjcmVhdGVBdG9tID0gKHBhcmFtKSA9PiB7XG4gICAgbGV0IGl0ZW07XG4gICAgaWYgKGFyZUVxdWFsID09PSB2b2lkIDApIHtcbiAgICAgIGl0ZW0gPSBhdG9tcy5nZXQocGFyYW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBhdG9tcykge1xuICAgICAgICBpZiAoYXJlRXF1YWwoa2V5LCBwYXJhbSkpIHtcbiAgICAgICAgICBpdGVtID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW0gIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHNob3VsZFJlbW92ZSA9PSBudWxsID8gdm9pZCAwIDogc2hvdWxkUmVtb3ZlKGl0ZW1bMV0sIHBhcmFtKSkge1xuICAgICAgICBjcmVhdGVBdG9tLnJlbW92ZShwYXJhbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXRlbVswXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV3QXRvbSA9IGluaXRpYWxpemVBdG9tKHBhcmFtKTtcbiAgICBhdG9tcy5zZXQocGFyYW0sIFtuZXdBdG9tLCBEYXRlLm5vdygpXSk7XG4gICAgbm90aWZ5TGlzdGVuZXJzKFwiQ1JFQVRFXCIsIHBhcmFtLCBuZXdBdG9tKTtcbiAgICByZXR1cm4gbmV3QXRvbTtcbiAgfTtcbiAgY29uc3Qgbm90aWZ5TGlzdGVuZXJzID0gKHR5cGUsIHBhcmFtLCBhdG9tKSA9PiB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyKHsgdHlwZSwgcGFyYW0sIGF0b20gfSk7XG4gICAgfVxuICB9O1xuICBjcmVhdGVBdG9tLnVuc3RhYmxlX2xpc3RlbiA9IChjYWxsYmFjaykgPT4ge1xuICAgIGxpc3RlbmVycy5hZGQoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICB9O1xuICB9O1xuICBjcmVhdGVBdG9tLmdldFBhcmFtcyA9ICgpID0+IGF0b21zLmtleXMoKTtcbiAgY3JlYXRlQXRvbS5yZW1vdmUgPSAocGFyYW0pID0+IHtcbiAgICBpZiAoYXJlRXF1YWwgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFhdG9tcy5oYXMocGFyYW0pKSByZXR1cm47XG4gICAgICBjb25zdCBbYXRvbV0gPSBhdG9tcy5nZXQocGFyYW0pO1xuICAgICAgYXRvbXMuZGVsZXRlKHBhcmFtKTtcbiAgICAgIG5vdGlmeUxpc3RlbmVycyhcIlJFTU9WRVwiLCBwYXJhbSwgYXRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgW2F0b21dXSBvZiBhdG9tcykge1xuICAgICAgICBpZiAoYXJlRXF1YWwoa2V5LCBwYXJhbSkpIHtcbiAgICAgICAgICBhdG9tcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICBub3RpZnlMaXN0ZW5lcnMoXCJSRU1PVkVcIiwga2V5LCBhdG9tKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY3JlYXRlQXRvbS5zZXRTaG91bGRSZW1vdmUgPSAoZm4pID0+IHtcbiAgICBzaG91bGRSZW1vdmUgPSBmbjtcbiAgICBpZiAoIXNob3VsZFJlbW92ZSkgcmV0dXJuO1xuICAgIGZvciAoY29uc3QgW2tleSwgW2F0b20sIGNyZWF0ZWRBdF1dIG9mIGF0b21zKSB7XG4gICAgICBpZiAoc2hvdWxkUmVtb3ZlKGNyZWF0ZWRBdCwga2V5KSkge1xuICAgICAgICBhdG9tcy5kZWxldGUoa2V5KTtcbiAgICAgICAgbm90aWZ5TGlzdGVuZXJzKFwiUkVNT1ZFXCIsIGtleSwgYXRvbSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gY3JlYXRlQXRvbTtcbn1cblxuY29uc3QgZ2V0Q2FjaGVkJDIgPSAoYywgbSwgaykgPT4gKG0uaGFzKGspID8gbSA6IG0uc2V0KGssIGMoKSkpLmdldChrKTtcbmNvbnN0IGNhY2hlMSQzID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBtZW1vMyA9IChjcmVhdGUsIGRlcDEsIGRlcDIsIGRlcDMpID0+IHtcbiAgY29uc3QgY2FjaGUyID0gZ2V0Q2FjaGVkJDIoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNhY2hlMSQzLCBkZXAxKTtcbiAgY29uc3QgY2FjaGUzID0gZ2V0Q2FjaGVkJDIoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNhY2hlMiwgZGVwMik7XG4gIHJldHVybiBnZXRDYWNoZWQkMihjcmVhdGUsIGNhY2hlMywgZGVwMyk7XG59O1xuZnVuY3Rpb24gc2VsZWN0QXRvbShhbkF0b20sIHNlbGVjdG9yLCBlcXVhbGl0eUZuID0gT2JqZWN0LmlzKSB7XG4gIHJldHVybiBtZW1vMyhcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBFTVBUWSA9IFN5bWJvbCgpO1xuICAgICAgY29uc3Qgc2VsZWN0VmFsdWUgPSAoW3ZhbHVlLCBwcmV2U2xpY2VdKSA9PiB7XG4gICAgICAgIGlmIChwcmV2U2xpY2UgPT09IEVNUFRZKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGljZSA9IHNlbGVjdG9yKHZhbHVlLCBwcmV2U2xpY2UpO1xuICAgICAgICByZXR1cm4gZXF1YWxpdHlGbihwcmV2U2xpY2UsIHNsaWNlKSA/IHByZXZTbGljZSA6IHNsaWNlO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGRlcml2ZWRBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXYgPSBnZXQoZGVyaXZlZEF0b20pO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldChhbkF0b20pO1xuICAgICAgICByZXR1cm4gc2VsZWN0VmFsdWUoW3ZhbHVlLCBwcmV2XSk7XG4gICAgICB9KTtcbiAgICAgIGRlcml2ZWRBdG9tLmluaXQgPSBFTVBUWTtcbiAgICAgIHJldHVybiBkZXJpdmVkQXRvbTtcbiAgICB9LFxuICAgIGFuQXRvbSxcbiAgICBzZWxlY3RvcixcbiAgICBlcXVhbGl0eUZuXG4gICk7XG59XG5cbmNvbnN0IGZyb3plbkF0b21zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG5jb25zdCBkZWVwRnJlZXplID0gKHZhbHVlKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgT2JqZWN0LmZyZWV6ZSh2YWx1ZSk7XG4gIGNvbnN0IHByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgZm9yIChjb25zdCBuYW1lIG9mIHByb3BOYW1lcykge1xuICAgIGRlZXBGcmVlemUodmFsdWVbbmFtZV0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5mdW5jdGlvbiBmcmVlemVBdG9tKGFuQXRvbSkge1xuICBpZiAoZnJvemVuQXRvbXMuaGFzKGFuQXRvbSkpIHtcbiAgICByZXR1cm4gYW5BdG9tO1xuICB9XG4gIGZyb3plbkF0b21zLmFkZChhbkF0b20pO1xuICBjb25zdCBvcmlnUmVhZCA9IGFuQXRvbS5yZWFkO1xuICBhbkF0b20ucmVhZCA9IGZ1bmN0aW9uKGdldCwgb3B0aW9ucykge1xuICAgIHJldHVybiBkZWVwRnJlZXplKG9yaWdSZWFkLmNhbGwodGhpcywgZ2V0LCBvcHRpb25zKSk7XG4gIH07XG4gIGlmIChcIndyaXRlXCIgaW4gYW5BdG9tKSB7XG4gICAgY29uc3Qgb3JpZ1dyaXRlID0gYW5BdG9tLndyaXRlO1xuICAgIGFuQXRvbS53cml0ZSA9IGZ1bmN0aW9uKGdldCwgc2V0LCAuLi5hcmdzKSB7XG4gICAgICByZXR1cm4gb3JpZ1dyaXRlLmNhbGwoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGdldCxcbiAgICAgICAgKC4uLnNldEFyZ3MpID0+IHtcbiAgICAgICAgICBpZiAoc2V0QXJnc1swXSA9PT0gYW5BdG9tKSB7XG4gICAgICAgICAgICBzZXRBcmdzWzFdID0gZGVlcEZyZWV6ZShzZXRBcmdzWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHNldCguLi5zZXRBcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgLi4uYXJnc1xuICAgICAgKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBhbkF0b207XG59XG5mdW5jdGlvbiBmcmVlemVBdG9tQ3JlYXRvcihjcmVhdGVBdG9tKSB7XG4gIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiW0RFUFJFQ0FURURdIGZyZWV6ZUF0b21DcmVhdG9yIGlzIGRlcHJlY2F0ZWQsIGRlZmluZSBpdCBvbiB1c2VycyBlbmRcIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuICguLi5hcmdzKSA9PiBmcmVlemVBdG9tKGNyZWF0ZUF0b20oLi4uYXJncykpO1xufVxuXG5jb25zdCBnZXRDYWNoZWQkMSA9IChjLCBtLCBrKSA9PiAobS5oYXMoaykgPyBtIDogbS5zZXQoaywgYygpKSkuZ2V0KGspO1xuY29uc3QgY2FjaGUxJDIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1lbW8yJDEgPSAoY3JlYXRlLCBkZXAxLCBkZXAyKSA9PiB7XG4gIGNvbnN0IGNhY2hlMiA9IGdldENhY2hlZCQxKCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjYWNoZTEkMiwgZGVwMSk7XG4gIHJldHVybiBnZXRDYWNoZWQkMShjcmVhdGUsIGNhY2hlMiwgZGVwMik7XG59O1xuY29uc3QgY2FjaGVLZXlGb3JFbXB0eUtleUV4dHJhY3RvciA9IHt9O1xuY29uc3QgaXNXcml0YWJsZSA9IChhdG9tMikgPT4gISFhdG9tMi53cml0ZTtcbmNvbnN0IGlzRnVuY3Rpb24gPSAoeCkgPT4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcbmZ1bmN0aW9uIHNwbGl0QXRvbShhcnJBdG9tLCBrZXlFeHRyYWN0b3IpIHtcbiAgcmV0dXJuIG1lbW8yJDEoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgbWFwcGluZ0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gICAgICBjb25zdCBnZXRNYXBwaW5nID0gKGFyciwgcHJldikgPT4ge1xuICAgICAgICBsZXQgbWFwcGluZyA9IG1hcHBpbmdDYWNoZS5nZXQoYXJyKTtcbiAgICAgICAgaWYgKG1hcHBpbmcpIHtcbiAgICAgICAgICByZXR1cm4gbWFwcGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2TWFwcGluZyA9IHByZXYgJiYgbWFwcGluZ0NhY2hlLmdldChwcmV2KTtcbiAgICAgICAgY29uc3QgYXRvbUxpc3QgPSBbXTtcbiAgICAgICAgY29uc3Qga2V5TGlzdCA9IFtdO1xuICAgICAgICBhcnIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBrZXlFeHRyYWN0b3IgPyBrZXlFeHRyYWN0b3IoaXRlbSkgOiBpbmRleDtcbiAgICAgICAgICBrZXlMaXN0W2luZGV4XSA9IGtleTtcbiAgICAgICAgICBjb25zdCBjYWNoZWRBdG9tID0gcHJldk1hcHBpbmcgJiYgcHJldk1hcHBpbmcuYXRvbUxpc3RbcHJldk1hcHBpbmcua2V5TGlzdC5pbmRleE9mKGtleSldO1xuICAgICAgICAgIGlmIChjYWNoZWRBdG9tKSB7XG4gICAgICAgICAgICBhdG9tTGlzdFtpbmRleF0gPSBjYWNoZWRBdG9tO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZWFkID0gKGdldCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJldjIgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICAgICAgY29uc3QgY3VyckFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcyID0gZ2V0TWFwcGluZyhjdXJyQXJyLCBwcmV2MiA9PSBudWxsID8gdm9pZCAwIDogcHJldjIuYXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hcHBpbmcyLmtleUxpc3QuaW5kZXhPZihrZXkpO1xuICAgICAgICAgICAgaWYgKGluZGV4MiA8IDAgfHwgaW5kZXgyID49IGN1cnJBcnIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZJdGVtID0gYXJyW2dldE1hcHBpbmcoYXJyKS5rZXlMaXN0LmluZGV4T2Yoa2V5KV07XG4gICAgICAgICAgICAgIGlmIChwcmV2SXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2SXRlbTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzcGxpdEF0b206IGluZGV4IG91dCBvZiBib3VuZHMgZm9yIHJlYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VyckFycltpbmRleDJdO1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3Qgd3JpdGUgPSAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJldjIgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICAgICAgY29uc3QgYXJyMiA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcyID0gZ2V0TWFwcGluZyhhcnIyLCBwcmV2MiA9PSBudWxsID8gdm9pZCAwIDogcHJldjIuYXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hcHBpbmcyLmtleUxpc3QuaW5kZXhPZihrZXkpO1xuICAgICAgICAgICAgaWYgKGluZGV4MiA8IDAgfHwgaW5kZXgyID49IGFycjIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInNwbGl0QXRvbTogaW5kZXggb3V0IG9mIGJvdW5kcyBmb3Igd3JpdGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXh0SXRlbSA9IGlzRnVuY3Rpb24odXBkYXRlKSA/IHVwZGF0ZShhcnIyW2luZGV4Ml0pIDogdXBkYXRlO1xuICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMoYXJyMltpbmRleDJdLCBuZXh0SXRlbSkpIHtcbiAgICAgICAgICAgICAgc2V0KGFyckF0b20sIFtcbiAgICAgICAgICAgICAgICAuLi5hcnIyLnNsaWNlKDAsIGluZGV4MiksXG4gICAgICAgICAgICAgICAgbmV4dEl0ZW0sXG4gICAgICAgICAgICAgICAgLi4uYXJyMi5zbGljZShpbmRleDIgKyAxKVxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGF0b21MaXN0W2luZGV4XSA9IGlzV3JpdGFibGUoYXJyQXRvbSkgPyBhdG9tKHJlYWQsIHdyaXRlKSA6IGF0b20ocmVhZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocHJldk1hcHBpbmcgJiYgcHJldk1hcHBpbmcua2V5TGlzdC5sZW5ndGggPT09IGtleUxpc3QubGVuZ3RoICYmIHByZXZNYXBwaW5nLmtleUxpc3QuZXZlcnkoKHgsIGkpID0+IHggPT09IGtleUxpc3RbaV0pKSB7XG4gICAgICAgICAgbWFwcGluZyA9IHByZXZNYXBwaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcHBpbmcgPSB7IGFyciwgYXRvbUxpc3QsIGtleUxpc3QgfTtcbiAgICAgICAgfVxuICAgICAgICBtYXBwaW5nQ2FjaGUuc2V0KGFyciwgbWFwcGluZyk7XG4gICAgICAgIHJldHVybiBtYXBwaW5nO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG1hcHBpbmdBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXYgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgIGNvbnN0IG1hcHBpbmcgPSBnZXRNYXBwaW5nKGFyciwgcHJldiA9PSBudWxsID8gdm9pZCAwIDogcHJldi5hcnIpO1xuICAgICAgICByZXR1cm4gbWFwcGluZztcbiAgICAgIH0pO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIG1hcHBpbmdBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBtYXBwaW5nQXRvbS5pbml0ID0gdm9pZCAwO1xuICAgICAgY29uc3Qgc3BsaXR0ZWRBdG9tID0gaXNXcml0YWJsZShhcnJBdG9tKSA/IGF0b20oXG4gICAgICAgIChnZXQpID0+IGdldChtYXBwaW5nQXRvbSkuYXRvbUxpc3QsXG4gICAgICAgIChnZXQsIHNldCwgYWN0aW9uKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0KHNwbGl0dGVkQXRvbSkuaW5kZXhPZihhY3Rpb24uYXRvbSk7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbnNlcnRcIjoge1xuICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGFjdGlvbi5iZWZvcmUgPyBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5iZWZvcmUpIDogZ2V0KHNwbGl0dGVkQXRvbSkubGVuZ3RoO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleClcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZXgxID0gZ2V0KHNwbGl0dGVkQXRvbSkuaW5kZXhPZihhY3Rpb24uYXRvbSk7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IGFjdGlvbi5iZWZvcmUgPyBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5iZWZvcmUpIDogZ2V0KHNwbGl0dGVkQXRvbSkubGVuZ3RoO1xuICAgICAgICAgICAgICBpZiAoaW5kZXgxID49IDAgJiYgaW5kZXgyID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4MSA8IGluZGV4Mikge1xuICAgICAgICAgICAgICAgICAgc2V0KGFyckF0b20sIFtcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKDAsIGluZGV4MSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDEgKyAxLCBpbmRleDIpLFxuICAgICAgICAgICAgICAgICAgICBhcnJbaW5kZXgxXSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4MilcbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgyKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyW2luZGV4MV0sXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDIsIGluZGV4MSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDEgKyAxKVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSA6IGF0b20oKGdldCkgPT4gZ2V0KG1hcHBpbmdBdG9tKS5hdG9tTGlzdCk7XG4gICAgICByZXR1cm4gc3BsaXR0ZWRBdG9tO1xuICAgIH0sXG4gICAgYXJyQXRvbSxcbiAgICBrZXlFeHRyYWN0b3IgfHwgY2FjaGVLZXlGb3JFbXB0eUtleUV4dHJhY3RvclxuICApO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aERlZmF1bHQoZ2V0RGVmYXVsdCkge1xuICBjb25zdCBFTVBUWSA9IFN5bWJvbCgpO1xuICBjb25zdCBvdmVyd3JpdHRlbkF0b20gPSBhdG9tKEVNUFRZKTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgb3ZlcndyaXR0ZW5BdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gIH1cbiAgY29uc3QgYW5BdG9tID0gYXRvbShcbiAgICAoZ2V0LCBvcHRpb25zKSA9PiB7XG4gICAgICBjb25zdCBvdmVyd3JpdHRlbiA9IGdldChvdmVyd3JpdHRlbkF0b20pO1xuICAgICAgaWYgKG92ZXJ3cml0dGVuICE9PSBFTVBUWSkge1xuICAgICAgICByZXR1cm4gb3ZlcndyaXR0ZW47XG4gICAgICB9XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdChnZXQsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgKGdldCwgc2V0LCB1cGRhdGUpID0+IHtcbiAgICAgIGlmICh1cGRhdGUgPT09IFJFU0VUKSB7XG4gICAgICAgIHNldChvdmVyd3JpdHRlbkF0b20sIEVNUFRZKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IGdldChhbkF0b20pO1xuICAgICAgICBzZXQob3ZlcndyaXR0ZW5BdG9tLCB1cGRhdGUocHJldlZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXQob3ZlcndyaXR0ZW5BdG9tLCB1cGRhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGFuQXRvbTtcbn1cblxuY29uc3QgaXNQcm9taXNlTGlrZSQzID0gKHgpID0+IHR5cGVvZiAoeCA9PSBudWxsID8gdm9pZCAwIDogeC50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gd2l0aFN0b3JhZ2VWYWxpZGF0b3IodmFsaWRhdG9yKSB7XG4gIHJldHVybiAodW5rbm93blN0b3JhZ2UpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID0ge1xuICAgICAgLi4udW5rbm93blN0b3JhZ2UsXG4gICAgICBnZXRJdGVtOiAoa2V5LCBpbml0aWFsVmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGUgPSAodmFsdWUyKSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlMjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB1bmtub3duU3RvcmFnZS5nZXRJdGVtKGtleSwgaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UkMyh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUudGhlbih2YWxpZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBzdG9yYWdlO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSlNPTlN0b3JhZ2UoZ2V0U3RyaW5nU3RvcmFnZSA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59LCBvcHRpb25zKSB7XG4gIHZhciBfYTtcbiAgbGV0IGxhc3RTdHI7XG4gIGxldCBsYXN0VmFsdWU7XG4gIGNvbnN0IHN0b3JhZ2UgPSB7XG4gICAgZ2V0SXRlbTogKGtleSwgaW5pdGlhbFZhbHVlKSA9PiB7XG4gICAgICB2YXIgX2EyLCBfYjtcbiAgICAgIGNvbnN0IHBhcnNlID0gKHN0cjIpID0+IHtcbiAgICAgICAgc3RyMiA9IHN0cjIgfHwgXCJcIjtcbiAgICAgICAgaWYgKGxhc3RTdHIgIT09IHN0cjIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gSlNPTi5wYXJzZShzdHIyLCBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJldml2ZXIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RTdHIgPSBzdHIyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICB9O1xuICAgICAgY29uc3Qgc3RyID0gKF9iID0gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5nZXRJdGVtKGtleSkpICE9IG51bGwgPyBfYiA6IG51bGw7XG4gICAgICBpZiAoaXNQcm9taXNlTGlrZSQzKHN0cikpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50aGVuKHBhcnNlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZShzdHIpO1xuICAgIH0sXG4gICAgc2V0SXRlbTogKGtleSwgbmV3VmFsdWUpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zZXRJdGVtKFxuICAgICAgICBrZXksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlLCBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJlcGxhY2VyKVxuICAgICAgKTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IChrZXkpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5yZW1vdmVJdGVtKGtleSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVIYW5kbGVTdWJzY3JpYmUgPSAoc3Vic2NyaWJlcjIpID0+IChrZXksIGNhbGxiYWNrLCBpbml0aWFsVmFsdWUpID0+IHN1YnNjcmliZXIyKGtleSwgKHYpID0+IHtcbiAgICBsZXQgbmV3VmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIG5ld1ZhbHVlID0gSlNPTi5wYXJzZSh2IHx8IFwiXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG5ld1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIH1cbiAgICBjYWxsYmFjayhuZXdWYWx1ZSk7XG4gIH0pO1xuICBsZXQgc3Vic2NyaWJlcjtcbiAgdHJ5IHtcbiAgICBzdWJzY3JpYmVyID0gKF9hID0gZ2V0U3RyaW5nU3RvcmFnZSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3Vic2NyaWJlO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgaWYgKCFzdWJzY3JpYmVyICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgJiYgd2luZG93LlN0b3JhZ2UpIHtcbiAgICBzdWJzY3JpYmVyID0gKGtleSwgY2FsbGJhY2spID0+IHtcbiAgICAgIGlmICghKGdldFN0cmluZ1N0b3JhZ2UoKSBpbnN0YW5jZW9mIHdpbmRvdy5TdG9yYWdlKSkge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RvcmFnZUV2ZW50Q2FsbGJhY2sgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5zdG9yYWdlQXJlYSA9PT0gZ2V0U3RyaW5nU3RvcmFnZSgpICYmIGUua2V5ID09PSBrZXkpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLm5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBzdG9yYWdlRXZlbnRDYWxsYmFjayk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgc3RvcmFnZUV2ZW50Q2FsbGJhY2spO1xuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgc3RvcmFnZS5zdWJzY3JpYmUgPSBjcmVhdGVIYW5kbGVTdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gIH1cbiAgcmV0dXJuIHN0b3JhZ2U7XG59XG5jb25zdCBkZWZhdWx0U3RvcmFnZSA9IGNyZWF0ZUpTT05TdG9yYWdlKCk7XG5mdW5jdGlvbiBhdG9tV2l0aFN0b3JhZ2Uoa2V5LCBpbml0aWFsVmFsdWUsIHN0b3JhZ2UgPSBkZWZhdWx0U3RvcmFnZSwgb3B0aW9ucykge1xuICBjb25zdCBnZXRPbkluaXQgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmdldE9uSW5pdDtcbiAgY29uc3QgYmFzZUF0b20gPSBhdG9tKFxuICAgIGdldE9uSW5pdCA/IHN0b3JhZ2UuZ2V0SXRlbShrZXksIGluaXRpYWxWYWx1ZSkgOiBpbml0aWFsVmFsdWVcbiAgKTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgYmFzZUF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgfVxuICBiYXNlQXRvbS5vbk1vdW50ID0gKHNldEF0b20pID0+IHtcbiAgICBzZXRBdG9tKHN0b3JhZ2UuZ2V0SXRlbShrZXksIGluaXRpYWxWYWx1ZSkpO1xuICAgIGxldCB1bnN1YjtcbiAgICBpZiAoc3RvcmFnZS5zdWJzY3JpYmUpIHtcbiAgICAgIHVuc3ViID0gc3RvcmFnZS5zdWJzY3JpYmUoa2V5LCBzZXRBdG9tLCBpbml0aWFsVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5zdWI7XG4gIH07XG4gIGNvbnN0IGFuQXRvbSA9IGF0b20oXG4gICAgKGdldCkgPT4gZ2V0KGJhc2VBdG9tKSxcbiAgICAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gdHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlKGdldChiYXNlQXRvbSkpIDogdXBkYXRlO1xuICAgICAgaWYgKG5leHRWYWx1ZSA9PT0gUkVTRVQpIHtcbiAgICAgICAgc2V0KGJhc2VBdG9tLCBpbml0aWFsVmFsdWUpO1xuICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNQcm9taXNlTGlrZSQzKG5leHRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG5leHRWYWx1ZS50aGVuKChyZXNvbHZlZFZhbHVlKSA9PiB7XG4gICAgICAgICAgc2V0KGJhc2VBdG9tLCByZXNvbHZlZFZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gc3RvcmFnZS5zZXRJdGVtKGtleSwgcmVzb2x2ZWRWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgc2V0KGJhc2VBdG9tLCBuZXh0VmFsdWUpO1xuICAgICAgcmV0dXJuIHN0b3JhZ2Uuc2V0SXRlbShrZXksIG5leHRWYWx1ZSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5jb25zdCBpc1Byb21pc2VMaWtlJDIgPSAoeCkgPT4gdHlwZW9mICh4ID09IG51bGwgPyB2b2lkIDAgOiB4LnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG5mdW5jdGlvbiBhdG9tV2l0aE9ic2VydmFibGUoZ2V0T2JzZXJ2YWJsZSwgb3B0aW9ucykge1xuICBjb25zdCByZXR1cm5SZXN1bHREYXRhID0gKHJlc3VsdCkgPT4ge1xuICAgIGlmIChcImVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHRocm93IHJlc3VsdC5lO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LmQ7XG4gIH07XG4gIGNvbnN0IG9ic2VydmFibGVSZXN1bHRBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBvYnNlcnZhYmxlID0gZ2V0T2JzZXJ2YWJsZShnZXQpO1xuICAgIGNvbnN0IGl0c2VsZiA9IChfYSA9IG9ic2VydmFibGVbU3ltYm9sLm9ic2VydmFibGVdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChvYnNlcnZhYmxlKTtcbiAgICBpZiAoaXRzZWxmKSB7XG4gICAgICBvYnNlcnZhYmxlID0gaXRzZWxmO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBtYWtlUGVuZGluZyA9ICgpID0+IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICByZXNvbHZlID0gcjtcbiAgICB9KTtcbiAgICBjb25zdCBpbml0aWFsUmVzdWx0ID0gb3B0aW9ucyAmJiBcImluaXRpYWxWYWx1ZVwiIGluIG9wdGlvbnMgPyB7XG4gICAgICBkOiB0eXBlb2Ygb3B0aW9ucy5pbml0aWFsVmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IG9wdGlvbnMuaW5pdGlhbFZhbHVlKCkgOiBvcHRpb25zLmluaXRpYWxWYWx1ZVxuICAgIH0gOiBtYWtlUGVuZGluZygpO1xuICAgIGxldCBzZXRSZXN1bHQ7XG4gICAgbGV0IGxhc3RSZXN1bHQ7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAocmVzdWx0KSA9PiB7XG4gICAgICBsYXN0UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgcmVzb2x2ZSA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgc2V0UmVzdWx0ID09IG51bGwgPyB2b2lkIDAgOiBzZXRSZXN1bHQocmVzdWx0KTtcbiAgICB9O1xuICAgIGxldCBzdWJzY3JpcHRpb247XG4gICAgbGV0IHRpbWVyO1xuICAgIGNvbnN0IGlzTm90TW91bnRlZCA9ICgpID0+ICFzZXRSZXN1bHQ7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24gPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgICBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IChkKSA9PiBsaXN0ZW5lcih7IGQgfSksXG4gICAgICAgIGVycm9yOiAoZSkgPT4gbGlzdGVuZXIoeyBlIH0pLFxuICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChpc05vdE1vdW50ZWQoKSAmJiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy51bnN0YWJsZV90aW1lb3V0KSkge1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodW5zdWJzY3JpYmUsIG9wdGlvbnMudW5zdGFibGVfdGltZW91dCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBzdGFydCgpO1xuICAgIGNvbnN0IHJlc3VsdEF0b20gPSBhdG9tKGxhc3RSZXN1bHQgfHwgaW5pdGlhbFJlc3VsdCk7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICByZXN1bHRBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIHJlc3VsdEF0b20ub25Nb3VudCA9ICh1cGRhdGUpID0+IHtcbiAgICAgIHNldFJlc3VsdCA9IHVwZGF0ZTtcbiAgICAgIGlmIChsYXN0UmVzdWx0KSB7XG4gICAgICAgIHVwZGF0ZShsYXN0UmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBzZXRSZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVuc3RhYmxlX3RpbWVvdXQpIHtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodW5zdWJzY3JpYmUsIG9wdGlvbnMudW5zdGFibGVfdGltZW91dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBbcmVzdWx0QXRvbSwgb2JzZXJ2YWJsZSwgbWFrZVBlbmRpbmcsIHN0YXJ0LCBpc05vdE1vdW50ZWRdO1xuICB9KTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgb2JzZXJ2YWJsZVJlc3VsdEF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgfVxuICBjb25zdCBvYnNlcnZhYmxlQXRvbSA9IGF0b20oXG4gICAgKGdldCkgPT4ge1xuICAgICAgY29uc3QgW3Jlc3VsdEF0b21dID0gZ2V0KG9ic2VydmFibGVSZXN1bHRBdG9tKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldChyZXN1bHRBdG9tKTtcbiAgICAgIGlmIChpc1Byb21pc2VMaWtlJDIocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4ocmV0dXJuUmVzdWx0RGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuUmVzdWx0RGF0YShyZXN1bHQpO1xuICAgIH0sXG4gICAgKGdldCwgc2V0LCBkYXRhKSA9PiB7XG4gICAgICBjb25zdCBbcmVzdWx0QXRvbSwgb2JzZXJ2YWJsZSwgbWFrZVBlbmRpbmcsIHN0YXJ0LCBpc05vdE1vdW50ZWRdID0gZ2V0KG9ic2VydmFibGVSZXN1bHRBdG9tKTtcbiAgICAgIGlmIChcIm5leHRcIiBpbiBvYnNlcnZhYmxlKSB7XG4gICAgICAgIGlmIChpc05vdE1vdW50ZWQoKSkge1xuICAgICAgICAgIHNldChyZXN1bHRBdG9tLCBtYWtlUGVuZGluZygpKTtcbiAgICAgICAgICBzdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIG9ic2VydmFibGUubmV4dChkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9ic2VydmFibGUgaXMgbm90IHN1YmplY3RcIik7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZUF0b207XG59XG5cbmNvbnN0IGNhY2hlMSQxID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBtZW1vMSA9IChjcmVhdGUsIGRlcDEpID0+IChjYWNoZTEkMS5oYXMoZGVwMSkgPyBjYWNoZTEkMSA6IGNhY2hlMSQxLnNldChkZXAxLCBjcmVhdGUoKSkpLmdldChkZXAxKTtcbmNvbnN0IGlzUHJvbWlzZUxpa2UkMSA9IChwKSA9PiB0eXBlb2YgKHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAudGhlbikgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IExPQURJTkcgPSB7IHN0YXRlOiBcImxvYWRpbmdcIiB9O1xuZnVuY3Rpb24gbG9hZGFibGUoYW5BdG9tKSB7XG4gIHJldHVybiBtZW1vMSgoKSA9PiB7XG4gICAgY29uc3QgbG9hZGFibGVDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IHJlZnJlc2hBdG9tID0gYXRvbSgwKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRlcml2ZWRBdG9tID0gYXRvbShcbiAgICAgIChnZXQsIHsgc2V0U2VsZiB9KSA9PiB7XG4gICAgICAgIGdldChyZWZyZXNoQXRvbSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YWx1ZSA9IGdldChhbkF0b20pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBcImhhc0Vycm9yXCIsIGVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1Byb21pc2VMaWtlJDEodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwiaGFzRGF0YVwiLCBkYXRhOiB2YWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgY2FjaGVkMSA9IGxvYWRhYmxlQ2FjaGUuZ2V0KHByb21pc2UpO1xuICAgICAgICBpZiAoY2FjaGVkMSkge1xuICAgICAgICAgIHJldHVybiBjYWNoZWQxO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UudGhlbihcbiAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgeyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGEgfSk7XG4gICAgICAgICAgICBzZXRTZWxmKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGxvYWRhYmxlQ2FjaGUuc2V0KHByb21pc2UsIHsgc3RhdGU6IFwiaGFzRXJyb3JcIiwgZXJyb3IgfSk7XG4gICAgICAgICAgICBzZXRTZWxmKCk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYWNoZWQyID0gbG9hZGFibGVDYWNoZS5nZXQocHJvbWlzZSk7XG4gICAgICAgIGlmIChjYWNoZWQyKSB7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlZDI7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgTE9BRElORyk7XG4gICAgICAgIHJldHVybiBMT0FESU5HO1xuICAgICAgfSxcbiAgICAgIChfZ2V0LCBzZXQpID0+IHtcbiAgICAgICAgc2V0KHJlZnJlc2hBdG9tLCAoYykgPT4gYyArIDEpO1xuICAgICAgfVxuICAgICk7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBkZXJpdmVkQXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbSgoZ2V0KSA9PiBnZXQoZGVyaXZlZEF0b20pKTtcbiAgfSwgYW5BdG9tKTtcbn1cblxuY29uc3QgZ2V0Q2FjaGVkID0gKGMsIG0sIGspID0+IChtLmhhcyhrKSA/IG0gOiBtLnNldChrLCBjKCkpKS5nZXQoayk7XG5jb25zdCBjYWNoZTEgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1lbW8yID0gKGNyZWF0ZSwgZGVwMSwgZGVwMikgPT4ge1xuICBjb25zdCBjYWNoZTIgPSBnZXRDYWNoZWQoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNhY2hlMSwgZGVwMSk7XG4gIHJldHVybiBnZXRDYWNoZWQoY3JlYXRlLCBjYWNoZTIsIGRlcDIpO1xufTtcbmNvbnN0IGlzUHJvbWlzZUxpa2UgPSAocCkgPT4gdHlwZW9mIChwID09IG51bGwgPyB2b2lkIDAgOiBwLnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBkZWZhdWx0RmFsbGJhY2sgPSAoKSA9PiB2b2lkIDA7XG5mdW5jdGlvbiB1bndyYXAoYW5BdG9tLCBmYWxsYmFjayA9IGRlZmF1bHRGYWxsYmFjaykge1xuICByZXR1cm4gbWVtbzIoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZUVycm9yQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICAgIGNvbnN0IHByb21pc2VSZXN1bHRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgICAgY29uc3QgcmVmcmVzaEF0b20gPSBhdG9tKDApO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9taXNlQW5kVmFsdWVBdG9tID0gYXRvbShcbiAgICAgICAgKGdldCwgeyBzZXRTZWxmIH0pID0+IHtcbiAgICAgICAgICBnZXQocmVmcmVzaEF0b20pO1xuICAgICAgICAgIGNvbnN0IHByZXYgPSBnZXQocHJvbWlzZUFuZFZhbHVlQXRvbSk7XG4gICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGdldChhbkF0b20pO1xuICAgICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdjogcHJvbWlzZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvbWlzZSAhPT0gKHByZXYgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXYucCkpIHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihcbiAgICAgICAgICAgICAgKHYpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9taXNlUmVzdWx0Q2FjaGUuc2V0KHByb21pc2UsIHYpO1xuICAgICAgICAgICAgICAgIHNldFNlbGYoKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9taXNlRXJyb3JDYWNoZS5zZXQocHJvbWlzZSwgZSk7XG4gICAgICAgICAgICAgICAgc2V0U2VsZigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvbWlzZUVycm9yQ2FjaGUuaGFzKHByb21pc2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBwcm9taXNlRXJyb3JDYWNoZS5nZXQocHJvbWlzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0Q2FjaGUuaGFzKHByb21pc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBwOiBwcm9taXNlLFxuICAgICAgICAgICAgICB2OiBwcm9taXNlUmVzdWx0Q2FjaGUuZ2V0KHByb21pc2UpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJldiAmJiBcInZcIiBpbiBwcmV2KSB7XG4gICAgICAgICAgICByZXR1cm4geyBwOiBwcm9taXNlLCBmOiBmYWxsYmFjayhwcmV2LnYpLCB2OiBwcmV2LnYgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgcDogcHJvbWlzZSwgZjogZmFsbGJhY2soKSB9O1xuICAgICAgICB9LFxuICAgICAgICAoX2dldCwgc2V0KSA9PiB7XG4gICAgICAgICAgc2V0KHJlZnJlc2hBdG9tLCAoYykgPT4gYyArIDEpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcHJvbWlzZUFuZFZhbHVlQXRvbS5pbml0ID0gdm9pZCAwO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHByb21pc2VBbmRWYWx1ZUF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdG9tKFxuICAgICAgICAoZ2V0KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQocHJvbWlzZUFuZFZhbHVlQXRvbSk7XG4gICAgICAgICAgaWYgKFwiZlwiIGluIHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnY7XG4gICAgICAgIH0sXG4gICAgICAgIChfZ2V0LCBzZXQsIC4uLmFyZ3MpID0+IHNldChhbkF0b20sIC4uLmFyZ3MpXG4gICAgICApO1xuICAgIH0sXG4gICAgYW5BdG9tLFxuICAgIGZhbGxiYWNrXG4gICk7XG59XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVmcmVzaChyZWFkLCB3cml0ZSkge1xuICBjb25zdCByZWZyZXNoQXRvbSA9IGF0b20oMCk7XG4gIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIGF0b20oXG4gICAgKGdldCwgb3B0aW9ucykgPT4ge1xuICAgICAgZ2V0KHJlZnJlc2hBdG9tKTtcbiAgICAgIHJldHVybiByZWFkKGdldCwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICAoZ2V0LCBzZXQsIC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXQocmVmcmVzaEF0b20sIChjKSA9PiBjICsgMSk7XG4gICAgICB9IGVsc2UgaWYgKHdyaXRlKSB7XG4gICAgICAgIHJldHVybiB3cml0ZShnZXQsIHNldCwgLi4uYXJncyk7XG4gICAgICB9IGVsc2UgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlZnJlc2ggbXVzdCBiZSBjYWxsZWQgd2l0aG91dCBhcmd1bWVudHNcIik7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aExhenkobWFrZUluaXRpYWwpIHtcbiAgY29uc3QgYSA9IGF0b20odm9pZCAwKTtcbiAgZGVsZXRlIGEuaW5pdDtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIFwiaW5pdFwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIG1ha2VJbml0aWFsKCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbmV4cG9ydCB7IFJFU0VULCBhdG9tRmFtaWx5LCBhdG9tV2l0aERlZmF1bHQsIGF0b21XaXRoTGF6eSwgYXRvbVdpdGhPYnNlcnZhYmxlLCBhdG9tV2l0aFJlZHVjZXIsIGF0b21XaXRoUmVmcmVzaCwgYXRvbVdpdGhSZXNldCwgYXRvbVdpdGhTdG9yYWdlLCBjcmVhdGVKU09OU3RvcmFnZSwgZnJlZXplQXRvbSwgZnJlZXplQXRvbUNyZWF0b3IsIGxvYWRhYmxlLCBzZWxlY3RBdG9tLCBzcGxpdEF0b20sIHdpdGhTdG9yYWdlVmFsaWRhdG9yIGFzIHVuc3RhYmxlX3dpdGhTdG9yYWdlVmFsaWRhdG9yLCB1bndyYXAgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/jotai/esm/vanilla/utils.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Ccomponents%5C%5CClientProvider.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=false!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Ccomponents%5C%5CClientProvider.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=false! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/globals.css */ \"(app-pages-browser)/./app/globals.css\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./components/ClientProvider.tsx */ \"(app-pages-browser)/./components/ClientProvider.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q3ZhcGklNUMlNUNhcHAlNUMlNUNnbG9iYWxzLmNzcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDdmFwaSU1QyU1Q2NvbXBvbmVudHMlNUMlNUNDbGllbnRQcm92aWRlci50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlMjJkZWZhdWx0JTIyJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsNEpBQStEO0FBQy9EO0FBQ0Esd0xBQTBHIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFx2YXBpXFxcXGFwcFxcXFxnbG9iYWxzLmNzc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiZGVmYXVsdFwiXSAqLyBcIkM6XFxcXHZhcGlcXFxcY29tcG9uZW50c1xcXFxDbGllbnRQcm92aWRlci50c3hcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Ccomponents%5C%5CClientProvider.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (type, config, maybeKey, isStaticChildren) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsZ0RBQWdEO0FBQ2hFLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDLE9BQU87QUFDekU7QUFDQSxnR0FBZ0csU0FBUyxVQUFVLHNGQUFzRixhQUFhLFVBQVUsVUFBVTtBQUMxTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsc0dBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0JBQWdCO0FBQ3BCLElBQUksY0FBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUciLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGNvbXBpbGVkXFxyZWFjdFxcY2pzXFxyZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKSB7XG4gICAgICBpZiAobnVsbCA9PSB0eXBlKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICByZXR1cm4gdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgbnVsbDtcbiAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdHlwZSkgcmV0dXJuIHR5cGU7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkZyYWdtZW50XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJQcm9maWxlclwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3RyaWN0TW9kZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VMaXN0XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfQUNUSVZJVFlfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJBY3Rpdml0eVwiO1xuICAgICAgfVxuICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgIChcIm51bWJlclwiID09PSB0eXBlb2YgdHlwZS50YWcgJiZcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS5cIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB0eXBlLiQkdHlwZW9mKVxuICAgICAgICApIHtcbiAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIFwiUG9ydGFsXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuX2NvbnRleHQuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuQ29uc3VtZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHR5cGUgfHxcbiAgICAgICAgICAgICAgKCh0eXBlID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8IFwiXCIpLFxuICAgICAgICAgICAgICAodHlwZSA9IFwiXCIgIT09IHR5cGUgPyBcIkZvcndhcmRSZWYoXCIgKyB0eXBlICsgXCIpXCIgOiBcIkZvcndhcmRSZWZcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAoaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsKSxcbiAgICAgICAgICAgICAgbnVsbCAhPT0gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgPyBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA6IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8IFwiTWVtb1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgaW5uZXJUeXBlID0gdHlwZS5fcGF5bG9hZDtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLl9pbml0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKGlubmVyVHlwZSkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge31cbiAgICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHtcbiAgICAgIHJldHVybiBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8XG4gICAgICAgICAgKChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcylcIixcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lXG4gICAgICAgICAgKSk7XG4gICAgICB9XG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSAhMDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgXCJrZXlcIiwge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nKCkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTtcbiAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHxcbiAgICAgICAgKChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gITApLFxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIGVsZW1lbnQucmVmIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiByZWYgaXMgbm93IGEgcmVndWxhciBwcm9wLiBJdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgSlNYIEVsZW1lbnQgdHlwZSBpbiBhIGZ1dHVyZSByZWxlYXNlLlwiXG4gICAgICAgICkpO1xuICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmO1xuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29tcG9uZW50TmFtZSA/IGNvbXBvbmVudE5hbWUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCBwcm9wcywgb3duZXIsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykge1xuICAgICAgdmFyIHJlZlByb3AgPSBwcm9wcy5yZWY7XG4gICAgICB0eXBlID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICBfb3duZXI6IG93bmVyXG4gICAgICB9O1xuICAgICAgbnVsbCAhPT0gKHZvaWQgMCAhPT0gcmVmUHJvcCA/IHJlZlByb3AgOiBudWxsKVxuICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmdcbiAgICAgICAgICB9KVxuICAgICAgICA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogbnVsbCB9KTtcbiAgICAgIHR5cGUuX3N0b3JlID0ge307XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsIFwidmFsaWRhdGVkXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IDBcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnSW5mb1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1N0YWNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnU3RhY2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnVGFza1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1Rhc2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgZnVuY3Rpb24ganN4REVWSW1wbChcbiAgICAgIHR5cGUsXG4gICAgICBjb25maWcsXG4gICAgICBtYXliZUtleSxcbiAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBjb25maWcuY2hpbGRyZW47XG4gICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbilcbiAgICAgICAgaWYgKGlzU3RhdGljQ2hpbGRyZW4pXG4gICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9IDA7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4gPCBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4rK1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbltpc1N0YXRpY0NoaWxkcmVuXSk7XG4gICAgICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRyZW4pO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWFjdC5qc3g6IFN0YXRpYyBjaGlsZHJlbiBzaG91bGQgYWx3YXlzIGJlIGFuIGFycmF5LiBZb3UgYXJlIGxpa2VseSBleHBsaWNpdGx5IGNhbGxpbmcgUmVhY3QuanN4cyBvciBSZWFjdC5qc3hERVYuIFVzZSB0aGUgQmFiZWwgdHJhbnNmb3JtIGluc3RlYWQuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIGVsc2UgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW4pO1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcImtleVwiKSkge1xuICAgICAgICBjaGlsZHJlbiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBcImtleVwiICE9PSBrO1xuICAgICAgICB9KTtcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9XG4gICAgICAgICAgMCA8IGtleXMubGVuZ3RoXG4gICAgICAgICAgICA/IFwie2tleTogc29tZUtleSwgXCIgKyBrZXlzLmpvaW4oXCI6IC4uLiwgXCIpICsgXCI6IC4uLn1cIlxuICAgICAgICAgICAgOiBcIntrZXk6IHNvbWVLZXl9XCI7XG4gICAgICAgIGRpZFdhcm5BYm91dEtleVNwcmVhZFtjaGlsZHJlbiArIGlzU3RhdGljQ2hpbGRyZW5dIHx8XG4gICAgICAgICAgKChrZXlzID1cbiAgICAgICAgICAgIDAgPCBrZXlzLmxlbmd0aCA/IFwie1wiICsga2V5cy5qb2luKFwiOiAuLi4sIFwiKSArIFwiOiAuLi59XCIgOiBcInt9XCIpLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAnQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhIFwia2V5XCIgcHJvcCBpcyBiZWluZyBzcHJlYWQgaW50byBKU1g6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyB7Li4ucHJvcHN9IC8+XFxuUmVhY3Qga2V5cyBtdXN0IGJlIHBhc3NlZCBkaXJlY3RseSB0byBKU1ggd2l0aG91dCB1c2luZyBzcHJlYWQ6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyBrZXk9e3NvbWVLZXl9IHsuLi5wcm9wc30gLz4nLFxuICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAga2V5cyxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKSxcbiAgICAgICAgICAoZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gPSAhMCkpO1xuICAgICAgfVxuICAgICAgY2hpbGRyZW4gPSBudWxsO1xuICAgICAgdm9pZCAwICE9PSBtYXliZUtleSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihtYXliZUtleSksIChjaGlsZHJlbiA9IFwiXCIgKyBtYXliZUtleSkpO1xuICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKGNoaWxkcmVuID0gXCJcIiArIGNvbmZpZy5rZXkpKTtcbiAgICAgIGlmIChcImtleVwiIGluIGNvbmZpZykge1xuICAgICAgICBtYXliZUtleSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBjb25maWcpXG4gICAgICAgICAgXCJrZXlcIiAhPT0gcHJvcE5hbWUgJiYgKG1heWJlS2V5W3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgfSBlbHNlIG1heWJlS2V5ID0gY29uZmlnO1xuICAgICAgY2hpbGRyZW4gJiZcbiAgICAgICAgZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIoXG4gICAgICAgICAgbWF5YmVLZXksXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdHlwZVxuICAgICAgICAgICAgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgOiB0eXBlXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gUmVhY3RFbGVtZW50KFxuICAgICAgICB0eXBlLFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgbWF5YmVLZXksXG4gICAgICAgIGdldE93bmVyKCksXG4gICAgICAgIGRlYnVnU3RhY2ssXG4gICAgICAgIGRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSkge1xuICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIG5vZGUgJiZcbiAgICAgICAgbnVsbCAhPT0gbm9kZSAmJlxuICAgICAgICBub2RlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUgJiZcbiAgICAgICAgbm9kZS5fc3RvcmUgJiZcbiAgICAgICAgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgIH1cbiAgICB2YXIgUmVhY3QgPSByZXF1aXJlKFwibmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0XCIpLFxuICAgICAgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnRyYW5zaXRpb25hbC5lbGVtZW50XCIpLFxuICAgICAgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QucG9ydGFsXCIpLFxuICAgICAgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKSxcbiAgICAgIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3RyaWN0X21vZGVcIiksXG4gICAgICBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnByb2ZpbGVyXCIpLFxuICAgICAgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb25zdW1lclwiKSxcbiAgICAgIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb250ZXh0XCIpLFxuICAgICAgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKSxcbiAgICAgIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VfbGlzdFwiKSxcbiAgICAgIFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpLFxuICAgICAgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmxhenlcIiksXG4gICAgICBSRUFDVF9BQ1RJVklUWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmFjdGl2aXR5XCIpLFxuICAgICAgUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jbGllbnQucmVmZXJlbmNlXCIpLFxuICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPVxuICAgICAgICBSZWFjdC5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREUsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBjcmVhdGVUYXNrID0gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgID8gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICBSZWFjdCA9IHtcbiAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24gKGNhbGxTdGFja0ZvckVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsU3RhY2tGb3JFcnJvcigpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duO1xuICAgIHZhciBkaWRXYXJuQWJvdXRFbGVtZW50UmVmID0ge307XG4gICAgdmFyIHVua25vd25Pd25lckRlYnVnU3RhY2sgPSBSZWFjdC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZChcbiAgICAgIFJlYWN0LFxuICAgICAgVW5rbm93bk93bmVyXG4gICAgKSgpO1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1Rhc2sgPSBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKFVua25vd25Pd25lcikpO1xuICAgIHZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLmpzeERFViA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuKSB7XG4gICAgICB2YXIgdHJhY2tBY3R1YWxPd25lciA9XG4gICAgICAgIDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7XG4gICAgICByZXR1cm4ganN4REVWSW1wbChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBtYXliZUtleSxcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgdHJhY2tBY3R1YWxPd25lclxuICAgICAgICAgID8gRXJyb3IoXCJyZWFjdC1zdGFjay10b3AtZnJhbWVcIilcbiAgICAgICAgICA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHRyYWNrQWN0dWFsT3duZXIgPyBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKHR5cGUpKSA6IHVua25vd25Pd25lckRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9O1xuICB9KSgpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIkM6XFx2YXBpXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGNvbXBpbGVkXFxyZWFjdFxcanN4LWRldi1ydW50aW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["main-app"], () => (__webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5Cvapi%5C%5Ccomponents%5C%5CClientProvider.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=false!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);